(self.webpackChunk=self.webpackChunk||[]).push([[524],{44:(e,t,a)=>{const s=a(377),o=a(650),{lightningChart:n,SolidFill:l,ColorRGBA:r,AxisTickStrategies:i,AxisScrollStrategies:c,PointStyle3D:d,PalettedFill:u,LUT:h,emptyLine:y,AutoCursorModes:m,emptyFill:g,LegendBoxBuilders:x,Themes:p}=s,v=document.getElementById("chart")||document.body;v===document.body&&(v.style.width="100vw",v.style.height="100vh",v.style.margin="0px"),v.style.display="flex",v.style.flexDirection="row";const f=document.createElement("div");f.style.width="50%",f.style.height="100%",v.append(f);const S=document.createElement("div");S.style.width="50%",S.style.height="100%",v.append(S);const w=[{x:0,y:1.04,z:.42,value:120,name:"AF3",history:[]},{x:0,y:1.1,z:0,value:120,name:"AF4",history:[]},{x:.1,y:.8,z:-.56,value:120,name:"F5",history:[]},{x:.45,y:.7,z:-.2,value:120,name:"F6",history:[]},{x:.5,y:.7,z:.3,value:120,name:"FC5",history:[]},{x:.32,y:.8,z:.6,value:120,name:"FC6",history:[]},{x:-.1,y:.8,z:-.56,value:120,name:"T7",history:[]},{x:-.45,y:.7,z:-.2,value:120,name:"CP5",history:[]},{x:-.5,y:.7,z:.3,value:120,name:"CP6",history:[]},{x:-.32,y:.8,z:.6,value:120,name:"O2",history:[]}],M=n({resourcesBaseUrl:new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"resources/"}),b=new u({lookUpProperty:"value",lut:new h({interpolate:!0,steps:[{value:-500,color:r(255,0,255),label:""},{value:0,color:r(0,0,255),label:""},{value:500,color:r(0,150,255),label:""},{value:1e3,color:r(0,100,100),label:""},{value:1500,color:r(0,255,150),label:""},{value:2e3,color:r(0,255,0),label:""},{value:4e3,color:r(155,150,0),label:""},{value:9e3,color:r(255,0,0),label:""}]})}),A=M.Chart3D({container:S,theme:p[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("").setSeriesBackgroundFillStyle(g).setSeriesBackgroundStrokeStyle(y).setCursorMode(void 0),k=M.ChartXY({container:f}).setTitle("").setMouseInteractionRectangleFit(!1).setMouseInteractionRectangleZoom(!1),C=k.getDefaultAxisX().setScrollStrategy(c.progressive).setDefaultInterval((e=>({end:e.dataMax??0,start:(e.dataMax??0)-15e3,stopAxisAfter:!1}))).setTickStrategy(i.Time).setIntervalRestrictions((e=>({endMin:e.dataMax,endMax:e.dataMax})));k.onSeriesBackgroundMouseDoubleClick((()=>C.fit())),C.onStoppedStateChanged(((e,t)=>t&&C.setStopped(!1))),k.getDefaultAxisY().dispose();const I=w.map(((e,t)=>{const a=w.length-(t+1),s=k.addAxisY({iStack:a}).setTitle(e.name).setTitleRotation(0).setStrokeStyle(y).setInterval({start:-5e3,end:9500,stopAxisAfter:!1}).setScrollStrategy(c.expansion).setTickStrategy(i.Empty).setMouseInteractions(!1).setChartInteractions(!1);return{axisY:s,series:k.addPointLineAreaSeries({automaticColorIndex:t,dataPattern:"ProgressiveX",yAxis:s}).setName(e.name).setAreaFillStyle(g).setMaxSampleCount(1e5)}}));A.getDefaultAxes().forEach((e=>e.setMouseInteractions(!1).setInterval({start:-1,end:1}).setTickStrategy(i.Empty).setStrokeStyle(y))),A.setCameraAutomaticFittingEnabled(!1).setCameraLocation({x:.5,y:.4,z:1});const R=A.addPointSeries({individualLookupValuesEnabled:!0}).add(w).setPointStyle(new d.Triangulated({fillStyle:b,size:10,shape:"sphere"})),z=A.addMeshModel().setScale(.26).setModelLocation({x:0,y:0,z:0}).setModelAlignment({x:0,y:-1,z:.2}).setName("Brain"),F=A.addMeshModel().setName("Head").setScale(2).setFillStyle(new l({color:r(255,255,255,90)})).setBackfaceCullingMode("cull-back");function L(e){return fetch(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+e).then((t=>{if(!t.ok)throw new Error(`Failed to fetch ${e}`);return t.text()}))}Promise.all([L("examples/assets/1503/brain.obj"),L("examples/assets/1503/head.obj"),(async()=>{const e=await fetch(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/1503/CutData3.bin"),t=await e.blob(),a=await t.arrayBuffer(),s=new Int16Array(a),o=[];for(let e=0;e<s.length;e+=5e4){const t=s.slice(e,e+5e4);o.push(t)}return o})()]).then((e=>{const t=new o.Mesh(e[0]),a=new o.Mesh(e[1]),s=e[2];z.setModelGeometry({vertices:t.vertices,indices:t.indices,normals:t.vertexNormals}).setFillStyle(b),F.setModelGeometry({vertices:a.vertices,indices:a.indices,normals:a.vertexNormals}).setMouseInteractions(!1);const n=[];z.setVertexValues((e=>{const t=[];for(let a=0;a<e.length;a+=1){const s=A.translateCoordinate(e[a],A.coordsWorld,A.coordsAxis),o=new Array(w.length).fill(0);let l=0;w.forEach(((e,t)=>{const a=e.x-s.x,n=e.y-s.y,r=e.z-s.z,i=Math.sqrt(a**2+n**2+r**2),c=0!==i?1/i**3:1;o[t]=c,l+=c})),n.push({sumOfWeights:l,sensorWeights:o});const r=w.reduce(((e,t,a)=>e+t.value*o[a]),0)/l;t.push(r)}return t}));let l=window.performance.now(),r=0;const i=()=>{const e=window.performance.now(),t=Math.floor(1e3*(e-l)/1e3),a=Math.min(t-r,1e3);if(a>0){const e=[];for(let t=0;t<w.length;t++){const o=s[t],n=[];for(let e=0;e<a;e++){const t={x:1*(r+e),y:o[(r+e)%o.length]};n.push(t)}for(e[t]=n,w[t].history.push(...n.map((e=>e.y)));w[t].history.length>100;)w[t].history.shift();const l=w[t].history.reduce(((e,t)=>e+t),0)/w[t].history.length;w[t].value=l}I.forEach(((t,a)=>t.series.add(e[a]))),r+=a,R.clear().add(w);const t=[];z.setVertexValues((e=>{for(let a=0;a<e.length;a+=1){const{sumOfWeights:e,sensorWeights:s}=n[a],o=w.reduce(((e,t,a)=>e+t.value*s[a]),0)/e||20;t.push(o)}return t}))}requestAnimationFrame(i)};i(),A.addLegendBox(x.HorizontalLegendBox).add(z)}))}},e=>{e.O(0,[502],(()=>e(e.s=44))),e.O()}]);