/*! For license information please see vendor.f2ff1ca5338f73cd6ac5.bundle.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[502],{243:(t,e,i)=>{"use strict";i.r(e),i.d(e,{EventError:()=>o,Eventer:()=>u,TokenFactory:()=>a});var s=function(t,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},s(t,e)};function r(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,r,n=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return o}var o=function(t){function e(i){var s,r="EventError: "+i+"}";return s=t.call(this,r)||this,Object.setPrototypeOf(s,e.prototype),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(Error),a=function(t,e){return{token:t+"-"+e,ownerIndex:t,id:e}},h=0,l=function(t,e){return new o("Event listener with "+t.token+" id does not exist at Eventer with "+e+" id.")},u=function(){function t(){this.id=++h,this.lastEventIndex=0,this.topics=new Map}return t.prototype.on=function(t,e,i){var s=this.topics.get(t),r=i||a(this.id,this.lastEventIndex+=1);return s?s.set(r,e):this.topics.set(t,new Map([[r,e]])),r},t.prototype.has=function(t,e){var i,s;if(e)return(u=this.topics.get(e))?(c=u.get(t))||l(t,this.id):new o("Eventer with "+t.ownerIndex+" does not have "+e+".");try{for(var a=r(this.topics),h=a.next();!h.done;h=a.next()){var u,c,d=n(h.value,2);if(d[0],c=(u=d[1]).get(t))return c}}catch(t){i={error:t}}finally{try{h&&!h.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return l(t,this.id)},t.prototype.off=function(t,e){var i,s;if(e)return!(!(h=this.topics.get(e))||!h.delete(t));try{for(var o=r(this.topics),a=o.next();!a.done;a=o.next()){var h,l=n(a.value,2);if(l[0],(h=l[1]).delete(t))return!0}}catch(t){i={error:t}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return!1},t.prototype.allOff=function(){return this.topics.clear(),this},t.prototype.topicOff=function(t){return this.topics.delete(t)},t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.topics.get(t);if(s){var r=Array.from(s.values()).map((function(t){return t.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t}(e))}));return r}return[]},t.prototype.listeners=function(t){return this.topics.get(t)||new Map},t}()},570:t=>{"use strict";function e(t,e,s){s=s||2;var n,o,a,h,c,d,g,m=e&&e.length,y=m?e[0]*s:t.length,p=i(t,0,y,s,!0),x=[];if(!p||p.next===p.prev)return x;if(m&&(p=function(t,e,s,r){var n,o,a,h=[];for(n=0,o=e.length;n<o;n++)(a=i(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),h.push(f(a));for(h.sort(l),n=0;n<h.length;n++)s=u(h[n],s);return s}(t,e,p,s)),t.length>80*s){n=a=t[0],o=h=t[1];for(var A=s;A<y;A+=s)(c=t[A])<n&&(n=c),(d=t[A+1])<o&&(o=d),c>a&&(a=c),d>h&&(h=d);g=0!==(g=Math.max(a-n,h-o))?32767/g:0}return r(p,x,s,n,o,g,0),x}function i(t,e,i,s,r){var n,o;if(r===C(t,e,i,s)>0)for(n=e;n<i;n+=s)o=M(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=M(n,t[n],t[n+1],o);return o&&p(o,o.next)&&(T(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!p(s,s.next)&&0!==y(s.prev,s,s.next))s=s.next;else{if(T(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function r(t,e,i,l,u,c,f){if(t){!f&&c&&function(t,e,i,s){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,o,a,h,l=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,a=0,e=0;e<l&&(a++,s=s.nextZ);e++);for(h=l;a>0||h>0&&s;)0!==a&&(0===h||!s||i.z<=s.z)?(r=i,i=i.nextZ,a--):(r=s,s=s.nextZ,h--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,l*=2}while(o>1)}(r)}(t,l,u,c);for(var g,m,y=t;t.prev!==t.next;)if(g=t.prev,m=t.next,c?o(t,l,u,c):n(t))e.push(g.i/i|0),e.push(t.i/i|0),e.push(m.i/i|0),T(t),t=m.next,y=m.next;else if((t=m)===y){f?1===f?r(t=a(s(t),e,i),e,i,l,u,c,2):2===f&&h(t,e,i,l,u,c):r(s(t),e,i,l,u,c,1);break}}}function n(t){var e=t.prev,i=t,s=t.next;if(y(e,i,s)>=0)return!1;for(var r=e.x,n=i.x,o=s.x,a=e.y,h=i.y,l=s.y,u=r<n?r<o?r:o:n<o?n:o,c=a<h?a<l?a:l:h<l?h:l,d=r>n?r>o?r:o:n>o?n:o,f=a>h?a>l?a:l:h>l?h:l,m=s.next;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=c&&m.y<=f&&g(r,a,n,h,o,l,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function o(t,e,i,s){var r=t.prev,n=t,o=t.next;if(y(r,n,o)>=0)return!1;for(var a=r.x,h=n.x,l=o.x,u=r.y,c=n.y,f=o.y,m=a<h?a<l?a:l:h<l?h:l,p=u<c?u<f?u:f:c<f?c:f,x=a>h?a>l?a:l:h>l?h:l,A=u>c?u>f?u:f:c>f?c:f,S=d(m,p,e,i,s),v=d(x,A,e,i,s),b=t.prevZ,M=t.nextZ;b&&b.z>=S&&M&&M.z<=v;){if(b.x>=m&&b.x<=x&&b.y>=p&&b.y<=A&&b!==r&&b!==o&&g(a,u,h,c,l,f,b.x,b.y)&&y(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,M.x>=m&&M.x<=x&&M.y>=p&&M.y<=A&&M!==r&&M!==o&&g(a,u,h,c,l,f,M.x,M.y)&&y(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;b&&b.z>=S;){if(b.x>=m&&b.x<=x&&b.y>=p&&b.y<=A&&b!==r&&b!==o&&g(a,u,h,c,l,f,b.x,b.y)&&y(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;M&&M.z<=v;){if(M.x>=m&&M.x<=x&&M.y>=p&&M.y<=A&&M!==r&&M!==o&&g(a,u,h,c,l,f,M.x,M.y)&&y(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function a(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!p(n,o)&&x(n,r,r.next,o)&&v(n,o)&&v(o,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),T(r),T(r.next),r=t=o),r=r.next}while(r!==t);return s(r)}function h(t,e,i,n,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var u=b(h,l);return h=s(h,h.next),u=s(u,u.next),r(h,e,i,n,o,a,0),void r(u,e,i,n,o,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var i,s=e,r=t.x,n=t.y,o=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var a=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(a<=r&&a>o&&(o=a,i=s.x<s.next.x?s:s.next,a===r))return i}s=s.next}while(s!==e);if(!i)return null;var h,l=i,u=i.x,d=i.y,f=1/0;s=i;do{r>=s.x&&s.x>=u&&r!==s.x&&g(n<d?r:o,n,u,d,n<d?o:r,n,s.x,s.y)&&(h=Math.abs(n-s.y)/(r-s.x),v(s,t)&&(h<f||h===f&&(s.x>i.x||s.x===i.x&&c(i,s)))&&(i=s,f=h)),s=s.next}while(s!==l);return i}(t,e);if(!i)return e;var r=b(i,t);return s(r,r.next),s(i,i.next)}function c(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function d(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,s,r,n,o,a){return(r-o)*(e-a)>=(t-o)*(n-a)&&(t-o)*(s-a)>=(i-o)*(e-a)&&(i-o)*(n-a)>=(r-o)*(s-a)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(v(t,e)&&v(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||p(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function p(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,s){var r=S(y(t,e,i)),n=S(y(t,e,s)),o=S(y(i,s,t)),a=S(y(i,s,e));return r!==n&&o!==a||!(0!==r||!A(t,i,e))||!(0!==n||!A(t,s,e))||!(0!==o||!A(i,t,s))||!(0!==a||!A(i,e,s))}function A(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function S(t){return t>0?1:t<0?-1:0}function v(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function b(t,e){var i=new w(t.i,t.x,t.y),s=new w(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function M(t,e,i,s){var r=new w(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,i,s){for(var r=0,n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,o=Math.abs(C(t,0,n,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(C(t,l,u,i))}var c=0;for(a=0;a<s.length;a+=3){var d=s[a]*i,f=s[a+1]*i,g=s[a+2]*i;c+=Math.abs((t[d]-t[g])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[g+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var o=0;o<e;o++)i.vertices.push(t[r][n][o]);r>0&&(s+=t[r-1].length,i.holes.push(s))}return i}},568:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Collection:()=>T,Iterable:()=>Ms,List:()=>ri,Map:()=>Be,OrderedMap:()=>xi,OrderedSet:()=>ns,PairSorting:()=>us,Range:()=>Yi,Record:()=>cs,Repeat:()=>xs,Seq:()=>X,Set:()=>Pi,Stack:()=>Ti,default:()=>Ts,fromJS:()=>As,get:()=>re,getIn:()=>Gi,has:()=>se,hasIn:()=>Wi,hash:()=>ft,is:()=>lt,isAssociative:()=>M,isCollection:()=>x,isImmutable:()=>F,isIndexed:()=>b,isKeyed:()=>S,isList:()=>si,isMap:()=>ot,isOrdered:()=>B,isOrderedMap:()=>at,isOrderedSet:()=>_i,isPlainObject:()=>te,isRecord:()=>_,isSeq:()=>R,isSet:()=>Ii,isStack:()=>Mi,isValueObject:()=>ht,merge:()=>Se,mergeDeep:()=>be,mergeDeepWith:()=>Me,mergeWith:()=>ve,remove:()=>oe,removeIn:()=>de,set:()=>ae,setIn:()=>ue,update:()=>ge,updateIn:()=>he,version:()=>bs});var s="delete",r=32,n=31,o={};function a(t){t&&(t.value=!0)}function h(){}function l(t){return void 0===t.size&&(t.size=t.__iterate(c)),t.size}function u(t,e){if("number"!=typeof e){var i=e>>>0;if(""+i!==e||4294967295===i)return NaN;e=i}return e<0?l(t)+e:e}function c(){return!0}function d(t,e,i){return(0===t&&!y(t)||void 0!==i&&t<=-i)&&(void 0===e||void 0!==i&&e>=i)}function f(t,e){return m(t,e,0)}function g(t,e){return m(t,e,e)}function m(t,e,i){return void 0===t?i:y(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function y(t){return t<0||0===t&&1/t==-1/0}var p="@@__IMMUTABLE_ITERABLE__@@";function x(t){return Boolean(t&&t[p])}var A="@@__IMMUTABLE_KEYED__@@";function S(t){return Boolean(t&&t[A])}var v="@@__IMMUTABLE_INDEXED__@@";function b(t){return Boolean(t&&t[v])}function M(t){return S(t)||b(t)}var T=function(t){return x(t)?t:X(t)},w=function(t){function e(t){return S(t)?t:j(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(T),C=function(t){function e(t){return b(t)?t:$(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(T),k=function(t){function e(t){return x(t)&&!M(t)?t:Z(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(T);T.Keyed=w,T.Indexed=C,T.Set=k;var E="@@__IMMUTABLE_SEQ__@@";function R(t){return Boolean(t&&t[E])}var I="@@__IMMUTABLE_RECORD__@@";function _(t){return Boolean(t&&t[I])}function F(t){return x(t)||_(t)}var D="@@__IMMUTABLE_ORDERED__@@";function B(t){return Boolean(t&&t[D])}var P="function"==typeof Symbol&&Symbol.iterator,L="@@iterator",V=P||L,z=function(t){this.next=t};function N(t,e,i,s){var r=0===t?e:1===t?i:[e,i];return s?s.value=r:s={value:r,done:!1},s}function O(){return{value:void 0,done:!0}}function U(t){return!!Array.isArray(t)||!!H(t)}function Y(t){return t&&"function"==typeof t.next}function G(t){var e=H(t);return e&&e.call(t)}function H(t){var e=t&&(P&&t[P]||t[L]);if("function"==typeof e)return e}z.prototype.toString=function(){return"[Iterator]"},z.KEYS=0,z.VALUES=1,z.ENTRIES=2,z.prototype.inspect=z.prototype.toSource=function(){return this.toString()},z.prototype[V]=function(){return this};var W=Object.prototype.hasOwnProperty;function K(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var X=function(t){function e(t){return null==t?et():F(t)?t.toSeq():function(t){var e,i,s=rt(t);if(s)return(i=H(e=t))&&i===e.entries?s.fromEntrySeq():function(t){var e=H(t);return e&&e===t.keys}(t)?s.toSetSeq():s;if("object"==typeof t)return new q(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var i=this._cache;if(i){for(var s=i.length,r=0;r!==s;){var n=i[e?s-++r:r++];if(!1===t(n[1],n[0],this))break}return r}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var i=this._cache;if(i){var s=i.length,r=0;return new z((function(){if(r===s)return{value:void 0,done:!0};var n=i[e?s-++r:r++];return N(t,n[0],n[1])}))}return this.__iteratorUncached(t,e)},e}(T),j=function(t){function e(t){return null==t?et().toKeyedSeq():x(t)?S(t)?t.toSeq():t.fromEntrySeq():_(t)?t.toSeq():it(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(X),$=function(t){function e(t){return null==t?et():x(t)?S(t)?t.entrySeq():t.toIndexedSeq():_(t)?t.toSeq().entrySeq():st(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(X),Z=function(t){function e(t){return(x(t)&&!M(t)?t:$(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(X);X.isSeq=R,X.Keyed=j,X.Set=Z,X.Indexed=$,X.prototype[E]=!0;var Q=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[u(this,t)]:e},e.prototype.__iterate=function(t,e){for(var i=this._array,s=i.length,r=0;r!==s;){var n=e?s-++r:r++;if(!1===t(i[n],n,this))break}return r},e.prototype.__iterator=function(t,e){var i=this._array,s=i.length,r=0;return new z((function(){if(r===s)return{value:void 0,done:!0};var n=e?s-++r:r++;return N(t,n,i[n])}))},e}($),q=function(t){function e(t){var e=Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return W.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var i=this._object,s=this._keys,r=s.length,n=0;n!==r;){var o=s[e?r-++n:n++];if(!1===t(i[o],o,this))break}return n},e.prototype.__iterator=function(t,e){var i=this._object,s=this._keys,r=s.length,n=0;return new z((function(){if(n===r)return{value:void 0,done:!0};var o=s[e?r-++n:n++];return N(t,o,i[o])}))},e}(j);q.prototype[D]=!0;var J,tt=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var i=G(this._collection),s=0;if(Y(i))for(var r;!(r=i.next()).done&&!1!==t(r.value,s++,this););return s},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var i=G(this._collection);if(!Y(i))return new z(O);var s=0;return new z((function(){var e=i.next();return e.done?e:N(t,s++,e.value)}))},e}($);function et(){return J||(J=new Q([]))}function it(t){var e=rt(t);if(e)return e.fromEntrySeq();if("object"==typeof t)return new q(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function st(t){var e=rt(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function rt(t){return K(t)?new Q(t):U(t)?new tt(t):void 0}var nt="@@__IMMUTABLE_MAP__@@";function ot(t){return Boolean(t&&t[nt])}function at(t){return ot(t)&&B(t)}function ht(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function lt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(ht(t)&&ht(e)&&t.equals(e))}var ut="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var i=65535&(t|=0),s=65535&(e|=0);return i*s+((t>>>16)*s+i*(e>>>16)<<16>>>0)|0};function ct(t){return t>>>1&1073741824|3221225471&t}var dt=Object.prototype.valueOf;function ft(t){if(null==t)return gt(t);if("function"==typeof t.hashCode)return ct(t.hashCode(t));var e,i,s,r=(e=t).valueOf!==dt&&"function"==typeof e.valueOf?e.valueOf(e):e;if(null==r)return gt(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return ct(e)}(r);case"string":return r.length>Tt?(void 0===(s=kt[i=r])&&(s=mt(i),Ct===wt&&(Ct=0,kt={}),Ct++,kt[i]=s),s):mt(r);case"object":case"function":return function(t){var e;if(St&&void 0!==(e=At.get(t)))return e;if(void 0!==(e=t[Mt]))return e;if(!pt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Mt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=xt(),St)At.set(t,e);else{if(void 0!==yt&&!1===yt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(pt)Object.defineProperty(t,Mt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Mt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Mt]=e}}return e}(r);case"symbol":return function(t){var e=vt[t];return void 0!==e||(e=xt(),vt[t]=e),e}(r);default:if("function"==typeof r.toString)return mt(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function gt(t){return null===t?1108378658:1108378659}function mt(t){for(var e=0,i=0;i<t.length;i++)e=31*e+t.charCodeAt(i)|0;return ct(e)}var yt=Object.isExtensible,pt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function xt(){var t=++bt;return 1073741824&bt&&(bt=0),t}var At,St="function"==typeof WeakMap;St&&(At=new WeakMap);var vt=Object.create(null),bt=0,Mt="__immutablehash__";"function"==typeof Symbol&&(Mt=Symbol(Mt));var Tt=16,wt=255,Ct=0,kt={},Et=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Bt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var i=this,s=Dt(this,t,e);return this._useKeys||(s.valueSeq=function(){return i._iter.toSeq().map(t,e)}),s},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate((function(e,s){return t(e,s,i)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(j);Et.prototype[D]=!0;var Rt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var i=this,s=0;return e&&l(this),this._iter.__iterate((function(r){return t(r,e?i.size-++s:s++,i)}),e)},e.prototype.__iterator=function(t,e){var i=this,s=this._iter.__iterator(1,e),r=0;return e&&l(this),new z((function(){var n=s.next();return n.done?n:N(t,e?i.size-++r:r++,n.value,n)}))},e}($),It=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate((function(e){return t(e,e,i)}),e)},e.prototype.__iterator=function(t,e){var i=this._iter.__iterator(1,e);return new z((function(){var e=i.next();return e.done?e:N(t,e.value,e.value,e)}))},e}(Z),_t=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate((function(e){if(e){Ht(e);var s=x(e);return t(s?e.get(1):e[1],s?e.get(0):e[0],i)}}),e)},e.prototype.__iterator=function(t,e){var i=this._iter.__iterator(1,e);return new z((function(){for(;;){var e=i.next();if(e.done)return e;var s=e.value;if(s){Ht(s);var r=x(s);return N(t,r?s.get(0):s[0],r?s.get(1):s[1],e)}}}))},e}(j);function Ft(t){var e=Kt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Xt,e.__iterateUncached=function(e,i){var s=this;return t.__iterate((function(t,i){return!1!==e(i,t,s)}),i)},e.__iteratorUncached=function(e,i){if(2===e){var s=t.__iterator(e,i);return new z((function(){var t=s.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,i)},e}function Dt(t,e,i){var s=Kt(t);return s.size=t.size,s.has=function(e){return t.has(e)},s.get=function(s,r){var n=t.get(s,o);return n===o?r:e.call(i,n,s,t)},s.__iterateUncached=function(s,r){var n=this;return t.__iterate((function(t,r,o){return!1!==s(e.call(i,t,r,o),r,n)}),r)},s.__iteratorUncached=function(s,r){var n=t.__iterator(2,r);return new z((function(){var r=n.next();if(r.done)return r;var o=r.value,a=o[0];return N(s,a,e.call(i,o[1],a,t),r)}))},s}function Bt(t,e){var i=this,s=Kt(t);return s._iter=t,s.size=t.size,s.reverse=function(){return t},t.flip&&(s.flip=function(){var e=Ft(t);return e.reverse=function(){return t.flip()},e}),s.get=function(i,s){return t.get(e?i:-1-i,s)},s.has=function(i){return t.has(e?i:-1-i)},s.includes=function(e){return t.includes(e)},s.cacheResult=Xt,s.__iterate=function(i,s){var r=this,n=0;return s&&l(t),t.__iterate((function(t,o){return i(t,e?o:s?r.size-++n:n++,r)}),!s)},s.__iterator=function(s,r){var n=0;r&&l(t);var o=t.__iterator(2,!r);return new z((function(){var t=o.next();if(t.done)return t;var a=t.value;return N(s,e?a[0]:r?i.size-++n:n++,a[1],t)}))},s}function Pt(t,e,i,s){var r=Kt(t);return s&&(r.has=function(s){var r=t.get(s,o);return r!==o&&!!e.call(i,r,s,t)},r.get=function(s,r){var n=t.get(s,o);return n!==o&&e.call(i,n,s,t)?n:r}),r.__iterateUncached=function(r,n){var o=this,a=0;return t.__iterate((function(t,n,h){if(e.call(i,t,n,h))return a++,r(t,s?n:a-1,o)}),n),a},r.__iteratorUncached=function(r,n){var o=t.__iterator(2,n),a=0;return new z((function(){for(;;){var n=o.next();if(n.done)return n;var h=n.value,l=h[0],u=h[1];if(e.call(i,u,l,t))return N(r,s?l:a++,u,n)}}))},r}function Lt(t,e,i,s){var r=t.size;if(d(e,i,r))return t;if(void 0===r&&(e<0||i<0))return Lt(t.toSeq().cacheResult(),e,i,s);var n,o=f(e,r),a=g(i,r)-o;a==a&&(n=a<0?0:a);var h=Kt(t);return h.size=0===n?n:t.size&&n||void 0,!s&&R(t)&&n>=0&&(h.get=function(e,i){return(e=u(this,e))>=0&&e<n?t.get(e+o,i):i}),h.__iterateUncached=function(e,i){var r=this;if(0===n)return 0;if(i)return this.cacheResult().__iterate(e,i);var a=0,h=!0,l=0;return t.__iterate((function(t,i){if(!h||!(h=a++<o))return l++,!1!==e(t,s?i:l-1,r)&&l!==n})),l},h.__iteratorUncached=function(e,i){if(0!==n&&i)return this.cacheResult().__iterator(e,i);if(0===n)return new z(O);var r=t.__iterator(e,i),a=0,h=0;return new z((function(){for(;a++<o;)r.next();if(++h>n)return{value:void 0,done:!0};var t=r.next();return s||1===e||t.done?t:N(e,h-1,0===e?void 0:t.value[1],t)}))},h}function Vt(t,e,i,s){var r=Kt(t);return r.__iterateUncached=function(r,n){var o=this;if(n)return this.cacheResult().__iterate(r,n);var a=!0,h=0;return t.__iterate((function(t,n,l){if(!a||!(a=e.call(i,t,n,l)))return h++,r(t,s?n:h-1,o)})),h},r.__iteratorUncached=function(r,n){var o=this;if(n)return this.cacheResult().__iterator(r,n);var a=t.__iterator(2,n),h=!0,l=0;return new z((function(){var t,n,u;do{if((t=a.next()).done)return s||1===r?t:N(r,l++,0===r?void 0:t.value[1],t);var c=t.value;n=c[0],u=c[1],h&&(h=e.call(i,u,n,o))}while(h);return 2===r?t:N(r,n,u,t)}))},r}function zt(t,e,i){var s=Kt(t);return s.__iterateUncached=function(r,n){if(n)return this.cacheResult().__iterate(r,n);var o=0,a=!1;return function t(h,l){h.__iterate((function(n,h){return(!e||l<e)&&x(n)?t(n,l+1):(o++,!1===r(n,i?h:o-1,s)&&(a=!0)),!a}),n)}(t,0),o},s.__iteratorUncached=function(s,r){if(r)return this.cacheResult().__iterator(s,r);var n=t.__iterator(s,r),o=[],a=0;return new z((function(){for(;n;){var t=n.next();if(!1===t.done){var h=t.value;if(2===s&&(h=h[1]),e&&!(o.length<e)||!x(h))return i?t:N(s,a++,h,t);o.push(n),n=h.__iterator(s,r)}else n=o.pop()}return{value:void 0,done:!0}}))},s}function Nt(t,e,i){e||(e=jt);var s=S(t),r=0,n=t.toSeq().map((function(e,s){return[s,e,r++,i?i(e,s,t):e]})).valueSeq().toArray();return n.sort((function(t,i){return e(t[3],i[3])||t[2]-i[2]})).forEach(s?function(t,e){n[e].length=2}:function(t,e){n[e]=t[1]}),s?j(n):b(t)?$(n):Z(n)}function Ot(t,e,i){if(e||(e=jt),i){var s=t.toSeq().map((function(e,s){return[e,i(e,s,t)]})).reduce((function(t,i){return Ut(e,t[1],i[1])?i:t}));return s&&s[0]}return t.reduce((function(t,i){return Ut(e,t,i)?i:t}))}function Ut(t,e,i){var s=t(i,e);return 0===s&&i!==e&&(null==i||i!=i)||s>0}function Yt(t,e,i,s){var r=Kt(t),n=new Q(i).map((function(t){return t.size}));return r.size=s?n.max():n.min(),r.__iterate=function(t,e){for(var i,s=this.__iterator(1,e),r=0;!(i=s.next()).done&&!1!==t(i.value,r++,this););return r},r.__iteratorUncached=function(t,r){var n=i.map((function(t){return t=T(t),G(r?t.reverse():t)})),o=0,a=!1;return new z((function(){var i;return a||(i=n.map((function(t){return t.next()})),a=s?i.every((function(t){return t.done})):i.some((function(t){return t.done}))),a?{value:void 0,done:!0}:N(t,o++,e.apply(null,i.map((function(t){return t.value}))))}))},r}function Gt(t,e){return t===e?t:R(t)?e:t.constructor(e)}function Ht(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Wt(t){return S(t)?w:b(t)?C:k}function Kt(t){return Object.create((S(t)?j:b(t)?$:Z).prototype)}function Xt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):X.prototype.cacheResult.call(this)}function jt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function $t(t,e){e=e||0;for(var i=Math.max(0,t.length-e),s=new Array(i),r=0;r<i;r++)s[r]=t[r+e];return s}function Zt(t,e){if(!t)throw new Error(e)}function Qt(t){Zt(t!==1/0,"Cannot perform this action with an infinite size.")}function qt(t){if(K(t)&&"string"!=typeof t)return t;if(B(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}Rt.prototype.cacheResult=Et.prototype.cacheResult=It.prototype.cacheResult=_t.prototype.cacheResult=Xt;var Jt=Object.prototype.toString;function te(t){if(!t||"object"!=typeof t||"[object Object]"!==Jt.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var i=e,s=Object.getPrototypeOf(e);null!==s;)i=s,s=Object.getPrototypeOf(i);return i===e}function ee(t){return"object"==typeof t&&(F(t)||Array.isArray(t)||te(t))}function ie(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function se(t,e){return F(t)?t.has(e):ee(t)&&W.call(t,e)}function re(t,e,i){return F(t)?t.get(e,i):se(t,e)?"function"==typeof t.get?t.get(e):t[e]:i}function ne(t){if(Array.isArray(t))return $t(t);var e={};for(var i in t)W.call(t,i)&&(e[i]=t[i]);return e}function oe(t,e){if(!ee(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(F(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!W.call(t,e))return t;var i=ne(t);return Array.isArray(i)?i.splice(e,1):delete i[e],i}function ae(t,e,i){if(!ee(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(F(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,i)}if(W.call(t,e)&&i===t[e])return t;var s=ne(t);return s[e]=i,s}function he(t,e,i,s){s||(s=i,i=void 0);var r=le(F(t),t,qt(e),0,i,s);return r===o?i:r}function le(t,e,i,s,r,n){var a=e===o;if(s===i.length){var h=a?r:e,l=n(h);return l===h?e:l}if(!a&&!ee(e))throw new TypeError("Cannot update within non-data-structure value in path ["+i.slice(0,s).map(ie)+"]: "+e);var u=i[s],c=a?o:re(e,u,o),d=le(c===o?t:F(c),c,i,s+1,r,n);return d===c?e:d===o?oe(e,u):ae(a?t?Ke():{}:e,u,d)}function ue(t,e,i){return he(t,e,o,(function(){return i}))}function ce(t,e){return ue(this,t,e)}function de(t,e){return he(t,e,(function(){return o}))}function fe(t){return de(this,t)}function ge(t,e,i,s){return he(t,[e],i,s)}function me(t,e,i){return 1===arguments.length?t(this):ge(this,t,e,i)}function ye(t,e,i){return he(this,t,e,i)}function pe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ae(this,t)}function xe(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Ae(this,e,t)}function Ae(t,e,i){for(var s=[],r=0;r<e.length;r++){var n=w(e[r]);0!==n.size&&s.push(n)}return 0===s.length?t:0!==t.toSeq().size||t.__ownerID||1!==s.length?t.withMutations((function(t){for(var e=i?function(e,s){ge(t,s,o,(function(t){return t===o?e:i(t,e,s)}))}:function(e,i){t.set(i,e)},r=0;r<s.length;r++)s[r].forEach(e)})):t.constructor(s[0])}function Se(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return we(t,e)}function ve(t,e){for(var i=[],s=arguments.length-2;s-- >0;)i[s]=arguments[s+2];return we(e,i,t)}function be(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Te(t,e)}function Me(t,e){for(var i=[],s=arguments.length-2;s-- >0;)i[s]=arguments[s+2];return Te(e,i,t)}function Te(t,e,i){return we(t,e,function(t){return function e(i,s,r){return ee(i)&&ee(s)&&(n=s,o=X(i),a=X(n),b(o)===b(a)&&S(o)===S(a))?we(i,[s],e):t?t(i,s,r):s;var n,o,a}}(i))}function we(t,e,i){if(!ee(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(F(t))return"function"==typeof i&&t.mergeWith?t.mergeWith.apply(t,[i].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var s=Array.isArray(t),r=t,n=s?C:w,o=s?function(e){r===t&&(r=ne(r)),r.push(e)}:function(e,s){var n=W.call(r,s),o=n&&i?i(r[s],e,s):e;n&&o===r[s]||(r===t&&(r=ne(r)),r[s]=o)},a=0;a<e.length;a++)n(e[a]).forEach(o);return r}function Ce(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Te(this,t)}function ke(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Te(this,e,t)}function Ee(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return he(this,t,Ke(),(function(t){return we(t,e)}))}function Re(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return he(this,t,Ke(),(function(t){return Te(t,e)}))}function Ie(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function _e(){return this.__ownerID?this:this.__ensureOwner(new h)}function Fe(){return this.__ensureOwner()}function De(){return this.__altered}var Be=function(t){function e(e){return null==e?Ke():ot(e)&&!B(e)?e:Ke().withMutations((function(i){var s=t(e);Qt(s.size),s.forEach((function(t,e){return i.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ke().withMutations((function(e){for(var i=0;i<t.length;i+=2){if(i+1>=t.length)throw new Error("Missing value for key: "+t[i]);e.set(t[i],t[i+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return Xe(this,t,e)},e.prototype.remove=function(t){return Xe(this,t,o)},e.prototype.deleteAll=function(t){var e=T(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ke()},e.prototype.sort=function(t){return xi(Nt(this,t))},e.prototype.sortBy=function(t,e){return xi(Nt(this,e,t))},e.prototype.map=function(t,e){var i=this;return this.withMutations((function(s){s.forEach((function(r,n){s.set(n,t.call(e,r,n,i))}))}))},e.prototype.__iterator=function(t,e){return new Ye(this,t,e)},e.prototype.__iterate=function(t,e){var i=this,s=0;return this._root&&this._root.iterate((function(e){return s++,t(e[1],e[0],i)}),e),s},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?We(this.size,this._root,t,this.__hash):0===this.size?Ke():(this.__ownerID=t,this.__altered=!1,this)},e}(w);Be.isMap=ot;var Pe=Be.prototype;Pe[nt]=!0,Pe[s]=Pe.remove,Pe.removeAll=Pe.deleteAll,Pe.setIn=ce,Pe.removeIn=Pe.deleteIn=fe,Pe.update=me,Pe.updateIn=ye,Pe.merge=Pe.concat=pe,Pe.mergeWith=xe,Pe.mergeDeep=Ce,Pe.mergeDeepWith=ke,Pe.mergeIn=Ee,Pe.mergeDeepIn=Re,Pe.withMutations=Ie,Pe.wasAltered=De,Pe.asImmutable=Fe,Pe["@@transducer/init"]=Pe.asMutable=_e,Pe["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Pe["@@transducer/result"]=function(t){return t.asImmutable()};var Le=function(t,e){this.ownerID=t,this.entries=e};Le.prototype.get=function(t,e,i,s){for(var r=this.entries,n=0,o=r.length;n<o;n++)if(lt(i,r[n][0]))return r[n][1];return s},Le.prototype.update=function(t,e,i,s,r,n,l){for(var u=r===o,c=this.entries,d=0,f=c.length;d<f&&!lt(s,c[d][0]);d++);var g=d<f;if(g?c[d][1]===r:u)return this;if(a(l),(u||!g)&&a(n),!u||1!==c.length){if(!g&&!u&&c.length>=Je)return function(t,e,i,s){t||(t=new h);for(var r=new Oe(t,ft(i),[i,s]),n=0;n<e.length;n++){var o=e[n];r=r.update(t,0,void 0,o[0],o[1])}return r}(t,c,s,r);var m=t&&t===this.ownerID,y=m?c:$t(c);return g?u?d===f-1?y.pop():y[d]=y.pop():y[d]=[s,r]:y.push([s,r]),m?(this.entries=y,this):new Le(t,y)}};var Ve=function(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i};Ve.prototype.get=function(t,e,i,s){void 0===e&&(e=ft(i));var r=1<<((0===t?e:e>>>t)&n),o=this.bitmap;return o&r?this.nodes[Qe(o&r-1)].get(t+5,e,i,s):s},Ve.prototype.update=function(t,e,i,s,a,h,l){void 0===i&&(i=ft(s));var u=(0===e?i:i>>>e)&n,c=1<<u,d=this.bitmap,f=!!(d&c);if(!f&&a===o)return this;var g=Qe(d&c-1),m=this.nodes,y=f?m[g]:void 0,p=je(y,t,e+5,i,s,a,h,l);if(p===y)return this;if(!f&&p&&m.length>=ti)return function(t,e,i,s,n){for(var o=0,a=new Array(r),h=0;0!==i;h++,i>>>=1)a[h]=1&i?e[o++]:void 0;return a[s]=n,new ze(t,o+1,a)}(t,m,d,u,p);if(f&&!p&&2===m.length&&$e(m[1^g]))return m[1^g];if(f&&p&&1===m.length&&$e(p))return p;var x=t&&t===this.ownerID,A=f?p?d:d^c:d|c,S=f?p?qe(m,g,p,x):function(t,e,i){var s=t.length-1;if(i&&e===s)return t.pop(),t;for(var r=new Array(s),n=0,o=0;o<s;o++)o===e&&(n=1),r[o]=t[o+n];return r}(m,g,x):function(t,e,i,s){var r=t.length+1;if(s&&e+1===r)return t[e]=i,t;for(var n=new Array(r),o=0,a=0;a<r;a++)a===e?(n[a]=i,o=-1):n[a]=t[a+o];return n}(m,g,p,x);return x?(this.bitmap=A,this.nodes=S,this):new Ve(t,A,S)};var ze=function(t,e,i){this.ownerID=t,this.count=e,this.nodes=i};ze.prototype.get=function(t,e,i,s){void 0===e&&(e=ft(i));var r=(0===t?e:e>>>t)&n,o=this.nodes[r];return o?o.get(t+5,e,i,s):s},ze.prototype.update=function(t,e,i,s,r,a,h){void 0===i&&(i=ft(s));var l=(0===e?i:i>>>e)&n,u=r===o,c=this.nodes,d=c[l];if(u&&!d)return this;var f=je(d,t,e+5,i,s,r,a,h);if(f===d)return this;var g=this.count;if(d){if(!f&&--g<ei)return function(t,e,i,s){for(var r=0,n=0,o=new Array(i),a=0,h=1,l=e.length;a<l;a++,h<<=1){var u=e[a];void 0!==u&&a!==s&&(r|=h,o[n++]=u)}return new Ve(t,r,o)}(t,c,g,l)}else g++;var m=t&&t===this.ownerID,y=qe(c,l,f,m);return m?(this.count=g,this.nodes=y,this):new ze(t,g,y)};var Ne=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i};Ne.prototype.get=function(t,e,i,s){for(var r=this.entries,n=0,o=r.length;n<o;n++)if(lt(i,r[n][0]))return r[n][1];return s},Ne.prototype.update=function(t,e,i,s,r,n,h){void 0===i&&(i=ft(s));var l=r===o;if(i!==this.keyHash)return l?this:(a(h),a(n),Ze(this,t,e,i,[s,r]));for(var u=this.entries,c=0,d=u.length;c<d&&!lt(s,u[c][0]);c++);var f=c<d;if(f?u[c][1]===r:l)return this;if(a(h),(l||!f)&&a(n),l&&2===d)return new Oe(t,this.keyHash,u[1^c]);var g=t&&t===this.ownerID,m=g?u:$t(u);return f?l?c===d-1?m.pop():m[c]=m.pop():m[c]=[s,r]:m.push([s,r]),g?(this.entries=m,this):new Ne(t,this.keyHash,m)};var Oe=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i};Oe.prototype.get=function(t,e,i,s){return lt(i,this.entry[0])?this.entry[1]:s},Oe.prototype.update=function(t,e,i,s,r,n,h){var l=r===o,u=lt(s,this.entry[0]);return(u?r===this.entry[1]:l)?this:(a(h),l?void a(n):u?t&&t===this.ownerID?(this.entry[1]=r,this):new Oe(t,this.keyHash,[s,r]):(a(n),Ze(this,t,e,ft(s),[s,r])))},Le.prototype.iterate=Ne.prototype.iterate=function(t,e){for(var i=this.entries,s=0,r=i.length-1;s<=r;s++)if(!1===t(i[e?r-s:s]))return!1},Ve.prototype.iterate=ze.prototype.iterate=function(t,e){for(var i=this.nodes,s=0,r=i.length-1;s<=r;s++){var n=i[e?r-s:s];if(n&&!1===n.iterate(t,e))return!1}},Oe.prototype.iterate=function(t,e){return t(this.entry)};var Ue,Ye=function(t){function e(t,e,i){this._type=e,this._reverse=i,this._stack=t._root&&He(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var i=e.node,s=e.index++,r=void 0;if(i.entry){if(0===s)return Ge(t,i.entry)}else if(i.entries){if(s<=(r=i.entries.length-1))return Ge(t,i.entries[this._reverse?r-s:s])}else if(s<=(r=i.nodes.length-1)){var n=i.nodes[this._reverse?r-s:s];if(n){if(n.entry)return Ge(t,n.entry);e=this._stack=He(n,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(z);function Ge(t,e){return N(t,e[0],e[1])}function He(t,e){return{node:t,index:0,__prev:e}}function We(t,e,i,s){var r=Object.create(Pe);return r.size=t,r._root=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Ke(){return Ue||(Ue=We(0))}function Xe(t,e,i){var s,r;if(t._root){var n={value:!1},a={value:!1};if(s=je(t._root,t.__ownerID,0,void 0,e,i,n,a),!a.value)return t;r=t.size+(n.value?i===o?-1:1:0)}else{if(i===o)return t;r=1,s=new Le(t.__ownerID,[[e,i]])}return t.__ownerID?(t.size=r,t._root=s,t.__hash=void 0,t.__altered=!0,t):s?We(r,s):Ke()}function je(t,e,i,s,r,n,h,l){return t?t.update(e,i,s,r,n,h,l):n===o?t:(a(l),a(h),new Oe(e,s,[r,n]))}function $e(t){return t.constructor===Oe||t.constructor===Ne}function Ze(t,e,i,s,r){if(t.keyHash===s)return new Ne(e,s,[t.entry,r]);var o,a=(0===i?t.keyHash:t.keyHash>>>i)&n,h=(0===i?s:s>>>i)&n,l=a===h?[Ze(t,e,i+5,s,r)]:(o=new Oe(e,s,r),a<h?[t,o]:[o,t]);return new Ve(e,1<<a|1<<h,l)}function Qe(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function qe(t,e,i,s){var r=s?t:$t(t);return r[e]=i,r}var Je=8,ti=16,ei=8,ii="@@__IMMUTABLE_LIST__@@";function si(t){return Boolean(t&&t[ii])}var ri=function(t){function e(e){var i=ci();if(null==e)return i;if(si(e))return e;var s=t(e),n=s.size;return 0===n?i:(Qt(n),n>0&&n<r?ui(0,n,5,null,new oi(s.toArray())):i.withMutations((function(t){t.setSize(n),s.forEach((function(e,i){return t.set(i,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=u(this,t))>=0&&t<this.size){var i=gi(this,t+=this._origin);return i&&i.array[t&n]}return e},e.prototype.set=function(t,e){return function(t,e,i){if((e=u(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?mi(t,e).set(0,i):mi(t,0,e+1).set(e,i)}));e+=t._origin;var s=t._tail,r=t._root,n={value:!1};return e>=yi(t._capacity)?s=di(s,t.__ownerID,0,e,i,n):r=di(r,t.__ownerID,t._level,e,i,n),n.value?t.__ownerID?(t._root=r,t._tail=s,t.__hash=void 0,t.__altered=!0,t):ui(t._origin,t._capacity,t._level,r,s):t}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):ci()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(i){mi(i,0,e+t.length);for(var s=0;s<t.length;s++)i.set(e+s,t[s])}))},e.prototype.pop=function(){return mi(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){mi(e,-t.length);for(var i=0;i<t.length;i++)e.set(i,t[i])}))},e.prototype.shift=function(){return mi(this,1)},e.prototype.concat=function(){for(var e=arguments,i=[],s=0;s<arguments.length;s++){var r=e[s],n=t("string"!=typeof r&&U(r)?r:[r]);0!==n.size&&i.push(n)}return 0===i.length?this:0!==this.size||this.__ownerID||1!==i.length?this.withMutations((function(t){i.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(i[0])},e.prototype.setSize=function(t){return mi(this,0,t)},e.prototype.map=function(t,e){var i=this;return this.withMutations((function(s){for(var r=0;r<i.size;r++)s.set(r,t.call(e,s.get(r),r,i))}))},e.prototype.slice=function(t,e){var i=this.size;return d(t,e,i)?this:mi(this,f(t,i),g(e,i))},e.prototype.__iterator=function(t,e){var i=e?this.size:0,s=li(this,e);return new z((function(){var r=s();return r===hi?{value:void 0,done:!0}:N(t,e?--i:i++,r)}))},e.prototype.__iterate=function(t,e){for(var i,s=e?this.size:0,r=li(this,e);(i=r())!==hi&&!1!==t(i,e?--s:s++,this););return s},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ui(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?ci():(this.__ownerID=t,this.__altered=!1,this)},e}(C);ri.isList=si;var ni=ri.prototype;ni[ii]=!0,ni[s]=ni.remove,ni.merge=ni.concat,ni.setIn=ce,ni.deleteIn=ni.removeIn=fe,ni.update=me,ni.updateIn=ye,ni.mergeIn=Ee,ni.mergeDeepIn=Re,ni.withMutations=Ie,ni.wasAltered=De,ni.asImmutable=Fe,ni["@@transducer/init"]=ni.asMutable=_e,ni["@@transducer/step"]=function(t,e){return t.push(e)},ni["@@transducer/result"]=function(t){return t.asImmutable()};var oi=function(t,e){this.array=t,this.ownerID=e};oi.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:0===this.array.length)return this;var s=i>>>e&n;if(s>=this.array.length)return new oi([],t);var r,o=0===s;if(e>0){var a=this.array[s];if((r=a&&a.removeBefore(t,e-5,i))===a&&o)return this}if(o&&!r)return this;var h=fi(this,t);if(!o)for(var l=0;l<s;l++)h.array[l]=void 0;return r&&(h.array[s]=r),h},oi.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||0===this.array.length)return this;var s,r=i-1>>>e&n;if(r>=this.array.length)return this;if(e>0){var o=this.array[r];if((s=o&&o.removeAfter(t,e-5,i))===o&&r===this.array.length-1)return this}var a=fi(this,t);return a.array.splice(r+1),s&&(a.array[r]=s),a};var ai,hi={};function li(t,e){var i=t._origin,s=t._capacity,n=yi(s),o=t._tail;return function t(a,h,l){return 0===h?function(t,a){var h=a===n?o&&o.array:t&&t.array,l=a>i?0:i-a,u=s-a;return u>r&&(u=r),function(){if(l===u)return hi;var t=e?--u:l++;return h&&h[t]}}(a,l):function(n,o,a){var h,l=n&&n.array,u=a>i?0:i-a>>o,c=1+(s-a>>o);return c>r&&(c=r),function(){for(;;){if(h){var i=h();if(i!==hi)return i;h=null}if(u===c)return hi;var s=e?--c:u++;h=t(l&&l[s],o-5,a+(s<<o))}}}(a,h,l)}(t._root,t._level,0)}function ui(t,e,i,s,r,n,o){var a=Object.create(ni);return a.size=e-t,a._origin=t,a._capacity=e,a._level=i,a._root=s,a._tail=r,a.__ownerID=n,a.__hash=o,a.__altered=!1,a}function ci(){return ai||(ai=ui(0,0,5))}function di(t,e,i,s,r,o){var h,l=s>>>i&n,u=t&&l<t.array.length;if(!u&&void 0===r)return t;if(i>0){var c=t&&t.array[l],d=di(c,e,i-5,s,r,o);return d===c?t:((h=fi(t,e)).array[l]=d,h)}return u&&t.array[l]===r?t:(o&&a(o),h=fi(t,e),void 0===r&&l===h.array.length-1?h.array.pop():h.array[l]=r,h)}function fi(t,e){return e&&t&&e===t.ownerID?t:new oi(t?t.array.slice():[],e)}function gi(t,e){if(e>=yi(t._capacity))return t._tail;if(e<1<<t._level+5){for(var i=t._root,s=t._level;i&&s>0;)i=i.array[e>>>s&n],s-=5;return i}}function mi(t,e,i){void 0!==e&&(e|=0),void 0!==i&&(i|=0);var s=t.__ownerID||new h,r=t._origin,o=t._capacity,a=r+e,l=void 0===i?o:i<0?o+i:r+i;if(a===r&&l===o)return t;if(a>=l)return t.clear();for(var u=t._level,c=t._root,d=0;a+d<0;)c=new oi(c&&c.array.length?[void 0,c]:[],s),d+=1<<(u+=5);d&&(a+=d,r+=d,l+=d,o+=d);for(var f=yi(o),g=yi(l);g>=1<<u+5;)c=new oi(c&&c.array.length?[c]:[],s),u+=5;var m=t._tail,y=g<f?gi(t,l-1):g>f?new oi([],s):m;if(m&&g>f&&a<o&&m.array.length){for(var p=c=fi(c,s),x=u;x>5;x-=5){var A=f>>>x&n;p=p.array[A]=fi(p.array[A],s)}p.array[f>>>5&n]=m}if(l<o&&(y=y&&y.removeAfter(s,0,l)),a>=g)a-=g,l-=g,u=5,c=null,y=y&&y.removeBefore(s,0,a);else if(a>r||g<f){for(d=0;c;){var S=a>>>u&n;if(S!==g>>>u&n)break;S&&(d+=(1<<u)*S),u-=5,c=c.array[S]}c&&a>r&&(c=c.removeBefore(s,u,a-d)),c&&g<f&&(c=c.removeAfter(s,u,g-d)),d&&(a-=d,l-=d)}return t.__ownerID?(t.size=l-a,t._origin=a,t._capacity=l,t._level=u,t._root=c,t._tail=y,t.__hash=void 0,t.__altered=!0,t):ui(a,l,u,c,y)}function yi(t){return t<r?0:t-1>>>5<<5}var pi,xi=function(t){function e(t){return null==t?Si():at(t)?t:Si().withMutations((function(e){var i=w(t);Qt(i.size),i.forEach((function(t,i){return e.set(i,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var i=this._map.get(t);return void 0!==i?this._list.get(i)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Si()},e.prototype.set=function(t,e){return vi(this,t,e)},e.prototype.remove=function(t){return vi(this,t,o)},e.prototype.__iterate=function(t,e){var i=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],i)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),i=this._list.__ensureOwner(t);return t?Ai(e,i,t,this.__hash):0===this.size?Si():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=i,this)},e}(Be);function Ai(t,e,i,s){var r=Object.create(xi.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Si(){return pi||(pi=Ai(Ke(),ci()))}function vi(t,e,i){var s,n,a=t._map,h=t._list,l=a.get(e),u=void 0!==l;if(i===o){if(!u)return t;h.size>=r&&h.size>=2*a.size?(s=(n=h.filter((function(t,e){return void 0!==t&&l!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(s.__ownerID=n.__ownerID=t.__ownerID)):(s=a.remove(e),n=l===h.size-1?h.pop():h.set(l,void 0))}else if(u){if(i===h.get(l)[1])return t;s=a,n=h.set(l,[e,i])}else s=a.set(e,h.size),n=h.set(h.size,[e,i]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=n,t.__hash=void 0,t.__altered=!0,t):Ai(s,n)}xi.isOrderedMap=at,xi.prototype[D]=!0,xi.prototype[s]=xi.prototype.remove;var bi="@@__IMMUTABLE_STACK__@@";function Mi(t){return Boolean(t&&t[bi])}var Ti=function(t){function e(t){return null==t?Ei():Mi(t)?t:Ei().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var i=this._head;for(t=u(this,t);i&&t--;)i=i.next;return i?i.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,i=this._head,s=arguments.length-1;s>=0;s--)i={value:t[s],next:i};return this.__ownerID?(this.size=e,this._head=i,this.__hash=void 0,this.__altered=!0,this):ki(e,i)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Mi(e))return e;Qt(e.size);var i=this.size,s=this._head;return e.__iterate((function(t){i++,s={value:t,next:s}}),!0),this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):ki(i,s)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ei()},e.prototype.slice=function(e,i){if(d(e,i,this.size))return this;var s=f(e,this.size);if(g(i,this.size)!==this.size)return t.prototype.slice.call(this,e,i);for(var r=this.size-s,n=this._head;s--;)n=n.next;return this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):ki(r,n)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ki(this.size,this._head,t,this.__hash):0===this.size?Ei():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var i=this;if(e)return new Q(this.toArray()).__iterate((function(e,s){return t(e,s,i)}),e);for(var s=0,r=this._head;r&&!1!==t(r.value,s++,this);)r=r.next;return s},e.prototype.__iterator=function(t,e){if(e)return new Q(this.toArray()).__iterator(t,e);var i=0,s=this._head;return new z((function(){if(s){var e=s.value;return s=s.next,N(t,i++,e)}return{value:void 0,done:!0}}))},e}(C);Ti.isStack=Mi;var wi,Ci=Ti.prototype;function ki(t,e,i,s){var r=Object.create(Ci);return r.size=t,r._head=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Ei(){return wi||(wi=ki(0))}Ci[bi]=!0,Ci.shift=Ci.pop,Ci.unshift=Ci.push,Ci.unshiftAll=Ci.pushAll,Ci.withMutations=Ie,Ci.wasAltered=De,Ci.asImmutable=Fe,Ci["@@transducer/init"]=Ci.asMutable=_e,Ci["@@transducer/step"]=function(t,e){return t.unshift(e)},Ci["@@transducer/result"]=function(t){return t.asImmutable()};var Ri="@@__IMMUTABLE_SET__@@";function Ii(t){return Boolean(t&&t[Ri])}function _i(t){return Ii(t)&&B(t)}function Fi(t,e){if(t===e)return!0;if(!x(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||S(t)!==S(e)||b(t)!==b(e)||B(t)!==B(e))return!1;if(0===t.size&&0===e.size)return!0;var i=!M(t);if(B(t)){var s=t.entries();return e.every((function(t,e){var r=s.next().value;return r&&lt(r[1],t)&&(i||lt(r[0],e))}))&&s.next().done}var r=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{r=!0;var n=t;t=e,e=n}var a=!0,h=e.__iterate((function(e,s){if(i?!t.has(e):r?!lt(e,t.get(s,o)):!lt(t.get(s,o),e))return a=!1,!1}));return a&&t.size===h}function Di(t,e){var i=function(i){t.prototype[i]=e[i]};return Object.keys(e).forEach(i),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(i),t}function Bi(t){if(!t||"object"!=typeof t)return t;if(!x(t)){if(!ee(t))return t;t=X(t)}if(S(t)){var e={};return t.__iterate((function(t,i){e[i]=Bi(t)})),e}var i=[];return t.__iterate((function(t){i.push(Bi(t))})),i}var Pi=function(t){function e(e){return null==e?Oi():Ii(e)&&!B(e)?e:Oi().withMutations((function(i){var s=t(e);Qt(s.size),s.forEach((function(t){return i.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(w(t).keySeq())},e.intersect=function(t){return(t=T(t).toArray()).length?Vi.intersect.apply(e(t.pop()),t):Oi()},e.union=function(t){return(t=T(t).toArray()).length?Vi.union.apply(e(t.pop()),t):Oi()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return zi(this,this._map.set(t,t))},e.prototype.remove=function(t){return zi(this,this._map.remove(t))},e.prototype.clear=function(){return zi(this,this._map.clear())},e.prototype.map=function(t,e){var i=this,s=!1,r=zi(this,this._map.mapEntries((function(r){var n=r[1],o=t.call(e,n,n,i);return o!==n&&(s=!0),[o,o]}),e));return s?r:this},e.prototype.union=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(i){for(var s=0;s<e.length;s++)"string"==typeof e[s]?i.add(e[s]):t(e[s]).forEach((function(t){return i.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var s=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||s.push(t)})),this.withMutations((function(t){s.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var s=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&s.push(t)})),this.withMutations((function(t){s.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return ns(Nt(this,t))},e.prototype.sortBy=function(t,e){return ns(Nt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var i=this;return this._map.__iterate((function(e){return t(e,e,i)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(k);Pi.isSet=Ii;var Li,Vi=Pi.prototype;function zi(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Ni(t,e){var i=Object.create(Vi);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function Oi(){return Li||(Li=Ni(Ke()))}Vi[Ri]=!0,Vi[s]=Vi.remove,Vi.merge=Vi.concat=Vi.union,Vi.withMutations=Ie,Vi.asImmutable=Fe,Vi["@@transducer/init"]=Vi.asMutable=_e,Vi["@@transducer/step"]=function(t,e){return t.add(e)},Vi["@@transducer/result"]=function(t){return t.asImmutable()},Vi.__empty=Oi,Vi.__make=Ni;var Ui,Yi=function(t){function e(t,i,s){if(!(this instanceof e))return new e(t,i,s);if(Zt(0!==s,"Cannot step a Range by 0"),t=t||0,void 0===i&&(i=1/0),s=void 0===s?1:Math.abs(s),i<t&&(s=-s),this._start=t,this._end=i,this._step=s,this.size=Math.max(0,Math.ceil((i-t)/s-1)+1),0===this.size){if(Ui)return Ui;Ui=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+u(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,i){return d(t,i,this.size)?this:(t=f(t,this.size),(i=g(i,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(i,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var i=e/this._step;if(i>=0&&i<this.size)return i}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var i=this.size,s=this._step,r=e?this._start+(i-1)*s:this._start,n=0;n!==i&&!1!==t(r,e?i-++n:n++,this);)r+=e?-s:s;return n},e.prototype.__iterator=function(t,e){var i=this.size,s=this._step,r=e?this._start+(i-1)*s:this._start,n=0;return new z((function(){if(n===i)return{value:void 0,done:!0};var o=r;return r+=e?-s:s,N(t,e?i-++n:n++,o)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Fi(this,t)},e}($);function Gi(t,e,i){for(var s=qt(e),r=0;r!==s.length;)if((t=re(t,s[r++],o))===o)return i;return t}function Hi(t,e){return Gi(this,t,e)}function Wi(t,e){return Gi(t,e,o)!==o}function Ki(){Qt(this.size);var t={};return this.__iterate((function(e,i){t[i]=e})),t}T.isIterable=x,T.isKeyed=S,T.isIndexed=b,T.isAssociative=M,T.isOrdered=B,T.Iterator=z,Di(T,{toArray:function(){Qt(this.size);var t=new Array(this.size||0),e=S(this),i=0;return this.__iterate((function(s,r){t[i++]=e?[r,s]:s})),t},toIndexedSeq:function(){return new Rt(this)},toJS:function(){return Bi(this)},toKeyedSeq:function(){return new Et(this,!0)},toMap:function(){return Be(this.toKeyedSeq())},toObject:Ki,toOrderedMap:function(){return xi(this.toKeyedSeq())},toOrderedSet:function(){return ns(S(this)?this.valueSeq():this)},toSet:function(){return Pi(S(this)?this.valueSeq():this)},toSetSeq:function(){return new It(this)},toSeq:function(){return b(this)?this.toIndexedSeq():S(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ti(S(this)?this.valueSeq():this)},toList:function(){return ri(S(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Gt(this,function(t,e){var i=S(t),s=[t].concat(e).map((function(t){return x(t)?i&&(t=w(t)):t=i?it(t):st(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===s.length)return t;if(1===s.length){var r=s[0];if(r===t||i&&S(r)||b(t)&&b(r))return r}var n=new Q(s);return i?n=n.toKeyedSeq():b(t)||(n=n.toSetSeq()),(n=n.flatten(!0)).size=s.reduce((function(t,e){if(void 0!==t){var i=e.size;if(void 0!==i)return t+i}}),0),n}(this,t))},includes:function(t){return this.some((function(e){return lt(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){Qt(this.size);var i=!0;return this.__iterate((function(s,r,n){if(!t.call(e,s,r,n))return i=!1,!1})),i},filter:function(t,e){return Gt(this,Pt(this,t,e,!0))},partition:function(t,e){return function(t,e,i){var s=S(t),r=[[],[]];t.__iterate((function(n,o){r[e.call(i,n,o,t)?1:0].push(s?[o,n]:n)}));var n=Wt(t);return r.map((function(e){return Gt(t,n(e))}))}(this,t,e)},find:function(t,e,i){var s=this.findEntry(t,e);return s?s[1]:i},forEach:function(t,e){return Qt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Qt(this.size),t=void 0!==t?""+t:",";var e="",i=!0;return this.__iterate((function(s){i?i=!1:e+=t,e+=null!=s?s.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Gt(this,Dt(this,t,e))},reduce:function(t,e,i){return Qi(this,t,e,i,arguments.length<2,!1)},reduceRight:function(t,e,i){return Qi(this,t,e,i,arguments.length<2,!0)},reverse:function(){return Gt(this,Bt(this,!0))},slice:function(t,e){return Gt(this,Lt(this,t,e,!0))},some:function(t,e){Qt(this.size);var i=!1;return this.__iterate((function(s,r,n){if(t.call(e,s,r,n))return i=!0,!1})),i},sort:function(t){return Gt(this,Nt(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return l(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,i){var s=Be().asMutable();return t.__iterate((function(r,n){s.update(e.call(i,r,n,t),0,(function(t){return t+1}))})),s.asImmutable()}(this,t,e)},equals:function(t){return Fi(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Q(t._cache);var e=t.toSeq().map(Ji).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(ts(t),e)},findEntry:function(t,e,i){var s=i;return this.__iterate((function(i,r,n){if(t.call(e,i,r,n))return s=[r,i],!1})),s},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(c,null,t)},flatMap:function(t,e){return Gt(this,function(t,e,i){var s=Wt(t);return t.toSeq().map((function(r,n){return s(e.call(i,r,n,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Gt(this,zt(this,t,!0))},fromEntrySeq:function(){return new _t(this)},get:function(t,e){return this.find((function(e,i){return lt(i,t)}),void 0,e)},getIn:Hi,groupBy:function(t,e){return function(t,e,i){var s=S(t),r=(B(t)?xi():Be()).asMutable();t.__iterate((function(n,o){r.update(e.call(i,n,o,t),(function(t){return(t=t||[]).push(s?[o,n]:n),t}))}));var n=Wt(t);return r.map((function(e){return Gt(t,n(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,o)!==o},hasIn:function(t){return Wi(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:T(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:T(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return lt(e,t)}))},keySeq:function(){return this.toSeq().map(qi).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ot(this,t)},maxBy:function(t,e){return Ot(this,e,t)},min:function(t){return Ot(this,t?es(t):ss)},minBy:function(t,e){return Ot(this,e?es(e):ss,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Gt(this,Vt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(ts(t),e)},sortBy:function(t,e){return Gt(this,Nt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Gt(this,function(t,e,i){var s=Kt(t);return s.__iterateUncached=function(s,r){var n=this;if(r)return this.cacheResult().__iterate(s,r);var o=0;return t.__iterate((function(t,r,a){return e.call(i,t,r,a)&&++o&&s(t,r,n)})),o},s.__iteratorUncached=function(s,r){var n=this;if(r)return this.cacheResult().__iterator(s,r);var o=t.__iterator(2,r),a=!0;return new z((function(){if(!a)return{value:void 0,done:!0};var t=o.next();if(t.done)return t;var r=t.value,h=r[0],l=r[1];return e.call(i,l,h,n)?2===s?t:N(s,h,l,t):(a=!1,{value:void 0,done:!0})}))},s}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(ts(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=B(t),i=S(t),s=e?1:0;return function(t,e){return e=ut(e,3432918353),e=ut(e<<15|e>>>-15,461845907),e=ut(e<<13|e>>>-13,5),e=ut((e=e+3864292196^t)^e>>>16,2246822507),e=ct((e=ut(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(i?e?function(t,e){s=31*s+rs(ft(t),ft(e))|0}:function(t,e){s=s+rs(ft(t),ft(e))|0}:e?function(t){s=31*s+ft(t)|0}:function(t){s=s+ft(t)|0}),s)}(this))}});var Xi=T.prototype;Xi[p]=!0,Xi[V]=Xi.values,Xi.toJSON=Xi.toArray,Xi.__toStringMapper=ie,Xi.inspect=Xi.toSource=function(){return this.toString()},Xi.chain=Xi.flatMap,Xi.contains=Xi.includes,Di(w,{flip:function(){return Gt(this,Ft(this))},mapEntries:function(t,e){var i=this,s=0;return Gt(this,this.toSeq().map((function(r,n){return t.call(e,[n,r],s++,i)})).fromEntrySeq())},mapKeys:function(t,e){var i=this;return Gt(this,this.toSeq().flip().map((function(s,r){return t.call(e,s,r,i)})).flip())}});var ji=w.prototype;ji[A]=!0,ji[V]=Xi.entries,ji.toJSON=Ki,ji.__toStringMapper=function(t,e){return ie(e)+": "+ie(t)},Di(C,{toKeyedSeq:function(){return new Et(this,!1)},filter:function(t,e){return Gt(this,Pt(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Gt(this,Bt(this,!1))},slice:function(t,e){return Gt(this,Lt(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(e||0,0),0===i||2===i&&!e)return this;t=f(t,t<0?this.count():this.size);var s=this.slice(0,t);return Gt(this,1===i?s:s.concat($t(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Gt(this,zt(this,t,!1))},get:function(t,e){return(t=u(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,i){return i===t}),void 0,e)},has:function(t){return(t=u(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Gt(this,function(t,e){var i=Kt(t);return i.size=t.size&&2*t.size-1,i.__iterateUncached=function(i,s){var r=this,n=0;return t.__iterate((function(t){return(!n||!1!==i(e,n++,r))&&!1!==i(t,n++,r)}),s),n},i.__iteratorUncached=function(i,s){var r,n=t.__iterator(1,s),o=0;return new z((function(){return(!r||o%2)&&(r=n.next()).done?r:o%2?N(i,o++,e):N(i,o++,r.value,r)}))},i}(this,t))},interleave:function(){var t=[this].concat($t(arguments)),e=Yt(this.toSeq(),$.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),Gt(this,i)},keySeq:function(){return Yi(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Gt(this,Vt(this,t,e,!1))},zip:function(){return Gt(this,Yt(this,is,[this].concat($t(arguments))))},zipAll:function(){return Gt(this,Yt(this,is,[this].concat($t(arguments)),!0))},zipWith:function(t){var e=$t(arguments);return e[0]=this,Gt(this,Yt(this,t,e))}});var $i=C.prototype;$i[v]=!0,$i[D]=!0,Di(k,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Zi=k.prototype;function Qi(t,e,i,s,r,n){return Qt(t.size),t.__iterate((function(t,n,o){r?(r=!1,i=t):i=e.call(s,i,t,n,o)}),n),i}function qi(t,e){return e}function Ji(t,e){return[e,t]}function ts(t){return function(){return!t.apply(this,arguments)}}function es(t){return function(){return-t.apply(this,arguments)}}function is(){return $t(arguments)}function ss(t,e){return t<e?1:t>e?-1:0}function rs(t,e){return t^e+2654435769+(t<<6)+(t>>2)}Zi.has=Xi.includes,Zi.contains=Zi.includes,Zi.keys=Zi.values,Di(j,ji),Di($,$i),Di(Z,Zi);var ns=function(t){function e(t){return null==t?ls():_i(t)?t:ls().withMutations((function(e){var i=k(t);Qt(i.size),i.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(w(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Pi);ns.isOrderedSet=_i;var os,as=ns.prototype;function hs(t,e){var i=Object.create(as);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function ls(){return os||(os=hs(Si()))}as[D]=!0,as.zip=$i.zip,as.zipWith=$i.zipWith,as.zipAll=$i.zipAll,as.__empty=ls,as.__make=hs;var us={LeftThenRight:-1,RightThenLeft:1},cs=function(t,e){var i;!function(t){if(_(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(F(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var s=function(n){var o=this;if(n instanceof s)return n;if(!(this instanceof s))return new s(n);if(!i){i=!0;var a=Object.keys(t),h=r._indices={};r._name=e,r._keys=a,r._defaultValues=t;for(var l=0;l<a.length;l++){var u=a[l];h[u]=l,r[u]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+gs(this)+' with property "'+u+'" since that property name is part of the Record API.'):ys(r,u)}}return this.__ownerID=void 0,this._values=ri().withMutations((function(t){t.setSize(o._keys.length),w(n).forEach((function(e,i){t.set(o._indices[i],e===o._defaultValues[i]?void 0:e)}))})),this},r=s.prototype=Object.create(ds);return r.constructor=s,e&&(s.displayName=e),s};cs.prototype.toString=function(){for(var t,e=gs(this)+" { ",i=this._keys,s=0,r=i.length;s!==r;s++)e+=(s?", ":"")+(t=i[s])+": "+ie(this.get(t));return e+" }"},cs.prototype.equals=function(t){return this===t||_(t)&&ms(this).equals(ms(t))},cs.prototype.hashCode=function(){return ms(this).hashCode()},cs.prototype.has=function(t){return this._indices.hasOwnProperty(t)},cs.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._indices[t],s=this._values.get(i);return void 0===s?this._defaultValues[t]:s},cs.prototype.set=function(t,e){if(this.has(t)){var i=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(i!==this._values&&!this.__ownerID)return fs(this,i)}return this},cs.prototype.remove=function(t){return this.set(t)},cs.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:fs(this,t)},cs.prototype.wasAltered=function(){return this._values.wasAltered()},cs.prototype.toSeq=function(){return ms(this)},cs.prototype.toJS=function(){return Bi(this)},cs.prototype.entries=function(){return this.__iterator(2)},cs.prototype.__iterator=function(t,e){return ms(this).__iterator(t,e)},cs.prototype.__iterate=function(t,e){return ms(this).__iterate(t,e)},cs.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?fs(this,e,t):(this.__ownerID=t,this._values=e,this)},cs.isRecord=_,cs.getDescriptiveName=gs;var ds=cs.prototype;function fs(t,e,i){var s=Object.create(Object.getPrototypeOf(t));return s._values=e,s.__ownerID=i,s}function gs(t){return t.constructor.displayName||t.constructor.name||"Record"}function ms(t){return it(t._keys.map((function(e){return[e,t.get(e)]})))}function ys(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Zt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}ds[I]=!0,ds[s]=ds.remove,ds.deleteIn=ds.removeIn=fe,ds.getIn=Hi,ds.hasIn=Xi.hasIn,ds.merge=pe,ds.mergeWith=xe,ds.mergeIn=Ee,ds.mergeDeep=Ce,ds.mergeDeepWith=ke,ds.mergeDeepIn=Re,ds.setIn=ce,ds.update=me,ds.updateIn=ye,ds.withMutations=Ie,ds.asMutable=_e,ds.asImmutable=Fe,ds[V]=ds.entries,ds.toJSON=ds.toObject=Xi.toObject,ds.inspect=ds.toSource=function(){return this.toString()};var ps,xs=function(t){function e(t,i){if(!(this instanceof e))return new e(t,i);if(this._value=t,this.size=void 0===i?1/0:Math.max(0,i),0===this.size){if(ps)return ps;ps=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return lt(this._value,t)},e.prototype.slice=function(t,i){var s=this.size;return d(t,i,s)?this:new e(this._value,g(i,s)-f(t,s))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return lt(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return lt(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var i=this.size,s=0;s!==i&&!1!==t(this._value,e?i-++s:s++,this););return s},e.prototype.__iterator=function(t,e){var i=this,s=this.size,r=0;return new z((function(){return r===s?{value:void 0,done:!0}:N(t,e?s-++r:r++,i._value)}))},e.prototype.equals=function(t){return t instanceof e?lt(this._value,t._value):Fi(this,t)},e}($);function As(t,e){return Ss([],e||vs,t,"",e&&e.length>2?[]:void 0,{"":t})}function Ss(t,e,i,s,r,n){if("string"!=typeof i&&!F(i)&&(K(i)||U(i)||te(i))){if(~t.indexOf(i))throw new TypeError("Cannot convert circular structure to Immutable");t.push(i),r&&""!==s&&r.push(s);var o=e.call(n,s,X(i).map((function(s,n){return Ss(t,e,s,n,r,i)})),r&&r.slice());return t.pop(),r&&r.pop(),o}return i}function vs(t,e){return b(e)?e.toList():S(e)?e.toMap():e.toSet()}var bs="4.3.7",Ms=T;const Ts={version:bs,Collection:T,Iterable:T,Seq:X,Map:Be,OrderedMap:xi,List:ri,Stack:Ti,Set:Pi,OrderedSet:ns,PairSorting:us,Record:cs,Range:Yi,Repeat:xs,is:lt,fromJS:As,hash:ft,isImmutable:F,isCollection:x,isKeyed:S,isIndexed:b,isAssociative:M,isOrdered:B,isValueObject:ht,isPlainObject:te,isSeq:R,isList:si,isMap:ot,isOrderedMap:at,isStack:Mi,isSet:Ii,isOrderedSet:_i,isRecord:_,get:re,getIn:Gi,has:se,hasIn:Wi,merge:Se,mergeDeep:be,mergeWith:ve,mergeDeepWith:Me,remove:oe,removeIn:de,set:ae,setIn:ue,update:ge,updateIn:he}},650:function(module){var t;"undefined"!=typeof self&&self,t=function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}({"./src/index.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OBJ", function() { return OBJ; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Mesh", function() { return _mesh__WEBPACK_IMPORTED_MODULE_0__["default"]; });\n\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["Material"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"]; });\n\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"]; });\n\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./src/utils.ts");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"]; });\n\n\n\n\n\nconst version = "2.0.3";\nconst OBJ = {\n    Attribute: _layout__WEBPACK_IMPORTED_MODULE_2__["Attribute"],\n    DuplicateAttributeException: _layout__WEBPACK_IMPORTED_MODULE_2__["DuplicateAttributeException"],\n    Layout: _layout__WEBPACK_IMPORTED_MODULE_2__["Layout"],\n    Material: _material__WEBPACK_IMPORTED_MODULE_1__["Material"],\n    MaterialLibrary: _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"],\n    Mesh: _mesh__WEBPACK_IMPORTED_MODULE_0__["default"],\n    TYPES: _layout__WEBPACK_IMPORTED_MODULE_2__["TYPES"],\n    downloadModels: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadModels"],\n    downloadMeshes: _utils__WEBPACK_IMPORTED_MODULE_3__["downloadMeshes"],\n    initMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["initMeshBuffers"],\n    deleteMeshBuffers: _utils__WEBPACK_IMPORTED_MODULE_3__["deleteMeshBuffers"],\n    version,\n};\n/**\n * @namespace\n */\n\n\n\n//# sourceURL=webpack:///./src/index.ts?')},"./src/layout.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TYPES", function() { return TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DuplicateAttributeException", function() { return DuplicateAttributeException; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Attribute", function() { return Attribute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Layout", function() { return Layout; });\nvar TYPES;\n(function (TYPES) {\n    TYPES["BYTE"] = "BYTE";\n    TYPES["UNSIGNED_BYTE"] = "UNSIGNED_BYTE";\n    TYPES["SHORT"] = "SHORT";\n    TYPES["UNSIGNED_SHORT"] = "UNSIGNED_SHORT";\n    TYPES["FLOAT"] = "FLOAT";\n})(TYPES || (TYPES = {}));\n/**\n * An exception for when two or more of the same attributes are found in the\n * same layout.\n * @private\n */\nclass DuplicateAttributeException extends Error {\n    /**\n     * Create a DuplicateAttributeException\n     * @param {Attribute} attribute - The attribute that was found more than\n     *        once in the {@link Layout}\n     */\n    constructor(attribute) {\n        super(`found duplicate attribute: ${attribute.key}`);\n    }\n}\n/**\n * Represents how a vertex attribute should be packed into an buffer.\n * @private\n */\nclass Attribute {\n    /**\n     * Create an attribute. Do not call this directly, use the predefined\n     * constants.\n     * @param {string} key - The name of this attribute as if it were a key in\n     *        an Object. Use the camel case version of the upper snake case\n     *        const name.\n     * @param {number} size - The number of components per vertex attribute.\n     *        Must be 1, 2, 3, or 4.\n     * @param {string} type - The data type of each component for this\n     *        attribute. Possible values:<br/>\n     *        "BYTE": signed 8-bit integer, with values in [-128, 127]<br/>\n     *        "SHORT": signed 16-bit integer, with values in\n     *            [-32768, 32767]<br/>\n     *        "UNSIGNED_BYTE": unsigned 8-bit integer, with values in\n     *            [0, 255]<br/>\n     *        "UNSIGNED_SHORT": unsigned 16-bit integer, with values in\n     *            [0, 65535]<br/>\n     *        "FLOAT": 32-bit floating point number\n     * @param {boolean} normalized - Whether integer data values should be\n     *        normalized when being casted to a float.<br/>\n     *        If true, signed integers are normalized to [-1, 1].<br/>\n     *        If true, unsigned integers are normalized to [0, 1].<br/>\n     *        For type "FLOAT", this parameter has no effect.\n     */\n    constructor(key, size, type, normalized = false) {\n        this.key = key;\n        this.size = size;\n        this.type = type;\n        this.normalized = normalized;\n        switch (type) {\n            case "BYTE":\n            case "UNSIGNED_BYTE":\n                this.sizeOfType = 1;\n                break;\n            case "SHORT":\n            case "UNSIGNED_SHORT":\n                this.sizeOfType = 2;\n                break;\n            case "FLOAT":\n                this.sizeOfType = 4;\n                break;\n            default:\n                throw new Error(`Unknown gl type: ${type}`);\n        }\n        this.sizeInBytes = this.sizeOfType * size;\n    }\n}\n/**\n * A class to represent the memory layout for a vertex attribute array. Used by\n * {@link Mesh}\'s TBD(...) method to generate a packed array from mesh data.\n * <p>\n * Layout can sort of be thought of as a C-style struct declaration.\n * {@link Mesh}\'s TBD(...) method will use the {@link Layout} instance to\n * pack an array in the given attribute order.\n * <p>\n * Layout also is very helpful when calling a WebGL context\'s\n * <code>vertexAttribPointer</code> method. If you\'ve created a buffer using\n * a Layout instance, then the same Layout instance can be used to determine\n * the size, type, normalized, stride, and offset parameters for\n * <code>vertexAttribPointer</code>.\n * <p>\n * For example:\n * <pre><code>\n *\n * const index = glctx.getAttribLocation(shaderProgram, "pos");\n * glctx.vertexAttribPointer(\n *   layout.position.size,\n *   glctx[layout.position.type],\n *   layout.position.normalized,\n *   layout.position.stride,\n *   layout.position.offset);\n * </code></pre>\n * @see {@link Mesh}\n */\nclass Layout {\n    /**\n     * Create a Layout object. This constructor will throw if any duplicate\n     * attributes are given.\n     * @param {Array} ...attributes - An ordered list of attributes that\n     *        describe the desired memory layout for each vertex attribute.\n     *        <p>\n     *\n     * @see {@link Mesh}\n     */\n    constructor(...attributes) {\n        this.attributes = attributes;\n        this.attributeMap = {};\n        let offset = 0;\n        let maxStrideMultiple = 0;\n        for (const attribute of attributes) {\n            if (this.attributeMap[attribute.key]) {\n                throw new DuplicateAttributeException(attribute);\n            }\n            // Add padding to satisfy WebGL\'s requirement that all\n            // vertexAttribPointer calls have an offset that is a multiple of\n            // the type size.\n            if (offset % attribute.sizeOfType !== 0) {\n                offset += attribute.sizeOfType - (offset % attribute.sizeOfType);\n                console.warn("Layout requires padding before " + attribute.key + " attribute");\n            }\n            this.attributeMap[attribute.key] = {\n                attribute: attribute,\n                size: attribute.size,\n                type: attribute.type,\n                normalized: attribute.normalized,\n                offset: offset,\n            };\n            offset += attribute.sizeInBytes;\n            maxStrideMultiple = Math.max(maxStrideMultiple, attribute.sizeOfType);\n        }\n        // Add padding to the end to satisfy WebGL\'s requirement that all\n        // vertexAttribPointer calls have a stride that is a multiple of the\n        // type size. Because we\'re putting differently sized attributes into\n        // the same buffer, it must be padded to a multiple of the largest\n        // type size.\n        if (offset % maxStrideMultiple !== 0) {\n            offset += maxStrideMultiple - (offset % maxStrideMultiple);\n            console.warn("Layout requires padding at the back");\n        }\n        this.stride = offset;\n        for (const attribute of attributes) {\n            this.attributeMap[attribute.key].stride = this.stride;\n        }\n    }\n}\n// Geometry attributes\n/**\n * Attribute layout to pack a vertex\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.POSITION = new Attribute("position", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats\n *\n * @see {@link Layout}\n */\nLayout.NORMAL = new Attribute("normal", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n *\n * @see {@link Layout}\n */\nLayout.TANGENT = new Attribute("tangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s normal\'s bitangent x, y, & z as floats.\n * <p>\n * This value will be computed on-the-fly based on the texture coordinates.\n * If no texture coordinates are available, the generated value will default to\n * 0, 0, 0.\n * @see {@link Layout}\n */\nLayout.BITANGENT = new Attribute("bitangent", 3, TYPES.FLOAT);\n/**\n * Attribute layout to pack a vertex\'s texture coordinates\' u & v as floats\n *\n * @see {@link Layout}\n */\nLayout.UV = new Attribute("uv", 2, TYPES.FLOAT);\n// Material attributes\n/**\n * Attribute layout to pack an unsigned short to be interpreted as a the index\n * into a {@link Mesh}\'s materials list.\n * <p>\n * The intention of this value is to send all of the {@link Mesh}\'s materials\n * into multiple shader uniforms and then reference the current one by this\n * vertex attribute.\n * <p>\n * example glsl code:\n *\n * <pre><code>\n *  // this is bound using MATERIAL_INDEX\n *  attribute int materialIndex;\n *\n *  struct Material {\n *    vec3 diffuse;\n *    vec3 specular;\n *    vec3 specularExponent;\n *  };\n *\n *  uniform Material materials[MAX_MATERIALS];\n *\n *  // ...\n *\n *  vec3 diffuse = materials[materialIndex];\n *\n * </code></pre>\n * TODO: More description & test to make sure subscripting by attributes even\n * works for webgl\n *\n * @see {@link Layout}\n */\nLayout.MATERIAL_INDEX = new Attribute("materialIndex", 1, TYPES.SHORT);\nLayout.MATERIAL_ENABLED = new Attribute("materialEnabled", 1, TYPES.UNSIGNED_SHORT);\nLayout.AMBIENT = new Attribute("ambient", 3, TYPES.FLOAT);\nLayout.DIFFUSE = new Attribute("diffuse", 3, TYPES.FLOAT);\nLayout.SPECULAR = new Attribute("specular", 3, TYPES.FLOAT);\nLayout.SPECULAR_EXPONENT = new Attribute("specularExponent", 3, TYPES.FLOAT);\nLayout.EMISSIVE = new Attribute("emissive", 3, TYPES.FLOAT);\nLayout.TRANSMISSION_FILTER = new Attribute("transmissionFilter", 3, TYPES.FLOAT);\nLayout.DISSOLVE = new Attribute("dissolve", 1, TYPES.FLOAT);\nLayout.ILLUMINATION = new Attribute("illumination", 1, TYPES.UNSIGNED_SHORT);\nLayout.REFRACTION_INDEX = new Attribute("refractionIndex", 1, TYPES.FLOAT);\nLayout.SHARPNESS = new Attribute("sharpness", 1, TYPES.FLOAT);\nLayout.MAP_DIFFUSE = new Attribute("mapDiffuse", 1, TYPES.SHORT);\nLayout.MAP_AMBIENT = new Attribute("mapAmbient", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR = new Attribute("mapSpecular", 1, TYPES.SHORT);\nLayout.MAP_SPECULAR_EXPONENT = new Attribute("mapSpecularExponent", 1, TYPES.SHORT);\nLayout.MAP_DISSOLVE = new Attribute("mapDissolve", 1, TYPES.SHORT);\nLayout.ANTI_ALIASING = new Attribute("antiAliasing", 1, TYPES.UNSIGNED_SHORT);\nLayout.MAP_BUMP = new Attribute("mapBump", 1, TYPES.SHORT);\nLayout.MAP_DISPLACEMENT = new Attribute("mapDisplacement", 1, TYPES.SHORT);\nLayout.MAP_DECAL = new Attribute("mapDecal", 1, TYPES.SHORT);\nLayout.MAP_EMISSIVE = new Attribute("mapEmissive", 1, TYPES.SHORT);\n\n\n//# sourceURL=webpack:///./src/layout.ts?')},"./src/material.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Material", function() { return Material; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialLibrary", function() { return MaterialLibrary; });\n/**\n * The Material class.\n */\nclass Material {\n    constructor(name) {\n        this.name = name;\n        /**\n         * Constructor\n         * @param {String} name the unique name of the material\n         */\n        // The values for the following attibutes\n        // are an array of R, G, B normalized values.\n        // Ka - Ambient Reflectivity\n        this.ambient = [0, 0, 0];\n        // Kd - Defuse Reflectivity\n        this.diffuse = [0, 0, 0];\n        // Ks\n        this.specular = [0, 0, 0];\n        // Ke\n        this.emissive = [0, 0, 0];\n        // Tf\n        this.transmissionFilter = [0, 0, 0];\n        // d\n        this.dissolve = 0;\n        // valid range is between 0 and 1000\n        this.specularExponent = 0;\n        // either d or Tr; valid values are normalized\n        this.transparency = 0;\n        // illum - the enum of the illumination model to use\n        this.illumination = 0;\n        // Ni - Set to "normal" (air).\n        this.refractionIndex = 1;\n        // sharpness\n        this.sharpness = 0;\n        // map_Kd\n        this.mapDiffuse = emptyTextureOptions();\n        // map_Ka\n        this.mapAmbient = emptyTextureOptions();\n        // map_Ks\n        this.mapSpecular = emptyTextureOptions();\n        // map_Ns\n        this.mapSpecularExponent = emptyTextureOptions();\n        // map_d\n        this.mapDissolve = emptyTextureOptions();\n        // map_aat\n        this.antiAliasing = false;\n        // map_bump or bump\n        this.mapBump = emptyTextureOptions();\n        // disp\n        this.mapDisplacement = emptyTextureOptions();\n        // decal\n        this.mapDecal = emptyTextureOptions();\n        // map_Ke\n        this.mapEmissive = emptyTextureOptions();\n        // refl - when the reflection type is a cube, there will be multiple refl\n        //        statements for each side of the cube. If it\'s a spherical\n        //        reflection, there should only ever be one.\n        this.mapReflections = [];\n    }\n}\nconst SENTINEL_MATERIAL = new Material("sentinel");\n/**\n * https://en.wikipedia.org/wiki/Wavefront_.obj_file\n * http://paulbourke.net/dataformats/mtl/\n */\nclass MaterialLibrary {\n    constructor(data) {\n        this.data = data;\n        /**\n         * Constructs the Material Parser\n         * @param mtlData the MTL file contents\n         */\n        this.currentMaterial = SENTINEL_MATERIAL;\n        this.materials = {};\n        this.parse();\n    }\n    /* eslint-disable camelcase */\n    /* the function names here disobey camelCase conventions\n     to make parsing/routing easier. see the parse function\n     documentation for more information. */\n    /**\n     * Creates a new Material object and adds to the registry.\n     * @param tokens the tokens associated with the directive\n     */\n    parse_newmtl(tokens) {\n        const name = tokens[0];\n        // console.info(\'Parsing new Material:\', name);\n        this.currentMaterial = new Material(name);\n        this.materials[name] = this.currentMaterial;\n    }\n    /**\n     * See the documenation for parse_Ka below for a better understanding.\n     *\n     * Given a list of possible color tokens, returns an array of R, G, and B\n     * color values.\n     *\n     * @param tokens the tokens associated with the directive\n     * @return {*} a 3 element array containing the R, G, and B values\n     * of the color.\n     */\n    parseColor(tokens) {\n        if (tokens[0] == "spectral") {\n            throw new Error("The MTL parser does not support spectral curve files. You will " +\n                "need to convert the MTL colors to either RGB or CIEXYZ.");\n        }\n        if (tokens[0] == "xyz") {\n            throw new Error("The MTL parser does not currently support XYZ colors. Either convert the " +\n                "XYZ values to RGB or create an issue to add support for XYZ");\n        }\n        // from my understanding of the spec, RGB values at this point\n        // will either be 3 floats or exactly 1 float, so that\'s the check\n        // that i\'m going to perform here\n        if (tokens.length == 3) {\n            const [x, y, z] = tokens;\n            return [parseFloat(x), parseFloat(y), parseFloat(z)];\n        }\n        // Since tokens at this point has a length of 3, we\'re going to assume\n        // it\'s exactly 1, skipping the check for 2.\n        const value = parseFloat(tokens[0]);\n        // in this case, all values are equivalent\n        return [value, value, value];\n    }\n    /**\n     * Parse the ambient reflectivity\n     *\n     * A Ka directive can take one of three forms:\n     *   - Ka r g b\n     *   - Ka spectral file.rfl\n     *   - Ka xyz x y z\n     * These three forms are mutually exclusive in that only one\n     * declaration can exist per material. It is considered a syntax\n     * error otherwise.\n     *\n     * The "Ka" form specifies the ambient reflectivity using RGB values.\n     * The "g" and "b" values are optional. If only the "r" value is\n     * specified, then the "g" and "b" values are assigned the value of\n     * "r". Values are normally in the range 0.0 to 1.0. Values outside\n     * of this range increase or decrease the reflectivity accordingly.\n     *\n     * The "Ka spectral" form specifies the ambient reflectivity using a\n     * spectral curve. "file.rfl" is the name of the ".rfl" file containing\n     * the curve data. "factor" is an optional argument which is a multiplier\n     * for the values in the .rfl file and defaults to 1.0 if not specified.\n     *\n     * The "Ka xyz" form specifies the ambient reflectivity using CIEXYZ values.\n     * "x y z" are the values of the CIEXYZ color space. The "y" and "z" arguments\n     * are optional and take on the value of the "x" component if only "x" is\n     * specified. The "x y z" values are normally in the range of 0.0 to 1.0 and\n     * increase or decrease ambient reflectivity accordingly outside of that\n     * range.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ka(tokens) {\n        this.currentMaterial.ambient = this.parseColor(tokens);\n    }\n    /**\n     * Diffuse Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ka" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Kd(tokens) {\n        this.currentMaterial.diffuse = this.parseColor(tokens);\n    }\n    /**\n     * Spectral Reflectivity\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Kd" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ks(tokens) {\n        this.currentMaterial.specular = this.parseColor(tokens);\n    }\n    /**\n     * Emissive\n     *\n     * The amount and color of light emitted by the object.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ke(tokens) {\n        this.currentMaterial.emissive = this.parseColor(tokens);\n    }\n    /**\n     * Transmission Filter\n     *\n     * Any light passing through the object is filtered by the transmission\n     * filter, which only allows specific colors to pass through. For example, Tf\n     * 0 1 0 allows all of the green to pass through and filters out all of the\n     * red and blue.\n     *\n     * Similar to the Ka directive. Simply replace "Ks" with "Tf" and the rules\n     * are the same\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Tf(tokens) {\n        this.currentMaterial.transmissionFilter = this.parseColor(tokens);\n    }\n    /**\n     * Specifies the dissolve for the current material.\n     *\n     * Statement: d [-halo] `factor`\n     *\n     * Example: "d 0.5"\n     *\n     * The factor is the amount this material dissolves into the background. A\n     * factor of 1.0 is fully opaque. This is the default when a new material is\n     * created. A factor of 0.0 is fully dissolved (completely transparent).\n     *\n     * Unlike a real transparent material, the dissolve does not depend upon\n     * material thickness nor does it have any spectral character. Dissolve works\n     * on all illumination models.\n     *\n     * The dissolve statement allows for an optional "-halo" flag which indicates\n     * that a dissolve is dependent on the surface orientation relative to the\n     * viewer. For example, a sphere with the following dissolve, "d -halo 0.0",\n     * will be fully dissolved at its center and will appear gradually more opaque\n     * toward its edge.\n     *\n     * "factor" is the minimum amount of dissolve applied to the material. The\n     * amount of dissolve will vary between 1.0 (fully opaque) and the specified\n     * "factor". The formula is:\n     *\n     *    dissolve = 1.0 - (N*v)(1.0-factor)\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_d(tokens) {\n        // this ignores the -halo option as I can\'t find any documentation on what\n        // it\'s supposed to be.\n        this.currentMaterial.dissolve = parseFloat(tokens.pop() || "0");\n    }\n    /**\n     * The "illum" statement specifies the illumination model to use in the\n     * material. Illumination models are mathematical equations that represent\n     * various material lighting and shading effects.\n     *\n     * The illumination number can be a number from 0 to 10. The following are\n     * the list of illumination enumerations and their summaries:\n     * 0. Color on and Ambient off\n     * 1. Color on and Ambient on\n     * 2. Highlight on\n     * 3. Reflection on and Ray trace on\n     * 4. Transparency: Glass on, Reflection: Ray trace on\n     * 5. Reflection: Fresnel on and Ray trace on\n     * 6. Transparency: Refraction on, Reflection: Fresnel off and Ray trace on\n     * 7. Transparency: Refraction on, Reflection: Fresnel on and Ray trace on\n     * 8. Reflection on and Ray trace off\n     * 9. Transparency: Glass on, Reflection: Ray trace off\n     * 10. Casts shadows onto invisible surfaces\n     *\n     * Example: "illum 2" to specify the "Highlight on" model\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_illum(tokens) {\n        this.currentMaterial.illumination = parseInt(tokens[0]);\n    }\n    /**\n     * Optical Density (AKA Index of Refraction)\n     *\n     * Statement: Ni `index`\n     *\n     * Example: Ni 1.0\n     *\n     * Specifies the optical density for the surface. `index` is the value\n     * for the optical density. The values can range from 0.001 to 10.  A value of\n     * 1.0 means that light does not bend as it passes through an object.\n     * Increasing the optical_density increases the amount of bending. Glass has\n     * an index of refraction of about 1.5. Values of less than 1.0 produce\n     * bizarre results and are not recommended\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ni(tokens) {\n        this.currentMaterial.refractionIndex = parseFloat(tokens[0]);\n    }\n    /**\n     * Specifies the specular exponent for the current material. This defines the\n     * focus of the specular highlight.\n     *\n     * Statement: Ns `exponent`\n     *\n     * Example: "Ns 250"\n     *\n     * `exponent` is the value for the specular exponent. A high exponent results\n     * in a tight, concentrated highlight. Ns Values normally range from 0 to\n     * 1000.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_Ns(tokens) {\n        this.currentMaterial.specularExponent = parseInt(tokens[0]);\n    }\n    /**\n     * Specifies the sharpness of the reflections from the local reflection map.\n     *\n     * Statement: sharpness `value`\n     *\n     * Example: "sharpness 100"\n     *\n     * If a material does not have a local reflection map defined in its material\n     * defintions, sharpness will apply to the global reflection map defined in\n     * PreView.\n     *\n     * `value` can be a number from 0 to 1000. The default is 60. A high value\n     * results in a clear reflection of objects in the reflection map.\n     *\n     * Tip: sharpness values greater than 100 introduce aliasing effects in\n     * flat surfaces that are viewed at a sharp angle.\n     *\n     * @param tokens the tokens associated with the directive\n     */\n    parse_sharpness(tokens) {\n        this.currentMaterial.sharpness = parseInt(tokens[0]);\n    }\n    /**\n     * Parses the -cc flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -cc flag\n     * @param options the Object of all image options\n     */\n    parse_cc(values, options) {\n        options.colorCorrection = values[0] == "on";\n    }\n    /**\n     * Parses the -blendu flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendu flag\n     * @param options the Object of all image options\n     */\n    parse_blendu(values, options) {\n        options.horizontalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -blendv flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -blendv flag\n     * @param options the Object of all image options\n     */\n    parse_blendv(values, options) {\n        options.verticalBlending = values[0] == "on";\n    }\n    /**\n     * Parses the -boost flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -boost flag\n     * @param options the Object of all image options\n     */\n    parse_boost(values, options) {\n        options.boostMipMapSharpness = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -mm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -mm flag\n     * @param options the Object of all image options\n     */\n    parse_mm(values, options) {\n        options.modifyTextureMap.brightness = parseFloat(values[0]);\n        options.modifyTextureMap.contrast = parseFloat(values[1]);\n    }\n    /**\n     * Parses and sets the -o, -s, and -t  u, v, and w values\n     *\n     * @param values the values passed to the -o, -s, -t flag\n     * @param {Object} option the Object of either the -o, -s, -t option\n     * @param {Integer} defaultValue the Object of all image options\n     */\n    parse_ost(values, option, defaultValue) {\n        while (values.length < 3) {\n            values.push(defaultValue.toString());\n        }\n        option.u = parseFloat(values[0]);\n        option.v = parseFloat(values[1]);\n        option.w = parseFloat(values[2]);\n    }\n    /**\n     * Parses the -o flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -o flag\n     * @param options the Object of all image options\n     */\n    parse_o(values, options) {\n        this.parse_ost(values, options.offset, 0);\n    }\n    /**\n     * Parses the -s flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -s flag\n     * @param options the Object of all image options\n     */\n    parse_s(values, options) {\n        this.parse_ost(values, options.scale, 1);\n    }\n    /**\n     * Parses the -t flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -t flag\n     * @param options the Object of all image options\n     */\n    parse_t(values, options) {\n        this.parse_ost(values, options.turbulence, 0);\n    }\n    /**\n     * Parses the -texres flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -texres flag\n     * @param options the Object of all image options\n     */\n    parse_texres(values, options) {\n        options.textureResolution = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -clamp flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -clamp flag\n     * @param options the Object of all image options\n     */\n    parse_clamp(values, options) {\n        options.clamp = values[0] == "on";\n    }\n    /**\n     * Parses the -bm flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -bm flag\n     * @param options the Object of all image options\n     */\n    parse_bm(values, options) {\n        options.bumpMultiplier = parseFloat(values[0]);\n    }\n    /**\n     * Parses the -imfchan flag and updates the options object with the values.\n     *\n     * @param values the values passed to the -imfchan flag\n     * @param options the Object of all image options\n     */\n    parse_imfchan(values, options) {\n        options.imfChan = values[0];\n    }\n    /**\n     * This only exists for relection maps and denotes the type of reflection.\n     *\n     * @param values the values passed to the -type flag\n     * @param options the Object of all image options\n     */\n    parse_type(values, options) {\n        options.reflectionType = values[0];\n    }\n    /**\n     * Parses the texture\'s options and returns an options object with the info\n     *\n     * @param tokens all of the option tokens to pass to the texture\n     * @return {Object} a complete object of objects to apply to the texture\n     */\n    parseOptions(tokens) {\n        const options = emptyTextureOptions();\n        let option;\n        let values;\n        const optionsToValues = {};\n        tokens.reverse();\n        while (tokens.length) {\n            // token is guaranteed to exists here, hence the explicit "as"\n            const token = tokens.pop();\n            if (token.startsWith("-")) {\n                option = token.substr(1);\n                optionsToValues[option] = [];\n            }\n            else if (option) {\n                optionsToValues[option].push(token);\n            }\n        }\n        for (option in optionsToValues) {\n            if (!optionsToValues.hasOwnProperty(option)) {\n                continue;\n            }\n            values = optionsToValues[option];\n            const optionMethod = this[`parse_${option}`];\n            if (optionMethod) {\n                optionMethod.bind(this)(values, options);\n            }\n        }\n        return options;\n    }\n    /**\n     * Parses the given texture map line.\n     *\n     * @param tokens all of the tokens representing the texture\n     * @return a complete object of objects to apply to the texture\n     */\n    parseMap(tokens) {\n        // according to wikipedia:\n        // (https://en.wikipedia.org/wiki/Wavefront_.obj_file#Vendor_specific_alterations)\n        // there is at least one vendor that places the filename before the options\n        // rather than after (which is to spec). All options start with a \'-\'\n        // so if the first token doesn\'t start with a \'-\', we\'re going to assume\n        // it\'s the name of the map file.\n        let optionsString;\n        let filename = "";\n        if (!tokens[0].startsWith("-")) {\n            [filename, ...optionsString] = tokens;\n        }\n        else {\n            filename = tokens.pop();\n            optionsString = tokens;\n        }\n        const options = this.parseOptions(optionsString);\n        options.filename = filename.replace(/\\\\/g, "/");\n        return options;\n    }\n    /**\n     * Parses the ambient map.\n     *\n     * @param tokens list of tokens for the map_Ka direcive\n     */\n    parse_map_Ka(tokens) {\n        this.currentMaterial.mapAmbient = this.parseMap(tokens);\n    }\n    /**\n     * Parses the diffuse map.\n     *\n     * @param tokens list of tokens for the map_Kd direcive\n     */\n    parse_map_Kd(tokens) {\n        this.currentMaterial.mapDiffuse = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular map.\n     *\n     * @param tokens list of tokens for the map_Ks direcive\n     */\n    parse_map_Ks(tokens) {\n        this.currentMaterial.mapSpecular = this.parseMap(tokens);\n    }\n    /**\n     * Parses the emissive map.\n     *\n     * @param tokens list of tokens for the map_Ke direcive\n     */\n    parse_map_Ke(tokens) {\n        this.currentMaterial.mapEmissive = this.parseMap(tokens);\n    }\n    /**\n     * Parses the specular exponent map.\n     *\n     * @param tokens list of tokens for the map_Ns direcive\n     */\n    parse_map_Ns(tokens) {\n        this.currentMaterial.mapSpecularExponent = this.parseMap(tokens);\n    }\n    /**\n     * Parses the dissolve map.\n     *\n     * @param tokens list of tokens for the map_d direcive\n     */\n    parse_map_d(tokens) {\n        this.currentMaterial.mapDissolve = this.parseMap(tokens);\n    }\n    /**\n     * Parses the anti-aliasing option.\n     *\n     * @param tokens list of tokens for the map_aat direcive\n     */\n    parse_map_aat(tokens) {\n        this.currentMaterial.antiAliasing = tokens[0] == "on";\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the map_bump direcive\n     */\n    parse_map_bump(tokens) {\n        this.currentMaterial.mapBump = this.parseMap(tokens);\n    }\n    /**\n     * Parses the bump map.\n     *\n     * @param tokens list of tokens for the bump direcive\n     */\n    parse_bump(tokens) {\n        this.parse_map_bump(tokens);\n    }\n    /**\n     * Parses the disp map.\n     *\n     * @param tokens list of tokens for the disp direcive\n     */\n    parse_disp(tokens) {\n        this.currentMaterial.mapDisplacement = this.parseMap(tokens);\n    }\n    /**\n     * Parses the decal map.\n     *\n     * @param tokens list of tokens for the map_decal direcive\n     */\n    parse_decal(tokens) {\n        this.currentMaterial.mapDecal = this.parseMap(tokens);\n    }\n    /**\n     * Parses the refl map.\n     *\n     * @param tokens list of tokens for the refl direcive\n     */\n    parse_refl(tokens) {\n        this.currentMaterial.mapReflections.push(this.parseMap(tokens));\n    }\n    /**\n     * Parses the MTL file.\n     *\n     * Iterates line by line parsing each MTL directive.\n     *\n     * This function expects the first token in the line\n     * to be a valid MTL directive. That token is then used\n     * to try and run a method on this class. parse_[directive]\n     * E.g., the `newmtl` directive would try to call the method\n     * parse_newmtl. Each parsing function takes in the remaining\n     * list of tokens and updates the currentMaterial class with\n     * the attributes provided.\n     */\n    parse() {\n        const lines = this.data.split(/\\r?\\n/);\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const [directive, ...tokens] = line.split(/\\s/);\n            const parseMethod = this[`parse_${directive}`];\n            if (!parseMethod) {\n                console.warn(`Don\'t know how to parse the directive: "${directive}"`);\n                continue;\n            }\n            // console.log(`Parsing "${directive}" with tokens: ${tokens}`);\n            parseMethod.bind(this)(tokens);\n        }\n        // some cleanup. These don\'t need to be exposed as public data.\n        delete this.data;\n        this.currentMaterial = SENTINEL_MATERIAL;\n    }\n}\nfunction emptyTextureOptions() {\n    return {\n        colorCorrection: false,\n        horizontalBlending: true,\n        verticalBlending: true,\n        boostMipMapSharpness: 0,\n        modifyTextureMap: {\n            brightness: 0,\n            contrast: 1,\n        },\n        offset: { u: 0, v: 0, w: 0 },\n        scale: { u: 1, v: 1, w: 1 },\n        turbulence: { u: 0, v: 0, w: 0 },\n        clamp: false,\n        textureResolution: null,\n        bumpMultiplier: 1,\n        imfChan: null,\n        filename: "",\n    };\n}\n\n\n//# sourceURL=webpack:///./src/material.ts?')},"./src/mesh.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Mesh; });\n/* harmony import */ var _layout__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layout */ "./src/layout.ts");\n\n/**\n * The main Mesh class. The constructor will parse through the OBJ file data\n * and collect the vertex, vertex normal, texture, and face information. This\n * information can then be used later on when creating your VBOs. See\n * OBJ.initMeshBuffers for an example of how to use the newly created Mesh\n */\nclass Mesh {\n    /**\n     * Create a Mesh\n     * @param {String} objectData - a string representation of an OBJ file with\n     *     newlines preserved.\n     * @param {Object} options - a JS object containing valid options. See class\n     *     documentation for options.\n     * @param {bool} options.enableWTextureCoord - Texture coordinates can have\n     *     an optional "w" coordinate after the u and v coordinates. This extra\n     *     value can be used in order to perform fancy transformations on the\n     *     textures themselves. Default is to truncate to only the u an v\n     *     coordinates. Passing true will provide a default value of 0 in the\n     *     event that any or all texture coordinates don\'t provide a w value.\n     *     Always use the textureStride attribute in order to determine the\n     *     stride length of the texture coordinates when rendering the element\n     *     array.\n     * @param {bool} options.calcTangentsAndBitangents - Calculate the tangents\n     *     and bitangents when loading of the OBJ is completed. This adds two new\n     *     attributes to the Mesh instance: `tangents` and `bitangents`.\n     */\n    constructor(objectData, options) {\n        this.name = "";\n        this.indicesPerMaterial = [];\n        this.materialsByIndex = {};\n        this.tangents = [];\n        this.bitangents = [];\n        options = options || {};\n        options.materials = options.materials || {};\n        options.enableWTextureCoord = !!options.enableWTextureCoord;\n        // the list of unique vertex, normal, texture, attributes\n        this.vertexNormals = [];\n        this.textures = [];\n        // the indicies to draw the faces\n        this.indices = [];\n        this.textureStride = options.enableWTextureCoord ? 3 : 2;\n        /*\n        The OBJ file format does a sort of compression when saving a model in a\n        program like Blender. There are at least 3 sections (4 including textures)\n        within the file. Each line in a section begins with the same string:\n          * \'v\': indicates vertex section\n          * \'vn\': indicates vertex normal section\n          * \'f\': indicates the faces section\n          * \'vt\': indicates vertex texture section (if textures were used on the model)\n        Each of the above sections (except for the faces section) is a list/set of\n        unique vertices.\n\n        Each line of the faces section contains a list of\n        (vertex, [texture], normal) groups.\n\n        **Note:** The following documentation will use a capital "V" Vertex to\n        denote the above (vertex, [texture], normal) groups whereas a lowercase\n        "v" vertex is used to denote an X, Y, Z coordinate.\n\n        Some examples:\n            // the texture index is optional, both formats are possible for models\n            // without a texture applied\n            f 1/25 18/46 12/31\n            f 1//25 18//46 12//31\n\n            // A 3 vertex face with texture indices\n            f 16/92/11 14/101/22 1/69/1\n\n            // A 4 vertex face\n            f 16/92/11 40/109/40 38/114/38 14/101/22\n\n        The first two lines are examples of a 3 vertex face without a texture applied.\n        The second is an example of a 3 vertex face with a texture applied.\n        The third is an example of a 4 vertex face. Note: a face can contain N\n        number of vertices.\n\n        Each number that appears in one of the groups is a 1-based index\n        corresponding to an item from the other sections (meaning that indexing\n        starts at one and *not* zero).\n\n        For example:\n            `f 16/92/11` is saying to\n              - take the 16th element from the [v] vertex array\n              - take the 92nd element from the [vt] texture array\n              - take the 11th element from the [vn] normal array\n            and together they make a unique vertex.\n        Using all 3+ unique Vertices from the face line will produce a polygon.\n\n        Now, you could just go through the OBJ file and create a new vertex for\n        each face line and WebGL will draw what appears to be the same model.\n        However, vertices will be overlapped and duplicated all over the place.\n\n        Consider a cube in 3D space centered about the origin and each side is\n        2 units long. The front face (with the positive Z-axis pointing towards\n        you) would have a Top Right vertex (looking orthogonal to its normal)\n        mapped at (1,1,1) The right face would have a Top Left vertex (looking\n        orthogonal to its normal) at (1,1,1) and the top face would have a Bottom\n        Right vertex (looking orthogonal to its normal) at (1,1,1). Each face\n        has a vertex at the same coordinates, however, three distinct vertices\n        will be drawn at the same spot.\n\n        To solve the issue of duplicate Vertices (the `(vertex, [texture], normal)`\n        groups), while iterating through the face lines, when a group is encountered\n        the whole group string (\'16/92/11\') is checked to see if it exists in the\n        packed.hashindices object, and if it doesn\'t, the indices it specifies\n        are used to look up each attribute in the corresponding attribute arrays\n        already created. The values are then copied to the corresponding unpacked\n        array (flattened to play nice with WebGL\'s ELEMENT_ARRAY_BUFFER indexing),\n        the group string is added to the hashindices set and the current unpacked\n        index is used as this hashindices value so that the group of elements can\n        be reused. The unpacked index is incremented. If the group string already\n        exists in the hashindices object, its corresponding value is the index of\n        that group and is appended to the unpacked indices array.\n       */\n        const verts = [];\n        const vertNormals = [];\n        const textures = [];\n        const materialNamesByIndex = [];\n        const materialIndicesByName = {};\n        // keep track of what material we\'ve seen last\n        let currentMaterialIndex = -1;\n        let currentObjectByMaterialIndex = 0;\n        // unpacking stuff\n        const unpacked = {\n            verts: [],\n            norms: [],\n            textures: [],\n            hashindices: {},\n            indices: [[]],\n            materialIndices: [],\n            index: 0,\n        };\n        const VERTEX_RE = /^v\\s/;\n        const NORMAL_RE = /^vn\\s/;\n        const TEXTURE_RE = /^vt\\s/;\n        const FACE_RE = /^f\\s/;\n        const WHITESPACE_RE = /\\s+/;\n        const USE_MATERIAL_RE = /^usemtl/;\n        // array of lines separated by the newline\n        const lines = objectData.split("\\n");\n        for (let line of lines) {\n            line = line.trim();\n            if (!line || line.startsWith("#")) {\n                continue;\n            }\n            const elements = line.split(WHITESPACE_RE);\n            elements.shift();\n            if (VERTEX_RE.test(line)) {\n                // if this is a vertex\n                verts.push(...elements);\n            }\n            else if (NORMAL_RE.test(line)) {\n                // if this is a vertex normal\n                vertNormals.push(...elements);\n            }\n            else if (TEXTURE_RE.test(line)) {\n                let coords = elements;\n                // by default, the loader will only look at the U and V\n                // coordinates of the vt declaration. So, this truncates the\n                // elements to only those 2 values. If W texture coordinate\n                // support is enabled, then the texture coordinate is\n                // expected to have three values in it.\n                if (elements.length > 2 && !options.enableWTextureCoord) {\n                    coords = elements.slice(0, 2);\n                }\n                else if (elements.length === 2 && options.enableWTextureCoord) {\n                    // If for some reason W texture coordinate support is enabled\n                    // and only the U and V coordinates are given, then we supply\n                    // the default value of 0 so that the stride length is correct\n                    // when the textures are unpacked below.\n                    coords.push("0");\n                }\n                textures.push(...coords);\n            }\n            else if (USE_MATERIAL_RE.test(line)) {\n                const materialName = elements[0];\n                // check to see if we\'ve ever seen it before\n                if (!(materialName in materialIndicesByName)) {\n                    // new material we\'ve never seen\n                    materialNamesByIndex.push(materialName);\n                    materialIndicesByName[materialName] = materialNamesByIndex.length - 1;\n                    // push new array into indices\n                    // already contains an array at index zero, don\'t add\n                    if (materialIndicesByName[materialName] > 0) {\n                        unpacked.indices.push([]);\n                    }\n                }\n                // keep track of the current material index\n                currentMaterialIndex = materialIndicesByName[materialName];\n                // update current index array\n                currentObjectByMaterialIndex = currentMaterialIndex;\n            }\n            else if (FACE_RE.test(line)) {\n                // if this is a face\n                /*\n                split this face into an array of Vertex groups\n                for example:\n                   f 16/92/11 14/101/22 1/69/1\n                becomes:\n                  [\'16/92/11\', \'14/101/22\', \'1/69/1\'];\n                */\n                const triangles = triangulate(elements);\n                for (const triangle of triangles) {\n                    for (let j = 0, eleLen = triangle.length; j < eleLen; j++) {\n                        const hash = triangle[j] + "," + currentMaterialIndex;\n                        if (hash in unpacked.hashindices) {\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                        }\n                        else {\n                            /*\n                        Each element of the face line array is a Vertex which has its\n                        attributes delimited by a forward slash. This will separate\n                        each attribute into another array:\n                            \'19/92/11\'\n                        becomes:\n                            Vertex = [\'19\', \'92\', \'11\'];\n                        where\n                            Vertex[0] is the vertex index\n                            Vertex[1] is the texture index\n                            Vertex[2] is the normal index\n                         Think of faces having Vertices which are comprised of the\n                         attributes location (v), texture (vt), and normal (vn).\n                         */\n                            const vertex = triangle[j].split("/");\n                            // it\'s possible for faces to only specify the vertex\n                            // and the normal. In this case, vertex will only have\n                            // a length of 2 and not 3 and the normal will be the\n                            // second item in the list with an index of 1.\n                            const normalIndex = vertex.length - 1;\n                            /*\n                         The verts, textures, and vertNormals arrays each contain a\n                         flattend array of coordinates.\n\n                         Because it gets confusing by referring to Vertex and then\n                         vertex (both are different in my descriptions) I will explain\n                         what\'s going on using the vertexNormals array:\n\n                         vertex[2] will contain the one-based index of the vertexNormals\n                         section (vn). One is subtracted from this index number to play\n                         nice with javascript\'s zero-based array indexing.\n\n                         Because vertexNormal is a flattened array of x, y, z values,\n                         simple pointer arithmetic is used to skip to the start of the\n                         vertexNormal, then the offset is added to get the correct\n                         component: +0 is x, +1 is y, +2 is z.\n\n                         This same process is repeated for verts and textures.\n                         */\n                            // Vertex position\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 0]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 1]);\n                            unpacked.verts.push(+verts[(+vertex[0] - 1) * 3 + 2]);\n                            // Vertex textures\n                            if (textures.length) {\n                                const stride = options.enableWTextureCoord ? 3 : 2;\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 0]);\n                                unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 1]);\n                                if (options.enableWTextureCoord) {\n                                    unpacked.textures.push(+textures[(+vertex[1] - 1) * stride + 2]);\n                                }\n                            }\n                            // Vertex normals\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 0]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 1]);\n                            unpacked.norms.push(+vertNormals[(+vertex[normalIndex] - 1) * 3 + 2]);\n                            // Vertex material indices\n                            unpacked.materialIndices.push(currentMaterialIndex);\n                            // add the newly created Vertex to the list of indices\n                            unpacked.hashindices[hash] = unpacked.index;\n                            unpacked.indices[currentObjectByMaterialIndex].push(unpacked.hashindices[hash]);\n                            // increment the counter\n                            unpacked.index += 1;\n                        }\n                    }\n                }\n            }\n        }\n        this.vertices = unpacked.verts;\n        this.vertexNormals = unpacked.norms;\n        this.textures = unpacked.textures;\n        this.vertexMaterialIndices = unpacked.materialIndices;\n        this.indices = unpacked.indices[currentObjectByMaterialIndex];\n        this.indicesPerMaterial = unpacked.indices;\n        this.materialNames = materialNamesByIndex;\n        this.materialIndices = materialIndicesByName;\n        this.materialsByIndex = {};\n        if (options.calcTangentsAndBitangents) {\n            this.calculateTangentsAndBitangents();\n        }\n    }\n    /**\n     * Calculates the tangents and bitangents of the mesh that forms an orthogonal basis together with the\n     * normal in the direction of the texture coordinates. These are useful for setting up the TBN matrix\n     * when distorting the normals through normal maps.\n     * Method derived from: http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/\n     *\n     * This method requires the normals and texture coordinates to be parsed and set up correctly.\n     * Adds the tangents and bitangents as members of the class instance.\n     */\n    calculateTangentsAndBitangents() {\n        console.assert(!!(this.vertices &&\n            this.vertices.length &&\n            this.vertexNormals &&\n            this.vertexNormals.length &&\n            this.textures &&\n            this.textures.length), "Missing attributes for calculating tangents and bitangents");\n        const unpacked = {\n            tangents: [...new Array(this.vertices.length)].map(_ => 0),\n            bitangents: [...new Array(this.vertices.length)].map(_ => 0),\n        };\n        // Loop through all faces in the whole mesh\n        const indices = this.indices;\n        const vertices = this.vertices;\n        const normals = this.vertexNormals;\n        const uvs = this.textures;\n        for (let i = 0; i < indices.length; i += 3) {\n            const i0 = indices[i + 0];\n            const i1 = indices[i + 1];\n            const i2 = indices[i + 2];\n            const x_v0 = vertices[i0 * 3 + 0];\n            const y_v0 = vertices[i0 * 3 + 1];\n            const z_v0 = vertices[i0 * 3 + 2];\n            const x_uv0 = uvs[i0 * 2 + 0];\n            const y_uv0 = uvs[i0 * 2 + 1];\n            const x_v1 = vertices[i1 * 3 + 0];\n            const y_v1 = vertices[i1 * 3 + 1];\n            const z_v1 = vertices[i1 * 3 + 2];\n            const x_uv1 = uvs[i1 * 2 + 0];\n            const y_uv1 = uvs[i1 * 2 + 1];\n            const x_v2 = vertices[i2 * 3 + 0];\n            const y_v2 = vertices[i2 * 3 + 1];\n            const z_v2 = vertices[i2 * 3 + 2];\n            const x_uv2 = uvs[i2 * 2 + 0];\n            const y_uv2 = uvs[i2 * 2 + 1];\n            const x_deltaPos1 = x_v1 - x_v0;\n            const y_deltaPos1 = y_v1 - y_v0;\n            const z_deltaPos1 = z_v1 - z_v0;\n            const x_deltaPos2 = x_v2 - x_v0;\n            const y_deltaPos2 = y_v2 - y_v0;\n            const z_deltaPos2 = z_v2 - z_v0;\n            const x_uvDeltaPos1 = x_uv1 - x_uv0;\n            const y_uvDeltaPos1 = y_uv1 - y_uv0;\n            const x_uvDeltaPos2 = x_uv2 - x_uv0;\n            const y_uvDeltaPos2 = y_uv2 - y_uv0;\n            const rInv = x_uvDeltaPos1 * y_uvDeltaPos2 - y_uvDeltaPos1 * x_uvDeltaPos2;\n            const r = 1.0 / Math.abs(rInv < 0.0001 ? 1.0 : rInv);\n            // Tangent\n            const x_tangent = (x_deltaPos1 * y_uvDeltaPos2 - x_deltaPos2 * y_uvDeltaPos1) * r;\n            const y_tangent = (y_deltaPos1 * y_uvDeltaPos2 - y_deltaPos2 * y_uvDeltaPos1) * r;\n            const z_tangent = (z_deltaPos1 * y_uvDeltaPos2 - z_deltaPos2 * y_uvDeltaPos1) * r;\n            // Bitangent\n            const x_bitangent = (x_deltaPos2 * x_uvDeltaPos1 - x_deltaPos1 * x_uvDeltaPos2) * r;\n            const y_bitangent = (y_deltaPos2 * x_uvDeltaPos1 - y_deltaPos1 * x_uvDeltaPos2) * r;\n            const z_bitangent = (z_deltaPos2 * x_uvDeltaPos1 - z_deltaPos1 * x_uvDeltaPos2) * r;\n            // Gram-Schmidt orthogonalize\n            //t = glm::normalize(t - n * glm:: dot(n, t));\n            const x_n0 = normals[i0 * 3 + 0];\n            const y_n0 = normals[i0 * 3 + 1];\n            const z_n0 = normals[i0 * 3 + 2];\n            const x_n1 = normals[i1 * 3 + 0];\n            const y_n1 = normals[i1 * 3 + 1];\n            const z_n1 = normals[i1 * 3 + 2];\n            const x_n2 = normals[i2 * 3 + 0];\n            const y_n2 = normals[i2 * 3 + 1];\n            const z_n2 = normals[i2 * 3 + 2];\n            // Tangent\n            const n0_dot_t = x_tangent * x_n0 + y_tangent * y_n0 + z_tangent * z_n0;\n            const n1_dot_t = x_tangent * x_n1 + y_tangent * y_n1 + z_tangent * z_n1;\n            const n2_dot_t = x_tangent * x_n2 + y_tangent * y_n2 + z_tangent * z_n2;\n            const x_resTangent0 = x_tangent - x_n0 * n0_dot_t;\n            const y_resTangent0 = y_tangent - y_n0 * n0_dot_t;\n            const z_resTangent0 = z_tangent - z_n0 * n0_dot_t;\n            const x_resTangent1 = x_tangent - x_n1 * n1_dot_t;\n            const y_resTangent1 = y_tangent - y_n1 * n1_dot_t;\n            const z_resTangent1 = z_tangent - z_n1 * n1_dot_t;\n            const x_resTangent2 = x_tangent - x_n2 * n2_dot_t;\n            const y_resTangent2 = y_tangent - y_n2 * n2_dot_t;\n            const z_resTangent2 = z_tangent - z_n2 * n2_dot_t;\n            const magTangent0 = Math.sqrt(x_resTangent0 * x_resTangent0 + y_resTangent0 * y_resTangent0 + z_resTangent0 * z_resTangent0);\n            const magTangent1 = Math.sqrt(x_resTangent1 * x_resTangent1 + y_resTangent1 * y_resTangent1 + z_resTangent1 * z_resTangent1);\n            const magTangent2 = Math.sqrt(x_resTangent2 * x_resTangent2 + y_resTangent2 * y_resTangent2 + z_resTangent2 * z_resTangent2);\n            // Bitangent\n            const n0_dot_bt = x_bitangent * x_n0 + y_bitangent * y_n0 + z_bitangent * z_n0;\n            const n1_dot_bt = x_bitangent * x_n1 + y_bitangent * y_n1 + z_bitangent * z_n1;\n            const n2_dot_bt = x_bitangent * x_n2 + y_bitangent * y_n2 + z_bitangent * z_n2;\n            const x_resBitangent0 = x_bitangent - x_n0 * n0_dot_bt;\n            const y_resBitangent0 = y_bitangent - y_n0 * n0_dot_bt;\n            const z_resBitangent0 = z_bitangent - z_n0 * n0_dot_bt;\n            const x_resBitangent1 = x_bitangent - x_n1 * n1_dot_bt;\n            const y_resBitangent1 = y_bitangent - y_n1 * n1_dot_bt;\n            const z_resBitangent1 = z_bitangent - z_n1 * n1_dot_bt;\n            const x_resBitangent2 = x_bitangent - x_n2 * n2_dot_bt;\n            const y_resBitangent2 = y_bitangent - y_n2 * n2_dot_bt;\n            const z_resBitangent2 = z_bitangent - z_n2 * n2_dot_bt;\n            const magBitangent0 = Math.sqrt(x_resBitangent0 * x_resBitangent0 +\n                y_resBitangent0 * y_resBitangent0 +\n                z_resBitangent0 * z_resBitangent0);\n            const magBitangent1 = Math.sqrt(x_resBitangent1 * x_resBitangent1 +\n                y_resBitangent1 * y_resBitangent1 +\n                z_resBitangent1 * z_resBitangent1);\n            const magBitangent2 = Math.sqrt(x_resBitangent2 * x_resBitangent2 +\n                y_resBitangent2 * y_resBitangent2 +\n                z_resBitangent2 * z_resBitangent2);\n            unpacked.tangents[i0 * 3 + 0] += x_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 1] += y_resTangent0 / magTangent0;\n            unpacked.tangents[i0 * 3 + 2] += z_resTangent0 / magTangent0;\n            unpacked.tangents[i1 * 3 + 0] += x_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 1] += y_resTangent1 / magTangent1;\n            unpacked.tangents[i1 * 3 + 2] += z_resTangent1 / magTangent1;\n            unpacked.tangents[i2 * 3 + 0] += x_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 1] += y_resTangent2 / magTangent2;\n            unpacked.tangents[i2 * 3 + 2] += z_resTangent2 / magTangent2;\n            unpacked.bitangents[i0 * 3 + 0] += x_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 1] += y_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i0 * 3 + 2] += z_resBitangent0 / magBitangent0;\n            unpacked.bitangents[i1 * 3 + 0] += x_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 1] += y_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i1 * 3 + 2] += z_resBitangent1 / magBitangent1;\n            unpacked.bitangents[i2 * 3 + 0] += x_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 1] += y_resBitangent2 / magBitangent2;\n            unpacked.bitangents[i2 * 3 + 2] += z_resBitangent2 / magBitangent2;\n            // TODO: check handedness\n        }\n        this.tangents = unpacked.tangents;\n        this.bitangents = unpacked.bitangents;\n    }\n    /**\n     * @param layout - A {@link Layout} object that describes the\n     * desired memory layout of the generated buffer\n     * @return The packed array in the ... TODO\n     */\n    makeBufferData(layout) {\n        const numItems = this.vertices.length / 3;\n        const buffer = new ArrayBuffer(layout.stride * numItems);\n        buffer.numItems = numItems;\n        const dataView = new DataView(buffer);\n        for (let i = 0, vertexOffset = 0; i < numItems; i++) {\n            vertexOffset = i * layout.stride;\n            // copy in the vertex data in the order and format given by the\n            // layout param\n            for (const attribute of layout.attributes) {\n                const offset = vertexOffset + layout.attributeMap[attribute.key].offset;\n                switch (attribute.key) {\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].POSITION.key:\n                        dataView.setFloat32(offset, this.vertices[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertices[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertices[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].UV.key:\n                        dataView.setFloat32(offset, this.textures[i * 2], true);\n                        dataView.setFloat32(offset + 4, this.textures[i * 2 + 1], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].NORMAL.key:\n                        dataView.setFloat32(offset, this.vertexNormals[i * 3], true);\n                        dataView.setFloat32(offset + 4, this.vertexNormals[i * 3 + 1], true);\n                        dataView.setFloat32(offset + 8, this.vertexNormals[i * 3 + 2], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].MATERIAL_INDEX.key:\n                        dataView.setInt16(offset, this.vertexMaterialIndices[i], true);\n                        break;\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].AMBIENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.ambient[0], true);\n                        dataView.setFloat32(offset + 4, material.ambient[1], true);\n                        dataView.setFloat32(offset + 8, material.ambient[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DIFFUSE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.diffuse[0], true);\n                        dataView.setFloat32(offset + 4, material.diffuse[1], true);\n                        dataView.setFloat32(offset + 8, material.diffuse[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specular[0], true);\n                        dataView.setFloat32(offset + 4, material.specular[1], true);\n                        dataView.setFloat32(offset + 8, material.specular[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SPECULAR_EXPONENT.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.specularExponent, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].EMISSIVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.emissive[0], true);\n                        dataView.setFloat32(offset + 4, material.emissive[1], true);\n                        dataView.setFloat32(offset + 8, material.emissive[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].TRANSMISSION_FILTER.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.transmissionFilter[0], true);\n                        dataView.setFloat32(offset + 4, material.transmissionFilter[1], true);\n                        dataView.setFloat32(offset + 8, material.transmissionFilter[2], true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].DISSOLVE.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.dissolve, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ILLUMINATION.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.illumination, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].REFRACTION_INDEX.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.refractionIndex, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].SHARPNESS.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setFloat32(offset, material.sharpness, true);\n                        break;\n                    }\n                    case _layout__WEBPACK_IMPORTED_MODULE_0__["Layout"].ANTI_ALIASING.key: {\n                        const materialIndex = this.vertexMaterialIndices[i];\n                        const material = this.materialsByIndex[materialIndex];\n                        if (!material) {\n                            console.warn(\'Material "\' +\n                                this.materialNames[materialIndex] +\n                                \'" not found in mesh. Did you forget to call addMaterialLibrary(...)?"\');\n                            break;\n                        }\n                        dataView.setInt16(offset, material.antiAliasing ? 1 : 0, true);\n                        break;\n                    }\n                }\n            }\n        }\n        return buffer;\n    }\n    makeIndexBufferData() {\n        const buffer = new Uint16Array(this.indices);\n        buffer.numItems = this.indices.length;\n        return buffer;\n    }\n    makeIndexBufferDataForMaterials(...materialIndices) {\n        const indices = new Array().concat(...materialIndices.map(mtlIdx => this.indicesPerMaterial[mtlIdx]));\n        const buffer = new Uint16Array(indices);\n        buffer.numItems = indices.length;\n        return buffer;\n    }\n    addMaterialLibrary(mtl) {\n        for (const name in mtl.materials) {\n            if (!(name in this.materialIndices)) {\n                // This material is not referenced by the mesh\n                continue;\n            }\n            const material = mtl.materials[name];\n            // Find the material index for this material\n            const materialIndex = this.materialIndices[material.name];\n            // Put the material into the materialsByIndex object at the right\n            // spot as determined when the obj file was parsed\n            this.materialsByIndex[materialIndex] = material;\n        }\n    }\n}\nfunction* triangulate(elements) {\n    if (elements.length <= 3) {\n        yield elements;\n    }\n    else if (elements.length === 4) {\n        yield [elements[0], elements[1], elements[2]];\n        yield [elements[2], elements[3], elements[0]];\n    }\n    else {\n        for (let i = 1; i < elements.length - 1; i++) {\n            yield [elements[0], elements[i], elements[i + 1]];\n        }\n    }\n}\n\n\n//# sourceURL=webpack:///./src/mesh.ts?')},"./src/utils.ts":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadModels", function() { return downloadModels; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "downloadMeshes", function() { return downloadMeshes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMeshBuffers", function() { return initMeshBuffers; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deleteMeshBuffers", function() { return deleteMeshBuffers; });\n/* harmony import */ var _mesh__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mesh */ "./src/mesh.ts");\n/* harmony import */ var _material__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./material */ "./src/material.ts");\n\n\nfunction downloadMtlTextures(mtl, root) {\n    const mapAttributes = [\n        "mapDiffuse",\n        "mapAmbient",\n        "mapSpecular",\n        "mapDissolve",\n        "mapBump",\n        "mapDisplacement",\n        "mapDecal",\n        "mapEmissive",\n    ];\n    if (!root.endsWith("/")) {\n        root += "/";\n    }\n    const textures = [];\n    for (const materialName in mtl.materials) {\n        if (!mtl.materials.hasOwnProperty(materialName)) {\n            continue;\n        }\n        const material = mtl.materials[materialName];\n        for (const attr of mapAttributes) {\n            const mapData = material[attr];\n            if (!mapData || !mapData.filename) {\n                continue;\n            }\n            const url = root + mapData.filename;\n            textures.push(fetch(url)\n                .then(response => {\n                if (!response.ok) {\n                    throw new Error();\n                }\n                return response.blob();\n            })\n                .then(function (data) {\n                const image = new Image();\n                image.src = URL.createObjectURL(data);\n                mapData.texture = image;\n                return new Promise(resolve => (image.onload = resolve));\n            })\n                .catch(() => {\n                console.error(`Unable to download texture: ${url}`);\n            }));\n        }\n    }\n    return Promise.all(textures);\n}\nfunction getMtl(modelOptions) {\n    if (!(typeof modelOptions.mtl === "string")) {\n        return modelOptions.obj.replace(/\\.obj$/, ".mtl");\n    }\n    return modelOptions.mtl;\n}\n/**\n * Accepts a list of model request objects and returns a Promise that\n * resolves when all models have been downloaded and parsed.\n *\n * The list of model objects follow this interface:\n * {\n *  obj: \'path/to/model.obj\',\n *  mtl: true | \'path/to/model.mtl\',\n *  downloadMtlTextures: true | false\n *  mtlTextureRoot: \'/models/suzanne/maps\'\n *  name: \'suzanne\'\n * }\n *\n * The `obj` attribute is required and should be the path to the\n * model\'s .obj file relative to the current repo (absolute URLs are\n * suggested).\n *\n * The `mtl` attribute is optional and can either be a boolean or\n * a path to the model\'s .mtl file relative to the current URL. If\n * the value is `true`, then the path and basename given for the `obj`\n * attribute is used replacing the .obj suffix for .mtl\n * E.g.: {obj: \'models/foo.obj\', mtl: true} would search for \'models/foo.mtl\'\n *\n * The `name` attribute is optional and is a human friendly name to be\n * included with the parsed OBJ and MTL files. If not given, the base .obj\n * filename will be used.\n *\n * The `downloadMtlTextures` attribute is a flag for automatically downloading\n * any images found in the MTL file and attaching them to each Material\n * created from that file. For example, if material.mapDiffuse is set (there\n * was data in the MTL file), then material.mapDiffuse.texture will contain\n * the downloaded image. This option defaults to `true`. By default, the MTL\'s\n * URL will be used to determine the location of the images.\n *\n * The `mtlTextureRoot` attribute is optional and should point to the location\n * on the server that this MTL\'s texture files are located. The default is to\n * use the MTL file\'s location.\n *\n * @returns {Promise} the result of downloading the given list of models. The\n * promise will resolve with an object whose keys are the names of the models\n * and the value is its Mesh object. Each Mesh object will automatically\n * have its addMaterialLibrary() method called to set the given MTL data (if given).\n */\nfunction downloadModels(models) {\n    const finished = [];\n    for (const model of models) {\n        if (!model.obj) {\n            throw new Error(\'"obj" attribute of model object not set. The .obj file is required to be set \' +\n                "in order to use downloadModels()");\n        }\n        const options = {\n            indicesPerMaterial: !!model.indicesPerMaterial,\n            calcTangentsAndBitangents: !!model.calcTangentsAndBitangents,\n        };\n        // if the name is not provided, dervive it from the given OBJ\n        let name = model.name;\n        if (!name) {\n            const parts = model.obj.split("/");\n            name = parts[parts.length - 1].replace(".obj", "");\n        }\n        const namePromise = Promise.resolve(name);\n        const meshPromise = fetch(model.obj)\n            .then(response => response.text())\n            .then(data => {\n            return new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data, options);\n        });\n        let mtlPromise;\n        // Download MaterialLibrary file?\n        if (model.mtl) {\n            const mtl = getMtl(model);\n            mtlPromise = fetch(mtl)\n                .then(response => response.text())\n                .then((data) => {\n                const material = new _material__WEBPACK_IMPORTED_MODULE_1__["MaterialLibrary"](data);\n                if (model.downloadMtlTextures !== false) {\n                    let root = model.mtlTextureRoot;\n                    if (!root) {\n                        // get the directory of the MTL file as default\n                        root = mtl.substr(0, mtl.lastIndexOf("/"));\n                    }\n                    // downloadMtlTextures returns a Promise that\n                    // is resolved once all of the images it\n                    // contains are downloaded. These are then\n                    // attached to the map data objects\n                    return Promise.all([Promise.resolve(material), downloadMtlTextures(material, root)]);\n                }\n                return Promise.all([Promise.resolve(material), undefined]);\n            })\n                .then((value) => {\n                return value[0];\n            });\n        }\n        const parsed = [namePromise, meshPromise, mtlPromise];\n        finished.push(Promise.all(parsed));\n    }\n    return Promise.all(finished).then(ms => {\n        // the "finished" promise is a list of name, Mesh instance,\n        // and MaterialLibary instance. This unpacks and returns an\n        // object mapping name to Mesh (Mesh points to MTL).\n        const models = {};\n        for (const model of ms) {\n            const [name, mesh, mtl] = model;\n            mesh.name = name;\n            if (mtl) {\n                mesh.addMaterialLibrary(mtl);\n            }\n            models[name] = mesh;\n        }\n        return models;\n    });\n}\n/**\n * Takes in an object of `mesh_name`, `\'/url/to/OBJ/file\'` pairs and a callback\n * function. Each OBJ file will be ajaxed in and automatically converted to\n * an OBJ.Mesh. When all files have successfully downloaded the callback\n * function provided will be called and passed in an object containing\n * the newly created meshes.\n *\n * **Note:** In order to use this function as a way to download meshes, a\n * webserver of some sort must be used.\n *\n * @param {Object} nameAndAttrs an object where the key is the name of the mesh and the value is the url to that mesh\'s OBJ file\n *\n * @param {Function} completionCallback should contain a function that will take one parameter: an object array where the keys will be the unique object name and the value will be a Mesh object\n *\n * @param {Object} meshes In case other meshes are loaded separately or if a previously declared variable is desired to be used, pass in a (possibly empty) json object of the pattern: { \'<mesh_name>\': OBJ.Mesh }\n *\n */\nfunction downloadMeshes(nameAndURLs, completionCallback, meshes) {\n    if (meshes === undefined) {\n        meshes = {};\n    }\n    const completed = [];\n    for (const mesh_name in nameAndURLs) {\n        if (!nameAndURLs.hasOwnProperty(mesh_name)) {\n            continue;\n        }\n        const url = nameAndURLs[mesh_name];\n        completed.push(fetch(url)\n            .then(response => response.text())\n            .then(data => {\n            return [mesh_name, new _mesh__WEBPACK_IMPORTED_MODULE_0__["default"](data)];\n        }));\n    }\n    Promise.all(completed).then(ms => {\n        for (const [name, mesh] of ms) {\n            meshes[name] = mesh;\n        }\n        return completionCallback(meshes);\n    });\n}\nfunction _buildBuffer(gl, type, data, itemSize) {\n    const buffer = gl.createBuffer();\n    const arrayView = type === gl.ARRAY_BUFFER ? Float32Array : Uint16Array;\n    gl.bindBuffer(type, buffer);\n    gl.bufferData(type, new arrayView(data), gl.STATIC_DRAW);\n    buffer.itemSize = itemSize;\n    buffer.numItems = data.length / itemSize;\n    return buffer;\n}\n/**\n * Takes in the WebGL context and a Mesh, then creates and appends the buffers\n * to the mesh object as attributes.\n *\n * @param {WebGLRenderingContext} gl the `canvas.getContext(\'webgl\')` context instance\n * @param {Mesh} mesh a single `OBJ.Mesh` instance\n *\n * The newly created mesh attributes are:\n *\n * Attrbute | Description\n * :--- | ---\n * **normalBuffer**       |contains the model&#39;s Vertex Normals\n * normalBuffer.itemSize  |set to 3 items\n * normalBuffer.numItems  |the total number of vertex normals\n * |\n * **textureBuffer**      |contains the model&#39;s Texture Coordinates\n * textureBuffer.itemSize |set to 2 items\n * textureBuffer.numItems |the number of texture coordinates\n * |\n * **vertexBuffer**       |contains the model&#39;s Vertex Position Coordinates (does not include w)\n * vertexBuffer.itemSize  |set to 3 items\n * vertexBuffer.numItems  |the total number of vertices\n * |\n * **indexBuffer**        |contains the indices of the faces\n * indexBuffer.itemSize   |is set to 1\n * indexBuffer.numItems   |the total number of indices\n *\n * A simple example (a lot of steps are missing, so don\'t copy and paste):\n *\n *     const gl   = canvas.getContext(\'webgl\'),\n *         mesh = OBJ.Mesh(obj_file_data);\n *     // compile the shaders and create a shader program\n *     const shaderProgram = gl.createProgram();\n *     // compilation stuff here\n *     ...\n *     // make sure you have vertex, vertex normal, and texture coordinate\n *     // attributes located in your shaders and attach them to the shader program\n *     shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");\n *     gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n *\n *     shaderProgram.vertexNormalAttribute = gl.getAttribLocation(shaderProgram, "aVertexNormal");\n *     gl.enableVertexAttribArray(shaderProgram.vertexNormalAttribute);\n *\n *     shaderProgram.textureCoordAttribute = gl.getAttribLocation(shaderProgram, "aTextureCoord");\n *     gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *\n *     // create and initialize the vertex, vertex normal, and texture coordinate buffers\n *     // and save on to the mesh object\n *     OBJ.initMeshBuffers(gl, mesh);\n *\n *     // now to render the mesh\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.vertexBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, mesh.vertexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     // it\'s possible that the mesh doesn\'t contain\n *     // any texture coordinates (e.g. suzanne.obj in the development branch).\n *     // in this case, the texture vertexAttribArray will need to be disabled\n *     // before the call to drawElements\n *     if(!mesh.textures.length){\n *       gl.disableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *     }\n *     else{\n *       // if the texture vertexAttribArray has been previously\n *       // disabled, then it needs to be re-enabled\n *       gl.enableVertexAttribArray(shaderProgram.textureCoordAttribute);\n *       gl.bindBuffer(gl.ARRAY_BUFFER, mesh.textureBuffer);\n *       gl.vertexAttribPointer(shaderProgram.textureCoordAttribute, mesh.textureBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *     }\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, mesh.normalBuffer);\n *     gl.vertexAttribPointer(shaderProgram.vertexNormalAttribute, mesh.normalBuffer.itemSize, gl.FLOAT, false, 0, 0);\n *\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, model.mesh.indexBuffer);\n *     gl.drawElements(gl.TRIANGLES, model.mesh.indexBuffer.numItems, gl.UNSIGNED_SHORT, 0);\n */\nfunction initMeshBuffers(gl, mesh) {\n    mesh.normalBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertexNormals, 3);\n    mesh.textureBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.textures, mesh.textureStride);\n    mesh.vertexBuffer = _buildBuffer(gl, gl.ARRAY_BUFFER, mesh.vertices, 3);\n    mesh.indexBuffer = _buildBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, mesh.indices, 1);\n    return mesh;\n}\nfunction deleteMeshBuffers(gl, mesh) {\n    gl.deleteBuffer(mesh.normalBuffer);\n    gl.deleteBuffer(mesh.textureBuffer);\n    gl.deleteBuffer(mesh.vertexBuffer);\n    gl.deleteBuffer(mesh.indexBuffer);\n}\n\n\n//# sourceURL=webpack:///./src/utils.ts?')},0:function(module,exports,__webpack_require__){eval('module.exports = __webpack_require__(/*! /home/aaron/google_drive/projects/webgl-obj-loader/src/index.ts */"./src/index.ts");\n\n\n//# sourceURL=webpack:///multi_./src/index.ts?')}})},module.exports=t()},377:(t,e,i)=>{"use strict";Object.defineProperty(e,"o",{value:!0});var s=i(568),r=i(243),n=i(570),o=function(t){if(t&&t.o)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}(s),a=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(n);class h{constructor(){this.u=!0}S(){return this.u}}class l extends h{constructor(t,e){super(),this.M=t,this.u=e}_(t){return t!==this.M&&(this.M=t,this.u=!0),this}C(){return this.M}S(){return super.S()}}const u=(t,e)=>({x:t,y:e}),c=(t,e)=>({x:t,y:e}),d=(t,e,i)=>({position:t,high:e,low:i}),f=(t,e,i)=>({x:t,y:e,z:i}),g=t=>{const e=Array(0),i=Array(0);return t.length>0&&t.forEach((t=>{e.push(u(t.position,t.high)),i.push(u(t.position,t.low))})),[e,i]},m=(t,e)=>({min:t,max:e}),y=(t,e,i,s)=>({x:t,y:e,width:i,height:s}),p=(t,e=!0)=>new l(t,e),x=(t=0,e=0,i=0,s=0)=>({left:t,top:e,right:i,bottom:s}),A=x,S=(t,e)=>({left:void 0!==e.left?e.left:t.left,top:void 0!==e.top?e.top:t.top,right:void 0!==e.right?e.right:t.right,bottom:void 0!==e.bottom?e.bottom:t.bottom}),v=s.Record({type:"color",r:1,g:1,b:1,a:1});class b extends v{constructor(t){super(t)}toUint32(){return void 0!==this.T||(this.T=I(this.getR(),this.getG(),this.getB(),this.getA())),this.T}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.F||(this.F=new b({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.F}getLighter(){return this.I||(this.I=new b({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.I}getDarker(){return this.P||(this.P=new b({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.P}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const M=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),T=(t,e,i,s=255)=>new b({r:t/255,g:e/255,b:i/255,a:s/255}),w=t=>{const e=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(e.length){case 8:return new b({r:Number(`0x${e.substring(0,2)}`)/255,g:Number(`0x${e.substring(2,4)}`)/255,b:Number(`0x${e.substring(4,6)}`)/255,a:Number(`0x${e.substring(6,8)}`)/255});case 6:return new b({r:Number(`0x${e.substring(0,2)}`)/255,g:Number(`0x${e.substring(2,4)}`)/255,b:Number(`0x${e.substring(4,6)}`)/255});case 4:return new b({r:Number(`0x${e.charAt(0)}${e.charAt(0)}`)/255,g:Number(`0x${e.charAt(1)}${e.charAt(1)}`)/255,b:Number(`0x${e.charAt(2)}${e.charAt(2)}`)/255,a:Number(`0x${e.charAt(3)}${e.charAt(3)}`)/255});case 3:return new b({r:Number(`0x${e.charAt(0)}${e.charAt(0)}`)/255,g:Number(`0x${e.charAt(1)}${e.charAt(1)}`)/255,b:Number(`0x${e.charAt(2)}${e.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},C=(t,e=1,i=1)=>{let s,r,n;t/=360;const o=Math.floor(6*t),a=6*t-o,h=i*(1-e),l=i*(1-a*e),u=i*(1-(1-a)*e);switch(o%6){case 0:s=i,r=u,n=h;break;case 1:s=l,r=i,n=h;break;case 2:s=h,r=i,n=u;break;case 3:s=h,r=l,n=i;break;case 4:s=u,r=h,n=i;break;default:s=i,r=h,n=l}return new b({r:s,g:r,b:n})},k={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},E=new b({}),R=T(0,0,0,0),I=(t,e,i,s=255)=>(s<<24|i<<16|e<<8|t)>>>0,_=(t,e)=>t.value-e.value,F=s.Record({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:T(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),D=t=>{const{steps:e}=t,i=e.length;e.sort(_);const[s,r]=i>0?[e[0].value,e[i-1].value]:[0,0],n=i>0?i-1:0,o=Array(n);for(let t=0;t<n;t+=1)o[t]={min:e[t],max:e[t+1]};return{min:s,max:r,length:i,steps:e,subranges:o,isValid:i>0&&s!==r}};class B extends F{constructor(t){super(((t,e)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:e.length,min:e.min,max:e.max,subranges:e.subranges,isValid:e.isValid}))(t,D(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(D({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const e=t,i=e.length,s=e[0].length,r=[...Array(i)].map((()=>Array(s)));for(let t=0;t<i;t+=1)for(let i=0;i<s;i+=1)r[t][i]=this.D(e[t][i]);return r}const e=t,i=e.length,s=Array(i);for(let t=0;t<i;t+=1)s[t]=this.D(e[t]);return s}return this.D(t)}D(t){const{steps:e}=this,i=e.length;if(0===i)return this.getFallbackColor();if(1===i)return e[0].color||this.color;if(this.interpolate){for(let o=0;o<i-1;o+=1){const i=e[o],a=e[o+1],h=Math.min(i.value,a.value),l=Math.max(i.value,a.value);if(t>=h&&t<=l){if(h===l)return i.color;const e=(t-i.value)/(a.value-i.value);return s=i.color,r=a.color,n=e,new b({r:s.r+(r.r-s.r)*n,g:s.g+(r.g-s.g)*n,b:s.b+(r.b-s.b)*n,a:s.a+(r.a-s.a)*n})}}return t<e[0].value?e[0].color:e[i-1].color}var s,r,n;for(let s=i-1;s>=0;s-=1)if(t>=e[s].value)return e[s].color;return e[0].color}}const P=s.Record({type:"fillstyle",fillType:"empty"});class L extends P{toString(){return"emptyFill"}}const V=new L,z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),N=s.Record({type:"fillstyle",fillType:"solid",color:T(255,255,255)});class O extends N{}class U extends O{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return M(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Y=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class G extends O{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return M(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const H=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),W=s.Record({type:"fillstyle",fillType:"palette",lut:new B({steps:[]}),lookUpProperty:"value"}),K=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType),X={linear:(t,e,i)=>{const s=e-t;return r=>r<i?t+s/i*r:e},easeIn:(t,e,i)=>s=>s<i?t+Math.abs(2*(Math.sqrt(.5)*s/i)**2)*(e-t):e,easeOut:(t,e,i)=>s=>s<i?t+Math.abs(1-2*(Math.sqrt(.5)*(1-s/i))**2)*(e-t):e,ease:(t,e,i)=>s=>s<i?t+(s<i/2?.5*(s/i*2)**2.5:.5+.5*(1-(1-2*(s/i-.5))**2.5))*(e-t):e,logarithmic:t=>{const e=se(t);return(i,s,r)=>{const n=e(i),o=e(s);return e=>e<r?t**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-e/r))**2)*(o-n)):s}}};class j{constructor(t,e,i,s=X.linear,n){this.delta=0,this.nextAnimations=new Array,this.L=!1,this.easing=X.linear,this.R=new r.Eventer,this.isOver=()=>(this.delta===this.duration||this.L)&&0===this.nextAnimations.length,this.values=t,this.action=e,this.duration=i,this.easing=s,this.V=n,this.eases=t.map((([t,e])=>s(t,e,i)))}O(){this.R.emit("start")}start(){return this.V.includes(this)||this.V.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,e,i=this.duration,s=this.easing){const r=new j(t,e,i,s,this.V);return this.nextAnimations.push(r),r}onAnimationStart(t,e){return this.R.on("start",t,e)}onAnimationEnd(t,e){return this.R.on("end",t,e)}onEveryAnimationEnd(t,e){return this.R.on("everyEnd",t,e)}onAllAnimationEnd(t,e){return this.R.on("allEnd",t,e)}allOffAnimationEnd(){return this.R.topicOff("end"),this}allOffEveryAnimationEnd(){return this.R.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.R.topicOff("allEnd"),this}offAnimationEnd(t){return this.R.off(t,"end")}offEveryAnimationEnd(t){return this.R.off(t,"everyEnd")}offAllAnimationEnd(t){return this.R.off(t,"allEnd")}finish(t=!0){if(this.L=!0,this.V.splice(this.V.indexOf(this),1),this.nextAnimations.length>0){const e=this.nextAnimations[0];return t&&(this.R.listeners("allEnd").forEach(((t,i)=>e.onAllAnimationEnd(t,i))),this.R.listeners("everyEnd").forEach(((t,i)=>e.onEveryAnimationEnd(t,i)))),e.addNextAnimations(this.nextAnimations.slice(1)),e.start(),t&&(this.R.emit("end",e),this.R.emit("everyEnd",e)),e}t&&(this.R.emit("end",void 0),this.R.emit("everyEnd",void 0),this.R.emit("allEnd"))}finishAll(t=!0){let e=this;for(;e;)e=e.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(kt):this.values.map(kt)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let e=0;e<this.nextAnimations.length;e+=1)t+=this.nextAnimations[e].duration-this.nextAnimations[e].delta;return t}}const $=(t,e=60)=>{e>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const i=[];let s,r,n=0;const o=()=>{s=void 0;const a=Date.now();r=r||a,n=a-r,n/1e3>=1/e&&(r=Date.now()-n%(1e3/e),i.forEach((t=>{0===t.delta&&t.O(),t.delta+=n-n%(1e3/e),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((e=>e(t.delta)))),t.delta===t.duration&&t.finish()})),t()),i.length>0?s=Tt.requestAnimationFrame(o):(s=void 0,r=void 0)};return(t=1e3,e=X.linear)=>(r,n,a=t)=>{const h=new j(r,n,a,e,i).start();return s||(s=Tt.requestAnimationFrame(o)),h}};var Z,Q;e.GradientShape=void 0,(Z=e.GradientShape||(e.GradientShape={})).circle="circle",Z.ellipse="ellipse",e.GradientExtent=void 0,(Q=e.GradientExtent||(e.GradientExtent={})).closestSide="closest-side",Q.closestCorner="closest-corner",Q.farthestSide="farthest-side",Q.farthestCorner="farthest-corner";const q=s.Record({type:"fillstyle",fillType:"radial-gradient",stops:[{color:w("#f00"),offset:0},{color:w("#0f0"),offset:1}],position:u(.5,.5),shape:e.GradientShape.ellipse,extent:e.GradientExtent.farthestCorner});class J extends q{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const tt=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),et=s.Record({type:"fillstyle",fillType:"linear-gradient",stops:[{color:w("#f00"),offset:0},{color:w("#0f0"),offset:1}],angle:0});class it extends et{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const e=t.sort(((t,e)=>t.offset-e.offset));return this.set("stops",e)}getColorStops(){return this.get("stops")}setAngle(t,e){return this.set("angle",e?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?xi(this.get("angle")):this.get("angle")}}const st=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType),rt=s.Record({type:"linestyle",lineType:"empty"}),nt=new class extends rt{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}N(){return 0}setFillStyle(t){return this}getFillStyle(){return V}},ot=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType);class at{constructor(t,e,i,s){this.cellIndex=t,this.cellSpan=e,this.cellsAmount=i,this.observedAmount=s,this.x=new ht,this.y=new ht,this.z=new ht,this.R=new r.Eventer;const n={...t},o={...e};if(s){const t=t=>{this.cellsAmount.x=t.reduce(Ke,0),this.cellIndex.x=t.reduce(((t,e,i)=>i>=n.x?t:t+e),0),this.cellSpan.x=t.reduce(((t,e,i)=>i>=n.x&&i<n.x+o.x?t+e:t),0),this.R.emit("cell-resize")},e=s.x.G(t);t(s.x.C());const i=t=>{this.cellsAmount.y=t.reduce(Ke,0),this.cellIndex.y=t.reduce(((t,e,i)=>i>=n.y?t:t+e),0),this.cellSpan.y=t.reduce(((t,e,i)=>i>=n.y&&i<n.y+o.y?t+e:t),0),this.R.emit("cell-resize")},r=s.y.G(i);i(s.y.C()),this.W=()=>{s.x.U(e),s.y.U(r)}}}Y(){return this.W&&(this.W(),this.W=void 0),this}H(t){return this.R.on("cell-resize",t)}$(t){return this.R.off(t,"cell-resize")}}class ht extends h{constructor(){super(...arguments),this.X=0,this.j=10,this.Z=1}J(){return this.u=!1,this}K(){return this.u=!0,this}getInnerStart(){return this.X}getInnerEnd(){return this.j}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}q(t,e){return this.X=t,this.j=e,this.tt(),this}it(t){return this.Z=t,this.tt(),this}st(t){return t/this.Z}tt(){const t=this.st(this.j-this.X),e=this.Z;void 0!==this.et&&!1!==It(t,this.et)||(this.u=!0,this.ht=e,this.et=t)}rt(){return this.et}nt(){return this.ht}ot(){return this.j<this.X}ut(t,e){return!0}}const lt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).ct({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new at({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ut=(t,e,i)=>e===i?t:i.dt(e.ft(t)),ct=(t,e,i)=>{if(e===i)return t;const s=e instanceof Li?e.x:e.x instanceof Li?e.x.x:e.x.At,r=e instanceof Li?e.y:e.y instanceof Li?e.y.y:e.y.At,n=i instanceof Li?i.x:i.x instanceof Li?i.x.x:i.x.At,o=i instanceof Li?i.y:i.y instanceof Li?i.y.y:i.y.At;return{...t,x:ut(t.x,s,n),y:ut(t.y,r,o)}},dt=(...t)=>{if(0===t.length)return{remove:Rt};let e=!1;const i=t.map((i=>i.onIntervalChange(((s,r,n)=>((i,s,r)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.yt(s,r,!1,i.getStopped(),"synchronizedAxis"))),e=!1)})(i,r,n)))));let s=!1;const r=t.map((e=>e.onStoppedStateChanged(((i,r)=>((e,i)=>{s||(s=!0,t.filter((t=>t!==e)).forEach((t=>t.setStopped(i))),s=!1)})(e,r)))));return{remove:()=>{t.forEach(((t,e)=>{t.offIntervalChange(i[e]),t.offStoppedStateChanged(r[e])}))}}},ft=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,gt=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,mt=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,yt=t=>t&&"object"==typeof t&&"index"in t;class pt extends Error{constructor(t,e){super(`ChartError: ${t} ${e?`in ${e.constructor.name}`:""}`),Object.setPrototypeOf(this,pt.prototype)}}class xt extends Error{constructor(t,e,i=!1){const s=`EngineError: ${t} ${e?`in ${e.constructor.name}`:""}`;super(s),i&&Tt.alert(s),Object.setPrototypeOf(this,xt.prototype)}}class At extends xt{constructor(t){super(t),Object.setPrototypeOf(this,At.prototype)}}var St,vt,bt,Mt;e.UISpace=void 0,(St=e.UISpace||(e.UISpace={}))[St.Content=0]="Content",St[St.PaddedContent=1]="PaddedContent",St[St.PaddedBackground=2]="PaddedBackground",St[St.Everything=3]="Everything",e.UIVisibilityModes=void 0,(vt=e.UIVisibilityModes||(e.UIVisibilityModes={}))[vt.never=0]="never",vt[vt.always=1]="always",vt[vt.whenHovered=2]="whenHovered",vt[vt.whenDragged=3]="whenDragged",vt[vt.whenNotDragged=4]="whenNotDragged",vt[vt.whenHoveredOrDragged=5]="whenHoveredOrDragged",e.UIDraggingModes=void 0,(bt=e.UIDraggingModes||(e.UIDraggingModes={}))[bt.notDraggable=0]="notDraggable",bt[bt.draggable=1]="draggable",bt[bt.onlyHorizontal=2]="onlyHorizontal",bt[bt.onlyVertical=3]="onlyVertical",e.UIDirections=void 0,(Mt=e.UIDirections||(e.UIDirections={}))[Mt.Up=0]="Up",Mt[Mt.Right=1]="Right",Mt[Mt.Down=2]="Down",Mt[Mt.Left=3]="Left";const Tt="undefined"!=typeof window?window:void 0!==i.g&&i.g._lcjs?i.g._lcjs:{},wt=(t,e)=>t.x===e.x&&t.y===e.y,Ct=t=>t!==Ve&&t!==ze&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,kt=t=>t[1],Et=t=>t.dispose(),Rt=()=>{},It=(t,e)=>t===e,_t=(t,e,i)=>i>e?Math.min(Math.max(t,e),i):Math.min(Math.max(t,i),e),Ft=t=>Array.prototype.concat.apply([],t),Dt=(t,e)=>void 0===t||Number.isNaN(t)?e:t,Bt=t=>t.vt(),Pt=t=>t.St(),Lt=t=>t.xt(),Vt=t=>t.bt(),zt=t=>t.min.x,Nt=t=>t.max.x,Ot=t=>t.min.y,Ut=t=>t.max.y,Yt=(t,e,i,s,r)=>{if(t.length>0){let n=r?s(r):void 0;for(let s=0;s<t.length;s+=1){const r=e(t[s]);void 0!==r&&(n=void 0!==n?i(n,r):r)}return n}if(r)return s(r)},Gt=(t,e)=>t.position===e.position&&t.high===e.high&&t.low===e.low,Ht=u(0,1),Wt=u(1,0),Kt=u(0,-1),Xt=u(-1,0),jt=u(0,0),$t=t=>{switch(t){case e.UIDirections.Up:return Ht;case e.UIDirections.Right:return Wt;case e.UIDirections.Down:return Kt;case e.UIDirections.Left:return Xt;default:return jt}},Zt=t=>t===e.UIDirections.Left||t===e.UIDirections.Right,Qt=t=>{t.stopPropagation(),t.preventDefault()},qt=(t,e)=>{if(!e)return t;const i=t.length,s=new Float32Array(2*i);let r=0;for(let e=0;e<i;e+=1){const i=t[e],n=Math.fround(i);s[r+0]=n,s[r+1]=i-n,r+=2}return s},Jt=(t,e,i=Float32Array)=>{if(!e){const e=t.length,s=new i(2*e);let r=0;for(let i=0;i<e;i+=1){const e=t[i];s[r+0]=e.x,s[r+1]=e.y,r+=2}return s}const s=t.length,r=new i(4*s);let n=0;for(let e=0;e<s;e+=1){const i=t[e],s=Math.fround(i.x),o=Math.fround(i.y);r[n+0]=s,r[n+1]=o,r[n+2]=i.x-s,r[n+3]=i.y-o,n+=4}return r},te=t=>{const e=t.length,i=new Float32Array(3*e);let s=0;for(let r=0;r<e;r+=1){const e=t[r];i[s+0]=e.x,i[s+1]=e.y,i[s+2]=e.z,s+=3}return i},ee=t=>e=>{const i=t.indexOf(e);i>=0&&t.splice(i,1)},ie=t=>{let e=t.length;for(let i=0;i<e-1;i+=1)t[i].x===t[i+1].x&&t[i].y===t[i+1].y&&(t.splice(i,1),i-=1,e-=1);return t},se=t=>{const e=Math.log(t);return t=>Math.log(t)/e},re=se(Math.E),ne=(t,e)=>{const i=e[t];return i?i():void 0},oe=(t,e)=>{let i;if(e)i=e;else{const e={x:0,y:0};for(let i=0;i<t.length;i+=1)e.x+=t[i].x/t.length,e.y+=t[i].y/t.length;i=e}return t.sort(((t,e)=>Ai(ci(t,i))-Ai(ci(e,i))))},ae=(t,e,i)=>{if(0===t.length)return!1===i.canReturnB?e.slice():e;const s=e.length;if(s<1e5)return t.push.apply(t,e),t;for(let i=0;i<s;i+=1)t.push(e[i]);return t},he=(t,e,i)=>i<0?t:i>1?e:T(t.getR()+i*(e.getR()-t.getR()),t.getG()+i*(e.getG()-t.getG()),t.getB()+i*(e.getB()-t.getB()),t.getA()+i*(e.getA()-t.getA())),le=t=>255===t.getA()?t:t.setA(255),ue=(()=>{const t=T(0,0,0);return i=>(i=le(i),new J({shape:e.GradientShape.circle,extent:e.GradientExtent.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:i},{offset:1,color:he(i,t,.5)}]}))})(),ce=(()=>{const t=t=>{var e;if(t){if(Y(t)){if(0===t.getColor().getA())return;return t.getColor()}if(tt(t)||st(t)){const i=t.getColorStops();return 3===i.length?i[1].color:null===(e=i[0])||void 0===e?void 0:e.color}K(t)}};return(e,i,s,r)=>{var n;const o=[];if(r.fill&&o.push(r.fill),r.fill2&&o.push(r.fill2),r.stroke){const t=r.stroke.getFillStyle();t!==V&&("stroke"===(null===(n=r.behavior)||void 0===n?void 0:n.priority)?o.unshift(t):o.push(t))}if(r.point3D){const t=r.point3D;o.push(t.getFillStyle())}let a;if(r.behavior&&!0===r.behavior.colorStep){const[e,s]=o.reduce(((e,i)=>{if(e[0]&&e[1])return e;const s=t(i);return s&&(void 0===e[0]?e[0]=s:e[1]=s),e}),[void 0,void 0]);a=e&&s?(h=e)===(l=s)||h.getR()===l.getR()&&h.getG()===l.getG()&&h.getB()===l.getB()?ue(h):(h=le(h),l=le(l),new it({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:h},{offset:1,color:h}]})):i.uiButtonFillStyle}else{const e=o.reduce(((e,i)=>e||t(i)),void 0);a=e?s?new U({color:e}):ue(e):i.uiButtonFillStyle}var h,l;e.setButtonOnFillStyle(a)}})(),de=t=>{const e=t;if(K(e))return{lut:e.getPalette(),lookUpProperty:e.getLookUpProperty()}},fe=t=>{let e=0;return()=>(e+=1,`${t}-${e}`)},ge=(t,e)=>{let i="string"==typeof t?t:String(t);const s=i.indexOf(".");let r=s>=0?s:i.length;for(;r<e;r+=1)i=`0${i}`;return i},me=(t,e)=>"function"==typeof t?t(e):t,ye=t=>t.ctrlKey?Math.sign(t.deltaY)*Math.min(.05*Math.abs(t.deltaY),1):Math.sign(t.deltaY),pe=(t,e)=>e(),xe=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new U({color:T(255,255,255,1)});const Ae=t=>t===Ne||t.min.x===Ne.min.x&&t.max.x===Ne.max.x&&t.min.y===Ne.min.y&&t.max.y===Ne.max.y,Se=t=>Array.from(new Set(t)),ve=t=>t.filter((t=>void 0!==t)),be=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Me=(t,e,i)=>{e.length<=0||(t.setText(i.label).setOn(e[0].getVisible()),i.style&&t.setButtonOnFillStyle(i.style),i.toggleVisibilityOnClick&&t.onSwitch(((t,i)=>e.forEach((t=>t.setVisible(i))))),t.onMouseEnter((()=>e.forEach((t=>t.setHighlight(!0))))),t.onMouseLeave((()=>e.forEach((t=>t.setHighlight(!1))))),e.forEach((e=>e.onMouseEnter((()=>t.setHighlight(!0))))),e.forEach((e=>e.onMouseLeave((()=>t.setHighlight(!1))))),e.forEach((e=>e.onTouchStart((()=>t.setHighlight(!0))))),e.forEach((e=>e.onTouchEnd((()=>t.setHighlight(!1))))))},Te=(t,e)=>{throw new Error(e)},we=t=>{let e;return()=>e||(e=t(),e)},Ce=t=>{if(t===nt)return 0;const e=t.getThickness();return e<0?1:1*e},ke=(t,e,i,s)=>{const r=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${i}\nresource url: ${e}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(s.shouldCrash)throw Tt.alert(r),new Error(r);Tt.console.warn(r)},Ee=(t,e,i,s=0)=>{if(t<i(s)||i(e)<t)return;const r=e;for(;s!==e;){const r=Math.ceil((s+e)/2);t<i(r)?e=r-1:s=r}const n=Math.abs(t-i(s));return s<r&&Math.abs(t-i(s+1))<n?s+1:s},Re=()=>{const t=new Map;return{Mt:e=>(e.setMouseEnterEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n._t(e,i,s,r)})),e.setMouseLeaveEventHandler(((e,i,s)=>{const r=s&&t.get(s);r&&r.wt(e,i,s)})),e.setMouseClickEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.Ct(e,i,s,r)})),e.setMouseDoubleClickEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.kt(e,i,s,r)})),e.setMouseDownEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.Tt(e,i,s,r)})),e.setMouseUpEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.Ft(e,i,s,r)})),e.setMouseMoveEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.It(e,i,s,r)})),e.setMouseDragEventHandler(((e,i,s,r,n,o,a)=>{const h=o&&t.get(o);h&&h.Pt(e,i,s,r,n,o,a)})),e.setMouseDragStartEventHandler(((e,i,s,r,n)=>{const o=r&&t.get(r);o&&o.Dt(e,i,s,r,n)})),e.setMouseDragStopEventHandler(((e,i,s,r,n,o)=>{const a=n&&t.get(n);a&&a.Bt(e,i,s,r,n,o)})),e.setMouseWheelEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.Lt(e,i,s,r)})),e.setTouchStartEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.Rt(e,i,s,r)})),e.setTouchMoveEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.Et(e,i,s,r)})),e.setTouchEndEventHandler(((e,i,s,r)=>{const n=s&&t.get(s);n&&n.zt(e,i,s,r)})),e),Vt:(e,i)=>{t.set(e,i)},Ot:()=>{t.clear()}}},Ie={left:0,right:0,top:0,bottom:0},_e=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Fe=(t,e,i)=>{e&&e.Nt();const s=i();return{Gt:t,Nt:()=>{s.forEach((e=>t.Wt(e)))}}},De=(t,e,i)=>{let s;const r=()=>(s=i(),s),n={...t,resolve:()=>s||r()};for(const t of Object.keys(e))Object.defineProperty(n,t,{get:function(){return s?s[t]:r()[t]}});return n},Be=t=>{if(t)return"resolve"in t?t.resolve():t},Pe=t=>{let e=t;return{Ut:t=>{const i=e;return e=i+t,[i,t]}}},Le={add:(t,e)=>f(t.x+e,t.y+e,t.z+e),addVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x+=t.x,i.y+=t.y,i.z+=t.z;return i},subtract:(t,e)=>f(t.x-e,t.y-e,t.z-e),subtractVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x-=t.x,i.y-=t.y,i.z-=t.z;return i},multiply:(t,e)=>f(t.x*e,t.y*e,t.z*e),divide:(t,e)=>f(t.x/e,t.y/e,t.z/e),multiplyVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x*=t.x,i.y*=t.y,i.z*=t.z;return i},divideVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x/=t.x,i.y/=t.y,i.z/=t.z;return i},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>Le.divide(t,Le.length(t)),dot:(t,e)=>t.x*e.x+t.y*e.y+t.z*e.z,cross:(t,e)=>f(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x),angle:(t,e)=>Math.acos(Le.dot(t,e)/(Le.length(t)*Le.length(e))),rotateAroundAxis(t,e,i){const s=Math.cos(i),r=Math.sin(i),n=Le.dot(e,t),o=Le.cross(e,t);return Le.addVec(Le.multiply(t,s),Le.addVec(Le.multiply(e,(1-s)*n),Le.multiply(o,r)))},lerp:(t,e,i)=>(i=_t(i,0,1),Le.addVec(Le.multiply(t,1-i),Le.multiply(e,i))),equals:(t,e)=>It(t.x,e.x)&&It(t.y,e.y)&&It(t.z,e.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},Ve=Number.MAX_SAFE_INTEGER,ze=-Number.MAX_SAFE_INTEGER,Ne=m(u(Ve,Ve),u(ze,ze)),Oe=m(f(Ve,Ve,Ve),f(ze,ze,ze)),Ue=(t,e)=>{const i=Math.log(t)/Math.log(e);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(i))},Ye=(t,e)=>!(e.min.x>t.max.x||e.max.x<t.min.x||e.min.y>t.max.y||e.max.y<t.min.y),Ge=(t,e)=>!(t[1].x<e[0].x||t[0].x>e[1].x||t[3].y<e[0].y||t[0].y>e[3].y),He=(t,e)=>({min:{x:Math.min(t[0].x,e[0].x),y:Math.min(t[0].y,e[0].y)},max:{x:Math.max(t[2].x,e[2].x),y:Math.max(t[2].y,e[2].y)}}),We=t=>{const e=t.length;for(let i=0;i<e;i+=1)for(let s=i+1;s<e;s+=1)if(Ye(t[i],t[s]))return!0;return!1},Ke=(t,e)=>e+t,Xe=(t,e,i)=>{const s=ci(e,t),r=s.x*s.x+s.y*s.y;if(0===r)return t;const n=ci(i,t),o=(n.x*s.x+n.y*s.y)/r;return o<=0?t:o>=1?e:u(t.x+o*s.x,t.y+o*s.y)},je=(t,e,i)=>i>e?t>=e&&t<=i:t>=i&&t<=e,$e=(t,e)=>{const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)},Ze=(t,e)=>{const i=t.x-e.x,s=t.y-e.y;return i*i+s*s},Qe=(t,e,i)=>ui(t,li(ci(e,t),i)),qe=(t,e,i)=>Le.addVec(t,Le.multiply(Le.subtractVec(e,t),i));function Je(t){const e=t.length;if(e>0){let i=t[0].x,s=t[0].x,r=t[0].y,n=t[0].y;for(let o=0;o<e;o+=1){const e=t[o];e.x>i&&(i=e.x),e.x<s&&(s=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y)}return m(u(s,n),u(i,r))}return Ne}function ti(t){const e=t.length;if(e>0){let i=t[0].x,s=t[0].x,r=t[0].y,n=t[0].y,o=t[0].z,a=t[0].z;for(let h=0;h<e;h+=1){const e=t[h];e.x>i&&(i=e.x),e.x<s&&(s=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y),e.z>o&&(o=e.z),e.z<a&&(a=e.z)}return m(f(s,n,a),f(i,r,o))}return Oe}const ei=(...t)=>{const e={min:{x:Ve,y:Ve},max:{x:ze,y:ze}};for(const i of t)e.min.x=e.min.x<i.min.x?e.min.x:i.min.x,e.max.x=e.max.x>i.max.x?e.max.x:i.max.x,e.min.y=e.min.y<i.min.y?e.min.y:i.min.y,e.max.y=e.max.y>i.max.y?e.max.y:i.max.y;return e},ii=(t,e)=>m(f(t.min.x<e.min.x?t.min.x:e.min.x,t.min.y<e.min.y?t.min.y:e.min.y,t.min.z<e.min.z?t.min.z:e.min.z),f(t.max.x>e.max.x?t.max.x:e.max.x,t.max.y>e.max.y?t.max.y:e.max.y,t.max.z>e.max.z?t.max.z:e.max.z));function si(t,e,i,s){const r=t.x-s.x,n=t.y-s.y,o=s.x-i.x,a=i.y-s.y,h=a*r+o*n,l=(s.y-e.y)*r+(e.x-s.x)*n,u=a*(e.x-s.x)+o*(e.y-s.y);return u<0?h<=0&&l<=0&&h+l>=u:h>=0&&l>=0&&h+l<=u}function ri(t,e,i){return u(Math.cos(i)*(t.x-e.x)+Math.sin(i)*(t.y-e.y)+e.x,-Math.sin(i)*(t.x-e.x)+Math.cos(i)*(t.y-e.y)+e.y)}function ni(t,e){return u(t.x-e.x,t.y-e.y)}function oi(t){const e=hi(t);return 0===e?u(0,0):u(t.x/e,t.y/e)}function ai(t,e){let i={x:e.x-t.x,y:e.y-t.y};i=oi(i);const s=Math.PI/2,r=i.x;return i.x=-Math.sin(s)*i.y,i.y=r*Math.sin(s),i}function hi(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function li(t,e){return u(t.x*e,t.y*e)}function ui(t,e){return u(t.x+e.x,t.y+e.y)}function ci(t,e){return u(t.x-e.x,t.y-e.y)}function di(t,e){return u(t.x*e.x,t.y*e.y)}function fi(t,e){return u(t.x/e.x,t.y/e.y)}function gi(t){return li(t,-1)}function mi(t,e){return t.x*e.x+t.y*e.y}const yi=(t,e,i)=>{const s=(i.y-e.y)/(i.x-e.x),r=e.y+(t-e.x)*s;return u(t,r)},pi=(t,e,i)=>{const s=(i.y-e.y)/(i.x-e.x),r=e.x+(t-e.y)/s;return u(r,t)};function xi(t){return t*Math.PI/180}function Ai(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Si(t){return u(Math.cos(t),Math.sin(t))}const vi=(t,e,i,s)=>{let r,n,o,a;if(e.x-t.x!=0||s.x-i.x!=0)return e.x-t.x==0?(o=e.x,n=(s.y-i.y)/(s.x-i.x),a=n*(o-i.x)+i.y):s.x-i.x==0?(o=s.x,r=(e.y-t.y)/(e.x-t.x),a=r*(o-t.x)+t.y):(r=(e.y-t.y)/(e.x-t.x),n=(s.y-i.y)/(s.x-i.x),o=(i.y-n*i.x+r*t.x-t.y)/(r-n),a=r*(o-t.x)+t.y),u(o,a)},bi=(t,e)=>{const i=t.length,s=e.length,r=new Uint16Array(i+s);return r.set(t,0),r.set(e,i),r};class Mi{constructor(){this.Yt=!0}getInnerStart(){return this.X}getInnerEnd(){return this.j}getInnerInterval(){return Math.abs(this.j-this.X)}q(t,e){return this.Yt=t!==this.X||e!==this.j,this.X=t,this.j=e,this}J(){return this.Yt=!1,this}K(){return this.Yt=!0,this}}class Ti extends Mi{constructor(t,e,i,s){if(super(),this.Ht=!0,this.$t=!0,this.Xt=[0,0],this.jt=!0,this.Zt=t,this.Qt=e,this.Jt=i,this.Kt=t,this.qt=e,s){const t=s.G(this.ti.bind(this));this.ti(s.C()),this.ii=()=>s.U(t)}}it(t){return this.Z=t,this.$t=!0,this}si(t){return this.Xt=t.map(Math.abs),this.jt=!0,this}ei(){return this.Zt/this.Jt*this.Z+this.Xt[0]}hi(){return(this.Zt+this.Qt)/this.Jt*this.Z-this.Xt[1]}ri(){return this.getCellSize()-this.ni()}oi(){return this.Z}getCellSize(){return this.ai(this.Z)}ni(){return this.Xt[0]+this.Xt[1]}li(){return this.Xt}ti(t){this.Jt=t.reduce(Ke,0),this.Zt=t.reduce(((t,e,i)=>i>=this.Kt?t:t+e),0),this.Qt=t.reduce(((t,e,i)=>i>=this.Kt&&i<this.Kt+this.qt?t+e:t),0),this.Ht=!0,this.ui()}ai(t){return t*this.Qt/this.Jt}J(){return super.J(),this.$t=!1,this.jt=!1,this.Ht=!1,this}K(){return super.K(),this.$t=!0,this.jt=!0,this.Ht=!0,this}}class wi extends Ti{constructor(t,e,i,s){super(t,e,i,s),this.ci={internal:10,function:Ci(10),number:10},this.Z=1e3,this.q(1,1e3),this.di=this.fi()}ut(t,e,i,s,r){if(t===e)return!1;const n=Math.min(t,e)<Ei,o=Math.max(t,e)>Ri;return!n&&!o||!!r&&(e>t?{start:n?Ei:t,end:o?Ri:e}:{start:o?Ri:t,end:n?Ei:e})}ft(t){const e=this.ei(),i=this.hi(),s=Math.max(t,Ei);return e+(this.ci.function(s)-this.di.scaleStartLog)/this.di.scaleIntervalLog*(i-e)}dt(t){const e=this.ei(),i=(t-e)/(this.hi()-e),s=this.di.scaleStartLog+i*this.di.scaleIntervalLog;return this.ci.number**s}ui(){this.ci&&this.fi()}q(t,e){return super.q(t,e),this.ci&&this.fi(),this}si(t){return super.si(t),this.ci&&this.fi(),this}it(t){return super.it(t),this.ci&&this.fi(),this}Ai(t){return this.ci={internal:t,function:Ci(t),number:ki(t)},this}gi(){return this.ci.internal}pi(t,e){const i=this.ft(t)+e;return this.dt(i)}yi(){return this.$t||this.Yt||this.jt||this.Ht}fi(){const t=this.ci.function(this.X),e=this.ci.function(this.j)-t,i=2*this.ei()/this.Z-1,s=2*this.hi()/this.Z-1-i;return this.di={scaleStartLog:t,scaleIntervalLog:e,viewportStart:i,viewportSize:s},this.di}mi(){return this.di}}const Ci=t=>"e"===t?re:se(t),ki=t=>"e"===t?Math.E:t,Ei=.9*10**-4,Ri=1.1*10**25,Ii=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],_i=(t,e,i)=>{const s=Math.abs(i-e),r=Math.max(2-Ue(s,10),0);return t.toFixed(r)},Fi={Numeric:(t,e)=>_i(t,e.getInnerStart(),e.getInnerEnd()),NumericUnits:(t,e)=>{const i=Math.abs(e.getInnerEnd()-e.getInnerStart()),s=t<0;t=Math.abs(t);let r="",n="";if(i>=1e3&&t>1e3){let e="";for(const i of Ii){const s=Math.round(1e3*t/i.unit)/1e3;if(s>=1){e=s.toString(),n=i.prefix;break}}r=(s?"-":"")+e}else{let e=String(Math.floor(t));const n=Ue(t,1e3);for(let t=1;t<=n;t+=1){const i=e.length-(3*t+(t-1));e=`${e.substring(0,i)} ${e.substring(i,e.length)}`}r=(s?"-":"")+e+(i<=10?((t,e)=>{if(0===e)return"";let i=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return i.length>e&&(i=i.substring(0,e+1)),i})(t,2-Ue(i,10)):"")}return r+=n,r},LogarithmicExponentsRounded:(t,e,i,s=10)=>{const r=Ci(s)(t);return`${s}${Di(r)}`},LogarithmicExponents:(t,e,i,s=10)=>{const r=Ci(s),n=Math.floor(r(t)),o=t/ki(s)**n;return`${Math.round(o)}×${s}${Di(n)}`},LogarithmicExtreme:(t,e,i,s=10)=>{const r=Ci(s),n=Math.floor(r(t));return`${(t/ki(s)**n).toFixed(2)}×${s}${Di(n)}`},LogarithmicNoExponents:(t,e,i,s=10)=>{const r=Ci(s);if("e"===s)return`${Math.floor(r(t))}e`;const n=t.toString();if(t>1)return n;const o=Math.floor(r(t));return t.toFixed(Math.abs(o))},Scientific:(t,e)=>{const i=Math.max(Math.abs(e.getInnerStart()),Math.abs(e.getInnerEnd())),s=Math.floor(Math.log10(i));return 0===t?`0.00e${s<0?"":"+"}${s}`:t.toExponential(2)}},Di=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class Bi extends Ti{constructor(t,e,i,s){super(t,e,i,s),this.vi=!1,this.Si=!1,this.xi=0,this.Z=1e3,this.q(0,10),this.tt()}yi(){return this.Si}ut(t,e,i,s,r){if(t===e)return!1;const n=Math.abs(s-i),o=Math.abs(e-t);if(!this.vi){const i=((t,e,i)=>{const s=((t,e)=>{if(e<Ve&&e>ze&&t<Ve&&t>ze){const i=Math.abs(t/2**23),s=Math.abs(e/2**23),r=Math.min(i,s);return 10**Math.floor(Math.log10(r))}})(t,e);if(void 0!==s)return s*i})(t,e,this.getCellSize());if(void 0===i)return!1;if(o>i)return!0;const s=(e+t)/2,a=(r?i/2:n/2)*(t>e?-1:1);return{start:s-a,end:s+a}}const a=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(o>a)return!0;const h=(e+t)/2,l=(r?a/2:n/2)*(t>e?-1:1);return{start:h-l,end:h+l}}ui(){this.tt()}ft(t){return this.ei()+(t-this.X)/(this.j-this.X)*(this.hi()-this.ei())}dt(t){return this.X+(t-this.ei())/(this.hi()-this.ei())*(this.j-this.X)}q(t,e){return super.q(t,e),this.tt(),this}si(t){return super.si(t),this.tt(),this}it(t){return super.it(t),this.bi=Pi(this.j-this.X,this.Xt,this.Z,this.Qt,this.Jt),this.tt(),this}Mi(){return this.vi=!0,this}_i(){return this.vi}wi(){return Math.abs(this.Ci)}ki(){return this.wi()/this.bi}Ti(){return this.Fi}Ii(){return this.Pi}getPixelSize(){return this.bi}mi(){return this.di}K(){return super.K(),this.Si=!0,this}J(){return super.J(),this.Si=!1,this}Di(t,e=Fi.Numeric){return e(t,this)}Bi(){const t=Math.abs(this.getInnerEnd()).toString().length,e=Math.abs(this.getInnerStart()).toString().length;return t>e?t:e}Li(t){return Pi(t,this.Xt,this.Z,this.Qt,this.Jt)}tt(){let t=this.X,e=this.j,i=0;this.vi&&(t=0,e=this.j-this.X,i=this.X);const s=e-t,r=Pi(s,this.Xt,this.Z,this.Qt,this.Jt);this.Pi=t-this.Xt[0]*r,this.Fi=e+this.Xt[1]*r;const n=this.Fi-this.Pi,o=n-this.Ci,a=Math.abs(o/r),h=s-this.xi,l=Math.abs(h/r);(!this.di||a>=.4||l>=.4)&&(this.xi=s,this.Ci=n,this.bi=r,this.Si=!0);const u=this.Ci*this.Jt/(2*this.Qt),c=-(this.Pi-this.Ci*this.Zt/this.Qt)-u,d=2*this.ei()/this.Z-1,f=2*this.hi()/this.Z-1-d;this.di={displacement:c,scaling:u,highPrecisionOffset:i,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}pi(t,e){return t+this.bi*e}}const Pi=(t,e,i,s=1,r=1)=>t/(i*s/r-(e[0]+e[1]));class Li{Ri(t,e){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}J(){return this.x.J(),this.y.J(),this}K(){return this.x.K(),this.y.K(),this}it(t,e){return"object"==typeof t?(this.x.it(t.x),this.y.it(t.y)):(this.x.it(t),this.y.it(e)),this}oi(){return u(this.x.oi(),this.y.oi())}Ei(t){return this.x.si(t),this}zi(t){return this.y.si(t),this}ni(){return u(this.x.ni(),this.y.ni())}Vi(t,e){return this.x.q(t,e),this}Oi(t,e){return this.y.q(t,e),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),e=this.y.getCellSize();return{x:t-this.x.ni(),y:e-this.y.ni()}}Ni(){return this.x.yi()||this.y.yi()}}class Vi extends Li{constructor(){super(...arguments),this.Gi="LinearScaleXY"}ct(t,e,i,s){return this.x=new Bi(t.x,e.x,i.x,s?s.x:void 0),this.y=new Bi(t.y,e.y,i.y,s?s.y:void 0),this}_i(){return this.x._i()||this.y._i()}Wi(){return u(this.x.getPixelSize(),this.y.getPixelSize())}mi(){return{x:this.x.mi(),y:this.y.mi()}}pi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const r=this.Wi(),n=ai(t,e);return n.x*=s,n.y*=s,{x:t.x+i*r.x*n.x,y:t.y+i*r.y*n.y}}}class zi extends Li{constructor(){super(...arguments),this.Gi="MixedScaleXY"}_i(){return!1}pi(t,e){const i=this.x.ft(t.x),s=this.y.ft(t.y),r={x:i+e.x,y:s+e.y};return{x:this.x.dt(r.x),y:this.y.dt(r.y)}}Ui(t,e,i,s){const r={x:this.x.ft(t.x),y:this.y.ft(t.y)},n={x:this.x.ft(e.x),y:this.y.ft(e.y)},o=oi(ci(n,r)),a=ai(n,r),h={x:r.x+o.x*s+a.x*i,y:r.y+o.y*s+a.y*i};return{x:this.x.dt(h.x),y:this.y.dt(h.y)}}mi(){const t=this.x.mi(),e=this.y.mi();return{uScaleStart:[this.x.X,this.y.X],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,e.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,e.scaleIntervalLog],uViewportStart:[t.viewportStart,e.viewportStart],uViewportSize:[t.viewportSize,e.viewportSize]}}}const Ni=(t,e)=>t instanceof wi||e instanceof wi?(new zi).Ri(t,e):(new Vi).Ri(t,e),Oi=t=>"client"===t,Ui=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),Yi=t=>"relative"===t,Gi=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),Hi=(t,e,i)=>{if(t){const t={x:i.x.ei(),y:i.y.ei(),width:i.x.ri(),height:i.y.ri()};e.forEach((e=>{e.Yi=t}))}else e.forEach((t=>{t.Yi=void 0}))},Wi=(t,e)=>{var i;return e?"string"==typeof e?`${t} ${e}`:!1!==(null===(i=e.Hi)||void 0===i?void 0:i.displayInCursor)&&e.getUnits()?`${t} ${e.getUnits()}`:t:t},Ki=t=>{let e=!1,i={type:"linear"};if(t&&(void 0!==t.opposite&&(e=t.opposite),t.type&&"linear-highPrecision"===t.type&&(i={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let s=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)s="e";else if("number"==typeof t.base)s=t.base;else if("string"==typeof t.base)try{s=Number(t.base)}catch(e){console.warn(`Unidentified logarithmic base "${t.base}"`)}i={base:s,type:"logarithmic"}}return{opposite:e,type:i}},Xi=(t,e,i,s=1)=>_t(t+.1*s*(e-t)+.5*s*i.getPixelSize()*Math.sign(e-t),t,e),ji=(t,e,i,s=1)=>{const r=i.ft(t),n=i.ft(e);return _t(i.dt(r+.1*s*(n-r)+.5*s*Math.sign(n-r)),t,e)};var $i;e.HighlightModes=void 0,($i=e.HighlightModes||(e.HighlightModes={}))[$i.noHighlighting=0]="noHighlighting",$i[$i.onHover=1]="onHover";class Zi{constructor(t,i,s,n){this.$i=!0,this.Xi=e.HighlightModes.onHover,this.ji=!1,this.Zi=!0,this.R=new r.Eventer,this.Qi=[],this.Ji=[],this.onMouseEnter=t=>this.R.on("mouseEnter",t),this.onMouseLeave=t=>this.R.on("mouseLeave",t),this.onMouseClick=t=>this.R.on("mouseClick",t),this.onMouseDoubleClick=t=>this.R.on("mouseDoubleClick",t),this.onMouseDown=t=>this.R.on("mouseDown",t),this.onMouseUp=t=>this.R.on("mouseUp",t),this.onMouseMove=t=>this.R.on("mouseMove",t),this.offMouseEnter=t=>this.R.off(t,"mouseEnter"),this.offMouseLeave=t=>this.R.off(t,"mouseLeave"),this.offMouseClick=t=>this.R.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.R.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.R.off(t,"mouseDown"),this.offMouseUp=t=>this.R.off(t,"mouseUp"),this.offMouseMove=t=>this.R.off(t,"mouseMove"),this.offMouseDragStart=t=>this.R.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.R.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.R.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.R.off(t,"mouseWheel"),this._t=(t,i,s,r)=>{const n=this.Ki(r,i);this.R.emit("mouseEnter",this,i,n),this.Xi===e.HighlightModes.onHover&&this.setHighlight(!0)},this.wt=(t,i,s)=>{this.R.emit("mouseLeave",this,i,void 0),this.Xi===e.HighlightModes.onHover&&this.setHighlight(!1)},this.It=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("mouseMove",this,e,r)},this.Ct=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("mouseClick",this,e,r)},this.kt=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("mouseDoubleClick",this,e,r)},this.Tt=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("mouseDown",this,e,r)},this.Ft=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("mouseUp",this,e,r)},this.Dt=(t,e,i,s,r)=>{const n=this.Ki(r,e);this.R.emit("mouseDragStart",this,e,i,n)},this.Pt=(t,e,i,s,r,n,o)=>{const a=this.Ki(o,e);this.R.emit("mouseDrag",this,e,i,s,r,a)},this.Bt=(t,e,i,s,r,n)=>{const o=this.Ki(n,e);this.R.emit("mouseDragStop",this,e,i,s,o)},this.Lt=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("mouseWheel",this,e,r)},this.Rt=(t,i,s,r)=>{const n=this.Ki(r,i);this.R.emit("touchStart",this,i,n),this.Xi===e.HighlightModes.onHover&&this.setHighlight(!0)},this.Et=(t,e,i,s)=>{const r=this.Ki(s,e);this.R.emit("touchMove",this,e,r)},this.zt=(t,i,s,r)=>{const n=this.Ki(r,i);this.R.emit("touchEnd",this,i,n),this.Xi===e.HighlightModes.onHover&&this.setHighlight(!1)},this.chart=t,this.qi=i,this.ts=s,this.ss=new Map,this.es=n,this.hs=this.es.rs(this,{ns:{themeEffectEnabled:this.ts.effectsText},os:{}}),this.chart.cs.us.ls(this,(t=>{this.ss.forEach(((e,i)=>i.ds(t))),this.Ji.forEach((e=>e.setHighlight(t))),this.Qi.forEach((e=>e.ds(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()})}fs(){}As(t,e){const i=void 0===(null==e?void 0:e.setEventHandlers)||e.setEventHandlers,s=void 0!==(null==e?void 0:e.isText)&&e.isText;this.ss.set(t,{isText:s});const r=Array.from(this.ss);this.hs.ns.gs(r.filter((t=>t[1].isText)).map((t=>t[0]))),this.hs.os.gs(r.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setMouseInteractions(this.$i).setVisible(this.Zi).ds(this.chart.cs.us.ps(this,!0)),i&&t.setMouseEnterEventHandler(this._t).setMouseLeaveEventHandler(this.wt).setMouseClickEventHandler(this.Ct).setMouseDoubleClickEventHandler(this.kt).setMouseDownEventHandler(this.Tt).setMouseUpEventHandler(this.Ft).setMouseMoveEventHandler(this.It).setMouseDragStartEventHandler(this.Dt).setMouseDragEventHandler(this.Pt).setMouseDragStopEventHandler(this.Bt).setMouseWheelEventHandler(this.Lt).setTouchStartEventHandler(this.Rt).setTouchMoveEventHandler(this.Et).setTouchEndEventHandler(this.zt);const n=t.onDispose((()=>{t.offDispose(n),this.ss.delete(t)}))}ys(t){this.Qi=t;const e=this.chart.cs.us.ps(this,!0);t.forEach((t=>{t.ds(e).vs(this.Zi)}))}Ki(t,e){}Ss(t){const e=this.chart.cs.xs(t);if(e&&Array.from(this.ss.keys()).includes(e.entity))return this.Ki(e.info,t)}setEffect(t){return this.hs.ns.bs(t&&this.ts.effectsText),this.hs.os.bs(t),this.chart.cs.Ms(),this}getEffect(){return this.hs.ns._s()||this.hs.os._s()}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}setIcon(t){return this.ws=t,this.chart.cs.Ms(),this}getIcon(){return this.ws}setName(t){return this.Cs=t,this.Ji.forEach((e=>e.setText(t))),this}getName(){return this.Cs||"Component"}dispose(){return this.ji||(this.ji=!0,this.ss.forEach(((t,e)=>e.dispose())),this.qi(this),this.Ji.forEach((t=>{t.dispose()})),this.Ji.length=0,this.R.emit("dispose",this),this.chart.cs.Ms()),this}setVisible(t){return t===this.Zi||(this.Zi=t,this.ss.forEach(((e,i)=>i.setVisible(t))),this.Qi.forEach((e=>e.vs(t))),this.Ji.forEach((e=>e.setOn(t))),this.R.emit("visibleStateChanged",this,this.Zi),this.chart.cs.Ms()),this}getVisible(){return this.Zi}onVisibleStateChanged(t){return this.R.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.R.off(t,"visibleStateChanged")}setHighlight(t){return this.chart.cs.us.ks(this,t),this.R.emit("highlight",this,t),this}getHighlight(){return this.chart.cs.us.ps(this)}setAnimationHighlight(t){return this.chart.cs.us.Ts(this,t),this}getAnimationHighlight(){return this.chart.cs.us.Fs(this)}setMouseInteractions(t){return this.$i=t,this.ss.forEach(((e,i)=>i.setMouseInteractions(t))),this.chart.cs.Ms(),this}getMouseInteractions(){return this.$i}getIsUnderMouse(){for(const t of this.ss)if(t[0].Is)return!0;return!1}setHighlightOnHover(t){return this.Xi=t?e.HighlightModes.onHover:e.HighlightModes.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Xi!==e.HighlightModes.noHighlighting}attach(t,e=!0,i=!1){return this.styleLegendEntry(t,i),Me(t,[this],{toggleVisibilityOnClick:e,label:this.getName(),style:void 0}),this.Ji.push(t),t.onDispose((()=>{const e=this.Ji.indexOf(t);e>=0&&this.Ji.splice(e,1)})),this}Ps(){return this.ws}onMouseDragStart(t){return this.R.on("mouseDragStart",t)}onMouseDrag(t){return this.R.on("mouseDrag",t)}onMouseDragStop(t){return this.R.on("mouseDragStop",t)}onMouseWheel(t){return this.R.on("mouseWheel",t)}onTouchStart(t){return this.R.on("touchStart",t)}onTouchMove(t){return this.R.on("touchMove",t)}onTouchEnd(t){return this.R.on("touchEnd",t)}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offTouchStart(t){return this.R.off(t,"touchStart")}offTouchMove(t){return this.R.off(t,"touchMove")}offTouchEnd(t){return this.R.off(t,"touchEnd")}offDispose(t){return this.R.off(t,"dispose")}}class Qi extends Zi{constructor(t,e,i,s,r,n,o,a){super(e,i,o,a),this.Ds=!0,this.Bs=t,this.axis=s,this.At=r,this.Ls=n,this.Rs()}setClipping(t){return this.Ds=t,this.Bs.Ms(),this}getClipping(){return this.Ds}}const qi=t=>{const e=t.length;if(e>0){let i=0,s=0;for(let r=0;r<e;r+=1)i+=t[r].x,s+=t[r].y;return u(i/e,s/e)}return u(0,0)},Ji=(...t)=>{const e=t.length,i=new Array(e).fill(!1),s=(s,r)=>{for(let n=0;n<e;n+=1){const e=t[n],o=e.Es(s,r);o?e.zs(s,r,!0):i[n]&&i[n]&&e.zs(s,r,!1),i[n]=o}return!1};return{onTouchStart:s,onTouchMove:s,onTouchEnd:s}},ts=class{constructor(t,e=300){this.Vs=!1,this.Os=[],this.Ns=300,this.Gs=t,this.Ns=e}Es(t,e){const i=Tt.performance.now();let s=!1;for(let t=0;t<this.Os.length;t+=1)i-this.Os[t].time>=this.Ns?(this.Os.splice(t,1),t-=1):this.Os[t].state&&(s=!0);return this.Vs?0===e.interactions.length&&(this.Os.push({state:!1,time:i}),this.Vs=!1):1===e.interactions.length&&"pointerdown"===e.type&&(this.Os.push({state:!0,time:i}),s=!0,this.Vs=!0),s}zs(t,e,i){if(i){const i=this.Os.reduce(((t,e)=>(e.state?t.on+=1:t.off+=1,t)),{on:0,off:0});i.on>=2&&i.off>=1&&(this.Gs(t,e),this.Os.length=0)}}},es=class{constructor(t,e,i,s=1,r=100){this.Ws=t,this.Us=e,this.Ys=i,this.Hs=s,this.$s=r}Es(t,e){const i=e.interactions.length;if(i===this.Hs){if(void 0!==this.Xs)return!0;if("pointerdown"===e.type&&(1===i||(t=>{const e=t.length;if(e>0){const i=qi(t);let s=0;for(let r=0;r<e;r+=1)s=Math.max(s,$e(i,u(t[r].x,t[r].y)));return s}return Ve})(e.interactions)<=this.$s))return this.Xs=qi(e.interactions),!0}return!1}zs(t,e,i){const s=this.js;if(!i||e.forceTouchEnd||"pointerup"===e.type)this.Ys&&this.Ys(t,this.Xs,s,e),this.Xs=void 0,this.js=void 0;else{const i=qi(e.interactions);"pointerdown"===e.type?this.Ws&&this.Ws(t,this.Xs,e):"pointermove"===e.type&&this.Us&&this.Us(t,this.Xs,i,u(i.x-s.x,s.y-i.y),e),this.js=i}}},is=class{constructor(t,e,i){this.Zs=!1,this.Ws=t,this.Us=e,this.Ys=i}Es(t,e){return this.Zs?2!==e.interactions.length&&(this.Zs=!1):2===e.interactions.length&&"pointerdown"===e.type&&(this.Zs=!0),this.Zs}zs(t,e,i){let s,r;if(i&&"pointerup"!==e.type){if("pointerdown"===e.type){const i=e.interactions;s=i[0],r=i[1],this.Ws(t,s,r,e)}else if("pointermove"===e.type){s=e.interactions[0],r=e.interactions[1];const i=this.Qs,n=this.Js,o=u(s.x-i.x,i.y-s.y),a=u(r.x-n.x,n.y-r.y);this.Us(t,s,r,o,a,e)}}else{const i=e.interactions;this.Ys(t,i[0],i[1],e)}this.Qs=s,this.Js=r}},ss=s.Record({type:"linestyle",lineType:"solid",fillStyle:new U({color:T(255,255,255)}),thickness:1});class rs extends ss{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}N(){const t=this.getThickness();return t<0?1:t}}const ns=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType);class os{constructor(t,e){this.Ks=t,this.qs=e,this.te=e.rows*Ls,this.ie=e.columns*Vs}}var as,hs;e.OnScreenMenuButtonType=void 0,(as=e.OnScreenMenuButtonType||(e.OnScreenMenuButtonType={}))[as.ZoomIn=0]="ZoomIn",as[as.ZoomInX=1]="ZoomInX",as[as.ZoomInY=2]="ZoomInY",as[as.ZoomOut=3]="ZoomOut",as[as.ZoomOutX=4]="ZoomOutX",as[as.ZoomOutY=5]="ZoomOutY",as[as.ZoomToFit=6]="ZoomToFit",as[as.ToggleAnimations=7]="ToggleAnimations",e.OnScreenMenuButtonShape=void 0,(hs=e.OnScreenMenuButtonShape||(e.OnScreenMenuButtonShape={}))[hs.Circle=0]="Circle",hs[hs.Rectangle=1]="Rectangle",hs[hs.RoundedRectangle=2]="RoundedRectangle";const ls={x:-43,y:0},us={x:-65,y:0},cs={x:-86,y:0},ds={x:-107,y:-1},fs={x:-128,y:-3},gs={x:-150,y:0},ms={x:-171,y:0},ys={x:-276,y:0},ps={x:-298,y:0},xs={x:0,y:0},As={x:-21,y:0};class Ss extends os{constructor(t,e,i,s){super(t,i),this.se=Tt.document.createElement("button"),this.ee=Tt.document.createElement("div"),this.he=Tt.document.createElement("label"),this.qs=i,this.re=e,this.ne=s}oe(t,e,i,s){this.ae(t,s),this.le(),this.ue(e),this.ce(),this.he.textContent=i||"";const r=Tt.document.createElement("div");this.de(r),this.se.onclick=this.onClick.bind(this),r.appendChild(this.ee),r.appendChild(this.he),this.se.appendChild(r)}ce(){this.se.style.cursor="pointer"}de(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ue(t){"string"==typeof t?(this.ee.style.backgroundImage=`url(${t})`,this.ee.style.backgroundSize="100%",this.ee.style.backgroundRepeat="no-repeat",this.ee.style.backgroundPosition="center",this.ee.style.width="20px",this.ee.style.height="20px"):this.applyStyleForSprite(t),this.ee.style.margin="auto"}le(){switch(this.re){case e.OnScreenMenuButtonShape.RoundedRectangle:this.se.style.borderRadius="10px";break;case e.OnScreenMenuButtonShape.Rectangle:this.se.style.borderRadius="0px";break;case e.OnScreenMenuButtonShape.Circle:default:this.se.style.borderRadius="31px"}}ae(t,e){this.se.style.width=`${this.ie.toString()}px`,this.se.style.height=`${this.te.toString()}px`,this.se.style.backgroundColor=t,this.se.style.opacity=e||zs,this.se.style.alignItems="center",this.se.style.border="2px solid #707070",this.se.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.ee.style.backgroundImage=`url(${this.Ks}/${Ns})`,this.ee.style.backgroundPositionX=`${t.x}px`,this.ee.style.backgroundPositionY=`${t.y}px`,this.ee.style.backgroundSize="1600%",this.ee.style.backgroundRepeat="no-repeat",this.ee.style.width="20px",this.ee.style.height="20px"}fe(t){return t.appendChild(this.se),t}Ae(){return this.se}}class vs extends Ss{constructor(t,e,i,s){super(t,e,i,s),this.ge="",this.pe="",this.ye=!1,this.ne=s}me(){this.ve(),this.onToggledStateAction()}Se(){this.xe(),this.onInitialStateAction()}xe(){this.be(this.ge)}ve(){this.be(this.pe)}be(t){"string"==typeof t?this.ee.style.background=t:(this.ee.style.backgroundImage=`url(${this.Ks}/${Ns})`,this.ee.style.backgroundPositionX=`${t.x}px`,this.ee.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ye?this.Se():this.me(),this.ye=!this.ye}}class bs extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),ls)}onClick(){const t=this.ne.Me();t&&this.ne.zoom(t,{x:-1,y:-1})}}class Ms extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),ds)}onClick(){const t=this.ne.Me();t&&this.ne.zoom(t,{x:-1,y:0})}}class Ts extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),gs)}onClick(){const t=this.ne.Me();t&&this.ne.zoom(t,{x:0,y:-1})}}class ws extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),us)}onClick(){const t=this.ne.Me();t&&this.ne.zoom(t,{x:1,y:1})}}class Cs extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),fs)}onClick(){const t=this.ne.Me();t&&this.ne.zoom(t,{x:1,y:0})}}class ks extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),ms)}onClick(){const t=this.ne.Me();t&&this.ne.zoom(t,{x:0,y:1})}}class Es extends vs{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.ge=ys,this.pe=ps,this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),this.ge)}onToggledStateAction(){this.ne.setAnimationsEnabled(!1)}onInitialStateAction(){this.ne.setAnimationsEnabled(!0)}}class Rs extends Ss{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.ne=e;const s=this.ne.getTheme();this.oe(s.onScreenMenuBackgroundColor.toRGBAString(),cs)}onClick(){this.ne.forEachAxis((t=>{t.fit(!0)}))}}class Is extends Ss{constructor(t,e,i){super(t,e.shape||Os,e.dimensions||{rows:1,columns:1},i);const s=i.getTheme(),r=e.color||s.onScreenMenuBackgroundColor.toRGBAString(),n=e.icon||"",o=e.label||"",a=e.opacity||"";this.oe(r,n,o,a),this._e=e.action}onClick(){this._e(this.ne)}}class _s extends vs{constructor(t,e,i,s){super(t,e,{rows:1,columns:1},i),this.ne=i,this.we=s,this.ge=As,this.pe=xs,this.oe(Us,this.ge)}xe(){this.be(this.ge),this.se.style.backgroundColor=Us,this.se.style.border="2px solid #707070",this.se.style.margin="0px"}ve(){this.be(this.pe),this.se.style.background="#FECC00 0% 0% no-repeat padding-box",this.se.style.border="10px solid #BCBCBC12",this.se.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.we)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.we)||void 0===t||t.style.setProperty("display","none")}}var Fs;e.MouseStyles=void 0,(Fs=e.MouseStyles||(e.MouseStyles={})).Move="move",Fs.ResizeColumn="col-resize",Fs.ResizeRow="row-resize",Fs.Horizontal="ew-resize",Fs.Vertical="ns-resize",Fs.NorthWest="nw-resize",Fs.NorthEast="ne-resize",Fs.Copy="copy",Fs.CrossHair="crosshair",Fs.Default="default",Fs.Help="help",Fs.Restricted="not-allowed",Fs.None="none",Fs.Point="pointer",Fs.Text="text",Fs.Wait="wait",Fs.ZoomIn="zoom-in",Fs.ZoomOut="zoom-out";const Ds={LeftBottom:u(-1,-1),CenterBottom:u(0,-1),RightBottom:u(1,-1),LeftCenter:u(-1,0),Center:u(0,0),RightCenter:u(1,0),LeftTop:u(-1,1),CenterTop:u(0,1),RightTop:u(1,1)},Bs=new U({color:T(255,255,255,0)}),Ps=new rs({thickness:1,fillStyle:Bs}),Ls=60,Vs=60,zs="1.0",Ns="osm/osm-sprite-transparent.png",Os=e.OnScreenMenuButtonShape.Circle,Us="#363636";var Ys;e.OSMPosition=void 0,(Ys=e.OSMPosition||(e.OSMPosition={}))[Ys.TopRight=0]="TopRight",Ys[Ys.TopLeft=1]="TopLeft",Ys[Ys.BottomLeft=2]="BottomLeft",Ys[Ys.BottomRight=3]="BottomRight";class Gs extends Qi{constructor(t,e,i,s,r,n,o,a){super(t,e,i,s,r,n,o,a),this.Cs="Band",this.Ce=0,this.ke=0,this.Te=this.ts.bandFillStyle,this.Fe=this.ts.bandStrokeStyle,this.Ie=!0,this.Pe=this.Bs.Le(this.At).Be(this.Te).De(this.Fe).ds(this.getHighlight()),this.As(this.Pe)}setValueStart(t){return this.Ce=t,this.R.emit("valueChange",this,this.Ce,this.ke),this.Bs.Ms(),this}getValueStart(){return this.Ce}setValueEnd(t){return this.ke=t,this.R.emit("valueChange",this,this.Ce,this.ke),this.Bs.Ms(),this}getValueEnd(){return this.ke}setFillStyle(t){this.Te="function"==typeof t?t(this.Te):t;const e=this.Te;return this.Pe.Be(e),this.Bs.Ms(),this}getFillStyle(){return this.Te}setStrokeStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const e=this.Fe;return this.Pe.De(e),this.Bs.Ms(),this}getStrokeStyle(){return this.Fe}onValueChange(t){return this.R.on("valueChange",t)}offValueChange(t){return this.R.off(t,"valueChange")}Re(){return this.Pe.Ee(this.Ls.toVec2(this.Ce,this.Ls.getHeight(this.At).getInnerStart())).it(this.Ls.toVec2(this.ke-this.Ce,this.Ls.getHeight(this.At).getInnerInterval())),Hi(this.Ds,[this.Pe],this.At),this}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te,stroke:this.Fe})}ze(t,e){t.ds(e),this.Bs.Ms()}setDefaultMouseInteractions(t){return this.Ie=t,this}Rs(){let t,i;const s=(e,s)=>{if(!this.Ie)return;const r=ct(this.Bs.cs.Ve(s.x,s.y),this.Bs.cs.At,this.At),n=this.Ls.getWidth(r),o=this.axis.At.ft(this.Ce),a=this.axis.At.ft(this.ke),h=(this.axis.At.ft(n)-o)/(a-o);t=!(h<.1||h>.9),!1===t&&(i=h<.5)},r=(e,s,r,n,o)=>{if(!this.Ie)return;const a=this.Ls.getWidth(n);t?(this.Ce=this.axis.At.pi(this.Ce,a),this.ke=this.axis.At.pi(this.ke,a)):i?this.Ce=this.axis.At.pi(this.Ce,a):this.ke=this.axis.At.pi(this.ke,a),Qt(o),this.R.emit("valueChange",this,this.Ce,this.ke),this.Bs.Ms()};this.onMouseMove(((i,r)=>{if(!this.Ie)return;s(0,u(r.clientX,r.clientY));const n=t?e.MouseStyles.Point:this.Ls.getWidth({x:e.MouseStyles.Horizontal,y:e.MouseStyles.Vertical});this.Oe=this.chart.engine.setMouseStyle(n,this.Oe)})),this.onMouseLeave((()=>{this.Ie&&(this.chart.engine.restoreMouseStyle(this.Oe),this.Oe=void 0)})),this.onMouseDrag(((t,e,i,s,n)=>{this.Ie&&0===i&&r(0,0,0,n,e)}));const n=Ji(new es(s,r));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class Hs extends Qi{constructor(t,e,i,s,r,n,o,a){super(t,e,i,s,r,n,o,a),this.Cs="Constant Line",this.M=0,this.Fe=this.ts.constantLineStrokeStyle,this.Ne=!0,this.Ie=!0,this.Ge=this.Bs.Ue(this.At).We(this.Fe).ds(this.getHighlight()),this.As(this.Ge)}setValue(t){return this.M=t,this.R.emit("valueChange",this,this.M),this.Bs.Ms(),this}getValue(){return this.M}setStrokeStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const e=this.Fe;return this.Ge.We(e),this.Bs.Ms(),this}getStrokeStyle(){return this.Fe}setInteractionMoveByDragging(t){return this.Ne=t,this}getInteractionMoveByDragging(){return this.Ne}onValueChange(t){return this.R.on("valueChange",t)}offValueChange(t){return this.R.off(t,"valueChange")}Re(){return this.Ge.He(this.Ls.toVec2(this.M,this.Ls.getHeight(this.At).getInnerStart())).Ye(this.Ls.toVec2(this.M,this.Ls.getHeight(this.At).getInnerEnd())),Hi(this.Ds,[this.Ge],this.At),this}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{stroke:this.Fe})}ze(t,e){t.ds(e),this.Bs.Ms()}setDefaultMouseInteractions(t){return this.Ie=t,this}Rs(){const t=(t,e)=>{this.Ie&&this.Ne&&(this.M=this.axis.At.pi(this.M,this.Ls.getWidth(e)),this.R.emit("valueChange",this,this.M),this.Bs.Ms(),Qt(t))};this.onMouseMove((()=>{if(this.Ie&&this.Ne){const t=this.Ls.getWidth({x:e.MouseStyles.Horizontal,y:e.MouseStyles.Vertical});this.Oe=this.chart.engine.setMouseStyle(t,this.Oe)}})),this.onMouseLeave((()=>{this.Ie&&this.Ne&&(this.chart.engine.restoreMouseStyle(this.Oe),this.Oe=void 0)})),this.onMouseDrag(((e,i,s,r,n)=>{this.Ie&&this.Ne&&0===s&&t(i,n)}));const i=Ji(new es(void 0,((e,i,s,r,n)=>t(n,r))));this.onTouchStart(i.onTouchStart),this.onTouchMove(i.onTouchMove),this.onTouchEnd(i.onTouchEnd)}}const Ws={fitting:{start:(t,e,i,s)=>e>=t?i:s,end:(t,e,i,s)=>e>=t?s:i,allowIntervalLengthChange:!0},expansion:{start:(t,e,i,s)=>e>=t?i<t?i:t:s>t?s:t,end:(t,e,i,s)=>e>=t?s>e?s:e:i<e?i:e,allowIntervalLengthChange:!0},progressive:{start:(t,e,i,s)=>e>t?Ws.progressive.end(t,e,i,s)+(t-e):s>t?s:t,end:(t,e,i,s)=>e>t?s>e?s:e:Ws.progressive.start(t,e,i,s)+(e-t),allowIntervalLengthChange:!1},regressive:{start:(t,e,i,s)=>e>t?i<t?i:t:Ws.regressive.end(t,e,i,s)+(t-e),end:(t,e,i,s)=>e>t?Ws.regressive.start(t,e,i,s)+(e-t):i<e?i:e,allowIntervalLengthChange:!1}},Ks={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},Xs=t=>void 0!==t.$e,js=t=>void 0!==t.Xe,$s=(t,e)=>[t,e],Zs=(t,e,i,s)=>{const r=[],n=Math.round(Math.abs((t-e)/i));for(let o=1;o<n;o+=1){const n=Math.round((t+i*o)*s)/s;n<e&&r.push(n)}return r},Qs=(t,e,i,s,r)=>{It(t,0)&&(t=0),It(e,0)&&(e=0);const n=[];let o=void 0!==s?((t,e,i)=>t-(t-i)%e)(t,i,s):t;if(i<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${i}`);for(;o<e&&!1===It(o,e);)n.push(o),o+=i,o=Math.round(o*r)/r;return n.push(o),n},qs=(t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e&&!1===It(n,e);)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r},Js=(t,...e)=>{const i=e.length>0?e.length:t?1:0;return(s,r,n,o,a,h)=>{if(r>=i)return;const l=e[r]||1;let u=!1,c=!1,d=1;return t&&(u="ignore"in t?"first"===t.ignore||"both"===t.ignore:u,c="ignore"in t?"last"===t.ignore||"both"===t.ignore:c,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,e,i,s,r)=>(i&&(t=t.filter(((t,e)=>e>0))),s&&(t=t.filter(((e,i)=>i<t.length-1))),t.filter(((t,i)=>(i+r)%e==0))))(s,l,u,c,d)}},tr=(...t)=>{const e=t.length>0?t.length:0;return(i,s,r,n,o,a)=>{if(s>=e)return;const h=t[s]||1;return i.filter(((t,e)=>e%h==0))}},er=s.Record({type:"empty-ticks",cursorFormatter:void 0});class ir extends er{je(t){return{Ze:[],Qe:[],Je:this.cursorFormatter?this.cursorFormatter:Fi.Numeric,Ke:void 0,qe:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const sr=t=>!(!t||"object"!=typeof t||!("type"in t)||"empty-ticks"!==t.type),rr=(t,e)=>{if(e.has(t))return e.get(t);const i=Je(t.ih.th());if(Ae(i))return i;const s=t.sh.pi(i.min,{x:-5,y:-5}),r=t.sh.pi(i.min,{x:5,y:5}),n=t.sh.pi(i.max,{x:-5,y:-5}),o=t.sh.pi(i.max,{x:5,y:5}),a={min:{x:Math.min(s.x,r.x,n.x,o.x),y:Math.min(s.y,r.y,n.y,o.y)},max:{x:Math.max(s.x,r.x,n.x,o.x),y:Math.max(s.y,r.y,n.y,o.y)}};return e.set(t,a),a},nr=t=>{const e=new Map;if(!sr(t)){for(const i of t.Ze)e.set(i,new Map);for(const i of t.Qe)e.set(i,new Map)}return e},or=(new ir).je({type:"linear"});class ar{constructor(t,e,i,s,n,o,a){this.R=new r.Eventer,this.eh=or,this.hh=Ks.Empty,this.rh=new Map,this.oh=new Map,this.ah=Ws.fitting,this.lh=!0,this.uh=$((()=>this.chart.cs.Ms()))(300,X.linear),this.dh=!0,this.Zi=!0,this.fh=!1,this.Ah=ze,this.gh=!1,this.ph=!1,this.yh=ze,this.mh=ze,this.Sh=ze,this.xh=!1,this.bh="",this.Mh={},this._h=()=>{this.wh.setMouseInteractions(!0).setMouseMoveEventHandler(((t,e)=>this.R.emit("mouseMoveTitle",this,e))).setMouseEnterEventHandler(((t,e)=>this.R.emit("mouseEnterTitle",this,e))).setMouseLeaveEventHandler(((t,e)=>this.R.emit("mouseLeaveTitle",this,e))).setMouseDownEventHandler(((t,e)=>this.R.emit("mouseDownTitle",this,e))).setMouseUpEventHandler(((t,e)=>this.R.emit("mouseUpTitle",this,e))).setMouseClickEventHandler(((t,e)=>this.R.emit("mouseClickTitle",this,e))).setMouseDoubleClickEventHandler(((t,e)=>this.R.emit("mouseDoubleClickTitle",this,e))).setMouseWheelEventHandler(((t,e)=>this.R.emit("mouseWheelTitle",this,e))).setMouseDragStartEventHandler(((t,e,i)=>this.R.emit("mouseDragStartTitle",this,e,i))).setMouseDragEventHandler(((t,e,i,s,r)=>this.R.emit("mouseDragTitle",this,e,i,s,r))).setMouseDragStopEventHandler(((t,e,i,s)=>this.R.emit("mouseDragStopTitle",this,e,i,s))).setTouchStartEventHandler(((t,e)=>this.R.emit("touchStartTitle",this,e))).setTouchMoveEventHandler(((t,e)=>this.R.emit("touchMoveTitle",this,e))).setTouchEndEventHandler(((t,e)=>this.R.emit("touchEndTitle",this,e))),this._h=void 0},this.Ch=(t,e,i,s,r,n)=>{const o=[],a=[];for(const h of t){if(h<i||h>s){o.push(h);continue}const t=this.rh.get(e),l=(t?t.get(h):void 0)||this.kh(h,e);l.Th=!1;const u=this.Fh(l,r);n.set(l,u),o.push(h),a.push(l)}return{displayedKeyValues:o,createdTicks:a}},this.Ih=(t,e,i,s,r,n,o,a,h,l,u)=>{const c=[];for(let d=0;d<t.length;d+=1){const f=t[d],g=e[d];let m,y,p;if(this.Ph(f,i)){const e=rr(f,h);y=[t[d-1],t[d+1]],p=y.concat(l).concat(u).filter((t=>void 0!==t)).filter((e=>e.Dh!==i||!!t.find((t=>t===e)))).map((t=>Ye(e,rr(t,h))?t:void 0)),m=p.some((t=>void 0!==t))}else m=!1;if(m){let t=!0;const e=p.filter((t=>void 0!==t));if(t&&e.every((t=>Xs(t.Dh)))&&(t=!1),t&&i.Bh&&i.Bh.Lh&&!1===i.Bh.Lh(g,s,r,n,o,a)&&(t=!1),!1===t)continue;return!0}c.push(f)}return c},this.formatValue=t=>this.eh.Je(t,this.At),this.Rh=!0,this.Eh=!0,this.chart=t,this.zh=e,this.ts=s,this.Vh=o,this.At=i,this.Oh=a,"logarithmic"===a.type&&this.setAnimationZoom(X.logarithmic(ki(a.base))),this.Nh=o.numeric,this.Gh("Numeric"),this.Wh=i.getInnerStart(),this.Uh=i.getInnerEnd(),this.setAnimationsEnabled(n)}setUnits(t,e={}){return this.Yh=t,this.Hi=e,this.Hh(),this}getUnits(){return this.Yh}setDefaultInterval(t,e){return this.$h=t,!1!==(null==e?void 0:e.applyImmediately)&&(this.xh=!0,this.chart.cs.Ms()),this}getDefaultInterval(){return this.$h}getTitle(){return this.bh}setTitle(t){return this.bh=t,this.Hh(),this}getTitleFillStyle(){return this.wh.Xh()}setIntervalRestrictions(t){return this.jh=t,this.chart.cs.Ms(),this}getIntervalRestrictions(){return this.jh}setTitleFillStyle(t){return this.wh.Be(t),this.chart.cs.Ms(),this}getTitleFont(){return this.wh.Zh()}setTitleFont(t){return this.wh.Qh(t),this.chart.cs.Ms(),this}setTitleRotation(t){return this.wh.Jh(t),this.chart.cs.Ms(),this}getTitleRotation(){return this.wh.Kh()}setTitleEffect(t){return this.qh.bs(t),this.chart.cs.Ms(),this}getTitleEffect(){return this.qh._s()}Gh(t,e){if(this.rh.size>0&&this.tr(),"Empty"===t){const i=e||(t=>t);this.Nh=i(new ir),this.eh=this.Nh.je(this.Oh),this.hh=t}else if("Numeric"===t){"Numeric"!==this.hh&&(this.Nh=this.Vh.numeric);const i=e||(t=>t);this.Nh=i(this.Nh),this.eh=this.Nh.je(this.Oh),this.hh=t}else if("DateTime"===t){"DateTime"!==this.hh&&(this.Nh=this.Vh.datetime);const i=e||(t=>t);this.Nh=i(this.Nh),this.eh=this.Nh.je(this.Oh),this.hh=t}else if("Time"===t){"Time"!==this.hh&&(this.Nh=this.Vh.time);const i=e||(t=>t);this.Nh=i(this.Nh),this.eh=this.Nh.je(this.Oh),this.hh=t}return this.oh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.oh=nr(this.eh),this.chart.cs.Ms(),this}ir(){return this.eh}sr(t){this.eh=t,this.oh.forEach((t=>Array.from(t.values()).forEach((t=>t.dispose())))),this.oh=nr(this.eh),this.chart.cs.Ms()}setInterval(t){const{start:e,end:i,animate:s,stopAxisAfter:r}=t;return this.yt(void 0!==e?e:this.Wh,void 0!==i?i:this.Uh,void 0!==s&&s,void 0===r||r,"userSetInterval"),this}yt(t,e,i=!1,s=!0,r){let n={start:t,end:e};const o=!0,a=Math.abs(e-t);if(Math.abs(this.Uh-this.Wh),void 0!==this.eh.Ke&&this.eh.Ke>a){const i=(e+t)/2,s=this.eh.Ke/2*(t>e?-1:1);n={start:i-s,end:i+s}}if(void 0!==this.eh.qe&&this.eh.qe<a){const i=(e+t)/2,s=this.eh.qe/2*(t>e?-1:1);n={start:i-s,end:i+s}}const h=this.At.ut(n.start,n.end,this.Wh,this.Uh,o);if(!1===h)return this;if(!0===h);else if(n=h,"zoomBandChart"===r)return this;let l;switch(r){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":l=!0;break;case"zoomBandChart":case"synchronizedAxis":l=!1;break;default:return Te(0,""),this}if(this.er&&this.er.finishAll(!1),this.uh&&(!0===i||i>0)){this.setStopped(!0);const t=!0===i?void 0:i,e=!this.er||this.er.isOver()?this.uh:this.er.NextAnimation.bind(this);this.er=e([[this.Wh,n.start],[this.Uh,n.end]],(([t,e])=>{this.hr(t,e,o)}),t),this.er.onAnimationEnd((()=>{this.er=void 0,l&&(this.Sh=Tt.performance.now())})),this.er.onAnimationEnd((()=>this.setStopped(s)))}else this.hr(n.start,n.end,o),this.setStopped(s),l&&(this.Sh=Tt.performance.now());return this}getInterval(){return{start:this.Wh,end:this.Uh}}setStopped(t){return t===this.fh||(t&&(this.er&&this.er.finishAll(!1),this.er=void 0),this.fh=t,this.R.emit("stoppedStateChanged",this,this.fh),this.Ah=Tt.performance.now(),this.chart.cs.Ms()),this}getStopped(){return this.fh}onStoppedStateChanged(t){return this.R.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.R.off(t,"stoppedStateChanged")}fit(t,e){const i=this.rr(),s=this.$h||dr,r="function"==typeof s?s({curStart:this.Wh,curEnd:this.Uh,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):s;return this.yt(void 0!==r.start?r.start:this.Wh,void 0!==r.end?r.end:this.Uh,void 0!==r.animate?r.animate:void 0===t||t,void 0!==r.stopAxisAfter?r.stopAxisAfter:void 0===e||e,"userFit"),this}setScrollStrategy(t){return this.ah=t,this.chart.cs.Ms(),this}getScrollStrategy(){return this.ah}setAnimationScroll(t){return this.lh=Boolean(t),this.chart.cs.Ms(),this}setAnimationZoom(t,e=300){return this.er&&(this.er.finishAll(!1),this.er=void 0),this.uh=t?$((()=>this.chart.cs.Ms()))(e,t):void 0,this}setAnimationsEnabled(t){return this.dh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(X.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.dh}setVisible(t){const e=this.Zi!==t;return this.Zi=t,this.wh.setVisible(t),this.nr((e=>{e.ih.setVisible(t)})),e&&this.R.emit("visibleStateChanged",this,this.Zi),this}getVisible(){return this.Zi}onIntervalChange(t){return this.R.on("scaleChange",t)}offIntervalChange(t){return this.R.off(t,"scaleChange")}onVisibleStateChanged(t){return this.R.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.R.off(t,"visibleStateChanged")}ar(t,e){this._h&&this._h();const i=new Map;if(sr(this.eh)||!this.Zi)return this.tr(),i;e=e||new Map;const s=this.lr(),r=s.min,n=s.max,o=n-r,a=t.physicalAxisSize;this.Mh.physicalAxisSize=a;const h=lr(this.eh,r,n,this.Wh,this.Uh,a),l=[];if(this.ur(),l.push(...this.cr(this.eh,r,n,h,e,t,i)),this.dr(this.eh,r,n,h,e,t,l,i),this.Ar(),h)for(const[t,e]of this.oh){const i=h.get(t);if(void 0!==i)for(const[t,s]of e)i.includes(t)||(null==s||s.dispose(),e.delete(t))}return this.Mh.min=r,this.Mh.max=n,this.Mh.scaleInterval=o,this.Mh.physicalAxisSize=a,i}gr(t){const e=t.Dh.pr;t.ih.yr(e(t.M,this.At)).zs()}mr(t,e){const i=e.vr;t.ih.Be(i.getLabelFillStyle()).Qh(i.getLabelFont()).Jh(i.getLabelRotation())}kh(t,e){const i=this.oh.get(e);let s=i.get(t);s?(i.delete(t),s.Dh=e,s.vs(!0)):s=this.Sr(t,e);const r=this.rh.get(e)||new Map;return r.set(t,s),this.rh.set(e,r),this.mr(s,e),s}Fh(t,e){const i=this.br(t,e);return this.gr(t),i}cr(t,e,i,s,r,n,o){const a=[];for(const h of t.Ze){const t=s.get(h);for(const s of t){if(s<e||s>i)continue;const t=this.rh.get(h),l=(t?t.get(s):void 0)||this.kh(s,h),u=this.Fh(l,n),c=rr(l,r);a.find((t=>Ye(c,rr(t,r))))&&l.ih.setVisible(!1),l.Th=!1,o.set(l,u),a.push(l)}}return a}dr(t,e,i,s,r,n,o,a){let h,l=[];for(const u of t.Qe){const t=s.get(u);if(!t)break;let c;if(void 0===h)c=[{start:e,end:i,keyValues:t}];else{c=[];for(let e=0;e<h.length-1;e+=1){const i=h[e],s=h[e+1],r={start:i,end:s,keyValues:[]};for(const e of t)e>=i&&e<s&&r.keyValues.push(e);c.push(r)}}if(h=t,js(u))continue;let d=0,f=-1,g=[],m=[];for(let t=0;t<c.length;t+=1){const s=this.Ch(c[t].keyValues,u,e,i,n,a);g=g.concat(s.displayedKeyValues),m=m.concat(s.createdTicks)}let y=m,p=!0;if(u.vr.getLabelFillStyle()!==V){let t=[];for(;++f<c.length;){const s=c[f],n=s.start,a=s.end;let h=s.keyValues;if(d>0){if(void 0===u.Bh){p=!1;break}const t=u.Bh.Mr;if(h=t(h,d-1,n,a,e,i),void 0===h)break}const y=this.Ih(m.filter((t=>h.some((e=>It(t.M,e))))),g,u,d,n,a,e,i,r,o,l);!0!==y?t=t.concat(y):(d+=1,f=-1,t=[])}y=t,m.forEach((e=>{t.find((t=>t===e))||this._r(e)}))}if(l=y,!p)break}}_r(t){const e=this.rh.get(t.Dh);null==e||e.delete(t.M);const i=this.oh.get(t.Dh);i&&i.has(t.M)?t.dispose():i&&(t.vs(!1),i.set(t.M,t))}nr(t){for(const e of this.rh.values())for(const i of e.values())t(i)}wr(t,e){for(const i of this.rh.values())for(const s of i.values())e=t(e,s);return e}tr(){this.rh.forEach(((t,e)=>{t.forEach((t=>this._r(t)))})),this.rh.clear()}ur(){for(const t of this.rh.values())for(const e of t.values())e.Th=!0}Ar(){for(const t of this.rh.values())for(const[e,i]of t.entries())i.Th&&(i.dispose(),t.delete(e))}lr(){const t=this.At.getInnerStart()<this.At.getInnerEnd()?this.At.getInnerStart():this.At.getInnerEnd(),e=this.At.getInnerEnd()>this.At.getInnerStart()?this.At.getInnerEnd():this.At.getInnerStart();return m(t,e)}Ph(t,e){return!(t.Th||0===t.ih.Cr().length||Xs(e)&&!0!==e.kr)}Tr(t,e){return sr(this.eh)||(this.eh.Ze.forEach((i=>{e=t(e,i.vr)})),this.eh.Qe.forEach((i=>{(t=>void 0!==t.pr)(i)&&(e=t(e,i.vr))}))),e}rr(){let t=this.zh.Fr();const e=this.zh.Ir();let i;if(void 0!==t&&Ct(t)&&void 0!==e&&Ct(e)&&("logarithmic"===this.Oh.type&&(0===t&&(t=Math.min(1,e)),Math.sign(t)!==Math.sign(e)&&(t=Math.min(1,e-.1))),i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,e)):i=m(t,e)),i&&Ct(i.min)&&Ct(i.max))return It(i.min,i.max)?{min:i.min-1,max:i.max+1}:i}Pr(){if(!this.Rh)return 0;let t=0;const e=this.zh.Dr();return e&&(t=Math.max(t,e)),t}setAutoRegionsEnabled(t){return this.Rh=t,this.chart.cs.Ms(),this}Br(){var t;const e=this.gh;let i=!1;if(this.xh&&this.$h){const t=this.rr(),e="function"==typeof this.$h?this.$h({curStart:this.Wh,curEnd:this.Uh,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.$h;this.setInterval(e),this.xh=!1}if(this.ah&&!this.fh){const e=this.rr();if(e){const s=this.Wh,r=this.Uh;let n=this.ah.start(s,r,e.min,e.max),o=this.ah.end(s,r,e.min,e.max);const a=null===(t=this.ah.allowIntervalLengthChange)||void 0===t||t,h=cr(this.jh,e,{start:n,end:o},{start:s,end:r},a);n=h.start,o=h.end;const l=!1===It(s,n),u=!1===It(r,o);if(n=l?n:s,o=u?o:r,l||u){let t=!1;if(this.lh&&!this.Eh)if(this.lh){t=!0;const e=l?this.Lr(s,n):s,h=u?this.Lr(r,o):r;if(!0===this.hr(e,h,a)&&(l&&!1===It(e,n)||u&&!1===It(h,o))){this.chart.cs.Ms(!0),i=!0;let t=Math.abs(o-n)/Math.abs(e-h);t<1&&(t=1/t),this.ph=t>=1.4}}else t=!1;t||this.hr(n,o,a),this.Eh=!1}}}return i?(this.gh!==i&&(this.gh=i,this.yh=Tt.performance.now()),this.Rr&&(clearTimeout(this.Rr),this.Rr=void 0)):!0===e&&void 0===this.Rr&&(this.ph=!1,this.Rr=setTimeout((()=>{!1!==this.gh&&(this.gh=!1,this.yh=Tt.performance.now()),this.Rr=void 0,this.chart.cs.Ms()}),200)),this}hr(t,e,i){let s={start:t,end:e},r=!0;if(this.jh){const t=this.rr();s=cr(this.jh,t,s,{start:this.Wh,end:this.Uh},i)}const n=Math.abs(e-t),o=Math.abs(this.Uh-this.Wh);if(void 0!==this.eh.Ke&&this.eh.Ke>n){const n=(e+t)/2,a=(i?this.eh.Ke/2:o/2)*(t>e?-1:1);s={start:n-a,end:n+a},r=!1}if(void 0!==this.eh.qe&&this.eh.qe<n){const n=(e+t)/2,a=(i?this.eh.qe/2:o/2)*(t>e?-1:1);s={start:n-a,end:n+a},r=!1}let a=this.At.ut(s.start,s.end,this.Wh,this.Uh,i);if(!1===a)return!1;!0!==a&&(s=a);const h=this.Pr(),l=this.Er(Math.min(s.start,s.end),Math.max(s.start,s.end),h);return a=this.At.ut(s.end>s.start?l.min:l.max,s.end>s.start?l.max:l.min,this.Wh,this.Uh,!1),!!a&&(!0===a?this.At.q(s.end>s.start?l.min:l.max,s.end>s.start?l.max:l.min):this.At.q(s.start,s.end),this.Wh=s.start,this.Uh=s.end,this.R.emit("scaleChange",this,s.start,s.end),this.mh=Tt.performance.now(),this.chart.cs.Ms(),r)}zr(){return this.gh}Vr(){return void 0!==this.er}Hh(){var t;const e=!1!==(null===(t=this.Hi)||void 0===t?void 0:t.displayOnAxis);this.wh.yr(this.Yh&&e&&this.bh?`${this.bh} (${this.Yh})`:this.bh),this.chart.cs.Ms()}onTitleMouseEnter(t){return this.R.on("mouseEnterTitle",t)}offTitleMouseEnter(t){return this.R.off(t,"mouseEnterTitle")}onTitleMouseMove(t){return this.R.on("mouseMoveTitle",t)}offTitleMouseMove(t){return this.R.off(t,"mouseMoveTitle")}onTitleMouseLeave(t){return this.R.on("mouseLeaveTitle",t)}offTitleMouseLeave(t){return this.R.off(t,"mouseLeaveTitle")}onTitleMouseDown(t){return this.R.on("mouseDownTitle",t)}offTitleMouseDown(t){return this.R.off(t,"mouseDownTitle")}onTitleMouseUp(t){return this.R.on("mouseUpTitle",t)}offTitleMouseUp(t){return this.R.off(t,"mouseUpTitle")}onTitleMouseClick(t){return this.R.on("mouseClickTitle",t)}offTitleMouseClick(t){return this.R.off(t,"mouseClickTitle")}onTitleMouseDoubleClick(t){return this.R.on("mouseDoubleClickTitle",t)}offTitleMouseDoubleClick(t){return this.R.off(t,"mouseDoubleClickTitle")}onTitleMouseDragStart(t){return this.R.on("mouseDragStartTitle",t)}offTitleMouseDragStart(t){return this.R.off(t,"mouseDragStartTitle")}onTitleMouseDrag(t){return this.R.on("mouseDragTitle",t)}offTitleMouseDrag(t){return this.R.off(t,"mouseDragTitle")}onTitleMouseDragStop(t){return this.R.on("mouseDragStopTitle",t)}offTitleMouseDragStop(t){return this.R.off(t,"mouseDragStopTitle")}onTitleMouseWheel(t){return this.R.on("mouseWheelTitle",t)}offTitleMouseWheel(t){return this.R.off(t,"mouseWheelTitle")}onTitleTouchStart(t){return this.R.on("touchStartTitle",t)}offTitleMouseTouchStart(t){return this.R.off(t,"touchStartTitle")}onTitleTouchMove(t){return this.R.on("touchMoveTitle",t)}offTitleTouchMove(t){return this.R.off(t,"touchMoveTitle")}onTitleTouchEnd(t){return this.R.on("touchEndTitle",t)}offTitleTouchEnd(t){return this.R.off(t,"touchEndTitle")}}class hr{constructor(t,e,i,s,r=i.Gr(s).Nr(Ie).Or(Ie).setMouseInteractions(!1)){this.Th=!1,this.ji=!1,this.ss=[],this.Dh=t,this.M=e,this.Wr=i,this.sh=s,this.ih=r,this.ss.push(r)}vs(t){this.ss.forEach((e=>e.setVisible(t)))}dispose(){return this.ji||(this.ji=!0,this.ss.forEach((t=>t.dispose()))),this}}const lr=(t,e,i,s,r,n)=>{const o=new Map;for(const n of t.Ze){let t=n.Ur(e,i,s,r);t=ur(t),o.set(n,t)}let a;for(const s of t.Qe){let t;if(void 0===a)t=s.Ur(e,i,e,i);else{let r=[];const o=a.filter((t=>e<=t&&t<=i)).length;if(o>0){const t=n/(o-1);if(void 0!==s.Yr&&s.Yr>t)break}for(let t=0;t<a.length-1;t+=1){const n=s.Ur(a[t],a[t+1],e,i);r=r.concat(n)}t=r}t=ur(t),o.set(s,t),a=t}return o},ur=t=>(t=(t=>{const e={},i=[],s=t.length;let r=0;for(let n=0;n<s;n+=1){const s=t[n];1!==e[s]&&(e[s]=1,i[r]=s,r+=1)}return i})(t)).sort(((t,e)=>t-e)),cr=(t,e,i,s,r)=>{const n="function"==typeof t?t({curStart:s.start,curEnd:s.end,dataMin:null==e?void 0:e.min,dataMax:null==e?void 0:e.max}):t;if(!n)return i;const o={start:i.start,end:i.end};let a=Math.abs(i.end-i.start);if(void 0!==n.intervalMin&&a<n.intervalMin){const t=(o.start+o.end)/2;o.start=t+.5*Math.sign(i.start-t)*n.intervalMin,o.end=t+.5*Math.sign(i.end-t)*n.intervalMin}if(a=Math.abs(i.end-i.start),void 0!==n.intervalMax&&a>n.intervalMax){const t=(o.start+o.end)/2;o.start=t+.5*Math.sign(i.start-t)*n.intervalMax,o.end=t+.5*Math.sign(i.end-t)*n.intervalMax}return a=Math.abs(i.end-i.start),void 0!==n.startMin&&(o.start=Math.max(o.start,n.startMin),r||It(Math.abs(o.start-o.end),a)||(o.end=o.start+Math.sign(i.end-i.start)*a)),a=Math.abs(i.end-i.start),void 0!==n.startMax&&(o.start=Math.min(o.start,n.startMax),r||It(Math.abs(o.start-o.end),a)||(o.end=o.start+Math.sign(i.end-i.start)*a)),a=Math.abs(i.end-i.start),void 0!==n.endMin&&(o.end=Math.max(o.end,n.endMin),r||It(Math.abs(o.start-o.end),a)||(o.start=o.end+Math.sign(i.start-i.end)*a)),a=Math.abs(i.end-i.start),void 0!==n.endMax&&(o.end=Math.min(o.end,n.endMax),r||It(Math.abs(o.start-o.end),a)||(o.start=o.end+Math.sign(i.start-i.end)*a)),o},dr=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const e=t.curEnd>=t.curStart;return{start:e?t.dataMin:t.dataMax,end:e?t.dataMax:t.dataMin,stopAxisAfter:!1}},fr=s.Record({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class gr extends fr{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const mr=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),yr=new gr,pr=new class{getFillStyle(){return V}},xr=s.Record({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new U,wireframeStyle:nt});class Ar extends xr{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Sr=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),vr=s.Record({type:"pixelated-points-3d",size:5,fillStyle:new U});class br extends vr{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Mr=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Tr={Triangulated:Ar,Pixelated:br};class wr{constructor(t){this.Hr=new Map,this.cs=t}ls(t,e,i){const s=i.animationEnabled;this.Hr.set(t,{applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0});const r=t.onDispose((()=>{this.Hr.delete(t),t.offDispose(r)}))}$r(t,e){let i=e.animationEnabled;const s=[],r=t.onDispose((()=>{s.forEach((t=>{this.Hr.delete(t)})),t.offDispose(r)}));return{Xr:(t,e)=>{const r={applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:i,curAnimatedHighlightValue:0};s.push(t),this.Hr.set(t,r)},jr:()=>{s.forEach((t=>{this.Hr.delete(t)})),s.length=0},Zr:t=>{i=t,s.forEach((t=>{this.Ts(t,i)}))},Qr:()=>i}}ks(t,e){const i=this.Hr.get(t);i&&(i.curUnanimatedHighlightValue=be(e),this.cs.Ms())}ps(t,e=!1){const i=this.Hr.get(t);return i?e?i.curAnimatedHighlightValue:i.curUnanimatedHighlightValue:0}Ts(t,e){const i=this.Hr.get(t);i&&(i.animationEnabled=e)}Fs(t){const e=this.Hr.get(t);return!!e&&e.animationEnabled}zs(t){let e=!1;this.Hr.forEach(((i,s)=>{let r;if(i.animationEnabled){const s=1e3;if(i.curUnanimatedHighlightValue>0){const n=i.curAnimationPositionMillis/s;r=i.curUnanimatedHighlightValue*Math.abs(Math.sin(n*Math.PI/2+.5));const o=0===i.curAnimatedHighlightValue?1:t;i.curAnimationPositionMillis+=o,e=!0}else i.curAnimatedHighlightValue>0&&0===i.curUnanimatedHighlightValue?(r=Math.max(i.curAnimatedHighlightValue-t/s,0),e=e||r>0):r=0,i.curAnimationPositionMillis=0}else r=i.curUnanimatedHighlightValue;r!==i.curAnimatedHighlightValue&&(i.applyHighlight(r),i.curAnimatedHighlightValue=r)})),e&&this.cs.Ms(!0)}}const Cr=new Map,kr=(t,e)=>{const i=t.getSize(),s=t.getFamily(),r=t.getWeight(),n=t.getStyle(),o=t.getVariant(),a=`${n} ${o?"small-caps":"normal"} ${r} ${i}px ${s}`,h=`${a} ${e.toFixed(2)}`;let l=Cr.get(h);return l||(l=((t,e,i,s)=>({font:t,properties:e,dpr:i,id:s}))(a,{type:"font",size:i,family:s,style:n,variant:o,weight:r},e,h),Cr.set(h,l)),l};var Er,Rr;!function(t){t[t.click=0]="click",t[t.dbclick=1]="dbclick",t[t.mouseDown=2]="mouseDown",t[t.mouseUp=3]="mouseUp",t[t.contextmenu=4]="contextmenu",t[t.wheel=5]="wheel"}(Er||(Er={})),function(t){t[t.touchStart=0]="touchStart",t[t.touchMove=1]="touchMove",t[t.touchEnd=2]="touchEnd"}(Rr||(Rr={}));const Ir=t=>({container:t.Jr,setMouseStyle:(e,i)=>t.Kr(e,i),restoreMouseStyle:e=>t.qr(e),captureFrame:(e,i,s)=>t.tn(e,i,s),renderFrame:(e,i,s=!1)=>t.sn(e,i,s),layout:()=>{t.en(),t.hn(),t.nn.rn(),t.Ms()},setBackgroundFillStyle(e){return t.setBackgroundFillStyle(e),this},setBackgroundStrokeStyle(e){return t.setBackgroundStrokeStyle(e),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(e,i)=>t.an(e,i),onRenderFrame:e=>t.ln(e),offRenderFrame:e=>t.un(e)}),_r=[];let Fr;const Dr=()=>{if(void 0!==Fr){const t=Tt.getComputedStyle(Tt.document.body),e=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));Fr.style.height=Tt.innerHeight-e+"px",(()=>{for(let t=0;t<_r.length;t+=1)_r[t]()})()}},Br=new U({color:T(255,255,255)}),Pr={font:kr(yr,0),fillStyle:Br,lineStyle:new rs({fillStyle:Br,thickness:1}),pointStyle3D:new Tr.Triangulated};class Lr{constructor(t,e,i){this.R=new r.Eventer,this.At=lt.d2({scaleXYConstructor:Vi}),this.cn=new Map,this.dn=$((()=>this.Ms()),60),this.fn=u(0,0),this.An=!1,this.gn=Rt,this.pn=()=>{},this.yn=[],this.mn=-1,this.vn=[],this.Sn=!0,this.ji=!1,this.xn=!1,this.hn=()=>{const{bottom:t,left:e}=this.Jr.getBoundingClientRect();return this.fn=u(Math.floor(e),Math.floor(t)),this},this.bn=t=>{if(this.Mn){const e=this.Mn.entity._n;e&&e(this.Mn.entity,t,this.Mn.button,this.Mn.startLocation,this.Mn.collectionMember,this.Mn.info),this.Mn=void 0}},this.en=()=>{this.wn&&this.wn()},this.Kr=(t,e)=>{if(!e){this.Jr.style.cursor=t;const e=this.mn;return this.mn+=1,this.vn.push([e,t]),e}return this.qr(e),this.Kr(t)},this.qr=t=>{const e=t?this.vn.findIndex((e=>e[0]===t)):-1;e>=0?(this.vn.splice(e,1),this.vn.length>0?this.Jr.style.cursor=this.vn[this.vn.length-1][1]:this.Jr.style.cursor="default"):(this.vn.push([0,"default"]),this.Jr.style.cursor="default")},this.Cn=t=>(this.kn._(t),this),this.Tn=()=>this.kn.C(),this.Fn=()=>{this.gn&&this.gn(1e3/60),this.In(),this.Pn(),this.pn&&this.pn()},this.Dn=t=>(this.cn.set(t.Bn(),t),this.cn=new Map([...this.cn.entries()].sort(((t,e)=>t[0]-e[0]))),t),this.Ln=t=>(this.cn.delete(t),this),this.J=()=>(this.kn.u=!1,this),this.K=()=>(this.kn.u=!0,this),this.Rn=t=>{if(!this.Sn)return;const e=this.En,i=e&&e.clientX===t.clientX&&e.clientY===t.clientY,s=this.xs({x:t.clientX,y:t.clientY});if(this.zn&&((null==s?void 0:s.entity)!==this.zn.entity||s.collectionMember!==this.zn.collectionMember)&&!this.Mn){this.zn.entity.Is=!1;const e=this.zn.entity.Vn;e&&e(this.zn.entity,t,this.zn.collectionMember)}if(s&&s.entity.getMouseInteractions()&&!this.Mn)if(s.entity.Is){if(!i){const e=s.entity.On;e&&e(s.entity,t,s.collectionMember,s.info)}}else{s.entity.Is=!0;const e=s.entity.Nn;e&&e(s.entity,t,s.collectionMember,s.info)}if(this.Mn){const i=this.Mn.entity.Gn,s=e?u(t.clientX-e.clientX,e.clientY-t.clientY):{x:0,y:0};!i||0===s.x&&0===s.y||i(this.Mn.entity,t,this.Mn.button,this.Mn.startLocation,s,this.Mn.collectionMember,this.Mn.info)}this.Wn=t,this.En=t,this.zn=s?{...s,event:t}:void 0},this.Un=t=>{if(this.Sn=!1,this.Wn=t,this.zn&&!this.Yn&&!this.Mn){this.zn.entity.Is=!1;const e=this.zn.entity.Vn;e&&e(this.zn.entity,t,this.zn.collectionMember),this.zn=void 0}},this.Hn=t=>{if(this.Sn=!0,this.Wn=t,this.Mn&&t.buttons<=0){const e=this.Mn.entity._n;e&&e(this.Mn.entity,t,this.Mn.button,this.Mn.startLocation,this.Mn.collectionMember,this.Mn.info),this.Mn=void 0}if(this.Yn&&t.buttons<=0){const e=this.Yn.entity.$n;e&&e(this.Yn.entity,t,this.Yn.collectionMember,this.Yn.info),this.Yn=void 0}},this.Xn=()=>this.Wn&&this.jn?this.Wn.timeStamp>this.jn.timeStamp?this.Wn:this.jn:this.Wn||this.jn,this.nn=t,this.ts=e.theme,this.Zn=i.Zn,this.Qn=i.Qn,this.Jn=i.Jn,this.Kn={qn:e&&e.overrideInteractionMouseButtons?e.overrideInteractionMouseButtons:void 0,Ks:e&&void 0!==e.resourcesBaseUrl&&null!==e.resourcesBaseUrl?e.resourcesBaseUrl:`${Tt.location.origin}/resources`,io:!e||!("warnings"in e)||"boolean"!=typeof e.warnings||e.warnings,so:(()=>{const t=null==e?void 0:e.pickingPrecision;if("string"==typeof t){const e=t.toLowerCase();if("best"===e)return 1;if("high"===e)return.5;if("low"===e)return 1/8}return 1/4})(),eo:void 0===(null==e?void 0:e.interactable)||e.interactable,ho:void 0===e.textPixelSnappingEnabled||e.textPixelSnappingEnabled};const s=e?e.container:void 0;if(s){if("string"==typeof s){const t=Tt.document.getElementById(s);if(!t)throw new Error(`Container "${s}" doesn't exist.`);this.Jr=t}else this.Jr=s;Tt.addEventListener("resize",this.en),this.yn.push((()=>{Tt.removeEventListener("resize",this.en)}))}else{if(void 0===Fr){const t=Tt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Tt.document.body.appendChild(t),Fr=t,Tt.addEventListener("resize",Dr)}let t=1;for(;null!==Tt.document.getElementById(`chart-${t}`);)t+=1;this.Jr=Tt.document.createElement("div"),this.Jr.id=`chart-${t}`,this.Jr.style.flex="1",this.Jr.style.height="100%",Fr.appendChild(this.Jr),Dr(),_r.push(this.en),this.yn.push((()=>{Fr&&Fr.removeChild(this.Jr),_r.includes(this.en)&&_r.splice(_r.indexOf(this.en),1),0===_r.length&&Fr&&(Tt.document.body.removeChild(Fr),Fr=void 0,Tt.removeEventListener("resize",Dr))}))}if(Tt.ResizeObserver){const t=t=>{for(const e of t)e.target===this.Jr&&this.en()};this.ro=new Tt.ResizeObserver(t.bind(this)),this.ro.observe(this.Jr)}""===this.Jr.style.position&&(this.Jr.style.position="relative"),this.Jr.style.boxSizing="content-box",this.Jr.addEventListener("fullscreenchange",this.en),this.Jr.addEventListener("webkitfullscreenchange",this.en);const n=e?e.maxFps:void 0;this.no=n?-1===n?-1:0!==n?1e3/n:0:0;const o=new Map;let a=!1;const h=(t,e)=>i=>{const s=function(t){return{x:t.clientX,y:t.clientY}}(i);switch(i.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(i.pointerId,s);break;default:o.delete(i.pointerId),a=!1}switch(i.interactions=Array.from(o.values()),i.pointerType){case"pen":case"mouse":default:t&&t(i);break;case"touch":e&&e(i)}i.defaultPrevented&&(a=!0)};this.Jr.onwheel=this.oo(Er.wheel),this.Jr.oncontextmenu=this.oo(Er.contextmenu),this.Jr.onclick=this.oo(Er.click),this.Jr.ondblclick=this.oo(Er.dbclick),this.Jr.onlostpointercapture=()=>{a=!1},this.Jr.ontouchmove=t=>{a&&t.preventDefault()},this.Jr.onpointerover=h(),this.Jr.onpointerenter=h(this.Hn),this.Jr.onpointerdown=h(this.oo(Er.mouseDown),this.ao(Rr.touchStart)),this.Jr.onpointermove=h(this.Rn,this.ao(Rr.touchMove)),this.Jr.onpointerup=h(this.oo(Er.mouseUp),this.ao(Rr.touchEnd)),this.Jr.onpointercancel=h(),this.Jr.onpointerout=h(),this.Jr.onpointerleave=h(this.Un,this.ao(Rr.touchEnd)),Tt.addEventListener("dragstart",this.bn),Tt.addEventListener("scroll",this.hn,{passive:!0}),this.kn=p(new b({r:0,g:0,b:0,a:0})),this.us=new wr(this)}lo(t,e){var i,s,r,n;(null===(i=this.zn)||void 0===i?void 0:i.entity)===t.entity&&this.zn.collectionMember===t.collectionMember&&(this.zn={...e,info:this.zn.info,event:this.zn.event}),(null===(s=this.uo)||void 0===s?void 0:s.entity)===t.entity&&this.uo.collectionMember===t.collectionMember&&(this.uo={...e,info:this.uo.info}),(null===(r=this.Yn)||void 0===r?void 0:r.entity)===t.entity&&this.Yn.collectionMember===t.collectionMember&&(this.Yn={...e,info:this.Yn.info,event:this.Yn.event}),(null===(n=this.Mn)||void 0===n?void 0:n.entity)===t.entity&&this.Mn.collectionMember===t.collectionMember&&(this.Mn={...e,info:this.Mn.info,button:this.Mn.button,startLocation:this.Mn.startLocation})}co(){this.xn=!0,this.gn=void 0,this.pn=void 0}ln(t){return this.R.on("render",t)}un(t){return this.R.off(t)}do(){return this.fo}Ao(){return this.po}setBackgroundFillStyle(t){return this.yo.Be(t),this}getBackgroundFillStyle(){return this.yo.Xh()}setBackgroundStrokeStyle(t){return this.yo.De(t),this}getBackgroundStrokeStyle(){return this.yo.mo()}vo(t){return this.pn=t,this}So(t){return this.gn=t,this}xo(t){return this.cn.get(t)}bo(){return Array.from(this.cn.keys()).reverse().reduce(((t,e)=>e!==Number.MAX_SAFE_INTEGER&&e>t?e:t),0)+1}oo(t){return e=>this.Mo(t,e)}Mo(t,e){if(!this.Sn)return;t===Er.contextmenu&&Qt(e);const i=this.xs({x:e.clientX,y:e.clientY});if(t===Er.mouseUp){if(this.Mn){const t=this.Mn.entity._n;if(t&&t(this.Mn.entity,e,this.Mn.button,this.Mn.startLocation,this.Mn.collectionMember,this.Mn.info),(null==i?void 0:i.entity)!==this.Mn.entity||i.collectionMember!==this.Mn.collectionMember){this.Mn.entity.Is=!1;const t=this.Mn.entity.Vn;t&&t(this.Mn.entity,e,this.Mn.collectionMember)}this.Mn=void 0}if(this.Yn){const t=this.Yn.entity.getMouseInteractions()&&this.Yn.entity.$n;t&&t(this.Yn.entity,e,this.Yn.collectionMember,this.Yn.info),this.Yn=void 0}}else if(i&&i.entity.getMouseInteractions()){const s=t===Er.click?i.entity._o:t===Er.dbclick?i.entity.wo:t===Er.mouseDown?i.entity.Co:t===Er.wheel?i.entity.ko:t===Er.contextmenu?i.entity.To:void 0;if(s&&s(i.entity,e,i.collectionMember,i.info),t===Er.mouseDown){this.Yn={entity:i.entity,collectionMember:i.collectionMember,event:e,info:i.info};const t=this.Yn.event.button,s=i.entity.Fo;s&&s(i.entity,e,t,i.collectionMember,i.info),this.Mn={entity:i.entity,collectionMember:i.collectionMember,button:t,startLocation:u(e.clientX,e.clientY),info:i.info}}}this.Wn=e,this.zn=i?{...i,event:e}:void 0}ao(t){return e=>this.Io(t,e)}Io(t,e){const i=e.interactions.length;if(this.jn=e,this.uo){const s=t===Rr.touchMove?this.uo.entity.Po:t===Rr.touchEnd?this.uo.entity.Do:t===Rr.touchStart?this.uo.entity.Bo:void 0;s&&s(this.uo.entity,e,this.uo.collectionMember,this.uo.info),t===Rr.touchEnd&&0===i&&(this.uo.entity.Is=!1,this.uo=void 0)}else if(t===Rr.touchStart){for(let t=0;t<i&&(this.uo=this.xs({x:e.interactions[t].x,y:e.interactions[t].y}),!this.uo);t+=1);if(this.uo){this.uo.entity.Is=!0;const t=this.uo.entity.Bo;t&&t(this.uo.entity,e,this.uo.collectionMember,this.uo.info)}}}Lo(t){return this.R.on("resize",t)}Ro(t){return this.R.off(t,"resize")}Eo(){return this.R.topicOff("resize"),this}zo(t){return this.R.on("inViewChange",t)}Vo(t){return this.R.off(t)}Y(){if(!this.ji){if(this.ji=!0,this.cn)for(const t of this.cn.values())t.Y();this.gn=void 0,this.pn=void 0,Tt.removeEventListener("dragstart",this.bn),Tt.removeEventListener("scroll",this.hn),this.Jr.removeEventListener("fullscreenchange",this.en),this.Jr.removeEventListener("webkitfullscreenchange",this.en),this.ro&&(this.ro.disconnect(),this.ro=void 0),this.yn.forEach((t=>{t()})),this.yn.length=0}}Ve(t,e){return u(t-this.fn.x,this.fn.y-e)}Oo(t,e){return u(t+this.fn.x,this.fn.y-e)}No(t){const e=this.Ve(t.clientX,t.clientY);return{engineX:e.x,engineY:e.y}}Go(t){const e=this.Oo(t.engineX,t.engineY);return{clientX:e.x,clientY:e.y}}}const Vr=(t=1)=>({type:"horizontalProgressive",packager:(e,i,s)=>{if(e.length>1){const r=li(i,s*t),n=Math.abs(r.x),o=e.length,a=[];let h=0,l=0,c=e[0].x+n;for(;l<o;){const t=e[l];if(a[h]=t,h+=1,l+=1,t.x<c&&l<o){const i=l;let s=t.y,r=t.y;for(;l<o&&e[l].x<=c;)e[l].y>s&&(s=e[l].y),e[l].y<r&&(r=e[l].y),l+=1;if(i!==l){const t=(a[h-1].x+e[l-1].x)/2;a[h+0]=u(t,r),a[h+1]=u(t,s),a[h+2]=e[l-1],h+=3}}c+=n}return a}return e.slice()}}),zr=(t=1)=>({type:"horizontalRegressive",packager:(e,i,s)=>{if(e.length>1){const r=li(i,s*t),n=Math.abs(r.x),o=e.length,a=[];let h=0,l=0,c=e[0].x-n;for(;l<o;){const t=e[l];if(a[h]=t,h+=1,l+=1,t.x>c&&l<o){const i=l;let s=t.y,r=t.y;for(;l<o&&e[l].x>=c;)e[l].y>s&&(s=e[l].y),e[l].y<r&&(r=e[l].y),l+=1;if(i!==l){const t=(a[h-1].x+e[l-1].x)/2;a[h+0]=u(t,r),a[h+1]=u(t,s),a[h+2]=e[l-1],h+=3}}c-=n}return a}return e.slice()}}),Nr=(t=1)=>({type:"verticalProgressive",packager:(e,i,s)=>{if(e.length>1){const r=li(i,s*t),n=Math.abs(r.y),o=e.length,a=[];let h=0,l=0,c=e[0].y+n;for(;l<o;){const t=e[l];if(a[h]=t,h+=1,l+=1,t.y<c&&l<o){const i=l;let s=t.x,r=t.x;for(;l<o&&e[l].y<=c;)e[l].x>s&&(s=e[l].x),e[l].x<r&&(r=e[l].x),l+=1;if(i!==l){const t=(a[h-1].y+e[l-1].y)/2;a[h+0]=u(r,t),a[h+1]=u(s,t),a[h+2]=e[l-1],h+=3}}c+=n}return a}return e.slice()}}),Or=(t=1)=>({type:"verticalRegressive",packager:(e,i,s)=>{if(e.length>1){const r=li(i,s*t),n=Math.abs(r.y),o=e.length,a=[];let h=0,l=0,c=e[0].y-n;for(;l<o;){const t=e[l];if(a[h]=t,h+=1,l+=1,t.y>c&&l<o){const i=l;let s=t.x,r=t.x;for(;l<o&&e[l].y>=c;)e[l].x>s&&(s=e[l].x),e[l].x<r&&(r=e[l].x),l+=1;if(i!==l){const t=(a[h-1].y+e[l-1].y)/2;a[h+0]=u(r,t),a[h+1]=u(s,t),a[h+2]=e[l-1],h+=3}}c-=n}return a}return e.slice()}});var Ur;e.PointShape=void 0,(Ur=e.PointShape||(e.PointShape={}))[Ur.Square=0]="Square",Ur[Ur.Circle=1]="Circle",Ur[Ur.HollowCircle=2]="HollowCircle",Ur[Ur.Triangle=3]="Triangle",Ur[Ur.Cross=4]="Cross",Ur[Ur.Diamond=5]="Diamond",Ur[Ur.Plus=6]="Plus",Ur[Ur.Minus=7]="Minus",Ur[Ur.Arrow=8]="Arrow",Ur[Ur.Star=9]="Star";const Yr={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var Gr;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(Gr||(Gr={}));const Hr=(t,e,i,s,r,n,o,a,h,l)=>{const u=t.length;if(0===u)return;const c=s?1:0,d=u-(r?2:1);if(i===Gr.Nearest)return Wr(t,e,n,o,c,d);if(i===Gr.NearestX||i===Gr.NearestY){if("boolean"==typeof l&&("x"===h&&i===Gr.NearestX||"y"===h&&i===Gr.NearestY))return jr(t,ct(e,o,n),h,l,c,d);if(i===Gr.NearestX)return Kr(t,ct(e,o,n),a,c,d);if(i===Gr.NearestY)return Xr(t,ct(e,o,n),a,c,d)}},Wr=(t,e,i,s,r,n)=>{let o,a=Number.MAX_VALUE;for(let h=r;h<=n;h+=1){const r=t[h];if(!Number.isNaN(r.x)&&!Number.isNaN(r.y)){const t=ct(r,i,s),n=(t.x-e.x)**2+(t.y-e.y)**2;n<a&&(a=n,o=h)}}return o},Kr=(t,e,i,s,r)=>{if(e.x<i.min.x||e.x>i.max.x)return;let n,o=Number.MAX_VALUE;for(let i=s;i<=r;i+=1){const s=t[i],r=s.x>e.x?s.x-e.x:e.x-s.x;r<o&&!Number.isNaN(s.x)&&!Number.isNaN(s.y)&&(o=r,n=i)}return n},Xr=(t,e,i,s,r)=>{if(e.y<i.min.y||e.y>i.max.y)return;let n,o=Number.MAX_VALUE;for(let i=s;i<=r;i+=1){const s=t[i],r=s.y>e.y?s.y-e.y:e.y-s.y;r<o&&!Number.isNaN(s.x)&&!Number.isNaN(s.y)&&(o=r,n=i)}return n},jr=(t,e,i,s,r,n)=>{const o="x"===i,a=o?e.x:e.y,h=t[r],l=t[n],u=h.x<l.x?h.x:l.x,c=h.y<l.y?h.y:l.y,d=h.x>l.x?h.x:l.x,f=h.y>l.y?h.y:l.y;if(o&&(a<u||a>d)||!o&&(a<c||a>f))return;let g=r,m=Math.floor((r+n)/2),y=n,p=-1;for(;;){const e=a-(o?t[m].x:t[m].y);if(e*(s?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(e))return m;y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){const i=m>r?Math.abs(a-(o?t[m-1].x:t[m-1].y)):Ve,s=m<n?Math.abs(a-(o?t[m+1].x:t[m+1].y)):Ve,h=Math.abs(e);switch(Math.min(h,i,s)){case i:return m-1;case s:return m+1;default:return m}}else m=p}},$r=(t,e,i,s,r,n)=>{const o="x"===i,a=o?e.x:e.y,h=t[r],l=t[n],u=h.x<l.x?h.x:l.x,c=h.y<l.y?h.y:l.y,d=h.x>l.x?h.x:l.x,f=h.y>l.y?h.y:l.y;if(o&&(a<u||a>d)||!o&&(a<c||a>f))return;let g=r,m=Math.floor((r+n)/2),y=n,p=-1;for(;;){const i=a-(o?t[m].x:t[m].y);if(i*(s?-1:1)>0)g=Math.min(m+1,y),p=Math.floor((g+y)/2);else{if(0===Math.abs(i))return{a:m,b:m,lerpAmount:0};y=Math.max(m-1,g),p=Math.floor((g+y)/2)}if(p===m){if(i*(s?-1:1)<0&&m>r){const i=t[m-1],s=t[m];return{a:m-1,b:m,lerpAmount:o?(e.x-i.x)/(s.x-i.x):(e.y-i.y)/(s.y-i.y)}}if(m<n){const i=t[m],s=t[m+1];return{a:m,b:m+1,lerpAmount:o?(e.x-i.x)/(s.x-i.x):(e.y-i.y)/(s.y-i.y)}}return{a:m,b:m,lerpAmount:0}}m=p}};let Zr=0;class Qr{constructor(t,e,i){this.Wo=p(!0),this.Uo=!1,this.Is=!1,this.Yo=!1,this.ji=!1,this.Zi=!0,this.Ho=void 0,this.$o=0,this.R=new r.Eventer,this.On=void 0,this.Nn=void 0,this.Vn=void 0,this._o=void 0,this.ko=void 0,this.To=void 0,this.wo=void 0,this.Co=void 0,this.$n=void 0,this.Fo=void 0,this.Gn=void 0,this._n=void 0,this.Bo=void 0,this.Po=void 0,this.Do=void 0,this.onDispose=t=>this.R.on("dispose",t),this.offDispose=t=>this.R.off(t,"dispose"),this.cs=t,this.Xo=e,this.jo=i,this.Zo=Zr,Zr+=1,this.Qo=t.ts.highlightColorOffset}Jo(){let t;return this.Ko("DataPattern",(e=>(t=e.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?Gr.NearestX:"ProgressiveY"===t||"RegressiveY"===t?Gr.NearestY:Gr.Nearest}qo(t){return void 0!==this.jo.find((e=>e.type===t))}Ko(t,e){var i;return!!this.qo(t)&&!0===e(null===(i=this.jo.find((e=>e.type===t)))||void 0===i?void 0:i.args)}dispose(){return this.ji||(this.Is&&this.Vn&&this.Vn(this,void 0,void 0),this.ji=!0,this.Xo(this),this.R.emit("dispose",this)),this}isDisposed(){return this.ji}setVisible(t){const e=this.Zi;return this.Zi=t,!t&&e&&(this.Is&&this.Vn&&this.Vn(this,void 0,void 0),this.Is=!1),this}getVisible(){return this.Zi}setMouseInteractions(t){const e=this.Wo.C();return this.Wo._(t),t||(e&&this.Is&&this.Vn&&this.Vn(this,void 0,void 0),this.Is=!1),this}getMouseInteractions(){return this.Wo.C()}getIsUnderMouse(){return this.Is}getIsGrabbed(){return this.Yo}setMouseMoveEventHandler(t){return this.On=t,this}setMouseEnterEventHandler(t){return this.Nn=t,this}setMouseLeaveEventHandler(t){return this.Vn=t,this}setMouseClickEventHandler(t){return this._o=t,this}setMouseDoubleClickEventHandler(t){return this.wo=t,this}setMouseDownEventHandler(t){return this.Co=t,this}setMouseUpEventHandler(t){return this.$n=t,this}setMouseWheelEventHandler(t){return this.ko=t,this}setMouseContextMenuEventHandler(t){return this.To=t,this}setMouseDragEventHandler(t){return this.Gn=t,this}setMouseDragStartEventHandler(t){return this.Fo=t,this}setMouseDragStopEventHandler(t){return this._n=t,this}setTouchStartEventHandler(t){return this.Bo=t,this}setTouchMoveEventHandler(t){return this.Po=t,this}setTouchEndEventHandler(t){return this.Do=t,this}ta(t){return this.Ho=t,this}ia(){return this.Ho?this.Ho:qr}ds(t){return this.$o=t,this}sa(){return this.$o}ea(t){return this.Qo=t,this}ha(){return this.Qo}}const qr=m(u(0,0),u(0,0));class Jr extends Qr{constructor(t,e,i,s){super(t,i,s),this.ra=0,this.Bs=e,this.Bs.na=!0}oa(t){return this.ra===t||(this.ra=t,this.Bs.na=!0),this}aa(){return this.ra}}class tn extends Jr{constructor(t,e,i,s,r){super(t,e,s,r),this.la=!0,this.At=i}}const en=(t,e,i)=>{if(i instanceof Vi){const s=i.Wi(),r=di(e,{x:Math.abs(s.x),y:Math.abs(s.y)});return m(u(t.min.x-r.x,t.min.y-r.y),u(t.max.x+r.x,t.max.y+r.y))}return m(i.pi(u(t.min.x,t.min.y),li(e,-1)),i.pi(u(t.max.x,t.max.y),e))},sn=(t,e)=>"function"==typeof e?e(t):e,rn=(t,e)=>!t||t!==e,nn=t=>t!==V;class on extends tn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Te=Pr.fillStyle,this.cs=t}Be(t){return this.Te=sn(this.Te,t),this}Xh(){return this.Te}ua(){return rn(this.ca,this.Te)}da(){return((t,e)=>t===V&&e!==V)(this.ca,this.Te)}fa(){return nn(this.Te)}Aa(t){this.ca=t}}class an extends on{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Fe=Pr.lineStyle,this.cs=t}De(t){return this.Fe="function"==typeof t?t(this.Fe):t,this}mo(){return this.Fe}ga(){return!this.pa||this.pa!==this.Fe}ya(t){return!this.pa||this.pa.getThickness()!==t}fa(){return this.Fe!==nt||super.fa()}da(){return(this.Fe!==nt||this.Te!==V)&&this.pa===nt&&this.ca===V}ma(t){this.pa=t}}class hn extends on{constructor(t,e,i,s,r,n=p(5)){super(t,e,i,s,r),this.size=p(5),this.size=n}it(t){return this.size._(t),this}}class ln extends on{constructor(t,e,i,s,r,n=p(Pr.font)){super(t,e,i,s,r),this.va=p(""),this.Sa=p(u(0,0)),this.xa=p(0),this.ba=p(0),this.Ma=p(u(0,0)),this._a=p(0),this.wa=p(yr),this.Ca=u(0,0),this.Xt=p(x(1,1,1,1)),this.ka=p(A(4,4,4,4)),this.font=p(Pr.font),this.Ta=!1,this.font=n}fa(){return nn(this.Te)&&this.va.C().length>0}da(){return!1===this.Ta&&this.fa()}yr(t){return this.va._(t),this}Cr(){return this.va.C()}Qh(t){return mr(t)?this.wa._(t):this.wa._(t(this.wa.C())),this}Zh(){return this.wa.C()}Fa(t){return this.wa._(this.wa.C().setFamily(t)),this}Ia(){return this.wa.C().getFamily()}Pa(t){return this.wa._(this.wa.C().setSize(t)),this}Da(){return this.wa.C().getSize()}Ba(t){return this.wa._(this.wa.C().setWeight(t)),this}La(){return this.wa.C().getWeight()}Ra(t){return this.wa._(this.wa.C().setStyle(t)),this}Ea(){return this.wa.C().getStyle()}za(t){return this.wa._(this.wa.C().setVariant(t)),this}Va(){return this.wa.C().getVariant()}Ee(t){return this.Sa._(t),this}Oa(){return this.Sa.C()}Jh(t){return this._a._(t),this}Kh(){return this._a.C()}Na(t,e){return this.Ma._(u(t,e)),this}Ga(){return this.Ma.C()}Wa(t){return this.ba._(t),this}Ua(){return this.ba.C()}Ya(t){return this.xa._(t),this}Ha(){return this.xa.C()}$a(t){return this.ba._(t.x),this.xa._(t.y),this}Or(t){return this.Xt._(t),this}Xa(){return this.Xt.C()}Nr(t){return this.ka._(t),this}ja(){return this.ka.C()}}class un extends hn{constructor(t,i,s,r,n,o=5){super(t,i,s,r,n,p(o)),this.Za=[],this.Qa=p(e.PointShape.Square),this._a=p(0),this.Ja=p(!1),this.Ka=p(!1),this.qa=p(!1),this.tl=Ne,this.il=0,this.sl=[],this.el=0,this.hl=Ne,this.rl=!1,this.nl=void 0}ol(){return this.sl}al(){return this.Za}ll(t){return this.Qa._(t),this}ul(){return this.Qa.C()}Jh(t){return this._a._(t),this}Kh(){return this._a.C()}cl(t){return this.Ja._(t),this}dl(t){return this.Ka._(t),this}fl(t){return this.qa._(t),this}Al(t,e){return Array.isArray(t)||(t=[t]),this.el+=t.length,this.sl=ae(this.sl,t,{canReturnB:!0}),this.hl&&(this.hl=e?ei(this.hl,e):void 0),this.nl=void 0,this}Ot(){return this.rl=!0,this.Za.length=0,this.il=0,this.tl=Ne,this.sl=[],this.el=0,this.nl=void 0,this}pl(){return this.il}yl(){return this.el}}class cn extends an{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Sa=p(u(0,0)),this.Z=p(u(100,100)),this._a=p(0),this.Ca=p(u(0,0)),this.ml=!1}zs(){return this.vl(),this}Ee(t){const e=this.Sa.C();return t.x===e.x&&t.y===e.y||(this.Sa._(t),this.vl()),this}Oa(){return this.Sa.C()}Sl(t){const e=this.Sa.C();return t!==e.x&&(this.Sa._(u(t,e.y)),this.vl()),this}xl(t){const e=this.Sa.C();return t!==e.y&&(this.Sa._(u(e.x,t)),this.vl()),this}it(t){const e=this.Z.C();return t.x===e.x&&t.y===e.y||(this.Z._(u(t.x,t.y)),this.vl()),this}oi(){return this.Z.C()}bl(t){const e=this.Z.C();return t!==e.x&&(this.Z._(u(t,e.y)),this.vl()),this}Ml(t){const e=this.Z.C();return t!==e.x&&(this.Z._(u(e.x,t)),this.vl()),this}Jh(t){return this._a._(t),this}Kh(){return this._a.C()}_l(t){const e=this.Ca.C();return t===e&&e.x===t.x&&e.y===t.y||(void 0===t?(this.ml=!1,this.vl()):(this.ml=!0,this.Ca._(t))),this}vl(){if(!this.ml){const t=this.Sa.C(),e=this.Z.C(),i=u(t.x+e.x/2,t.y+e.y/2),s=this.Ca.C();i.x===s.x&&i.y===s.y||this.Ca._(i)}}}class dn extends an{constructor(){super(...arguments),this.Za=[],this.Sa=p(u(0,0)),this.tl=Ne,this.wl=!1}Cl(t){return t=ie(t),this.Za=t,this.wl=!0,this}kl(){return this.Za}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return 0}Fl(){return 0}}class fn extends dn{}class gn extends on{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Il=new Array,this.Pl=new Array,this.Dl=p({type:"disabled",packager:(t,e,i)=>t.slice()}),this.tl=Ne,this.Bl=0,this.Ll=!1,this.sl=[Array(),Array()],this.Rl=!1,this.El=(new U).setColor(T(42,171,240)),this.rl=!1,this.zl=!1,this.Vl=!1}Al(t,e){const i=this.Bl-1,s=i>0&&!this.Rl;let[r,n]=s?[[this.Il[i]],[this.Pl[i]]]:[[],[]];if(t instanceof Array){const[e,i]=g(t);r=ae(r,e,{canReturnB:!0}),n=ae(n,i,{canReturnB:!0})}else{const e=t.position;r.push(u(e,t.high)),n.push(u(e,t.low))}return this.Rl?(this.sl[0]=ae(this.sl[0],r,{canReturnB:!0}),this.sl[1]=ae(this.sl[1],n,{canReturnB:!0})):(this.sl=[r,n],this.Rl=!0),this.tl=ei(this.tl,e||ei(Je(r),Je(n))),this}Ot(){return this.rl=!0,this.Il.length=0,this.Pl.length=0,this.Bl=0,this.tl=Ne,this}al(){return[this.Il,this.Pl]}ol(){return[this.sl[0],this.sl[1]]}Ol(t){return this.Dl._(t),this}Nl(){return this.Dl.C()}Gl(t){return this.El="function"==typeof t?t(this.El):t,this}Wl(){return this.El}pl(){return this.Bl-(Number(this.zl)+Number(this.Vl))}yl(){return this.sl.length}Ul(t){return this.zl=t,this}Yl(){return this.zl}Hl(t){return this.Vl=t,this}$l(){return this.Vl}da(){return this.ca===V&&this.Xl===V&&(this.Te!==V||this.El!==V)}jl(t){this.Xl=t}fa(){return this.El!==V||super.fa()}ua(){return super.ua()||!this.Xl||this.Xl!==this.El}}class mn extends an{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Sa=p(u(0,0)),this.Zl=p(0),this.Fi=p(360),this.Ql=p(100),this.Jl=p(100),this.Kl=p(0),this.ql=p(void 0),this.tu=u(0,0),this.iu=u(0,0),this.su=u(0,0)}eu(){return this.Ql.C()}hu(){return this.Jl.C()}Oa(){return this.Sa.C()}ru(){return this.Zl.C()}Ti(){return this.Fi.C()}nu(){return this.Kl.C()}ou(){return this.ql.C()}au(){return this.tu}lu(){return this.iu}uu(){return this.su}Ee(t){return this.Sa._(t),this}cu(t){return this.Zl._(t),this}Ye(t){return this.Fi._(t),this}du(t){return this.Jl._(t),this.Ql._(t),this}fu(t){return this.Ql._(t),this}Au(t){return this.Jl._(t),this}gu(t){return this.Kl._(t<0?0:t),this}pu(t){return this.ql._(void 0!==t&&t<=0?void 0:t),this}}var yn;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(yn||(yn={}));class pn extends tn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.yu=Pr.lineStyle,this.engine=t}We(t){return this.yu=((t,e)=>"function"==typeof e?e(t):e)(this.yu,t),this}mu(){return this.yu}ga(){return((t,e)=>!t||t!==e)(this.vu,this.yu)}Su(t){return((t,e)=>!t||t.getThickness()!==e)(this.vu,t)}da(){return((t,e)=>t===nt&&e!==nt)(this.vu,this.yu)}fa(){return(t=>t!==nt&&t.getFillStyle()!==V)(this.yu)}xu(t){this.vu=t}}class xn extends pn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Pi=u(0,0),this.Fi=u(0,0),this.bu=!1}_({min:t,max:e}){return t.x===this.Pi.x&&t.y===this.Pi.y&&e.x===this.Fi.x&&e.y===this.Fi.y||(this.bu=!0,this.Pi=t,this.Fi=e),this}Ii(){return this.Pi}Ti(){return this.Fi}He(t){return t.x===this.Pi.x&&t.y===this.Pi.y||(this.bu=!0,this.Pi=t),this}Ye(t){return t.x===this.Fi.x&&t.y===this.Fi.y||(this.bu=!0,this.Fi=t),this}}class An extends pn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Mu=void 0}}class Sn extends pn{constructor(t,e,i,s,r){super(t,e,i,s,r),this._u=[],this.tl=Ne,this.sl=new Array,this.il=0,this.rl=!1,this.wu=p(void 0),this.zl=!1,this.Vl=!1}Cu(t){return this.wu._(t),this}ku(){return this.wu.C()}ol(){return this.sl}al(){return this._u}Ot(){return this.rl=!0,this._u.length=0,this.il=0,this.sl=[],this.tl=Ne,this}pl(){return this.il-(Number(this.zl)+Number(this.Vl))}yl(){return this.sl.length}Ul(t){return this.zl=t,this}Yl(){return this.zl}Hl(t){return this.Vl=t,this}$l(){return this.Vl}}const vn=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==e.UIDraggingModes.notDraggable?i===e.UIDraggingModes.draggable?e.MouseStyles.Move:i===e.UIDraggingModes.onlyHorizontal?e.MouseStyles.Horizontal:e.MouseStyles.Vertical:void 0};class bn{constructor(){this.Zi=!0,this.R=new r.Eventer,this.Tu=0,this._t=(t,e,i)=>{0===this.Tu&&this.R.emit("mouseEnter",this,e),this.Tu+=1},this.wt=(t,e,i)=>{this.Tu-=1,this.Tu<1&&(this.R.emit("mouseLeave",this,e),this.Tu=0)},this.Ct=(t,e,i)=>{this.R.emit("mouseClick",this,e)},this.kt=(t,e,i)=>{this.R.emit("mouseDoubleClick",this,e)},this.Tt=(t,e,i)=>{this.R.emit("mouseDown",this,e)},this.Ft=(t,e,i)=>{this.R.emit("mouseUp",this,e)},this.It=(t,e,i)=>{this.R.emit("mouseMove",this,e)},this.Dt=(t,e,i,s)=>{this.R.emit("mouseDragStart",this,e,i)},this.Pt=(t,e,i,s,r,n)=>{this.R.emit("mouseDrag",this,e,i,s,r)},this.Bt=(t,e,i,s,r)=>{this.R.emit("mouseDragStop",this,e,i,s)},this.Lt=(t,e,i)=>{this.R.emit("mouseWheel",this,e)},this.Rt=(t,e)=>{this.Tu+=1,this.R.emit("touchStart",this,e)},this.Et=(t,e)=>{this.R.emit("touchMove",this,e)},this.zt=(t,e)=>{this.Tu-=1,this.R.emit("touchEnd",this,e)},this.Fu=t=>(t instanceof tn?t.setMouseEnterEventHandler(this._t).setMouseLeaveEventHandler(this.wt).setMouseClickEventHandler(this.Ct).setMouseDoubleClickEventHandler(this.kt).setMouseDownEventHandler(this.Tt).setMouseUpEventHandler(this.Ft).setMouseMoveEventHandler(this.It).setMouseDragEventHandler(this.Pt).setMouseDragStartEventHandler(this.Dt).setMouseDragStopEventHandler(this.Bt).setMouseWheelEventHandler(this.Lt).setTouchStartEventHandler(this.Rt).setTouchMoveEventHandler(this.Et).setTouchEndEventHandler(this.zt):(t.onMouseEnter(((t,e)=>this._t(t,e))),t.onMouseLeave(((t,e)=>this.wt(t,e))),t.onMouseClick(((t,e)=>this.Ct(t,e))),t.onMouseDoubleClick(((t,e)=>this.kt(t,e))),t.onMouseDown(((t,e)=>this.Tt(t,e))),t.onMouseUp(((t,e)=>this.Ft(t,e))),t.onMouseMove(((t,e)=>this.It(t,e))),t.onMouseDrag(((t,e,i,s,r)=>this.Pt(t,e,i,s,r))),t.onMouseDragStart(((t,e,i)=>this.Dt(t,e,i))),t.onMouseDragStop(((t,e,i,s)=>this.Bt(t,e,i,s))),t.onMouseWheel(((t,e)=>this.Lt(t,e))),t.onTouchStart(((t,e)=>this.Rt(t,e))),t.onTouchMove(((t,e)=>this.Et(t,e))),t.onTouchEnd(((t,e)=>this.zt(t,e)))),t)}onMouseEnter(t){return this.R.on("mouseEnter",t)}onMouseLeave(t){return this.R.on("mouseLeave",t)}onMouseClick(t){return this.R.on("mouseClick",t)}onMouseDoubleClick(t){return this.R.on("mouseDoubleClick",t)}onMouseDown(t){return this.R.on("mouseDown",t)}onMouseUp(t){return this.R.on("mouseUp",t)}onMouseMove(t){return this.R.on("mouseMove",t)}onMouseDragStart(t){return this.R.on("mouseDragStart",t)}onMouseDrag(t){return this.R.on("mouseDrag",t)}onMouseDragStop(t){return this.R.on("mouseDragStop",t)}onMouseWheel(t){return this.R.on("mouseWheel",t)}onTouchStart(t){return this.R.on("touchStart",t)}onTouchMove(t){return this.R.on("touchMove",t)}onTouchEnd(t){return this.R.on("touchEnd",t)}offMouseEnter(t){return this.R.off(t,"mouseEnter")}offMouseLeave(t){return this.R.off(t,"mouseLeave")}offMouseClick(t){return this.R.off(t,"mouseClick")}offMouseDoubleClick(t){return this.R.off(t,"mouseDoubleClick")}offMouseDown(t){return this.R.off(t,"mouseDown")}offMouseUp(t){return this.R.off(t,"mouseUp")}offMouseMove(t){return this.R.off(t,"mouseMove")}offMouseDragStart(t){return this.R.off(t,"mouseDragStart")}offMouseDrag(t){return this.R.off(t,"mouseDrag")}offMouseDragStop(t){return this.R.off(t,"mouseDragStop")}offMouseWheel(t){return this.R.off(t,"mouseWheel")}offTouchStart(t){return this.R.off(t,"touchStart")}offTouchMove(t){return this.R.off(t,"touchMove")}offTouchEnd(t){return this.R.off(t,"touchEnd")}getIsUnderMouse(){return this.Tu>0}setVisible(t){const e=this.Zi!==t;return this.Zi=t,e&&this.R.emit("visibleStateChanged",this,this.Zi),this}getVisible(){return this.Zi}onVisibleStateChanged(t){return this.R.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.R.off(t,"visibleStateChanged")}}const Mn=(t,i,s)=>{const r=t.getDraggingMode();if(r!==e.UIDraggingModes.notDraggable){const n=t.scale.pi(t.getPosition(),{x:r!==e.UIDraggingModes.onlyVertical?i.x:0,y:r!==e.UIDraggingModes.onlyHorizontal?i.y:0}),o=t.scale,a=t.getSize(),h=t.getOrigin(),l=o.pi({x:o.x.getInnerStart(),y:o.y.getInnerStart()},di({x:(1+h.x)/2,y:(1+h.y)/2},a)),u=o.pi({x:o.x.getInnerEnd(),y:o.y.getInnerEnd()},di({x:(h.x-1)/2,y:(h.y-1)/2},a)),c={x:Math.min(Math.max(n.x,l.x),u.x),y:Math.min(Math.max(n.y,l.y),u.y)};t.setPosition(c),Qt(s)}},Tn=(t,e,i,s,r)=>{Mn(t,r,e)},wn=(t,e,i,s,r)=>{Mn(t,s,r)};class Cn extends bn{constructor(t,e,i,s,r){super(),this.position=u(50,50),this.origin=u(0,0),this.size=u(0,0),this.ji=!1,this.Iu=void 0,this.Pu=void 0,this.Du=vn,this.Bu=void 0,this.Wo=!0,this.Lu=()=>{const t="function"==typeof this.Du?this.Du(this):this.Du;t&&(this.Pu=this.Bs.cs.Kr(t))},this.Ru=()=>{this.Bs.cs.qr(this.Pu)},this.Xt=x(0,0,0,0),this.Bs=t,this.renderingScale=e,this.scale=i,this.Xo=s,this.ts=r,this.Bs.Ms(),this.onMouseEnter(this.Lu),this.onMouseLeave(this.Ru),this.onMouseDrag(Tn);const n=Ji(new es(Rt,wn,Rt));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd),this.ts=r}setMouseInteractions(t){return this.Eu().forEach((e=>e.setMouseInteractions(t))),this.Wo=t,this}getMouseInteractions(){return this.Wo}setEffect(t){return this.hs=this.hs||this.Bs.cs.hs.rs(this,{zu:{shapes:this.Eu()}}),this.hs.zu.bs(t),this}getEffect(){return!!this.hs&&this.hs.zu._s()}setAutoDispose(t){return this.Bu=t,this.Bs.Ms(),this}getAutoDispose(){return this.Bu}getSize(t=e.UISpace.Everything){return t===e.UISpace.Everything?u(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt="object"==typeof t?S(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.Bs.Ms(),this}getMargin(){return this.Xt}Re(){if(this.Bu){const t=this.size,e=this.renderingScale.oi(),i={x:t.x/e.x,y:t.y/e.y};("max-width"===this.Bu.type&&i.x>=this.Bu.maxWidth||"max-height"===this.Bu.type&&i.y>=this.Bu.maxHeight)&&this.dispose()}return this}zs(){return this}dispose(){return this.ji||(this.Bs.Ms(),this.ji=!0,this.Xo(this),this.R.emit("dispose",this),this.Eu().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Eu().forEach((e=>e.setVisible(t))),this.Bs.Ms(),this}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}setPosition(t){return this.position=t,this.Bs.Ms(),this}getPosition(t=this.origin,i=e.UISpace.Everything){const s=this.getSize(e.UISpace.Everything),r=this.scale.pi(this.position,di({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===e.UISpace.Everything)return this.scale.pi(r,di({x:(t.x+1)/2,y:(t.y+1)/2},s));const n=this.scale.pi(r,{x:this.Xt.left,y:this.Xt.bottom}),o=this.getSize(e.UISpace.Content);return this.scale.pi(n,di({x:(t.x+1)/2,y:(t.y+1)/2},o))}setOrigin(t){return this.origin=t,this.Bs.Ms(),this}getOrigin(){return this.origin}setDraggingMode(t=e.UIDraggingModes.notDraggable){return this.Iu=t,this.Bs.Ms(),this}getDraggingMode(){return void 0!==this.Iu?this.Iu:e.UIDraggingModes.notDraggable}setMouseStyle(t){return this.Du=t,this}getMouseStyle(){return this.Du}}class kn extends Cn{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.ka=x(),this.Vu=0,this.Bs=t,this.Ou=s,this.backgroundElement=new this.Ou(this.Bs,this.renderingScale,this.scale,Rt,n),this.Fu(this.backgroundElement)}Eu(){return this.backgroundElement.Eu()}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Re(){return super.Re(),this.ji||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,e.UISpace.PaddedBackground)).Re(),this}zs(){const t=this.getSize(e.UISpace.PaddedContent);return this.backgroundElement.Nu(t).zs(),super.zs()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ka="object"==typeof t?S(this.ka,t):{left:t,top:t,right:t,bottom:t},this.Bs.Ms(),this}getPadding(){return this.ka}getSize(t=e.UISpace.Everything){let i=super.getSize(t);return t>=e.UISpace.PaddedContent&&(i=u(i.x+this.ka.left+this.ka.right,i.y+this.ka.bottom+this.ka.top)),t>=e.UISpace.PaddedBackground&&(i=u(i.x+this.backgroundElement.Gu()+this.backgroundElement.Wu(),i.y+this.backgroundElement.Uu()+this.backgroundElement.Yu())),i}getPosition(t=this.origin,i=e.UISpace.Everything){if(i===e.UISpace.Everything)return super.getPosition(t,i);const s=super.getPosition(u(-1,-1),e.UISpace.Everything),r=this.getMargin(),n=this.scale.pi(s,{x:r.left,y:r.bottom});if(i===e.UISpace.PaddedBackground){const i=this.getSize(e.UISpace.PaddedBackground);return this.scale.pi(n,di({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.scale.pi(n,{x:this.backgroundElement.Gu(),y:this.backgroundElement.Uu()});if(i===e.UISpace.PaddedContent){const i=this.getSize(e.UISpace.PaddedContent);return this.scale.pi(o,di({x:(t.x+1)/2,y:(t.y+1)/2},i))}const a=this.getPadding(),h=this.scale.pi(o,{x:a.left,y:a.bottom}),l=this.getSize(e.UISpace.Content);return this.scale.pi(h,di({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Vu}setHighlight(t){return this.Vu=be(t),this.backgroundElement.setHighlight(t),this.R.emit("highlight",this,t),this}}const En=t=>"setBackground"in t;class Rn extends bn{constructor(t,e,i,s,r,n,o,a,h,l,u){super(),this.M=0,this.Hu=1,this.$u=!0,this.Xu=new gr,this.ju=!0,this.ji=!1,this.axisScale=s,this.renderingScale=r,this.Zu=o,this.Qu=a,this.Ju=h,this.Xo=l,this.Ku=e,this.qu=i,this.tc=this.Fu(this.Ku.Ue(this.renderingScale)),this.ts=u,this.ic=this.Fu(this.Ju.setDirection(this.Qu).sc(this.qu,this.renderingScale,n,Rt,this.ts,!1).setOrigin($t(this.Qu))),this.axis=t,this.setMouseInteractions(!1),"major"===this.ic.hc?this.tc.We(u.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.ic.hc?this.tc.We(u.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.ic.hc&&this.tc.We(u.cursorGridStrokeStyleX)}setValue(t){return this.M=t,this.qu.Ms(),this.R.emit("valueChange",this,this.M),this}getValue(){return this.M}setTextFormatter(t){return this.rc=t,this.qu.Ms(),this}setTickLength(t){return this.ic.setPointerLength(t),this.Ku.Ms(),this}getTickLength(){return this.ic.getPointerLength()}setTickLabelPadding(t){return this.ic.setTickLabelPadding(t),this.Ku.Ms(),this}setTickLabelRotation(t){return this.ic.setTextRotation(t),this.Ku.Ms(),this}getTickLabelRotation(){return this.ic.getTextRotation()}getTickLabelPadding(){return this.ic.getTickLabelPadding()}setGridStrokeLength(t){return this.Hu=t,this.Ku.Ms(),this}getGridStrokeLength(){return this.Hu}setGridStrokeStyle(t){return this.tc.We(t),this.Ku.Ms(),this}getGridStrokeStyle(){return this.tc.mu()}dispose(){return this.ji||(this.ji=!0,this.tc.dispose(),this.ic.dispose(),this.Xo(this),this.Ku.cs.Ms(),this.R.emit("dispose",this)),this}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}setMarkerVisible(t){return this.$u=t,this.qu.Ms(),this}getMarkerVisible(){return this.$u}setMarker(t){return t(this.ic),this.qu.Ms(),this}getMarker(){return this.ic}setMouseInteractions(t){return this.ic.setMouseInteractions(t),this.tc.setMouseInteractions(t),this}getMouseInteractions(){return this.tc.getMouseInteractions()}setAllocatesAxisSpace(t){return this.ju=t,this.qu.Ms(),this}getAllocatesAxisSpace(){return this.ju}isInScale(){return je(this.M,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.R.on("valueChange",t)}offValueChange(t){return this.R.off(t,"valueChange")}}class In extends Rn{constructor(t,e,i,s,r,n,o,a,h,l,u){super(t,e,i,s,r,n,o,a,u,h,l),this.nc=!1,this.Xo=h,this.Ku=e,this.qu=i}dispose(){return this.nc=!1,super.dispose()}update(){return this}plot(t,e,i,s,r){if(this.isInScale()&&this.getVisible()&&t){this.nc=!1;const t=ut(this.M,this.axisScale,this.Zu.getWidth(this.renderingScale));this.tc.setVisible(!0).He(this.Zu.toPoint(t,e)).Ye(this.Zu.toPoint(t,e-(s+i*this.Hu))),this.$u?(this.rc&&this.ic.setText(this.rc(this.M,this)),this.ic.setVisible(!0).setPosition(this.Zu.toPoint(t,r))):this.ic.setVisible(!1)}else this.tc.setVisible(!1),this.ic.setVisible(!1);return this.ic.zs().Re(),this}oc(){const t=this.ic.zs().getSize();return this.Zu.getHeight(t)}}const _n=(t,e)=>t.setTextFillStyle(e.uiTextFillStyle).setTextFont(e.uiTextFont),Fn=(t,e)=>(ce(t.setButtonSize(e.uiButtonSize),e,!1,{fill:e.uiButtonFillStyle}),t),Dn=(t,e,i)=>{i&&En(t)&&t.setBackground((t=>t.setFillStyle(e.uiBackgroundFillStyle).setStrokeStyle(e.uiBackgroundStrokeStyle))).setEffect(!0)},Bn={uiElement:void 0,stylers:o.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,e){return this.stylers.forEach((i=>void 0!==i?i(t,e):void 0)),t}},Pn={background:void 0,setBackground(t){return{...this,background:t}}},Ln={sc(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,s,r),r);return Dn(o,r,n),o}},Vn={sc(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,this.background,s,r),r);return Dn(o,r,n),o}};class zn extends Cn{constructor(){super(...arguments),this.ac=!0}Re(){return super.Re(),this}setMouseInteractions(t){return this.ac=t,this}getMouseInteractions(){return this.ac}Eu(){return[]}}class Nn extends zn{onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}Nu(t){return this.size=t,this}Gu(){return 0}Wu(){return 0}Yu(){return 0}Uu(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return V}setStrokeStyle(){return this}getStrokeStyle(){return nt}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class On extends Cn{constructor(){super(...arguments),this.R=new r.Eventer,this.Vu=0}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}getHighlight(){return this.Vu}setHighlight(t){return this.Vu=t,this.Eu().forEach((e=>e.ds(t))),this.R.emit("highlight",this,t),this.Bs.Ms(),this}}class Un extends On{}class Yn extends Un{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Bs=t,this.Qa=this.Bs.lc(this.renderingScale,yn.Simple).setVisible(!1).Be(V).De(nt),this.Fu(this.Qa)}uc(){const t=this.cc();if(t.length>2){const e=Je(t),i=u(e.max.x-e.min.x,e.max.y-e.min.y);this.setContentSize(i);const s=t.map((t=>{const s=ui(t,li(e.min,-1));return this.scale.pi(this.position,ui(s,di(li(ui(this.origin,u(1,1)),-.5),i)))})).map((t=>ct(t,this.scale,this.renderingScale)));this.Qa.Cl(s).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Qa&&this.Qa.setVisible(!1),this.setContentSize(u(0,0))}Re(){return super.Re(),this.ji||this.uc(),this}zs(){return this.uc(),super.zs()}setVisible(t){return super.setVisible(t),this.Qa.setVisible(t),this}}const Gn=(t,e,i)=>t*(1-i)+e*i,Hn=(t,e,i,s,r)=>{if(void 0===e.value||void 0===i.value||void 0===s.value||void 0===r.value)return;const n=(t.x-i.point.x)/(r.point.x-i.point.x),o=(r.point.y-i.point.y)*n+i.point.y,a=(t.x-e.point.x)/(s.point.x-e.point.x),h=(s.point.y-e.point.y)*a+e.point.y,l=(t.y-h)/(o-h),u=Gn(i.value,r.value,n),c=Gn(e.value,s.value,a);return Gn(c,u,l)},Wn={warm:t=>e=>C(60/(t-1)*e,.8,.8),cold:t=>e=>C(60/(t-1)*e+180,.8,.8),fullSpectrum:t=>e=>C(360/t*e,.8,.8),reverseSpectrum:t=>e=>C(360/t*(t-e),.8,.8),flatUI:t=>e=>C(360/t*e+8,.8,.8-.15/t*e),arction:t=>e=>{const i=1-.2/t*e;return C(360/t*e+51,i,i)},arctionWarm:t=>e=>{const i=t-1,s=1-.2/i*e;return C(46-46/i*e+4,s,s)},sunset:t=>e=>{const i=[170,320];return C(e%2?i[0]:i[1],.8,.5+.5/(t-1)*e)},dynamic:t=>e=>{const i=e%2,s=[234,346];return C(i?s[0]:s[1],i?.3:.9,.5+.5/(t-1)*e)},magenta:t=>e=>{const i=[.9,.6];return C(354,e%2?i[0]:i[1],.5+.5/(t-1)*e)},greyscale:t=>e=>C(0,0,.25+.5/(t-1)*e),frozen:t=>e=>{const i=[.8,.6];return C(160+80/(t-1)*e,.6,e%2?i[0]:i[1])},retro:t=>e=>{const i=[6,183];return C(e%2?i[0]:i[1],.7,.5+.5/(t-1)*e)},crayons:t=>e=>{let i=180+230/(t-1)*e;return i>360&&(i-=360),C(i,.9,.8)},custom:(t,e)=>i=>{const s=.25+.5/(t-1)*i;if(!e)return C(0,0,s);const r=e.getR()/255,n=e.getG()/255,o=e.getB()/255,a=Math.max(r,n,o),h=Math.min(r,n,o);let l=0;if(a!==h){const t=a-h;switch(a){case r:l=(n-o)/t+(n<o?6:0);break;case n:l=(o-r)/t+2;break;case o:l=(r-n)/t+4;break;default:l=0}return l=l/6*360,C(l,.8,s)}return C(0,0,s)},sector:(t,e,i=.8,s=.8)=>r=>n=>C(t+(e-t)/r*n,i,s),auroraBorealis:t=>e=>Kn([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,e),blueSciFi:t=>e=>Kn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,e),light:t=>e=>Kn([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,e),monochrome:t=>e=>Kn([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,e),night:t=>e=>Kn([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,e),sunset2:t=>e=>Kn([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,e)},Kn=(t,e,i)=>{const s=jn(e,i),[r,n]=$n(s,t),o=Xn(t[r]),a=Xn(t[n]),h=0!==o.value?(a.value-s)/o.value:0,l={value:h,h:Gn(o.h,a.h,h),s:Gn(o.s,a.s,h),v:Gn(o.v,a.v,h)};return C(l.h,l.s,l.v)},Xn=t=>{const e=(t=>{const e=t.r,i=t.g,s=t.b,r=Math.max(e,i,s),n=Math.min(e,i,s);let o=0;const a=r,h=r-n,l=0===r?0:h/r;if(r===n)o=0;else{switch(r){case e:o=(i-s)/h+(i<s?6:0);break;case i:o=(s-e)/h+2;break;case s:o=(e-i)/h+4}o/=6}return[360*o,l,a]})(w(t.hex));return{value:t.value,h:e[0],s:e[1],v:e[2]}},jn=(t,e)=>{const i=e/t;return i<0?0:i>1?1:i},$n=(t,e)=>{if(e.length<2)throw new Error("Invalid palette size");for(let i=0;i<e.length;i+=1)if(t<e[i].value)return[i-1,i];return[e.length-2,e.length-1]};class Zn{constructor(){this.type="simple"}}const Qn=new Zn;class qn{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=w("#000"),this.specularColor=w("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Jn=new qn,to={Simple:Zn,Phong:qn};var eo;e.ImageFitMode=void 0,(eo=e.ImageFitMode||(e.ImageFitMode={}))[eo.Fill=0]="Fill",eo[eo.Fit=1]="Fit",eo[eo.Stretch=2]="Stretch",eo[eo.Center=3]="Center",eo[eo.Tile=4]="Tile";const io=s.Record({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:T(0,0,0,0),sourceMissingColor:T(0,0,0,0),fitMode:e.ImageFitMode.Fill});class so extends io{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return M(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return M(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const ro=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),no={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},oo=s.Record({type:"linestyle",lineType:"dashed",pattern:no.DashedEqual,fillStyle:new U({color:T(255,255,255)}),thickness:1,patternScale:3});class ao extends oo{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}N(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const ho=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),lo=s.Record({type:"icon",width:void 0,height:void 0,dc:void 0,fc:Rt,Ac:Rt});class uo extends lo{constructor(t,e,i,s){super({...s,dc:t,fc:e,Ac:i})}dispose(){return this.Ac(this),this}setWidth(t){const e=this.set("width",t);return this.fc(e),e}getWidth(){return this.get("width")}setHeight(t){const e=this.set("height",t);return this.fc(e),e}getHeight(){return this.get("height")}setSize(t,e){const i=this.withMutations((i=>{i.set("width",t).set("height",e)}));return this.fc(i),i}oi(){if(!this.dc)return{x:0,y:0};const t=this.dc.width,e=this.dc.height;if(0===t||0===e)return{x:0,y:0};const i=this.width,s=this.height;return"number"==typeof i&&"number"==typeof s?{x:i,y:s}:"number"==typeof i?{x:i,y:e*i/t}:"number"==typeof s?{x:t*s/e,y:s}:{x:t,y:e}}}const co=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),fo=s.Record({type:"glow",color:T(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class go extends fo{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class mo{constructor(t){this.gc=0,this.yc=0,this.mc=0,this.vc=!1,this.Sc=!0,this.xc=!1,this.bc={warningDisplayed:!1,expandEvents:[]},this.R=new r.Eventer,this.Sc=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.Mc={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this._c=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.wc=void 0!==(null==t?void 0:t.colors)&&t.colors,this.Cc=void 0!==(null==t?void 0:t.ids)&&t.ids,this.kc=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.Tc=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Fc=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.Ic=!1!==(null==t?void 0:t.allowInputModification)}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,e){return this.appendSamples({xValues:t,yValues:e}),this}appendJSON(t,e={x:"x",y:"y"}){const i=t.length,s=e.x,r=e.y,n=e.lookupValue,o=e.size,a=e.rotation,h=e.color,l=e.id;let u,c,d,f,g,m,y;if(s){u=new this.Fc(i);const e=t[0]&&t[0][s]instanceof Date;if(t[0]&&"string"==typeof t[0][s])for(let e=0;e<i;e+=1){const i=t[e];u[e]=new Date(i[s]).getTime()}else if(e)for(let e=0;e<i;e+=1){const i=t[e];u[e]=i[s].getTime()}else for(let e=0;e<i;e+=1){const i=t[e];u[e]=i[s]}}if(r){c=new this.Fc(i);const e=t[0]&&t[0][r]instanceof Date;if(t[0]&&"string"==typeof t[0][r])for(let e=0;e<i;e+=1){const i=t[e];c[e]=new Date(i[r]).getTime()}else if(e)for(let e=0;e<i;e+=1){const i=t[e];c[e]=i[r].getTime()}else for(let e=0;e<i;e+=1){const i=t[e];c[e]=i[r]}}if(n){d=new Float32Array(i);for(let e=0;e<i;e+=1){const i=t[e];d[e]=i[n]}}if(h){f=[];for(let e=0;e<i;e+=1){const i=t[e];f[e]=i[h]}}if(l){g=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e];g[e]=i[l]}}if(o){m=new Float32Array(i);for(let e=0;e<i;e+=1){const i=t[e];m[e]=i[o]}}if(a){y=new Float32Array(i);for(let e=0;e<i;e+=1){const i=t[e];y[e]=i[a]}}return this.appendSamples({xValues:u,yValues:c,ids:g,colors:f,lookupValues:d,sizes:m,rotations:y,start:e.start,step:e.step}),this}appendSample(t){const{samplesCacheX:e,samplesCacheY:i,samplesCacheColors:s,samplesCacheIDs:r,samplesCacheLookup:n,samplesCacheSize:o,samplesCacheRotation:a,maxSampleCount:h,dataPattern:l}=this.Pc({appendCount:1}),u=this.Dc(),c=void 0!==t.step?t.step:1,d=void 0!==t.x?"number"==typeof t.x?t.x:"string"==typeof t.x?new Date(t.x).getTime():t.x.getTime():u?u.x+c:0,f=void 0!==t.y?"number"==typeof t.y?t.y:"string"==typeof t.y?new Date(t.y).getTime():t.y.getTime():u?u.y+c:0;if(l&&this.Sc&&this.Bc&&this.Lc&&!this.Rc(l,d,f)&&!this.xc)return this.Ec(this.Bc,this.Lc,new this.Fc([d]),new this.Fc([f]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.zc((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(e[this.gc]=d,i[this.gc]=f,void 0!==t.lookupValue&&n&&(n[this.gc]=t.lookupValue),void 0!==t.color&&s){const e=this.zc((t.color,[t.color]));void 0!==e&&(s[this.gc]=e[0])}return void 0!==t.id&&r&&(r[this.gc]=t.id),void 0!==t.size&&o&&(o[this.gc]=t.size),void 0!==t.rotation&&a&&(a[this.gc]=t.rotation),this.Vc(this.gc,this.gc),this.gc+=1,this.gc>h-1&&(this.gc=0,this.vc=!0),this.yc=Math.min(this.yc+1,h),this.mc+=1,this}appendSamples(t){const{lookupValues:e,colors:i,ids:s,sizes:r,rotations:n,start:o,step:a}=t;let h=t.offset,l=t.count;const u=t.xValues||t.yValues;if(!u)return this;const c=u.length;if(h=void 0!==h?h:0,l=void 0!==l?l:c-h,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:h,f=void 0!==t.offsetColors?t.offsetColors:h,g=void 0!==t.offsetIds?t.offsetIds:h,m=void 0!==t.offsetSizes?t.offsetSizes:h,y=void 0!==t.offsetRotations?t.offsetRotations:h,p=this.Oc(!0),[x,A]=this.Nc(l,t.xValues,"x","ProgressiveX"===p||"RegressiveX"===p||void 0===p?o:void 0,"ProgressiveX"===p||"RegressiveX"===p||void 0===p?a:void 0,h),[S,v]=this.Nc(l,t.yValues,"y","ProgressiveY"===p||"RegressiveY"===p?o:void 0,"ProgressiveY"===p||"RegressiveY"===p?a:void 0,h),b=this.zc(i),{samplesCacheX:M,samplesCacheY:T,samplesCacheLookup:w,samplesCacheColors:C,samplesCacheIDs:k,samplesCacheSize:E,samplesCacheRotation:R,maxSampleCount:I,dataPattern:_,incomingDataReplacedCache:F}=this.Pc({appendCount:l,...0===A&&0===v&&0===h&&0===d&&0===f&&0===g&&0===m&&0===y?{incomingDataX:x,incomingDataY:S,incomingDataLookup:e,incomingDataIDs:s,incomingDataColors:b,incomingDataSize:r,incomingDataRotation:n}:{}});if(!F&&_&&this.Sc&&this.Bc&&this.Lc){const t=x[A],i=S[v];if(!this.Rc(_,t,i)&&!this.xc)return this.Ec(this.Bc,this.Lc,vo(x,A,A+l),vo(S,v,v+l),vo(e,d,d+l),vo(b,f,f+l),vo(s,g,g+l),vo(r,m,m+l),vo(n,y,y+l),_),this}const D=I-this.gc,B=Math.min(l,D);if(B>0&&(F||(Ao(M,x,A,B,this.gc),Ao(T,S,v,B,this.gc),e&&w&&Ao(w,e,d,B,this.gc),s&&k&&Ao(k,s,g,B,this.gc),b&&C&&Ao(C,b,f,B,this.gc),r&&E&&Ao(E,r,m,B,this.gc),n&&R&&Ao(R,n,y,B,this.gc)),this.Vc(this.gc,this.gc+B-1),this.gc+=B,this.gc>I-1&&(this.gc=0,this.vc=!0)),this.yc=Math.min(this.yc+B,I),this.mc+=B,this.Oc(),l-B>0){const t={xValues:x?vo(x,A+B,void 0):void 0,yValues:S?vo(S,v+B,void 0):void 0,lookupValues:e?vo(e,d+B,void 0):void 0,ids:s?vo(s,g+B,void 0):void 0,colors:b?vo(b,f+B,void 0):void 0,sizes:r?vo(r,m+B,void 0):void 0,rotations:n?vo(n,y+B,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const e=this.Bc||this.Lc;if(!e)return this;const i=e.length;if(void 0!==t.x&&(this.Bc=this.Bc||new this.Fc(i),this.Bc.fill(t.x)),void 0!==t.y&&(this.Lc=this.Lc||new this.Fc(i),this.Lc.fill(t.y)),void 0!==t.lookupValue&&(this.Gc=this.Gc||new Float32Array(i),this.Gc.fill(t.lookupValue)),void 0!==t.color){const e=this.zc([t.color]);e&&(this.Wc=this.Wc||new Uint32Array(i),this.Wc.fill(e[0]))}return void 0!==t.size&&(this.Uc=this.Uc||new Float32Array(i),this.Uc.fill(t.size)),void 0!==t.rotation&&(this.Yc=this.Yc||new Float32Array(i),this.Yc.fill(t.rotation)),this.R.emit("cleared"),this}alterSamples(t,e){const{xValues:i,yValues:s,lookupValues:r,colors:n,ids:o,sizes:a,rotations:h}=e;let l=e.offset,u=e.count;const c=i||s||r||n||o||a||h,d=c?c.length:void 0!==e.x||void 0!==e.y?1:0;if(l=void 0!==l?l:0,u=void 0!==u?u:d-l,u<=0)return this;const f=void 0!==e.offsetLookupValues?e.offsetLookupValues:l,g=void 0!==e.offsetColors?e.offsetColors:l,m=void 0!==e.offsetIds?e.offsetIds:l,y=void 0!==e.offsetSizes?e.offsetSizes:l,p=void 0!==e.offsetRotations?e.offsetRotations:l,x=this.zc(n),A=this.mc-1,S=void 0!==this.Hc?Math.max(this.mc-this.Hc,0):0,v=t+u-1,b=Math.max(t,S),M=Math.min(v,A),T=M-b+1;if(this.mc>0&&T>0){const{samplesCacheX:n,samplesCacheY:u,samplesCacheColors:c,samplesCacheIDs:d,samplesCacheLookup:A,samplesCacheSize:v,samplesCacheRotation:w}=this.Pc({appendCount:0}),C=n.length;if(void 0!==this.Hc&&this.vc&&this.mc%this.Hc!=0){const S=this.mc-this.mc%this.Hc,T=this.mc-1,k=this.mc-this.yc,E=S-1,R=Math.max(b,k),I=Math.min(M,E)-R+1;if(I>0){const S=R-t,b=yo(R,this.mc,C,this.gc);if(void 0!==e.x)for(let t=b;t<b+I;t+=1)n[t]=e.x;if(void 0!==e.y)for(let t=b;t<b+I;t+=1)u[t]=e.y;i&&Ao(n,i,l+S,I,b),s&&Ao(u,s,l+S,I,b),r&&A&&Ao(A,r,f+S,I,b),o&&d&&Ao(d,o,m+S,I,b),x&&c&&Ao(c,x,g+S,I,b),a&&v&&Ao(v,a,y+S,I,b),h&&w&&Ao(w,h,p+S,I,b)}const _=Math.max(b,S),F=Math.min(M,T)-_+1;if(F>0){const S=_-t,b=yo(_,this.mc,C,this.gc);if(void 0!==e.x)for(let t=b;t<b+F;t+=1)n[t]=e.x;if(void 0!==e.y)for(let t=b;t<b+F;t+=1)u[t]=e.y;i&&Ao(n,i,l+S,F,b),s&&Ao(u,s,l+S,F,b),r&&A&&Ao(A,r,f+S,F,b),o&&d&&Ao(d,o,m+S,F,b),x&&c&&Ao(c,x,g+S,F,b),a&&v&&Ao(v,a,y+S,F,b),h&&w&&Ao(w,h,p+S,F,b)}}else{const t=b-S;if(void 0!==e.x)for(let i=t;i<t+T;i+=1)n[i]=e.x;if(void 0!==e.y)for(let i=t;i<t+T;i+=1)u[i]=e.y;s&&Ao(u,s,l,T,t),i&&Ao(n,i,l,T,t),s&&Ao(u,s,l,T,t),r&&A&&Ao(A,r,f,T,t),o&&d&&Ao(d,o,m,T,t),x&&c&&Ao(c,x,g,T,t),a&&v&&Ao(v,a,y,T,t),h&&w&&Ao(w,h,p,T,t)}this.R.emit("cleared")}const w=t+u-1-A;if(w>0){const e=M+1-t;this.appendSamples({xValues:i,yValues:s,lookupValues:r,colors:n,ids:o,sizes:a,rotations:h,offset:l+e,offsetLookupValues:f+e,offsetColors:g+e,offsetIds:m+e,offsetSizes:y+e,offsetRotations:p+e,count:w})}return this}alterSamplesByID(t,e){if(!this.Cc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const i=t.length,s=this.$c;if(i<=0||!s)return this;const r=(("object"==typeof e.color?this.zc([e.color]):"number"==typeof e.color?[e.color]:[])||[])[0],n=Array.isArray(e.xValues)?new this.Fc(e.xValues):e.xValues,o=Array.isArray(e.yValues)?new this.Fc(e.yValues):e.yValues,a=Array.isArray(e.yValues)?new Float32Array(e.yValues):e.yValues,h=this.zc(e.colors),l=Array.isArray(e.sizes)?new Float32Array(e.sizes):e.sizes,u=Array.isArray(e.rotations)?new Float32Array(e.rotations):e.rotations,c=s.length,d=this.yc,f=this.mc-1,g=Math.max(f-d+1,0);for(let d=0;d<i;d+=1){const i=t[d],m=xo(i,g,f,(t=>s[yo(t,this.mc,c,this.gc)])),y=yo(m,this.mc,c,this.gc);s[y]===i&&(void 0!==e.x&&this.Bc&&(this.Bc[y]=e.x),void 0!==e.y&&this.Lc&&(this.Lc[y]=e.y),void 0!==e.lookupValue&&this.Gc&&(this.Gc[y]=e.lookupValue),void 0!==e.size&&this.Uc&&(this.Uc[y]=e.size),void 0!==e.rotation&&this.Yc&&(this.Yc[y]=e.rotation),void 0!==r&&this.Wc&&(this.Wc[y]=r),n&&this.Bc&&(this.Bc[y]=n[d]),o&&this.Lc&&(this.Lc[y]=o[d]),a&&this.Gc&&(this.Gc[y]=a[d]),h&&this.Wc&&(this.Wc[y]=h[d]),l&&this.Uc&&(this.Uc[y]=l[d]),u&&this.Yc&&(this.Yc[y]=u[d]))}return this.R.emit("cleared"),this}clear(){return this.gc=0,this.yc=0,this.mc=0,this.vc=!1,this.R.emit("cleared"),this}getSampleCount(){return this.yc}getNextSampleIndex(){return this.mc}setMaxSampleCount(t){if("object"==typeof t){this.Xc&&this.offMaxSampleCountExceeded(this.Xc);const e=t.max,i=t.initial,s=t=>{const i=this.Hc||0;if(void 0!==e&&i>=e)return;let s=Math.max(2*i,t);void 0!==e&&(s=Math.min(s,e)),this.setMaxSampleCount(s)};this.Xc=this.onMaxSampleCountExceeded(((t,e,i,r)=>{s(r)})),void 0===this.Hc&&(void 0!==i?this.setMaxSampleCount(i):this.setMaxSampleCount(Math.min(2*this.yc,void 0!==e?e:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const e=t;if(void 0!==this.Hc&&this.Hc>e)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Bc||!this.Lc)return this.Hc=e,this;if(e===this.Hc)return this;if(this.vc&&0!==this.gc)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Hc=e,this.yc<e?(this.gc=this.yc,this.vc=!1):(this.gc=0,this.vc=!0);const i=new this.Fc(this.Hc);i.set(this.Bc);const s=new this.Fc(this.Hc);if(s.set(this.Lc),this.Bc=i,this.Lc=s,this._c){const t=new Float32Array(this.Hc);this.Gc&&t.set(this.Gc),this.Gc=t}if(this.Cc){const t=new Uint32Array(this.Hc);this.$c&&t.set(this.$c),this.$c=t}if(this.wc){const t=new Uint32Array(this.Hc);this.Wc&&t.set(this.Wc),this.Wc=t}if(this.kc){const t=new Float32Array(this.Hc);this.Uc&&t.set(this.Uc),this.Uc=t}if(this.Tc){const t=new Float32Array(this.Hc);this.Yc&&t.set(this.Yc),this.Yc=t}}return this}getMaxSampleCount(){return this.Hc}readBack(t){if(!this.Bc||!this.Lc)return{xValues:new this.Fc,yValues:new this.Fc,iSampleFirst:0};const e=this.Bc.length;let i,s=[];if(null==t?void 0:t.onlyInRange){const e=this.jc();if(!e)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const r=Math.min(t.onlyInRange.start,t.onlyInRange.end),n=Math.max(t.onlyInRange.start,t.onlyInRange.end),o=po(r,n,this.Bc,this.mc,this.yc,this.gc,e,0);if(!o)return{xValues:new this.Fc,yValues:new this.Fc,iSampleFirst:0};s=o.dataRanges,i=o.iFirstSample}else if(void 0!==this.Hc&&this.vc&&this.mc%this.Hc!=0){const t=this.gc,r=e-t,n=this.gc-1;s.push({offset:t,count:r}),s.push({offset:0,count:n+1}),i=this.mc-e}else s.push({offset:0,count:this.yc}),i=0;const r=s.reduce(((t,e)=>t+e.count),0),n=new this.Fc(r),o=new this.Fc(r),a=this.wc?new Uint32Array(r):void 0,h=this._c?new Float32Array(r):void 0,l=this.Cc?new Uint32Array(r):void 0,u=this.kc?new Float32Array(r):void 0,c=this.Tc?new Float32Array(r):void 0;let d=0;for(const t of s)n.set(this.Bc.subarray(t.offset,t.offset+t.count),d),o.set(this.Lc.subarray(t.offset,t.offset+t.count),d),this.wc&&a&&this.Wc&&a.set(this.Wc.subarray(t.offset,t.offset+t.count),d),this._c&&h&&this.Gc&&h.set(this.Gc.subarray(t.offset,t.offset+t.count),d),this.Cc&&l&&this.$c&&l.set(this.$c.subarray(t.offset,t.offset+t.count),d),this.kc&&u&&this.Uc&&u.set(this.Uc.subarray(t.offset,t.offset+t.count),d),this.Tc&&c&&this.Yc&&c.set(this.Yc.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:n,yValues:o,iSampleFirst:i,lookupValues:h,colors:a,ids:l,sizes:u,rotations:c}}onMaxSampleCountExceeded(t){return this.R.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.R.off(t)}Nc(t,e,i,s,r,n){if(void 0===e){const e=this.Dc();r=void 0!==r?r:1,s=void 0!==s?s:e?e[i]+r:0;const n=new this.Fc(t);for(let e=0;e<t;e+=1)n[e]=s+e*r;return[n,0]}const o=e[0]&&e[0]instanceof Date,a=e[0]&&"string"==typeof e[0];if(void 0!==s||void 0!==r){const h=this.Dc();r=void 0!==r?r:1,s=void 0!==s?s:h?h[i]+r:0;const l=new this.Fc(t);if(a)for(let i=0;i<t;i+=1)l[i]=s+new Date(e[i+n]).getTime()*r;else if(o)for(let i=0;i<t;i+=1)l[i]=s+e[i+n].getTime()*r;else for(let i=0;i<t;i+=1)l[i]=s+e[i+n]*r;return[l,0]}if(a){const i=new this.Fc(t);for(let s=0;s<t;s+=1)i[s]=new Date(e[s]).getTime();return[i,n]}if(o){const i=new this.Fc(t);for(let s=0;s<t;s+=1)i[s]=e[s].getTime();return[i,n]}return[e,n]}zc(t){if(!t||0===t.length)return;const e=t[0];if(M(e)){const e=t.length,i=new Uint32Array(e);for(let s=0;s<e;s+=1){const e=t[s],r=255*e.a<<24|255*e.b<<16|255*e.g<<8|255*e.r;i[s]=r}return i}return t}Zc(){return{min:0,max:void 0!==this.Hc&&this.vc?this.Hc-1:this.yc-1}}Qc(t){t=Math.min(t,this.yc),this.mc-=t,this.yc-=t,this.gc-=t,this.gc<0&&void 0!==this.Hc&&(this.gc+=this.Hc)}Ec(t,e,i,s,r,n,o,a,h,l){var u;const c=i.length,d=i[0],f=i[c-1],g=s[c-1];if(this.Rc(l,f,g)){const t=(null===(u=this.Dc())||void 0===u?void 0:u.x)||0;let e=0;for(let s=0;s<c;s+=1)if(i[s]>t){e=s;break}const l={xValues:i,yValues:s,lookupValues:r,colors:n,ids:o,sizes:a,rotations:h,offset:e};this.xc=!0,this.appendSamples(l),this.xc=!1}else{const l=t.length,u=this.yc,f=this.mc-1,g=Math.max(f-u+1,0),m=xo(d,g,f,(e=>t[yo(e,this.mc,l,this.gc)])),y=m-1,p=m+1,x=t[yo(m,this.mc,l,this.gc)],A=p<=this.mc-1?t[yo(p,this.mc,l,this.gc)]:void 0,S=void 0!==A&&A<d?p+1:x<d?m+1:y+1,v=f-S+1,b=new this.Fc(v),M=new this.Fc(v),T=this._c?new Float32Array(v):void 0,w=this.wc?new Uint32Array(v):void 0,C=this.Cc?new Uint32Array(v):void 0,k=this.kc?new Float32Array(v):void 0,E=this.Tc?new Float32Array(v):void 0;let R=0;for(let i=S;i<=f;i+=1){const s=yo(i,this.mc,l,this.gc);b[R]=t[s],M[R]=e[s],T&&this.Gc&&(T[R]=this.Gc[s]),w&&this.Wc&&(w[R]=this.Wc[s]),C&&this.$c&&(C[R]=this.$c[s]),k&&this.Uc&&(k[R]=this.Uc[s]),E&&this.Yc&&(E[R]=this.Yc[s]),R+=1}this.Qc(v);const I=new this.Fc(c+v);I.set(i),I.set(b,c);const _=new this.Fc(c+v);let F,D,B,P,L;_.set(s),_.set(M,c),r&&T&&(F=new Float32Array(c+v),F.set(r),F.set(T,c)),n&&w&&(D=new Uint32Array(c+v),D.set(n),D.set(w,c)),o&&C&&(B=new Uint32Array(c+v),B.set(o),B.set(C,c)),a&&k&&(P=new Float32Array(c+v),P.set(a),P.set(k,c)),h&&E&&(L=new Float32Array(c+v),L.set(h),L.set(E,c)),this.xc=!0,this.appendSamples({xValues:I,yValues:_,lookupValues:F,colors:D,ids:B,sizes:P,rotations:L}),this.xc=!1,this.R.emit("cleared")}}jc(){return this.Oc()}Oc(t=!1){let e;if(this.Mc&&"userSpecified"in this.Mc)e=this.Mc.userSpecified;else if(this.Mc&&"autoDetectResult"in this.Mc)e=this.Mc.autoDetectResult;else if(this.Bc&&this.Lc&&this.mc>0&&!t){const t=void 0!==this.Hc&&this.vc?this.gc:0,i=this.yc-1,s=void 0!==this.Hc&&this.vc?0:void 0,r=void 0!==this.Hc&&this.vc?this.gc-1:void 0,[n,o]=void 0!==s&&void 0!==r&&Math.abs(r-s)>Math.abs(i-t)?[s,r]:[t,i];if(1+o-n>=2){let t,i,s=this.Bc[n],r=this.Lc[n];for(let e=n+1;e<=o;e+=1){if(!1!==t){const i=this.Bc[e],r=Math.sign(i-s);0!==r&&t&&t.direction!==r?t=!1:0===r||t||(t={direction:r}),s=i}if(!1!==i){const t=this.Lc[e],s=Math.sign(t-r);0!==s&&i&&i.direction!==s?i=!1:0===s||i||(i={direction:s}),r=t}}e=t&&t.direction>0?Yr.ProgressiveX:t&&t.direction<0?Yr.RegressiveX:i&&i.direction>0?Yr.ProgressiveY:i&&i.direction<0?Yr.RegressiveY:void 0,this.Mc={autoDetectResult:e},e&&Tt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${e}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${e}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(e&&"ProgressiveX"!==e)throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return e}Rc(t,e,i){const s=this.Dc();return!s||("ProgressiveX"===t?e>s.x:"RegressiveX"===t?e<s.x:"ProgressiveY"===t?i>s.y:"RegressiveY"!==t||i<s.y)}Pc(t){if(t.incomingDataX&&t.incomingDataY&&0===this.yc&&!this.Bc&&!this.Lc&&(void 0===this.Hc||this.Hc===t.appendCount)&&this.Ic)return this.Bc=So(t.incomingDataX,this.Fc)||new this.Fc,this.Lc=So(t.incomingDataY,this.Fc)||new this.Fc,this.Gc=this._c?So(t.incomingDataLookup,Float32Array):void 0,this.$c=this.Cc?So(t.incomingDataIDs,Uint32Array):void 0,this.Wc=this.wc?So(t.incomingDataColors,Uint32Array):void 0,this.Uc=this.kc?So(t.incomingDataSize,Float32Array):void 0,this.Yc=this.Tc?So(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Oc(),samplesCacheX:this.Bc,samplesCacheY:this.Lc,samplesCacheLookup:this.Gc,samplesCacheIDs:this.$c,samplesCacheColors:this.Wc,samplesCacheSize:this.Uc,samplesCacheRotation:this.Yc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.Hc){const e=this.yc+t.appendCount;if(!this.Bc||!this.Lc)return this.Bc=new this.Fc(e),this.Lc=new this.Fc(e),this.Gc=this._c?new Float32Array(e):void 0,this.$c=this.Cc?new Uint32Array(e):void 0,this.Wc=this.wc?new Uint32Array(e):void 0,this.Uc=this.kc?new Float32Array(e):void 0,this.Yc=this.Tc?new Float32Array(e):void 0,{dataPattern:this.Oc(),samplesCacheX:this.Bc,samplesCacheY:this.Lc,samplesCacheLookup:this.Gc,samplesCacheIDs:this.$c,samplesCacheColors:this.Wc,samplesCacheSize:this.Uc,samplesCacheRotation:this.Yc,maxSampleCount:e};const i=this.Bc.length;if(i<e){if(!this.bc.warningDisplayed){const i=Tt.performance.now();if(this.bc.expandEvents=this.bc.expandEvents.filter((t=>i-t.timestamp<5e3)),e>1e3&&this.bc.expandEvents.push({timestamp:i}),this.bc.expandEvents.length>5)return Tt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.bc.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.Pc(t)}const i=new this.Fc(e);i.set(this.Bc),this.Bc=i;const s=new this.Fc(e);if(s.set(this.Lc),this.Lc=s,this._c){const t=new Float32Array(e);this.Gc&&t.set(this.Gc),this.Gc=t}if(this.Cc){const t=new Uint32Array(e);this.$c&&t.set(this.$c),this.$c=t}if(this.wc){const t=new Uint32Array(e);this.Wc&&t.set(this.Wc),this.Wc=t}if(this.kc){const t=new Float32Array(e);this.Uc&&t.set(this.Uc),this.Uc=t}if(this.Tc){const t=new Float32Array(e);this.Yc&&t.set(this.Yc),this.Yc=t}return this.gc=this.yc,{dataPattern:this.Oc(),samplesCacheX:this.Bc,samplesCacheY:this.Lc,samplesCacheLookup:this.Gc,samplesCacheIDs:this.$c,samplesCacheColors:this.Wc,samplesCacheSize:this.Uc,samplesCacheRotation:this.Yc,maxSampleCount:e}}if(i>4*e){const t=new this.Fc(e);t.set(this.Bc.subarray(0,this.yc)),this.Bc=t;const i=new this.Fc(e);if(i.set(this.Lc.subarray(0,this.yc)),this.Lc=i,this._c){const t=new Float32Array(e);this.Gc&&t.set(this.Gc.subarray(0,this.yc)),this.Gc=t}if(this.Cc){const t=new Uint32Array(e);this.$c&&t.set(this.$c.subarray(0,this.yc)),this.$c=t}if(this.wc){const t=new Uint32Array(e);this.Wc&&t.set(this.Wc.subarray(0,this.yc)),this.Wc=t}if(this.kc){const t=new Float32Array(e);this.Uc&&t.set(this.Uc.subarray(0,this.yc)),this.Uc=t}if(this.Tc){const t=new Float32Array(e);this.Yc&&t.set(this.Yc.subarray(0,this.yc)),this.Yc=t}return{dataPattern:this.Oc(),samplesCacheX:this.Bc,samplesCacheY:this.Lc,samplesCacheLookup:this.Gc,samplesCacheIDs:this.$c,samplesCacheColors:this.Wc,samplesCacheSize:this.Uc,samplesCacheRotation:this.Yc,maxSampleCount:e}}return{dataPattern:this.Oc(),samplesCacheX:this.Bc,samplesCacheY:this.Lc,samplesCacheLookup:this.Gc,samplesCacheIDs:this.$c,samplesCacheColors:this.Wc,samplesCacheSize:this.Uc,samplesCacheRotation:this.Yc,maxSampleCount:i}}return t.appendCount+this.yc>this.Hc&&this.R.emit("maxSampleCountExceeded",this,this.yc,this.Hc,this.yc+t.appendCount),this.Bc=this.Bc||new this.Fc(this.Hc),this.Lc=this.Lc||new this.Fc(this.Hc),this.Gc=this.Gc||(this._c?new Float32Array(this.Hc):void 0),this.$c=this.$c||(this.Cc?new Uint32Array(this.Hc):void 0),this.Wc=this.Wc||(this.wc?new Uint32Array(this.Hc):void 0),this.Uc=this.Uc||(this.kc?new Float32Array(this.Hc):void 0),this.Yc=this.Yc||(this.Tc?new Float32Array(this.Hc):void 0),{dataPattern:this.Oc(),samplesCacheX:this.Bc,samplesCacheY:this.Lc,samplesCacheLookup:this.Gc,samplesCacheIDs:this.$c,samplesCacheColors:this.Wc,samplesCacheSize:this.Uc,samplesCacheRotation:this.Yc,maxSampleCount:this.Hc}}Jc(){if(!this.Bc||!this.Lc||0===this.yc)return;if(void 0===this.Hc)return this.mc>0?{x:this.Bc[0],y:this.Lc[0]}:void 0;if(!this.vc)return{x:this.Bc[0],y:this.Lc[0]};let t=this.gc-this.yc;return t<0&&(t+=this.Hc),{x:this.Bc[t],y:this.Lc[t]}}Dc(){if(!this.Bc||!this.Lc||0===this.yc)return;if(void 0===this.Hc){const t=this.yc-1;return t>=0?{x:this.Bc[t],y:this.Lc[t]}:void 0}let t=this.gc-1;return t<0&&(t+=this.Hc),{x:this.Bc[t],y:this.Lc[t]}}Kc(t){if(!this.Bc||!this.Lc)return;const e=this.Bc.length,i=this.yc,s=this.mc-1,r=Math.max(s-i+1,0)+t,n=yo(r,this.mc,e,this.gc);return{x:this.Bc[n],y:this.Lc[n],lookupValue:this._c&&this.Gc?this.Gc[n]:void 0,id:this.Cc&&this.$c?this.$c[n]:void 0,color:this.wc&&this.Wc?this.Wc[n]:void 0,size:this.kc&&this.Uc?this.Uc[n]:void 0,rotation:this.Tc&&this.Yc?this.Yc[n]:void 0,iSample:r}}qc(t,e,i,s){const r=this.Oc(),n=this.Bc,o=this.Lc;if(!n||!o)return;const a=(t,e)=>({x:n[t],y:o[t],lookupValue:this._c&&this.Gc?this.Gc[t]:void 0,id:this.Cc&&this.$c?this.$c[t]:void 0,color:this.wc&&this.Wc?this.Wc[t]:void 0,size:this.kc&&this.Uc?this.Uc[t]:void 0,rotation:this.Tc&&this.Yc?this.Yc[t]:void 0,iSample:e}),h=n.length,l=this.yc,u=this.mc-1,c=Math.max(u-l+1,0);if(r){const i=this.Jc(),s=this.Dc();if(!(i&&s&&this.Bc&&this.Lc))return;const n="ProgressiveX"===r||"RegressiveX"===r?"x":"y",o="x"===n?"y":"x",l="x"===n?this.Bc:this.Lc,d="x"===o?this.Bc:this.Lc,f=t[n],g=Math.min(i[n],s[n]),m=Math.max(i[n],s[n]);if(f<g||f>m)return;const y=xo(f,c,u,(t=>l[yo(t,this.mc,h,this.gc)])),p=yo(y,this.mc,h,this.gc);if(!e)return a(p,y);const x=y-1,A=y+1,S=f>=l[p]&&("ProgressiveX"===r||"ProgressiveY"===r)?A<=u?A:void 0:x>=c?x:void 0;if(void 0===S)return;const v=yo(S,this.mc,h,this.gc),b=l[p],M=d[p],T=l[v],w=d[v],C=Math.min(b,T),k=C===b?M:w,E=Math.max(b,T),R=C===b?y:S,I=(f-C)/(E-C),_=Gn(k,E===b?M:w,I);return"ProgressiveX"===r||"RegressiveX"===r?{x:f,y:_,iSample:R+I}:{x:_,y:f,iSample:R+I}}let d,f=Number.MAX_VALUE;const g=ct(t,i,s),m=this.yc-1;for(let t=0;t<=m;t+=1){const e=n[t],r=o[t];if(!Number.isNaN(e)&&!Number.isNaN(r)){const n=ut(e,i.x,s.x),o=ut(r,i.y,s.y),a=(n-g.x)**2+(o-g.y)**2;a<f&&(f=a,d=t)}}return void 0===d?void 0:a(d,d)}Vc(t,e){this.R.emit("changed",t,e)}Wt(t){return this.R.off(t)}td(t){return this.R.on("changed",t)}sd(t){return this.R.on("cleared",t)}}const yo=(t,e,i,s)=>t%i,po=(t,e,i,s,r,n,o,a)=>{if(0===s||0===r)return;const h=i.length,l=s-1,u=Math.max(l-r+1,0),c=xo(t,u,l,(t=>i[yo(t,s,h)])),d=xo(e,u,l,(t=>i[yo(t,s,h)])),f=Math.max(c-a,u),g=Math.min(d+a,l),m=yo(f,s,h),y=yo(g,s,h);return m>y?{iFirstSample:f,iLastSample:g,iFirstSampleDataArray:m,iLastSampleDataArray:y,dataRanges:[{offset:m,count:h-m},{offset:0,count:y+1}]}:{iFirstSample:f,iLastSample:g,iFirstSampleDataArray:m,iLastSampleDataArray:y,dataRanges:[{offset:m,count:y-m+1}]}},xo=(t,e,i,s)=>{const r=i;for(;e!==i;){const r=Math.ceil((e+i)/2);t<s(r)?i=r-1:e=r}const n=Math.abs(t-s(e));return e<r&&Math.abs(t-s(e+1))<n?e+1:e},Ao=(t,e,i,s,r)=>{const n=e.length;if(Array.isArray(e))for(let n=0;n<s;n+=1)t[r+n]=e[i+n];else t.set(n===s?e:e.subarray(i,i+s),r)},So=(t,e)=>void 0===t?void 0:Array.isArray(t)?new e(t):t instanceof e?t:new e(t),vo=(t,e,i)=>{if(void 0!==t)return Array.isArray(t)?t.slice(e,i):t.subarray(e,i)};class bo extends On{constructor(t,e,i,s,r){super(t,e,i,s,r),this.va="label",this.Qa=this.Bs.Gr(this.renderingScale).yr(this.va).Be(V).Or(Ie).Nr(Ie),this.setMargin(5),this.Fu(this.Qa)}Eu(){return[this.Qa]}setFillStyle(t){return this.Qa.Be(t),this.Bs.Ms(),this}getFillStyle(){return this.Qa.Xh()}Re(){const t=this.getPosition(u(0,0),e.UISpace.Content),i=ct(t,this.scale,this.renderingScale);return this.Qa.Ee(i),this}zs(){this.Qa.zs();const t=0===this.va.length?u(0,0):this.Qa.ed();return this.setContentSize(t),super.zs()}setText(t){return this.va=t,this.Qa.yr(this.va),this.Bs.Ms(),this}getText(){return this.va}setFont(t){return this.Qa.Qh(t),this.Bs.Ms(),this}getFont(){return this.Qa.Zh()}setTextRotation(t){return this.Qa.Jh(t),this.Bs.Ms(),this}getTextRotation(){return this.Qa.Kh()}}const Mo={...Bn,...Ln,uiElement:bo};class To extends Un{constructor(t,e,i,s,r){super(t,e,i,s,r),this.hd=!1,this.fitTo=this.Nu.bind(this),this.setSize=this.fitTo,this.Qa=this.Bs.lc(e).Be(V).De(nt),this.Fu(this.Qa)}Eu(){return[this.Qa]}setFillStyle(t){return this.Qa.Be(t),this.Bs.Ms(),this}getFillStyle(){return this.Qa.Xh()}setStrokeStyle(t){return this.Qa.De(t),this.Bs.Ms(),this}getStrokeStyle(){return this.Qa.mo()}Re(){const t=Je([this.getPosition(u(-1,-1),e.UISpace.Content),this.getPosition(u(1,1),e.UISpace.Content)].map((t=>ct(t,this.scale,this.renderingScale))));return this.hd?this.Qa.Cl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Qa.Cl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Nu(t){return this.setContentSize(t),this.Bs.Ms(),this}Gu(){return 0}Wu(){return 0}Yu(){return 0}Uu(){return 0}}class wo extends Un{constructor(t,e,i,s,r){super(t,e,i,s,r),this.rd=u(0,0),this.Qa=t.nd(e).cu(0).Ye(360).Be(V).De(nt),this.Fu(this.Qa)}Eu(){return[this.Qa]}setFillStyle(t){return this.Qa.Be(t),this.Bs.Ms(),this}getFillStyle(){return this.Qa.Xh()}setStrokeStyle(t){return this.Qa.De(t),this.Bs.Ms(),this}getStrokeStyle(){return this.Qa.mo()}Re(){const t=this.getSize(e.UISpace.Content).x/2;return this.Qa.fu(t*this.renderingScale.Wi().x).Au(t*this.renderingScale.Wi().y).Ee(ct(this.getPosition(u(0,0),e.UISpace.Content),this.scale,this.renderingScale)).pu(255).zs(),this}Nu(t){const e=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(u(2*e,2*e)),this.rd=t,this.Bs.Ms(),this}Gu(){return(this.getSize(e.UISpace.Content).x-this.rd.x)/2}Wu(){return(this.getSize(e.UISpace.Content).x-this.rd.x)/2}Yu(){return(this.getSize(e.UISpace.Content).y-this.rd.y)/2}Uu(){return(this.getSize(e.UISpace.Content).y-this.rd.y)/2}fitTo(t){const e=Math.min(t.x,t.y);return this.setContentSize(u(e,e)),this.rd=t,this}}class Co extends Yn{constructor(t,e,i,s,r){super(t,e,i,yn.Simple,s,r),this.od=p(u(0,0)),this.ad=!1,this.Bs=t,this.uc()}cc(){const t=this.od.C();if(this.ad){const e=Math.min(t.x,t.y);return[u(0,0),u(e/2,e/2),u(0,e),u(-e/2,e/2)]}const e=2*Math.sqrt(this.od.C().x*this.od.C().x/4+this.od.C().y*this.od.C().y/4),i=u(Math.cos(Math.PI/4)*e,0),s=u(0,Math.sin(Math.PI/4)*e),r=u(0,0),n=ui(r,ui(i,s)),o=ui(n,ui(s,li(i,-1)));return[r,n,o,ci(o,ui(i,s))]}Eu(){return[this.Qa]}setFillStyle(t){return this.Qa.Be(t),this.Bs.Ms(),this}getFillStyle(){return this.Qa.Xh()}setStrokeStyle(t){return this.Qa.De(t),this.Bs.Ms(),this}getStrokeStyle(){return this.Qa.mo()}Nu(t){return this.od._(t),this.ad=!1,this.Bs.Ms(),this}Gu(){return this.ad?0:(this.getSize(e.UISpace.Content).x-this.od.C().x)/2}Wu(){return this.ad?0:(this.getSize(e.UISpace.Content).x-this.od.C().x)/2}Yu(){return this.ad?0:(this.getSize(e.UISpace.Content).y-this.od.C().y)/2}Uu(){return this.ad?0:(this.getSize(e.UISpace.Content).y-this.od.C().y)/2}fitTo(t){return this.od._(t),this.ad=!0,this.Bs.Ms(),this}}class ko extends Yn{constructor(t,i,s,r,n){super(t,i,s,yn.Simple,r,n),this.ld=p(u(0,0)),this.ud=p(10),this.dd=p(void 0),this.Qu=p(e.UIDirections.Right),this.uc()}Eu(){return[this.Qa]}setFillStyle(t){return this.Qa.Be(t),this.Bs.Ms(),this}getFillStyle(){return this.Qa.Xh()}setStrokeStyle(t){return this.Qa.De(t),this.Bs.Ms(),this}getStrokeStyle(){return this.Qa.mo()}setDirection(t){return this.Qu._(t),this.Bs.Ms(),this}getDirection(){return this.Qu.C()}setPointerLength(t){return this.ud._(t),this.Bs.Ms(),this}getPointerLength(){return this.ud.C()}setPointerAngle(t){return this.dd._(t),this.Bs.Ms(),this}getPointerAngle(){let t=this.dd.C();if(void 0===t){const e=this.fd();if(0===e)return 0;t=0!==e?180*Math.atan(2*this.getPointerLength()/e)/Math.PI:0}return Math.min(Math.max(t,1),89)}Nu(t){return this.ld._(t),this.Bs.Ms(),this}Ad(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}gd(){return Zt(this.Qu.C())?this.ld.C().x:this.ld.C().y}fd(){return Zt(this.Qu.C())?this.ld.C().y:this.ld.C().x}Gu(){switch(this.Qu.C()){case e.UIDirections.Right:return 0;case e.UIDirections.Left:return this.getPointerLength();case e.UIDirections.Up:case e.UIDirections.Down:return Math.max(0,this.Ad()-this.fd());default:return 0}}Wu(){switch(this.Qu.C()){case e.UIDirections.Right:return this.getPointerLength();case e.UIDirections.Left:return 0;case e.UIDirections.Up:case e.UIDirections.Down:return Math.max(0,this.Ad()-this.fd());default:return 0}}Yu(){switch(this.Qu.C()){case e.UIDirections.Right:case e.UIDirections.Left:return Math.max(0,this.Ad()-this.fd());case e.UIDirections.Up:return this.getPointerLength();case e.UIDirections.Down:default:return 0}}Uu(){switch(this.Qu.C()){case e.UIDirections.Right:case e.UIDirections.Left:return Math.max(0,this.Ad()-this.fd());case e.UIDirections.Up:return 0;case e.UIDirections.Down:return this.getPointerLength();default:return 0}}cc(){const t=$t(this.Qu.C()),e=ai(u(0,0),t),i=this.getPointerLength(),s=this.Ad(),r=this.gd(),n=this.fd();if(!(0!==i&&0!==s||0!==r&&0!==n))return[];const o=u(0,0),a=ui(ui(o,li(t,-i)),li(e,s/2)),h=ui(a,li(e,(n-s)/2)),l=ui(h,li(t,-r)),c=ui(ui(o,li(t,-i)),li(e,-s/2)),d=ui(c,li(e,-(n-s)/2)),f=ui(d,li(t,-r));let g;return g=0===r||0===n?[o,a,c]:0===i||0===s?[h,l,f,d]:It(n,s)?[o,a,l,f,c]:[o,a,h,l,f,d,c],g}}class Eo extends On{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fitTo=this.Nu.bind(this),this.setSize=this.fitTo,this.pd=new mo,this.Qa=this.Bs.Sd(e).We(nt).vd(V).md(V).yd(this.pd),this.Fu(this.Qa)}Eu(){return[this.Qa]}setShape(t){return this.Qa.xd(t),this}getShape(){return this.Qa.bd()}setRotation(t){return this.Qa.Md(t),this}getRotation(){return this.Qa._d()}setFillStyle(t){return this.Qa.md(t),this.Bs.Ms(),this}getFillStyle(){return this.Qa.wd()}Re(){const t=ct(this.getPosition({x:0,y:0},e.UISpace.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.pd.clear(),i>0){const e=this.Qa.bd(),s=this.Qa.wd(),r=co(e)&&e,n=ro(s)&&s;if(r){const t=i/r.oi().y;this.Qa.Cd(t)}else if(n){const t=n.source;if(t instanceof Image){const e=i/t.height;this.Qa.Cd(e)}}else this.Qa.Cd(i);this.pd.appendSample(t)}return this}Nu(t){return this.setContentSize(t),this.Bs.Ms(),this}Gu(){return 0}Wu(){return 0}Yu(){return 0}Uu(){return 0}}const Ro={...Bn,...Ln,uiElement:Eo};class Io extends zn{setSize(t){return this.setContentSize(t),this.Bs.Ms(),this}}class _o extends kn{constructor(){super(...arguments),this.kd=[],this.Td=0,this.Fd=t=>{const e=this.kd.indexOf(t);e>=0&&this.kd.splice(e,1)}}getMembers(){return this.kd}getMemberCount(){return this.kd.length}setMinimumSize(t){return this.Id=t,this.Bs.Ms(),this}getMinimumSize(){return this.Id}addElement(t,e=-1){const i=t.sc(this.Bs,this.renderingScale,this.scale,this.Fd,this.ts,!1);return i.setMouseInteractions(this.getMouseInteractions()),e>=0?this.kd.splice(e,0,i):this.kd.push(i),i.setVisible(this.getVisible()),this.Fu(i),this.ji&&(pe(0,(()=>{})),i.dispose()),i}dispose(){return super.dispose(),this.kd.slice().forEach(Et),this}setVisible(t){return super.setVisible(t),this.kd.forEach((e=>e.setVisible(t))),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let e=0;e<this.kd.length;e+=1)this.kd[e].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.kd.length;t+=1)if(this.kd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.kd.length;i+=1){const s=this.kd[i];"getHighlight"in(e=s)&&"setHighlight"in e&&s.setHighlight(t)}var e;return this}}class Fo extends _o{Re(){super.Re();const t=this.getPosition(u(-1,1),e.UISpace.Content),i=this.kd.reduce(((t,e)=>t+ +(e instanceof Io)),0),s=i>0?(this.size.x-this.Td)/i:0;return this.kd.reduce(((e,i)=>i instanceof Io?this.scale.pi({x:e,y:t.y},{x:s+i.getSize().x,y:0}).x:i.setOrigin(u(-1,1)).setPosition(u(e,t.y)).Re().getPosition(u(1,0)).x),t.x),this}zs(){for(let t=0;t<this.kd.length;t+=1){const e=this.kd[t];e instanceof Do&&e.setMinimumSize(0),e.zs()}const t=this.kd.reduce(this.Pd.bind(this),c(0,0));this.Td=t.x;const e=void 0===this.Id?t:u(Math.max(t.x,this.Id),t.y);this.setContentSize(e);for(let t=0;t<this.kd.length;t+=1){const i=this.kd[t];i instanceof Do&&i.setMinimumSize(e.y).zs()}return super.zs()}Pd(t,e){const i=e.getSize();return t.x+=i.x,t.y=Math.max(t.y,i.y),t}addGap(t=0,e=-1){return this.addElement(Bo,e).setSize(u(0,t))}}class Do extends _o{Re(){super.Re();const t=this.getPosition(u(-1,1),e.UISpace.Content),i=this.kd.reduce(((t,e)=>t+ +(e instanceof Io)),0),s=i>0?(this.size.y-this.Td)/i:0;return this.kd.reduce(((e,i)=>i instanceof Io?this.scale.pi({x:t.x,y:e},{x:0,y:-(s+i.getSize().y)}).y:i.setOrigin(u(-1,1)).setPosition(u(t.x,e)).Re().getPosition(u(0,-1)).y),t.y),this}zs(){for(let t=0;t<this.kd.length;t+=1){const e=this.kd[t];e instanceof Fo&&e.setMinimumSize(0),e.zs()}const t=this.kd.reduce(this.Pd.bind(this),c(0,0));this.Td=t.y;const e=void 0===this.Id?t:u(t.x,Math.max(t.y,this.Id));this.setContentSize(e);for(let t=0;t<this.kd.length;t+=1){const i=this.kd[t];i instanceof Fo&&i.setMinimumSize(e.x).zs()}return super.zs()}Pd(t,e){const i=e.getSize();return t.y+=i.y,t.x=Math.max(t.x,i.x),t}addGap(t=0,e=-1){return this.addElement(Bo,e).setSize(u(0,t))}}const Bo={...Bn,...Ln,uiElement:Io};class Po extends Do{constructor(){super(...arguments),this.kd=[]}addRow(){return this.addElement(zo,void 0)}getRow(t,e=!1){return e&&this.kd.length<=t?(this.addRow(),this.getRow(t,!0)):this.kd[t]}}const Lo={...Bn,...Pn,...Vn},Vo={...Lo,uiElement:Do,background:To},zo={...Lo,uiElement:Fo,background:To},No={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},Oo=(t,e)=>{const i={},s=`stylable${t}s`;return i[s]=e,i[`set${t}FillStyle`]=function(t){return this[s].forEach((e=>e.setFillStyle(t))),this},i[`get${t}FillStyle`]=function(){return this[s][0].getFillStyle()},i[`set${t}Font`]=function(t){return this[s].forEach((e=>e.setFont(t))),this},i[`get${t}Font`]=function(){return this[s][0].getFont()},i[`set${t}Rotation`]=function(t){return this[s].forEach((e=>e.setTextRotation(t))),this},i[`get${t}Rotation`]=function(){return this[s][0].getTextRotation()},i},Uo=Oo("Text",[]),Yo={button:void 0,isLocked:!1,setOn(t){const e=this.button.getOn()!==t;return this.button.setOn(t),e&&this.R.emit("switch",t),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},onSwitch(t){return this.R.on("switch",(e=>t(this,e)))},offSwitch(t){return this.R.off(t,"switch")},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},Go={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},Ho={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},Wo={...Bn,...Pn,background:To,sc(t,e,i,s,r,n){const o=new Fo(t,e,i,this.background,s,r),a=o.addElement(Mo,void 0),h=Object.assign(o,No,{setTextLabel:a},Uo,{stylableTexts:[a]});return Dn(h,r,n),this.applyStylers(h,r)}}.addStyler(_n),Ko={...Bn,...Pn,background:ko,direction:e.UIDirections.Up,setDirection(t){return this.direction=t,this},sc(t,i,s,r,n,o){const a=this.direction,h=new Fo(t,i,s,this.background,r,n),l=h.addElement(Mo,void 0),u=h.getBackground().setDirection(a),c=Object.assign(h,No,{setTextLabel:l},Uo,{stylableTexts:[l]},Ho,{pointable:u},{setTickLabelPadding(t){return this.getDirection()===e.UIDirections.Up?(this.setPadding({top:t}),l.setMargin({top:0})):this.getDirection()===e.UIDirections.Down?(this.setPadding({bottom:t}),l.setMargin({bottom:0})):this.getDirection()===e.UIDirections.Right?(this.setPadding({right:t}),l.setMargin({right:0})):this.getDirection()===e.UIDirections.Left&&(this.setPadding({left:t}),l.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===e.UIDirections.Up?this.getPadding().top:this.getDirection()===e.UIDirections.Down?this.getPadding().bottom:this.getDirection()===e.UIDirections.Right?this.getPadding().right:this.getPadding().left}});return c.hc="other",c.setPointerLength(n.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(n.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(n.uiTextFont).setTextFillStyle(n.uiTextFillStyle).setBackground((t=>t.setFillStyle(n.uiBackgroundFillStyle).setStrokeStyle(n.uiBackgroundStrokeStyle))),Dn(c,n,o),this.applyStylers(c,n)}};class Xo extends Cn{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.Vs=!1,this.R=new r.Eventer,this.Dd=V,this.Bd=V,this.getOn=()=>this.Vs,this.Bd=o.uiButtonFillStyleHidden||o.uiButtonFillStyle,this.Ld=this.Fu(new Eo(this.Bs,this.renderingScale,this.scale,Rt,o).setShape(s)).setFillStyle(this.Bd)}Eu(){return[...this.Ld.Eu()]}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}setOn(t){return this.Vs=t,this.Ld.setFillStyle(t?this.Dd:this.Bd),this.Bs.Ms(),this}setOffFillStyle(t){return this.Bd="function"==typeof t?t(this.Bd):t,this.Vs||this.Ld.setFillStyle(this.Bd),this}getOffFillStyle(){return this.Bd}setSize(t){return this.Ld.fitTo("number"==typeof t?u(t,t):t),this}getSize(){return this.Ld.getSize()}setOnFillStyle(t){return this.Dd="function"==typeof t?t(this.Dd):t,this.Vs&&this.Ld.setFillStyle(this.Dd),this}getOnFillStyle(){return this.Dd}setButtonShape(t){return this.Ld.setShape(t),this.Bs.Ms(),this}getButtonShape(){return this.Ld.getShape()}Re(){return super.Re(),this.Ld.setVisible(this.getVisible()).setPosition(this.getPosition(u(0,0),e.UISpace.Content)).Re(),this}zs(){const t=this.Ld.zs().getSize();return this.setContentSize(t),super.zs()}dispose(){return super.dispose(),this.Ld.dispose(),this}setMouseInteractions(t){return this.Ld.setMouseInteractions(t),this}getMouseInteractions(){return this.Ld.getMouseInteractions()}setHighlight(t){const e=be(t);return this.Ld.setHighlight(e),this.R.emit("highlight",this,t),this.Bs.Ms(),this}getHighlight(){return this.Ld.getHighlight()}}const jo={...Bn,uiElement:Xo,buttonShape:e.PointShape.Circle,setButtonShape(t){return{...this,buttonShape:t}},sc(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,this.buttonShape,s,r),r);return Dn(o,r,n),o}},$o={...Bn,...Pn,background:To,buttonBuilder:jo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},sc(t,i,s,r,n,o){const a=new Fo(t,i,s,this.background,r,n),h=a.addElement(Vo);h.addGap();const l=h.addElement(this.buttonBuilder);h.addGap();const u=a.addElement(Vo);u.addGap();const c=u.addElement(Mo);u.addGap(),a.addGap();const d=Object.assign(a,No,{setTextLabel:c},Uo,{stylableTexts:[c]},Yo,{button:l},Go);let f;return d.onMouseClick(((t,e)=>{d.getLocked()||d.setOn(!d.getOn())})),d.onMouseEnter((()=>d.setHighlight(!0))),d.onMouseLeave((()=>d.setHighlight(!1))),d.setMouseStyle(e.MouseStyles.Point),d.setTextFillStyleHidden(n.uiTextFillStyleHidden||n.uiTextFillStyle),d.onSwitch(((t,e)=>{e?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))})),d.setPadding({left:5}),Dn(d,n,o),this.applyStylers(d,n)}}.addStyler(_n).addStyler(Fn);class Zo extends Cn{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.Rd=[],this.Ed=2,this.zd="",this.Vd=(t,e)=>void 0!==t.label?t.label:e.percentageValues?`${(100*t.value).toFixed(0)}%`:_i(t.value,e.min,e.max),this.Od=0,this.Nd=0,this.Gd=!1,this.Bs=t,this.Wd=n,this.Ud=this.Fu(t.Le(e).De(nt)),this.Yd=this.Fu(t.Gr(e).Be(r.uiTextFillStyle).Qh(r.uiTextFont).setMouseInteractions(!1)),"vertical"===n?(this.Hd=140,this.$d=25):(this.Hd=160,this.$d=15)}Eu(){return[this.Ud,this.Yd]}Xd(t){this.jd=t;const e=Jo(t,"vertical"===this.Wd?0:90,this.Gd);return this.Ud.Be(e),this.Bs.Ms(),this}Zd(){return this.jd}Qd(t){return this.Hd=t,this.Bs.Ms(),this}Jd(){return this.Hd}Kd(t){return this.$d=t,this.Bs.Ms(),this}qd(){return this.$d}tf(t){return this.zd=t,this.Bs.Ms(),this}if(){return this.zd}sf(t){return this.Vd=t,this.Bs.Ms(),this}setLUTDisplayProportionalSteps(t){if(this.Gd=t,this.jd){const t=Jo(this.jd,"vertical"===this.Wd?0:90,this.Gd);this.Ud.Be(t)}return this.Bs.Ms(),this}getLUTDisplayProportionalSteps(){return this.Gd}setFillStyle(t){return this.Yd.Be(t),this.Bs.Ms(),this}getFillStyle(){return this.Yd.Xh()}setFont(t){return this.Yd.Qh(t),this.Bs.Ms(),this}getFont(){return this.Yd.Zh()}setTextRotation(t){return this.Nd=t,this.Yd.Jh(t),this.Bs.Ms(),this}getTextRotation(){return this.Yd.Kh()}Re(){var t,i,s,r;if(super.Re(),this.ji||!this.getVisible())return this;const n=this.jd;if(n){const o=this.renderingScale.Wi(),a=n.min,h=n.max;if("vertical"===this.Wd){const s=this.getPosition({x:-1,y:-1},e.UISpace.Content),r=ui(s,{x:this.Ud.oi().x+this.Ed*o.x,y:0}),l={x:r.x,y:r.y+(this.zd.length>0?this.Od*o.y+this.Yd.oi().y:0)+.5*((null===(t=this.Rd[0])||void 0===t?void 0:t.oi().y)||0)},u={x:l.x,y:this.getPosition({x:-1,y:1},e.UISpace.Content).y-.5*((null===(i=this.Rd[this.Rd.length-1])||void 0===i?void 0:i.oi().y)||0)};this.Ud.Ee({x:s.x,y:l.y}),this.Yd.$a({x:-1,y:-1}).Ee(r),n.getSteps().forEach(((t,e)=>{const i=Qe(l,u,this.Gd?!0===n.getInterpolation()?(t.value-a)/(h-a):.9*(t.value-a)/(h-a):!0===n.getInterpolation()?e/(n.getSteps().length-1):e/n.getSteps().length);this.Rd[e].$a({x:-1,y:0}).Ee(i)}))}else{const t=this.getPosition({x:-1,y:-1},e.UISpace.Content),i=this.getPosition({x:1,y:1},e.UISpace.Content),l=this.Rd.reduce(((t,e)=>Math.max(t,e.oi().y)),0),u=ui(t,{x:.5*((null===(s=this.Rd[0])||void 0===s?void 0:s.oi().x)||0),y:l}),c={x:i.x,y:u.y},d={x:c.x-(.5*((null===(r=this.Rd[this.Rd.length-1])||void 0===r?void 0:r.oi().x)||0)+(this.zd.length>0?this.Od*o.x+this.Yd.oi().x:0)),y:u.y},f={x:u.x,y:u.y+this.Ed*o.y};this.Ud.Ee(f),this.Yd.$a({x:1,y:1}).Ee(c),n.getSteps().forEach(((t,e)=>{const i=Qe(u,d,this.Gd?!0===n.getInterpolation()?(t.value-a)/(h-a):.9*(t.value-a)/(h-a):!0===n.getInterpolation()?e/(n.getSteps().length-1):e/n.getSteps().length);this.Rd[e].$a({x:0,y:1}).Ee(i)}))}}return this}zs(){if(this.jd&&this.getVisible()){const t=this.jd.getSteps();for(let e=this.Rd.length;e<t.length;e+=1)this.Rd.push(this.Fu(this.Bs.Gr(this.renderingScale).setMouseInteractions(!1)));for(let e=0;e<t.length;e+=1)this.Rd[e].Be(this.Yd.Xh()).Qh(this.Yd.Zh()).yr(this.Vd(t[e],this.jd)).Jh(this.Nd);for(let e=t.length;e<this.Rd.length;e+=1)this.Rd[e].dispose();if(this.Rd.length=t.length,this.Yd.yr(this.zd),"vertical"===this.Wd){const t=this.$d,e=this.Hd;this.Ud.it({x:t*this.renderingScale.x.getPixelSize(),y:e*this.renderingScale.y.getPixelSize()});const i=t+Math.max(this.Rd.reduce(((t,e)=>Math.max(t,e.zs().ed().x)),0),this.Yd.zs().ed().x),s=(this.zd.length>0?this.Od+this.Yd.zs().ed().y:0)+e+.5*this.Rd[0].zs().ed().y+.5*this.Rd[this.Rd.length-1].zs().ed().y;this.setContentSize({x:i,y:s})}else{const t=this.Hd,e=this.$d;this.Ud.it({x:t*this.renderingScale.x.getPixelSize(),y:e*this.renderingScale.y.getPixelSize()});const i=Math.max(this.zd.length>0?this.Od+this.Yd.zs().ed().x:0,.5*this.Rd[this.Rd.length-1].zs().ed().x),s=t+.5*this.Rd[0].zs().ed().x+i,r=e+this.Ed+this.Rd.reduce(((t,e)=>Math.max(t,e.zs().ed().y)),0);this.setContentSize({x:s,y:r})}}else this.Rd.forEach((t=>t.dispose())),this.Rd.length=0,this.Yd.setVisible(!1),this.Ud.setVisible(!1),this.setContentSize({x:0,y:0});return super.zs()}dispose(){return super.dispose(),this.Ud.dispose(),this.Rd.forEach(Et),this.Yd.dispose(),this}setMouseInteractions(t){return this.Ud.setMouseInteractions(t),this}getMouseInteractions(){return this.Ud.getMouseInteractions()}}const Qo={lutElement:{},setLUT(t){return this.lutElement.Xd(t),this},getLUT(){return this.lutElement.Zd()},setLUTLength(t){return this.lutElement.Qd(t),this},getLUTLength(){return this.lutElement.Jd()},setLUTThickness(t){return this.lutElement.Kd(t),this},getLUTThickness(){return this.lutElement.qd()},setLookUpUnit(t){return this.lutElement.tf(t),this},getLookUpUnit(){return this.lutElement.if()},setLUTStepValueFormatter(t){return this.lutElement.sf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},qo={...Bn,...Pn,background:To,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},sc(t,e,i,s,r,n){const o=new Do(t,e,i,this.background,s,r),a=o.addElement({sc:()=>new Zo(t,e,i,Rt,r,this.alignment)}),h=Object.assign(o,Uo,{stylableTexts:[a]},Qo,{lutElement:a});return Dn(h,r,n),this.applyStylers(h,r)}}.addStyler(_n),Jo=(t,e,i)=>{const s=t.getSteps(),r=t.min,n=t.max-r;if(!0===t.getInterpolation())return new it({angle:e,stops:s.map(((e,o)=>({offset:i?(e.value-r)/n:o/(s.length-1),color:e.color||t.color})))});const o=[];for(let e=0;e<s.length;e+=1){const a=s[e];o.push({offset:i?.9*(a.value-r)/n:e/s.length,color:a.color||t.color});const h=e<s.length-1?s[e+1]:void 0;o.push({offset:i?h?.9*(h.value-r)/n:1:h?(e+1)/s.length:1,color:a.color||t.color})}return new it({angle:e,stops:o})},ta={...Bn,...Pn,background:To,buttonBuilder:jo,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},sc(t,i,s,r,n){const o=new Do(t,i,s,this.background,r,n),a=o.addElement(zo),h=a.addElement(Vo);h.addGap();const l=h.addElement(this.buttonBuilder);h.addGap();const u=a.addElement(Vo);u.addGap();const c=u.addElement(Mo);u.addGap();const d=o.addElement({sc:()=>new Zo(t,i,s,Rt,n,this.alignment)});"vertical"===this.alignment&&d.setMargin({left:n.uiButtonSize+6});const f=Object.assign(o,No,{setTextLabel:c},Uo,{stylableTexts:[c,d]},Oo("LUTText",[d]),Yo,{button:l},Qo,{lutElement:d},Go);let g;return f.onMouseClick((()=>{f.getLocked()||f.setOn(!f.getOn())})),f.onMouseEnter((()=>f.setHighlight(!0))),f.onMouseLeave((()=>f.setHighlight(!1))),f.setMouseStyle(e.MouseStyles.Point),f.setTextFillStyleHidden(n.uiTextFillStyleHidden||n.uiTextFillStyle),f.onSwitch(((t,e)=>{e?g&&f.setTextFillStyle(g):(g=f.getTextFillStyle(),f.setTextFillStyle(f.getTextFillStyleHidden()))})),f.setPadding({left:5}),this.applyStylers(f,n)}}.addStyler(_n).addStyler(Fn),ea={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,e){const i=!e||"object"!=typeof e||void 0===e.toggleVisibilityOnClick||e.toggleVisibilityOnClick,s=null==e?void 0:e.matchStyleExactly,r=e&&"object"==typeof e&&void 0!==e.builder?e.builder:void 0;return this.legendBoxDisposed()||(t instanceof oh?this.addChart(t,i,r,s):"attach"in t?this.addAttachable(t,i,r,s):t&&this.addDashboard(t,i,r,s)),this},addAttachable(t,e,i,s){const r=t.Zd&&t.Zd(),n=t.Ps&&t.Ps(),o=void 0!==s&&s;let a=i;if(!a){let t=r?ta.setAlignment(this.alignment):$o;void 0!==n&&(t=t.setButtonShape(n)),a=t}const h=this.addElement(a);if(r&&"setLUT"in h){h.setLUT(r.lut);const t=r.lut.getUnits(),e=r.lookUpProperty,i=t.length>0?t:"x"===e?"x":"y"===e?"y":"z"===e?"z":"";h.setLookUpUnit(i)}return this.entryStylers.forEach((t=>t(h))),this.entries.push({entry:h,component:t}),t.attach(h,e,o),e||h.setLocked(!0),this},addChart(t,e,i,s){return t.ef().forEach((t=>this.addAttachable(t,e,i,s))),this},addDashboard(t,e,i,s){return t.getCells().filter((t=>t.panel instanceof oh)).forEach((t=>this.addChart(t.panel,e,i,s))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.forEach((e=>t(e.entry,e.component))),this}},ia={alignment:"vertical",layoutBuilder:Vo,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?zo:Vo}},getAlignment(){return this.alignment},titleBuilder:Wo,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},sa={...Bn,...Pn,...ia,background:To,sc(t,e,i,s,r,n){const o=this.layoutBuilder.setBackground(this.background).sc(t,e,i,s,r,!1);let a=Object.assign(o,ea,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>o.ji});a.entries=[];const h=a.addElement("horizontal"===this.alignment?Vo:zo),l=h.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(r.legendTitleFillStyle).setTextFont(r.legendTitleFont);return h.addGap(),a=Object.assign(a,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Dn(a,r,n),this.applyStylers(a,r)}}.addStyler(((t,e)=>t.setPadding(5)));class ra extends Cn{constructor(t,i,s,r,n){super(t,i,s,r,n),this.hf=10,this.rf=e.UIDirections.Up,this.nf=0,this.hc="major",this.va=this.Fu(t.Gr(this.renderingScale).Or(Ie).Nr(Ie)),this.Ge=this.Fu(t.Ue(this.renderingScale))}Eu(){return[this.va]}Re(){if(super.Re(),this.ji)return this;const t=ct(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.pi(t,{x:this.rf===e.UIDirections.Right?-this.hf:this.rf===e.UIDirections.Left?this.hf:0,y:this.rf===e.UIDirections.Up?-this.hf:this.rf===e.UIDirections.Down?this.hf:0}),s=this.renderingScale.pi(i,{x:this.rf===e.UIDirections.Right?-this.nf:this.rf===e.UIDirections.Left?this.nf:0,y:this.rf===e.UIDirections.Up?-this.nf:this.rf===e.UIDirections.Down?this.nf:0});return this.Ge.He(t).Ye(i),this.va.Ee(s).$a(this.rf===e.UIDirections.Up?{x:0,y:1}:this.rf===e.UIDirections.Down?{x:0,y:-1}:this.rf===e.UIDirections.Right?{x:1,y:0}:{x:-1,y:0}),this}zs(){const t=this.Ge.mu().getThickness();return this.size=this.rf===e.UIDirections.Left||this.rf===e.UIDirections.Right?{x:this.hf+this.nf+this.va.zs().ed().x,y:t}:{y:this.hf+this.nf+this.va.zs().ed().y,x:t},super.zs()}dispose(){return super.dispose(),this.va.dispose(),this.Ge.dispose(),this}setVisible(t){return super.setVisible(t),this.va.setVisible(t),this.Ge.setVisible(t),this}setMouseInteractions(t){return this.va.setMouseInteractions(t),this.Ge.setMouseInteractions(t),this}getMouseInteractions(){return this.va.getMouseInteractions()}getText(){return this.va.Cr()}setTextFillStyle(t){return this.va.Be(t),this.Bs.Ms(),this}getTextFillStyle(){return this.va.Xh()}setTextFont(t){return this.va.Qh(t),this}setTextRotation(t){return this.va.Jh(t),this}getTextRotation(){return this.va.Kh()}getTextFont(){return this.va.Zh()}setText(t){return this.va.yr(t),this.Bs.Ms(),this}setDirection(t){return this.rf=t,this.Bs.Ms(),this}getDirection(){return this.rf}setPointerLength(t){return this.hf=t,this.Bs.Ms(),this}getPointerLength(){return this.hf}setTickLabelPadding(t){return this.nf=t,this.Bs.Ms(),this}getTickLabelPadding(){return this.nf}setTickStyle(t){return this.Ge.We(t),this.Bs.Ms(),this}getTickStyle(){return this.Ge.mu()}}const na={...Bn,direction:e.UIDirections.Up,setDirection(t){return this.direction=t,this},sc(t,e,i,s,r,n){const o=this.direction,a=new ra(t,e,i,s,r);return Dn(a,r,n),a.setDirection(o),this.applyStylers(a,r)}}.addStyler(_n),oa=na.addStyler(((t,e)=>(t.hc="major",t.setPointerLength(e.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(e.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(e.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(e.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(e.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),aa=na.addStyler(((t,e)=>(t.hc="minor",t.setPointerLength(e.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(e.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(e.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(e.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(e.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),ha=$o.addStyler((t=>t.onSwitch(((e,i)=>!0===i?setTimeout((()=>t.setOn(!1)),300):void 0)))),la=sa.setAlignment("horizontal"),ua=sa.setAlignment("vertical"),ca={TextBox:Wo,CheckBox:$o,ButtonBox:ha,PointableTextBox:Ko,AxisTickMajor:oa,AxisTickMinor:aa,LUTRange:qo},da={HorizontalLegendBox:la,VerticalLegendBox:ua},fa={af:0,lf:1,uf:2,cf:3,df:4,ff:5,Af:6,gf:7,pf:8,yf:9,mf:10,vf:11,Sf:12,xf:13,bf:14,Mf:15,_f:16,wf:17,Cf:18,kf:19,Tf:20,Ff:21,If:22,Pf:23};class ga extends hr{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Df=r}}class ma extends ar{constructor(t,i,s,n,o,a,h,l,c,d,f,g,m,y,p,x){var A,S,v;super(d,c,h,y,p,{numeric:c.getWidth({x:y.xAxisNumericTicks,y:y.yAxisNumericTicks}),datetime:c.getWidth({x:y.xAxisDateTimeTicks,y:y.yAxisDateTimeTicks}),time:c.getWidth({x:y.xAxisTimeTicks,y:y.yAxisTimeTicks})},x),this.Bf=new Map,this.Lf=void 0,this.Rf=0,this.Ef=[],this.zf=[],this.ah=Ws.fitting,this.Vf=!0,this.Of=8,this.Nf=void 0,this.Gf=void 0,this.Wf=20,this.Uf=1,this.Yf=!0,this.Hf=!0,this.$f=!0,this.Xf=!0,this.jf=!0,this.Zf=!0,this.Qf=!0,this.Jf=!0,this.Kf=!0,this.qf=!0,this.tA=this.zh.defaultDragMouseStyle,this.iA=this.zh.defaultDragMouseStyle,this.sA=this.zh.defaultDragMouseStyle,this.eA=this.zh.defaultDragMouseStyle,this.hA=this.zh.defaultDragMouseStyle,this.R=new r.Eventer,this.rA=[],this.nA=t=>{const e=this.zf.indexOf(t);e>=0&&this.zf.splice(e,1)},this.oA=t=>(this.zf.indexOf(t)<0&&this.zf.push(t),this.nA),this.aA="center",this.Rt=(t,e)=>this.R.emit("axisAreaTouch",this,e),this.lA=ee(this.rA),this.onAxisInteractionAreaMouseClick=t=>this.R.on("axisAreaMouseClick",t),this.onAxisInteractionAreaMouseDoubleClick=t=>this.R.on("axisAreaDoubleClick",t),this.onAxisInteractionAreaMouseDown=t=>this.R.on("axisAreaMouseDown",t),this.onAxisInteractionAreaMouseUp=t=>this.R.on("axisAreaMouseUp",t),this.onAxisInteractionAreaMouseEnter=t=>this.R.on("axisAreaMouseEnter",t),this.onAxisInteractionAreaMouseLeave=t=>this.R.on("axisAreaMouseLeave",t),this.onAxisInteractionAreaMouseMove=t=>this.R.on("axisAreaMouseMove",t),this.onAxisInteractionAreaMouseWheel=t=>this.R.on("axisAreaMouseWheel",t),this.onAxisInteractionAreaMouseDragStart=t=>this.R.on("axisAreaMouseDragStart",t),this.onAxisInteractionAreaMouseDrag=t=>this.R.on("axisAreaMouseDrag",t),this.onAxisInteractionAreaMouseDragStop=t=>this.R.on("axisAreaMouseDragStop",t),this.onAxisInteractionAreaTouchStart=t=>this.R.on("axisAreaTouchStart",t),this.onAxisInteractionAreaTouch=t=>this.R.on("axisAreaTouch",t),this.onAxisInteractionAreaTouchStop=t=>this.R.on("axisAreaTouchEnd",t),this.offAxisInteractionAreaMouseClick=t=>this.R.off(t,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=t=>this.R.off(t,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=t=>this.R.off(t,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=t=>this.R.off(t,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=t=>this.R.off(t,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=t=>this.R.off(t,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=t=>this.R.off(t,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=t=>this.R.off(t,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=t=>this.R.off(t,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=t=>this.R.off(t,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=t=>this.R.off(t,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=t=>this.R.off(t,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=t=>this.R.off(t,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=t=>this.R.off(t,"axisAreaTouchEnd"),this.Hd={relative:1},this.uA=0,this.cA=0,this.dA=(t,e)=>e.getAllocatesAxisSpace()?Math.max(t,e.update().oc()):t,this.fA=t=>{const e=this.Ef.indexOf(t);-1!==e&&this.Ef.splice(e,1)},this.AA=(t,e)=>{this.R.emit("axisAreaDoubleClick",this,e),this.Xf&&(this.setStopped(!1),Qt(e))},this.gA=t=>{this.R.emit("axisAreaMouseEnter",this),(this.Hf||this.Yf||this.$f||this.Xf)&&this.pA(t)},this.yA=t=>{this.mA(t),this.R.emit("axisAreaMouseLeave",this)},this.vA=(t,e,i)=>{var s,r;this.R.emit("axisAreaMouseDragStart",this,e,i);const n=Dt(null===(s=this.chart.SA.qn)||void 0===s?void 0:s.axisXYZoomMouseButton,0),o=Dt(null===(r=this.chart.SA.qn)||void 0===r?void 0:r.axisXYPanMouseButton,2),a=u(e.clientX,e.clientY);i===o&&this.Hf?(this.xA(t),Qt(e)):i===n&&this.Yf&&(this.bA(t,a),Qt(e))},this.MA=(t,e,i,s,r)=>{var n,o;this.R.emit("axisAreaMouseDrag",this,e,i,s,r);const a=Dt(null===(n=this.chart.SA.qn)||void 0===n?void 0:n.axisXYZoomMouseButton,0),h=Dt(null===(o=this.chart.SA.qn)||void 0===o?void 0:o.axisXYPanMouseButton,2),l=u(e.clientX,e.clientY);i===h&&this.Hf?(this._A(t,r),Qt(e)):i===a&&this.Yf&&(this.wA(t,s,l,r),Qt(e))},this.CA=(t,e,i,s)=>{var r,n;this.R.emit("axisAreaMouseDragStop",this,e,i,s);const o=Dt(null===(r=this.chart.SA.qn)||void 0===r?void 0:r.axisXYZoomMouseButton,0),a=Dt(null===(n=this.chart.SA.qn)||void 0===n?void 0:n.axisXYPanMouseButton,2),h=u(e.clientX,e.clientY);i===a&&this.Hf?(this.kA(t),Qt(e)):i===o&&this.Yf&&(this.TA(t,s,h),Qt(e)),t.getIsUnderMouse()&&(this.Hf||this.Yf||this.$f||this.Xf)&&this.pA(t)},this.FA=(t,e)=>{if(this.R.emit("axisAreaMouseWheel",this,e),this.$f){this.setStopped(!0);const t=this.zh.getWidth(this.IA.cs.Ve(e.clientX,e.clientY)),i=this.At.dt(t);this.zoom(i,ye(e)),Qt(e)}},this.PA=(t,e)=>this.R.emit("axisAreaMouseClick",this,e),this.DA=(t,e)=>this.R.emit("axisAreaMouseDown",this,e),this.BA=(t,e)=>this.R.emit("axisAreaMouseUp",this,e),this.LA=(t,e)=>this.R.emit("axisAreaMouseMove",this,e),this.RA=(t,e,i)=>{this.R.emit("axisAreaTouchStart",this,i),this.Yf&&(this.pA(t),this.bA(t,e),Qt(i))},this.EA=(t,e,i,s,r)=>{this.R.emit("axisAreaTouch",this,r),this.Yf&&(this.wA(t,e,i,s),Qt(r))},this.zA=(t,e,i,s)=>{this.R.emit("axisAreaTouchEnd",this,s),this.Yf&&(this.TA(t,e,i),this.mA(t),Qt(s))},this.VA=(t,e,i,s)=>{(this.Hf||this.$f)&&(this.pA(t),this.xA(t),Qt(s))},this.OA=(t,e,i,s,r,n)=>{if(this.Hf){const e=u((s.x+r.x)/2,(s.y+r.y)/2);this._A(t,e),Qt(n)}if(this.$f){const t=this.IA.cs.Ve(e.x,e.y),o=this.IA.cs.Ve(i.x,i.y),a=Math.abs(this.zh.getWidth(ci(t,s))-this.zh.getWidth(ci(o,r)))-Math.abs(this.zh.getWidth(t)-this.zh.getWidth(o)),h=this.At.pi(this.Wh,-a),l=this.At.pi(this.Uh,a);this.hr(h,l,!0),Qt(n)}},this.NA=(t,e,i,s)=>{(this.Hf||this.$f)&&(this.kA(t),this.mA(t),Qt(s))},this.GA=(t,e)=>{(this.jf||this.Zf)&&this.WA(t)},this.UA=(t,e)=>{this.YA(t)},this.HA=(t,e,i)=>{const s=u(e.clientX,e.clientY);this.jf&&this.$A(t,s)},this.XA=(t,e,i,s,r)=>{const n=u(e.clientX,e.clientY);this.jf&&this.jA(t,n,s,r)},this.ZA=(t,e,i,s,r)=>{const n=u(e.clientX,e.clientY);this.jf&&this.QA(t,n,s,r)},this.JA=(t,e,i,s)=>{const r=u(e.clientX,e.clientY);(this.jf||this.Zf)&&this.KA(t,r,s),(this.jf||this.Zf)&&this.WA(t)},this.qA=(t,e)=>{this.Zf&&(this.setStopped(!0),this.zoom(this.Wh,ye(e)),Qt(e))},this.tg=(t,e)=>{this.Zf&&(this.setStopped(!0),this.zoom(this.Uh,ye(e)),Qt(e))},this.ig=(t,e,i)=>{this.jf&&(this.WA(t),this.$A(t,e),Qt(i))},this.sg=(t,e,i,s,r)=>{this.jf&&(this.jA(t,e,i,s),Qt(r))},this.eg=(t,e,i,s,r)=>{this.jf&&(this.QA(t,e,i,s),Qt(r))},this.hg=(t,e,i,s)=>{this.jf&&(this.KA(t,e,i),this.YA(t),Qt(s))},this.rg=t,this.IA=i,this.ng=n,this.og=o,this.chart=d,this.ag=g,this.lg=s,this.es=a,"logarithmic"===x.type&&this.chart.cs.Zn(fa.kf),m(this,this.oA),h.ug=this,this.cg=f,this.dg=this.cg>50?1:-1,this.Ag=(v=this.zh.toPoint(0,-this.dg),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?e.UIDirections.Right:e.UIDirections.Left:v.y>=0?e.UIDirections.Up:e.UIDirections.Down),this.gg=l,this.pg=this.At instanceof Bi?(new Vi).Ri(this.zh.toVec2(this.At,this.gg)):(new zi).Ri(this.zh.toVec2(this.At,this.gg)),this.yg=this.chart.mg,this.vg=(new Vi).Ri(this.zh.toVec2(this.zh.getWidth(this.yg),this.gg)),this.Sg=this.IA.Ue(this.pg).setMouseInteractions(!1),this.xg=this.IA.Ue(this.pg).setMouseInteractions(!1),this.bg=this.IA.Ue(this.pg).setMouseInteractions(!1),this.Mg=this.lg.Le(this.yg).Be(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).De(nt).ea(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this._g=this.lg.Le(this.yg).Be(c.getWidth({x:y.xAxisZoomingBandFillStyle,y:y.yAxisZoomingBandFillStyle})).De(c.getWidth({x:y.xAxisZoomingBandStrokeStyle,y:y.yAxisZoomingBandStrokeStyle})),this.wg=this.lg.Le(this.yg).Be(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).De(nt).ea(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.Cg=this.lg.Le(this.yg).Be(c.getWidth({x:y.xAxisOverlayStyle,y:y.yAxisOverlayStyle})).De(nt).ea(y.highlightColorOffsetAxisOverlay||y.highlightColorOffset),this.wh=this.lg.Gr(this.pg).setMouseInteractions(!1).Jh(this.zh.getTitleTextRotation(this.dg)).Nr(Ie).Or(Ie),this.chart.cs.us.ls(this.Mg,(t=>this.Mg.ds(t)),{animationEnabled:this.dh}),this.chart.cs.us.ls(this.wg,(t=>this.wg.ds(t)),{animationEnabled:this.dh}),this.chart.cs.us.ls(this.Cg,(t=>this.Cg.ds(t)),{animationEnabled:this.dh});const b=Ji(new es(this.RA,this.EA,this.zA,1),new is(this.VA,this.OA,this.NA),new ts(this.AA)),M=Ji(new es(this.ig,this.sg,this.hg)),T=Ji(new es(this.ig,this.eg,this.hg));this.Mg.setMouseEnterEventHandler(this.gA).setMouseLeaveEventHandler(this.yA).setMouseDragStartEventHandler(this.vA).setMouseDragEventHandler(this.MA).setMouseDragStopEventHandler(this.CA).setMouseWheelEventHandler(this.FA).setMouseDoubleClickEventHandler(this.AA).setMouseClickEventHandler(this.PA).setMouseDownEventHandler(this.DA).setMouseUpEventHandler(this.BA).setMouseMoveEventHandler(this.LA).setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd),this.wg.setMouseEnterEventHandler(this.GA).setMouseLeaveEventHandler(this.UA).setMouseDragStartEventHandler(this.HA).setMouseDragEventHandler(this.XA).setMouseDragStopEventHandler(this.JA).setMouseWheelEventHandler(this.qA).setTouchStartEventHandler(M.onTouchStart).setTouchMoveEventHandler(M.onTouchMove).setTouchEndEventHandler(M.onTouchEnd),this.Cg.setMouseEnterEventHandler(this.GA).setMouseLeaveEventHandler(this.UA).setMouseDragStartEventHandler(this.HA).setMouseDragEventHandler(this.ZA).setMouseDragStopEventHandler(this.JA).setMouseWheelEventHandler(this.tg).setTouchStartEventHandler(T.onTouchStart).setTouchMoveEventHandler(T.onTouchMove).setTouchEndEventHandler(T.onTouchEnd),this.Sg.We(c.getWidth({x:y.xAxisStrokeStyle,y:y.yAxisStrokeStyle})),this.xg.We(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.bg.We(c.getWidth({x:y.xAxisNibStyle,y:y.yAxisNibStyle})),this.wh.Be(c.getWidth({x:y.xAxisTitleFillStyle,y:y.yAxisTitleFillStyle})).Qh(c.getWidth({x:y.xAxisTitleFont,y:y.yAxisTitleFont})),this.hs=a.rs(this,{}),this.qh=this.hs.kg([this.wh]).bs(y.effectsText),this.Tg=null!==(A=c.getWidth({x:y.xAxisMarginAfterTicks,y:y.yAxisMarginAfterTicks}))&&void 0!==A?A:7,this.Fg=null!==(S=c.getWidth({x:y.xAxisMarginAfterTitle,y:y.yAxisMarginAfterTitle}))&&void 0!==S?S:7}zr(){return this.gh}Vr(){return void 0!==this.er}setTickStrategy(t,e){return super.Gh(t,e)}getTickStrategy(){return this.hh}addBand(t=!0){const e=t?this.og:this.ng,i=new Gs(e,this.chart,this.lA,this,this.pg,this.zh,this.ts,this.es);return this.rA.push(i),i}addConstantLine(t=!0){const e=t?this.og:this.ng,i=new Hs(e,this.chart,this.lA,this,this.pg,this.zh,this.ts,this.es);return this.rA.push(i),i}Ig(t){this.rA.forEach(t)}Pg(t){return this.rA.map(t)}getHighlighters(){return this.rA}setThickness(t){return"number"==typeof t?(this.Dg=t,this.Bg=t):"object"==typeof t&&(this.Dg=t.min,this.Bg=t.max),this.chart.cs.Ms(),this}getThickness(){return{min:this.Dg,max:this.Bg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}Lg(){return this.zf}Sr(t,e){return new ga(e,t,this.IA,this.pg,this.pg)}tr(){if(this.Bf){for(const t of this.Bf)t[1].grid.dispose(),t[1].tick.dispose();this.Bf.clear()}super.tr()}br(t,e){const{tickStart:i}=e,s=t.Dh.vr,r=i+s.getTickLength()*this.dg+s.getTickPadding()*this.dg;t.ih.Ee(this.zh.toPoint(t.M,r)).$a(this.zh.toPoint(s.getLabelAlignment(),-this.dg)).Jh(s.labelRotation).setVisible(this.getVisible())}Rg(t,e){const{startPosition:i,gridStrokeLen:s,gridStrokeStart:r,tickStart:n}=e,o=t.Dh.vr,a=i-s*o.getGridStrokeLength(),h=n+o.getTickLength()*this.dg;return{gridStroke:{start:this.zh.toPoint(t.M,r),end:this.zh.toPoint(t.M,a)},tickStroke:{start:this.zh.toPoint(t.M,n),end:this.zh.toPoint(t.M,h)}}}Lr(t,e){return"linear"===this.Oh.type?Xi(t,e,this.At):ji(t,e,this.At)}Eg(t,e){return e instanceof Bi?Xi:ji}Er(t,e,i){if("logarithmic"!==this.Oh.type){const s=this.At.Li(e-t);return{min:t-i*s,max:e+i*s}}const s=this.At;return{min:s.pi(t,-i),max:s.pi(e,i)}}zs(){if(!this.Zi)return{zg:0,Vg:0,$d:0};const t=!(this.rh.size>0),e=this.wh&&this.wh.Cr().length>0&&this.getTitleFillStyle()!==V,i=this.zh.getHeight(e?this.chart.cs.Ng.Og(this.wh.Cr(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(e?this.Fg:0),s=sr(this.eh)?new Map:lr(this.eh,Math.min(this.Wh,this.Uh),Math.max(this.Wh,this.Uh),this.Wh,this.Uh,0),r=this.At;let n=0;s.forEach(((e,i)=>{if((t=>void 0!==t.vr&&void 0!==t.pr)(i)){const s=Math.max(...e.map((e=>{if(!je(e,this.Wh,this.Uh))return 0;const s=this.chart.cs.Ng.Og(i.pr(e,r),i.vr.labelFont,i.vr.labelRotation);return t||!s.isEstimate?this.zh.getHeight(s):0})))+i.vr.tickLength+i.vr.tickPadding;n=Math.max(n,s)}}));const o=this.Ef.reduce(this.dA,0);n=Math.max(n,o),n+=this.Tg;const a=_t(i+n,void 0!==this.Dg?this.Dg:0,void 0!==this.Bg?this.Bg:Ve);return this.Rf=a,{zg:n,Vg:i,$d:a}}Re(t){const e=this.getVisible()&&t.Gg>0;this.Wg=t;const i=this.Sg.mu(),s=this.At.getInnerStart()<this.At.getInnerEnd()?this.At.getInnerStart():this.At.getInnerEnd(),r=this.At.getInnerEnd()>this.At.getInnerStart()?this.At.getInnerEnd():this.At.getInnerStart(),n=i.getThickness()*this.dg/2,o=this.gg.getInnerInterval(),a=this.cg/100*o,h=a+t.Ug,l=o*this.dg,u=h+n;if(e||this.tr(),!sr(this.eh)&&e){const t=this.At.ri();this.ar({physicalAxisSize:t,startPosition:a,gridStrokeLen:l,gridStrokeStart:h,tickStart:u});for(const[e,i]of this.rh){let s=this.Bf.get(e);if(!s)if(e.$e)s={grid:this.rg[0].Yg(this.pg).setMouseInteractions(!1),tick:this.rg[0].Yg(this.pg).setMouseInteractions(!1)};else if("Hg"in e){const t=Array.from(this.rh.keys()).filter((t=>"Hg"in t)).reverse().indexOf(e),i=this.rg[t];if(!i)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");s={grid:i.Yg(this.pg).setMouseInteractions(!1),tick:i.Yg(this.pg).setMouseInteractions(!1)}}if(s){s.grid.Ot(),s.tick.Ot();for(const[e,r]of i){const e=this.Rg(r,{physicalAxisSize:t,startPosition:a,gridStrokeLen:l,gridStrokeStart:h,tickStart:u});s.grid.Xr().$g(e.gridStroke.start,e.gridStroke.end),s.tick.Xr().$g(e.tickStroke.start,e.tickStroke.end)}s.grid.We(e.vr.getGridStrokeStyle()),s.tick.We(e.vr.getTickStyle()),this.Bf.set(e,s)}}}const c=u,d=c+this.dg*t.Xg,f=this.jf||this.Zf?Math.min(this.Wf,.25*t.Gg):0,g={start:this.zh.toVec2(this.At.pi(this.At.getInnerStart(),f),c),end:this.zh.toVec2(this.At.pi(this.At.getInnerEnd(),-f),d)},m=ct(this.zh.toVec2(this.At.getInnerStart(),d),this.pg,this.yg),y=ct(g.start,this.pg,this.yg),p=ct(g.end,this.pg,this.yg),x=ct(this.zh.toVec2(this.At.getInnerEnd(),c),this.pg,this.yg);this.Sg.He(this.zh.toPoint(s,h)).Ye(this.zh.toPoint(r,h)).setVisible(e),this.xg.He(this.zh.toPoint(this.At.pi(this.At.getInnerStart(),this.Of),h)).Ye(this.zh.toPoint(this.At.getInnerStart(),h)).setVisible(e),this.bg.He(this.zh.toPoint(this.At.pi(this.At.getInnerEnd(),-this.Of),h)).Ye(this.zh.toPoint(this.At.getInnerEnd(),h)).setVisible(e);const A=h+t.zg*this.dg;if(this.wh.Ee(this.zh.toPoint(this.zh.getWidth(ct("center"===this.aA?li(ui(m,x),.5):"start"===this.aA?m:x,this.yg,this.pg)),A)).$a(this.zh.toPoint("center"===this.aA?0:"start"===this.aA?-1:1,-1*this.dg)).setVisible(e).setMouseInteractions(void 0!==["mouseEnterTitle","mouseMoveTitle","mouseLeaveTitle","mouseDownTitle","mouseUpTitle","mouseClickTitle","mouseDoubleClickTitle","mouseDragStartTitle","mouseDragTitle","mouseDragStopTitle","mouseWheelTitle","touchStartTitle","touchMoveTitle","touchEndTitle"].find((t=>this.R.listeners(t).size>0))),this.Lf){const e=this.cg/100*o+t.Ug,i=-this.dg*o-t.Ug,s={start:this.zh.toVec2(this.Lf.min,u+this.dg*this.Rf),end:this.zh.toVec2(this.Lf.max,e+i)},r=ct(s.start,this.pg,this.yg),n=ct(s.end,this.pg,this.yg);this._g.Ee(r).it(ci(n,r)).setVisible(!0)}else this._g.setVisible(!1);this.Mg.Ee(y).it(ci(p,y)).setVisible(e),this.wg.Ee(m).it(ci(y,m)).setVisible(e),this.Cg.Ee(p).it(ci(x,p)).setVisible(e);for(const i of this.Ef)i.update().plot(e,h,l,t.Ug,u);for(const t of this.rA)t.Re()}setLength(t){return this.Hd=t,this.chart.cs.Ms(),this}getLength(){return this.Hd}setMargins(t,e){return this.uA=t,this.cA=e,this.chart.cs.Ms(),this}getMargins(){return{start:this.uA,end:this.cA}}getStackIndex(){var t,e;return null!==(e=null===(t=[...this.chart.jg,...this.chart.Zg,...this.chart.Qg,...this.chart.Jg].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==e?e:0}getParallelIndex(){var t,e;return null!==(e=null===(t=[...this.chart.jg,...this.chart.Zg,...this.chart.Qg,...this.chart.Jg].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==e?e:0}Kg(){const t=this.Wg;if(!t)return;const e=this.getVisible()&&t.Gg>0,i=this.Sg.mu().getThickness()*this.dg/2,s=this.gg.getInnerInterval(),r=this.cg/100*s+t.Ug,n=s*this.dg,o=r+i;for(const i of this.Ef)i.update().plot(e,r,n,t.Ug,o);for(const t of this.rA)t.Re()}qg(){return this.Rf}tp(t,e){e=e||ca.AxisTickMajor;const i=new In(this,t?this.rg[0]:this.lg,this.lg,this.At,this.vg,this.vg,this.zh,this.Ag,this.fA,this.ts,e).setTextFormatter(this.formatValue);return this.Ef.push(i),i}pA(t){this.chart.cs.us.ks(t,1),this.Nf=t.cs.Kr(this.tA,this.Nf)}mA(t){this.chart.cs.us.ks(t,0),t.cs.qr(this.Nf)}xA(t){this.setStopped(!0),t.cs.qr(this.Nf)}_A(t,e){const i=-this.zh.getWidth(e);this.pan(i),this.Nf=t.cs.Kr(this.iA,this.Nf)}pan(t){const e=this.Wh,i=this.Uh,s=this.At.pi(e,t),r=this.At.pi(i,t);this.hr(s,r,!1)}zoom(t,e){const i=this.At.ft(this.Wh),s=this.At.ft(this.Uh),r=this.At.ft(t),n=_t((r-i)/(s-i),0,1),o=.2*this.At.ri(),a=n*this.Uf*o*-e,h=(1-n)*this.Uf*o*e,l=this.At.pi(this.Wh,a),u=this.At.pi(this.Uh,h);this.hr(l,u,!0)}kA(t){this.Lf=void 0,t.cs.qr(this.Nf)}bA(t,e){this.setStopped(!0),t.cs.qr(this.Nf),this.chart.cs.us.ks(this.Mg,0)}wA(t,e,i,s){const r=ct(this.IA.cs.Ve(i.x,i.y),this.IA.cs.At,this.pg),n=_t(this.zh.getWidth(r),this.Wh,this.Uh),o=this.zh.getWidth(ct(this.IA.cs.Ve(e.x,e.y),this.IA.cs.At,this.pg));Math.abs(this.At.ft(n)-this.At.ft(o))>10?(this.Lf=m(Math.min(n,o),Math.max(n,o)),this.Nf=t.cs.Kr(this.sA,this.Nf)):(this.Lf=void 0,this.Nf=t.cs.Kr(this.tA,this.Nf)),this.IA.Ms()}TA(t,e,i){if(this.Lf){const t=this.Lf.min,e=this.Lf.max,i=this.Uh<this.Wh;this.yt(i?e:t,i?t:e,!0,!0,"interactionSetInterval")}this.Lf=void 0,t.cs.qr(this.Nf)}WA(t){this.chart.cs.us.ks(t,1),this.Gf=t.cs.Kr(this.eA,this.Gf)}YA(t){this.chart.cs.us.ks(t,0),t.cs.qr(this.Gf)}$A(t,e){this.setStopped(!0),this.Gf=t.cs.Kr(this.hA,this.Gf)}jA(t,e,i,s){const r=this.zh.getWidth(s);this.hr(this.At.pi(this.Wh,r),this.Uh,!0)}QA(t,e,i,s){const r=this.zh.getWidth(s);this.hr(this.Wh,this.At.pi(this.Uh,r),!0)}KA(t,e,i){t.cs.qr(this.Gf),t.getIsUnderMouse()&&(this.Gf=t.cs.Kr(this.eA)),this.IA.Ms()}addCustomTick(t){return this.tp(!0,t)}setTitlePosition(t){return this.aA=t,this.chart.cs.Ms(),this}getTitlePosition(){return this.aA}getUiPosition(){return this.cg}setStrokeStyle(t){return this.Sg.We(t),this.IA.Ms(),this}getStrokeStyle(){return this.Sg.mu()}getOverlayStyle(){return this.Mg.Xh()}setOverlayStyle(t){return this.Mg.Be(t),this.IA.Ms(),this}setAxisInteractionZoomByDragging(t){return this.Yf=t,this}getAxisInteractionZoomByDragging(){return this.Yf}setAxisInteractionPanByDragging(t){return this.Hf=t,this}getAxisInteractionPanByDragging(){return this.Hf}setAxisInteractionZoomByWheeling(t){return this.$f=t,this}getAxisInteractionZoomByWheeling(){return this.$f}setAxisInteractionReleaseByDoubleClicking(t){return this.Xf=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Xf}setAxisMouseHoverStyle(t=this.zh.defaultDragMouseStyle){return this.tA=t,this}getAxisMouseHoverStyle(){return this.tA}setAxisMousePanStyle(t=this.zh.defaultDragMouseStyle){return this.iA=t,this}getAxisMousePanStyle(){return this.iA}setAxisMouseZoomStyle(t=this.zh.defaultDragMouseStyle){return this.sA=t,this}getAxisMouseZoomStyle(){return this.sA}setAnimationHighlight(t){return this.chart.cs.us.Ts(this.Mg,t),this.chart.cs.us.Ts(this.wg,t),this.chart.cs.us.Ts(this.Cg,t),this}getAnimationHighlight(){return this.chart.cs.us.Fs(this.Mg)}getMarginAfterTicks(){return this.Tg}setMarginAfterTicks(t){return this.Tg=t,this.IA.Ms(),this}getMarginAfterTitle(){return this.Fg}setMarginAfterTitle(t){return this.Fg=t,this.IA.Ms(),this}getNibLength(){return this.Of}setNibLength(t){return this.Of=t,this.IA.Ms(),this}getNibStyle(){return this.xg.mu()}setNibStyle(t){return this.xg.We(t),this.bg.We(t),this.IA.Ms(),this}getNibOverlayStyle(){return this.wg.Xh()}setNibOverlayStyle(t){return this.wg.Be(t),this.Cg.Be(t),this.IA.Ms(),this}setNibMousePickingAreaSize(t){return this.Wf=t,this.IA.Ms(),this}getNibMousePickingAreaSize(){return this.Wf}setNibInteractionScaleByDragging(t){return this.jf=t,this}getNibInteractionScaleByDragging(){return this.jf}setNibInteractionScaleByWheeling(t){return this.Zf=t,this}getNibInteractionScaleByWheeling(){return this.Zf}setNibMouseHoverStyle(t=this.zh.defaultDragMouseStyle){return this.eA=t,this}getNibMouseHoverStyle(){return this.eA}setNibMouseScaleStyle(t=this.zh.defaultDragMouseStyle){return this.hA=t,this}getNibMouseScaleStyle(){return this.hA}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Qf=t,this}getChartInteractionPanByDrag(){return this.Qf}setChartInteractionZoomByWheel(t){return this.Jf=t,this}getChartInteractionZoomByWheel(){return this.Jf}setChartInteractionZoomByDrag(t){return this.Kf=t,this}getChartInteractionZoomByDrag(){return this.Kf}setChartInteractionFitByDrag(t){return this.qf=t,this}getChartInteractionFitByDrag(){return this.qf}J(){return this.At.J(),this}K(){return this.At.K(),this}dispose(){this.xg.dispose(),this.bg.dispose(),this.Sg.dispose(),this.Mg.dispose(),this._g.dispose(),this.wg.dispose(),this.Cg.dispose(),this.wh.dispose(),this.nr(Et);for(const t of this.Bf.values())t.grid.dispose(),t.tick.dispose();return this.zf.slice().forEach(Et),this.rA.slice().forEach(Et),this.ag(this),this.R.emit("dispose",this),this}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}setVisible(t){this.xg.setVisible(t),this.bg.setVisible(t),this.Sg.setVisible(t),this.wh.setVisible(t),this.Mg.setVisible(t),this.wg.setVisible(t),this.Cg.setVisible(t),this.nr((e=>{e.vs(t)}));for(const e of this.Bf.values())e.grid.setVisible(t),e.tick.setVisible(t);return super.setVisible(t),this.chart.cs.Ms(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.dh),this}}var ya;e.AxisXYTitlePositionOptions=void 0,(ya=e.AxisXYTitlePositionOptions||(e.AxisXYTitlePositionOptions={})).Start="start",ya.Center="center",ya.End="end";const pa={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,e)=>({x:t,y:e}),toPoint:(t,e)=>u(t,e)},xa={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,e)=>({x:e,y:t}),toPoint:(t,e)=>u(e,t)},Aa=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof ma&&"y"in t&&t.y instanceof ma),Sa=s.Record({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new rs,tickLength:7,tickStyle:new rs,tickPadding:0,labelFont:new gr,labelFillStyle:new U,labelAlignment:0,labelRotation:0});class va extends Sa{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const ba=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),Ma=new va({labelFillStyle:V,gridStrokeStyle:nt,tickStyle:nt}),Ta=t=>ba(t)&&z(t.labelFillStyle)&&ot(t.gridStrokeStyle)&&ot(t.tickStyle),wa=s.Record({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new va,minorTickStyle:new va,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Ca=(t,e)=>{const i=e-t;return i>=864e5?"MajorHours12":i>=36e5?"MajorHours":i>=6e5?"MajorMinutes15":i>=9e4?"MajorMinutes":i>=10500?"MajorSeconds15":i>=1e3?"MajorSeconds":i>=100?"MajorMilliseconds100":i>=10?"MajorMilliseconds10":i>=1?"MajorMilliseconds":i>=.1?"MajorMicroseconds100":i>=.01?"MajorMicroseconds10":i>=.001?"MajorMicroseconds":i<=.001?"MajorNanoseconds100":"Unknown"},ka={hhmmss:t=>{let e=Math.abs(t);const i=t>=0?"":"-",s=Math.floor(e/36e5);e%=36e5;const r=Math.floor(e/6e4);e%=6e4;const n=Math.floor(e/1e3);return`${i}${ge(s,2)}:${ge(r,2)}:${ge(n,2)}`},hhmmssmmm:t=>{let e=Math.abs(t);const i=t>=0?"":"-",s=Math.floor(e/36e5);e%=36e5;const r=Math.floor(e/6e4);e%=6e4;const n=Math.floor(e/1e3);e%=1e3;const o=Math.floor(e/1);return`${i}${ge(s,2)}:${ge(r,2)}:${ge(n,2)}.${ge(o,3)}`},hhmmssmmmuuu:t=>{const e=Math.abs(t),i=t>=0?"":"-",s=Math.floor(e/36e5),r=Math.floor(e/6e4)%60,n=Math.floor(e/1e3)%60,o=Math.floor(e/1)%1e3,a=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${i}${ge(s,2)}:${ge(r,2)}:${ge(n,2)}.${ge(o,3)}${a}`},hhmmssmmmuuunnn:t=>{const e=Math.abs(t),i=t>=0?"":"-",s=Math.floor(e/36e5),r=Math.floor(e/6e4)%60,n=Math.floor(e/1e3)%60,o=Math.floor(e/1)%1e3,a=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${i}${ge(s,2)}:${ge(r,2)}:${ge(n,2)}.${ge(o,3)}${a}`}},Ea={MajorHours12:{major:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>{const r=432e5;return t=Math.floor(t/(4*r))*r*4,Qs(t,e,r,void 0,1e6)},fitKeyValues:Js({ignore:"first"},2,4)},minor:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>Zs(t,e,36e5,1e6),fitKeyValues:Js({},2,3,4,6)},defaultValueFormatter:ka.hhmmss},MajorHours:{major:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>{const r=36e5;return t=Math.floor(t/(12*r))*r*12,Qs(t,e,r,void 0,1e6)},fitKeyValues:Js({ignore:"first"},2,6,12)},minor:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>Zs(t,e,3e5,1e6),fitKeyValues:Js({},2,4,6)},defaultValueFormatter:ka.hhmmss},MajorMinutes15:{major:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>(t=36e5*Math.floor(t/36e5),Qs(t,e,9e5,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2)},minor:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>Zs(t,e,6e4,1e6),fitKeyValues:Js({},3,5)},defaultValueFormatter:ka.hhmmss},MajorMinutes:{major:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>(t=6e4*Math.floor(t/6e5)*10,Qs(t,e,6e4,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>Zs(t,e,5e3,1e6),fitKeyValues:Js({},2,3,4,6)},defaultValueFormatter:ka.hhmmss},MajorSeconds15:{major:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>(t=15e3*Math.floor(t/6e4)*4,Qs(t,e,15e3,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,4)},minor:{format:ka.hhmmss,getKeyValues:(t,e,i,s)=>Zs(t,e,1e3,1e6),fitKeyValues:Js({},3,5)},defaultValueFormatter:ka.hhmmss},MajorSeconds:{major:{format:ka.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=1e3*Math.floor(t/1e4)*10,Qs(t,e,1e3,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmm,getKeyValues:(t,e,i,s)=>Zs(t,e,100,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmm},MajorMilliseconds100:{major:{format:ka.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=100*Math.floor(t/1e3)*10,Qs(t,e,100,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmm,getKeyValues:(t,e,i,s)=>Zs(t,e,10,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmm},MajorMilliseconds10:{major:{format:ka.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=10*Math.floor(t/100)*10,Qs(t,e,10,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmm,getKeyValues:(t,e,i,s)=>Zs(t,e,1,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmm},MajorMilliseconds:{major:{format:ka.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=1*Math.floor(t/10)*10,Qs(t,e,1,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>Zs(t,e,.1,1e6),fitKeyValues:Js({},2)},defaultValueFormatter:ka.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ka.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=.1*Math.floor(t/1)*10,Qs(t,e,.1,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>Zs(t,e,.01,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ka.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=.01*Math.floor(t/.1)*10,Qs(t,e,.01,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>Zs(t,e,.001,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ka.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>(t=.001*Math.floor(t/.01)*10,Qs(t,e,.001,void 0,1e6)),fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>Zs(t,e,100*1e-6,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ka.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>{const r=100*1e-6;return t=Math.floor(t/.001)*r*10,Qs(t,e,r,void 0,1e6)},fitKeyValues:Js({ignore:"first"},2,5)},minor:{format:ka.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>Zs(t,e,10*1e-6,1e6),fitKeyValues:Js({},2,3,5)},defaultValueFormatter:ka.hhmmssmmmuuunnn},Unknown:{major:{format:(t,e,i)=>"",getKeyValues:(t,e,i,s)=>[],fitKeyValues:void 0},minor:{format:(t,e,i)=>"",getKeyValues:(t,e,i,s)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,e,i)=>""}};class Ra extends wa{je(t){const e=this.timeOrigin||0,i=[{ih:"Major ticks",Hg:0,vr:this.majorTickStyle,pr:this.majorFormattingFunction?this.majorFormattingFunction:(t,i,s)=>{const r=Ca(Math.min(i.getInnerStart(),i.getInnerEnd()),Math.max(i.getInnerStart(),i.getInnerEnd()));return(0,Ea[r].major.format)(t+e,i,s)},Ur:(t,e,i,s)=>{const r=Ca(i,s);return(0,Ea[r].major.getKeyValues)(t,e,i,s)},Bh:{Mr:(t,e,i,s,r,n)=>{const o=Ca(r,n),a=Ea[o].major.fitKeyValues;if(a)return a(t,e,i,s,r,n)}},Yr:void 0}];return ba(this.minorTickStyle)&&i.push({ih:"Minor ticks",Hg:1,vr:this.minorTickStyle,pr:this.minorFormattingFunction?this.minorFormattingFunction:(t,i,s)=>{const r=Ca(Math.min(i.getInnerStart(),i.getInnerEnd()),Math.max(i.getInnerStart(),i.getInnerEnd()));return(0,Ea[r].minor.format)(t+e,i,s)},Ur:(t,e,i,s)=>{const r=Ca(i,s);return(0,Ea[r].minor.getKeyValues)(t,e,i,s)},Bh:{Mr:(t,e,i,s,r,n)=>{const o=Ca(r,n),a=Ea[o].minor.fitKeyValues;if(a)return a(t,e,i,s,r,n)}},Yr:void 0}),{Ze:[],Qe:i,Je:this.cursorFormatter||((t,i,s)=>{const r=Ca(Math.min(i.getInnerStart(),i.getInnerEnd()),Math.max(i.getInnerStart(),i.getInnerEnd()));return Ea[r].defaultValueFormatter(t+e,i,s)}),Ke:1e-4,qe:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((e=>e.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const Ia=(t,e,i,s,r)=>(n,o)=>a=>{const h=new Date(a+n),l={year:o?h.getUTCFullYear():h.getFullYear(),monthIndex:o?h.getUTCMonth():h.getMonth(),day:o?h.getUTCDate():h.getDate(),hours:o?h.getUTCHours():h.getHours(),minutes:o?h.getUTCMinutes():h.getMinutes(),seconds:o?h.getUTCSeconds():h.getSeconds(),millis:o?h.getUTCMilliseconds():h.getMilliseconds()},u=s?s(l):void 0;if(0===t&&!0===u)return a;const c=l[e];r.includes("year")&&(l.year=Math.floor(l.year/i)*i),r.includes("monthIndex")&&(l.monthIndex=0),r.includes("day")&&(l.day=1),r.includes("hours")&&(l.hours=0),r.includes("minutes")&&(l.minutes=0),r.includes("seconds")&&(l.seconds=0),r.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*i;return-1===t&&!1===u&&(d=0),0!==d&&(l[e]=i*(d>0?Math.floor((c+d)/i):Math.ceil((c+d)/i))),o?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-n:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-n},_a=(t,e,i,...s)=>Ia(-1,t,e,i,s),Fa=(t,e,i,...s)=>Ia(-1,t,e,i,s),Da=(t,e,i,...s)=>Ia(0,t,e,i,s),Ba=(t,e,...i)=>Ia(1,t,e,void 0,i),Pa=t=>(e,i)=>s=>{const r=new Date(s+e),n=i?r.getUTCDay():r.getDay(),o=1===n&&0===(i?r.getUTCHours():r.getHours())&&0===(i?r.getUTCMinutes():r.getMinutes())&&0===r.getSeconds()&&0===r.getMilliseconds();if(0===t&&!0===o)return s;let a=i?r.getUTCDate():r.getDate();return-1===t&&1===n&&!1===o||(-1===t?a-=n>=2?n-1:n+6:a+=n>0?8-n:1),i?Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),a,0,0,0,0)-e:new Date(r.getFullYear(),r.getMonth(),a,0,0,0,0).getTime()-e},La=[{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:Js({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Js(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:_a("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:Js({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Js(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:_a("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:Js({offset:0},2,5)},minorTicks:{amount:4,fitFunction:Js(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:_a("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:tr(5,10,15,30)},minorTicks:{amount:4,fitFunction:Js(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:_a("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:tr(5,10,15,30)},minorTicks:{amount:12,fitFunction:Js(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:_a("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:tr(3,6,12)},minorTicks:{amount:8,fitFunction:Js(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:_a("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:Js({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:Js({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Pa(-1),getNextKeyValueIncludingRef:Pa(0),getNextKeyValue:Pa(1),greatTicks:!0,majorTicks:{fitFunction:Js(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Fa("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Da("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:Ba("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Js(void 0,2,3)},minorTicks:{fitFunction:Js(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Fa("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Da("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ba("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Js({ignore:"first"},2,5)},minorTicks:{fitFunction:Js(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Fa("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Da("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ba("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:Js(void 0,2,4)},minorTicks:{fitFunction:Js(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Fa("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Da("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ba("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Fa("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Da("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Ba("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],Va=(t,e,i,s,r)=>{const n=e-t;let o;for(let t=r?0:La.length-1;r?t<La.length:t>=0;r?t+=1:t-=1){const e=n/La[t].unit;if((void 0===i||e>=i)&&(void 0===s||e<=s)){o=La[t];break}}return o},za=(t,e,i)=>{let s=Va(e,i,void 0,1,!0);if(void 0!==s&&0===La.indexOf(s)&&(s=La[1]),void 0===s)return;if("great"===t)return s;const r="major"===t?1:2,n=La[La.indexOf(s)-r];return void 0===n?La[0]:n},Na=(t,e,i)=>(s,r,n,o)=>{const a=za("great",s,r);if(void 0===a)return[];if("Decade"===a.label||"Century"===a.label||"Millennium"===a.label)return[];const h=o>n?s:r,l=(s+r)/2,u=o>n?r:s;if(La.indexOf(a)<=La.findIndex((t=>"Hour"===t.label)))return"left"===i?[h]:[];let c;if(!0===a.irregular)c=qs(s,r,a.getPrevKeyValue(t,e),a.getNextKeyValue(t,e));else{const i=a.greatTicks.getReferenceKeyValue(t,e)(s);c=Qs(s,r,a.unit,i,1)}const d=((t,e,i)=>{for(const s of i)if(s>=t&&s<=e)return s})(s,r,c);return"left"===i?void 0===d||je(d,l,u)?[h]:[d]:void 0!==d&&je(d,l,u)?[d]:[u]},Oa=(t,e,i)=>(s,r,n,o)=>{const a=za(t,n,o);let h;if(void 0===a)return[];if("great"===t&&void 0!==a.greatTicks)if(!0===a.irregular)h=qs(s,r,a.getPrevKeyValue(e,i),a.getNextKeyValue(e,i));else{const t=a.greatTicks.getReferenceKeyValue(e,i)(s);h=Qs(s,r,a.unit,t,1)}else if("major"===t&&void 0!==a.majorTicks)h=!0===a.irregular?((t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e;)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r})(s,r,a.getPrevKeyValue(e,i),a.getNextKeyValue(e,i)):((t,e,i)=>{const s=[];let r=t,n=0;for(;r<e;)if(s.push(r),r+=i,n+=1,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return s.push(r),s})(s,r,a.unit);else{if("minor"!==t||void 0===a.minorTicks)return[];if(!0===a.irregular)h=((t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e;)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r})(s,r,a.getNextKeyValueIncludingRef(e,i),a.getNextKeyValue(e,i));else{const t=(t=>{if(void 0!==t)return La[La.indexOf(t)+1]})(a);if(void 0===t)return[];h=Zs(s,r,t.unit/a.minorTicks.amount,1)}}return h},Ua=t=>(e,i,s,r,n,o)=>{const a=za(t,n,o);if(void 0===a)return;let h;return"major"===t?h=a.majorTicks.fitFunction:a.minorTicks&&(h=a.minorTicks.fitFunction),h?h(e,i,s,r,n,o):void 0},Ya=s.Record({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new va,majorTickStyle:new va,minorTickStyle:new va,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,e,i)=>{const s=new Date(t),r=(t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const i=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-i.getTime())/864e5+1)/7)})(s);return`${new Intl.DateTimeFormat(i,{year:"numeric",month:"long",hour12:!1}).format(s)} Week ${r}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const e=new Date(t);return e.setHours(0,0,0,0),ka.hhmmssmmm(t-e.getTime())},formatMillisecondRange:t=>{const e=new Date(t);return e.setHours(0,0,0,0),ka.hhmmssmmm(t-e.getTime())},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class Ga extends Ya{je(t){const e=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,i=t=>La.map((e=>{const i=((t,e,i)=>{switch(i.label){case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===e?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===e?t.formatOptionsGreatMinute:"Major"===e?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===e?t.formatOptionsGreatMinute:"Major"===e?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===e?t.formatOptionsGreatHour:"Major"===e?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===e?t.formatOptionsGreatDay:"Major"===e?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===e?t.formatOptionsGreatWeek:"Major"===e?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===e?t.formatOptionsGreatMonth:"Major"===e?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===e?t.formatOptionsGreatYear:"Major"===e?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===e?void 0:"Major"===e?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===e?void 0:"Major"===e?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,e);if("object"!=typeof i)return i;try{return new Intl.DateTimeFormat(this.locale,i)}catch(t){let e="";for(const t in i)e+=` ${t}: ${i[t]},`;Tt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${e}} )`)}})),s=new Map;s.set("great",i("Great")),s.set("major",i("Major")),s.set("minor",i("Minor"));const r=t=>String(t),n=(t,i)=>(n,o)=>{let a=n+e;const h=o.getInnerStart(),l=o.getInnerEnd(),u=h>l,c=za(t,u?l:h,u?h:l);if(void 0===c)return r(a);if("great"===t){const t=It(n,"left"===i?h:l);let s;if(s=!1===t?n:!1===c.irregular?"left"===i&&!1===u||"right"===i&&!0===u?c.greatTicks.getReferenceKeyValue(e,this.utc)(n):c.greatTicks.getReferenceKeyValue(e,this.utc)(n+1*c.unit):"left"===i&&!1===u||"right"===i&&!0===u?c.getPrevKeyValue(e,this.utc)(n):c.getNextKeyValue(e,this.utc)(n),a=s+e,"right"===i&&!0===t)return""}const d=s.get(t);if(void 0===d)return r(a);const f=d[La.indexOf(c)];return void 0===f?"":"function"==typeof f?f(a,o,this.locale):f.format(a)},o=[],a=[{ih:"Great ticks (directive)",Hg:0,Xe:!0,Ur:Oa("great",e,this.utc),Yr:void 0},{ih:"Major ticks",Hg:1,vr:this.majorTickStyle,pr:n("major"),Ur:Oa("major",e,this.utc),Bh:{Mr:Ua("major")},Yr:void 0}];Ta(this.greatTickStyle)||(o.push({ih:"Great ticks (left)",vr:this.greatTickStyle.setLabelAlignment(-1),pr:n("great","left"),Ur:Na(e,this.utc,"left"),$e:!0,kr:!1}),o.push({ih:"Great ticks (right)",vr:this.greatTickStyle.setLabelAlignment(1),pr:n("great","right"),Ur:Na(e,this.utc,"right"),$e:!0,kr:!1})),Ta(this.minorTickStyle)||a.push({ih:"Minor ticks",Hg:2,vr:this.minorTickStyle,pr:n("minor"),Ur:Oa("minor",e,this.utc),Bh:{Mr:Ua("minor"),Lh:(t,e,i,s,r,n)=>{const o=za("minor",r,n);return!o||"Week"!==o.label}},Yr:void 0});const h=this.cursorFormatter;return{Ze:o,Qe:a,Je:h?(t,i,s)=>h(e+t,i,s):(t,i,s)=>{const r=Va(Math.min(i.getInnerStart(),i.getInnerEnd()),Math.max(i.getInnerStart(),i.getInnerEnd()),void 0,1,!0),n=r&&r.unit<=6e4,o=new Date(e+t),a=new Date(e+t);a.setHours(0,0,0,0);const h=n?ka.hhmmssmmm:ka.hhmmss;return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"numeric",day:"numeric"}).format(o)} ${h(o.getTime()-a.getTime())}`},Ke:1,qe:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const e=this.get("greatTickStyle");return this.set("greatTickStyle",t(e))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,e,i){return this.withMutations((s=>s.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",e||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",e||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",e||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",e||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",e||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",e||this.formatOptionsMajorDay).set("formatOptionsMajorHour",e||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",e||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",e||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",i||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",i||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",i||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",i||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",i||this.formatOptionsMinorDay).set("formatOptionsMinorHour",i||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",i||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",i||this.formatOptionsMinorSecond)))}setFormattingDecade(t,e){return this.withMutations((i=>(t&&(i=i.set("formatOptionsMajorDecade",t)),e&&(i=i.set("formatOptionsMinorYear",e)),i)))}setFormattingYear(t,e){return this.withMutations((i=>(t&&(i=i.set("formatOptionsMajorYear",t)),e&&(i=i.set("formatOptionsMinorMonth",e)),i)))}setFormattingMonth(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatYear",t)),e&&(s=s.set("formatOptionsMajorMonth",e)),i&&(s=s.set("formatOptionsMinorWeek",i)),s)))}setFormattingWeek(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatMonth",t)),e&&(s=s.set("formatOptionsMajorWeek",e)),i&&(s=s.set("formatOptionsMinorDay",i)),s)))}setFormattingDay(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatWeek",t)),e&&(s=s.set("formatOptionsMajorDay",e)),i&&(s=s.set("formatOptionsMinorHour",i)),s)))}setFormattingHour(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatDay",t)),e&&(s=s.set("formatOptionsMajorHour",e)),i&&(s=s.set("formatOptionsMinorMinute",i)),s)))}setFormattingMinute(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatHour",t)),e&&(s=s.set("formatOptionsMajorMinute",e)),i&&(s=s.set("formatOptionsMinorSecond",i)),s)))}setFormattingSecond(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatMinute",t)),e&&(s=s.set("formatOptionsMajorSecond",e)),i&&(s=s.set("formatOptionsMinorMillisecond",i)),s)))}setFormattingMilliSecond(t,e){return this.withMutations((i=>(t&&(i=i.set("formatOptionsGreatSecond",t)),e&&(i=i.set("formatOptionsMajorMilliSecond",e)),i)))}}const Ha=(t,e)=>(i,s)=>{const r=s-i;if(e){const e=Math.log10(r/2);let n=10**Math.floor(e-t);const o=1/n;n=Math.round(n*o)/o;const a=Math.round(Math.floor(i/(10*n))*n*10*o)/o;return Qs(a,s,n,void 0,o)}const n=Math.log10(r);let o=10**Math.round(n-t);const a=1/o;return o=Math.round(o*a)/a,Zs(i,s,o,a)},Wa=(t,e,i,s,r,n)=>0===e?t.filter(((t,e)=>e%2==0)):1===e?t.filter(((t,e)=>e%5==0)):void 0,Ka=(t,e,i,s,r,n)=>0===e?t.filter(((t,e)=>e%2==0)):1===e?t.filter(((t,e)=>e%3==0)):2===e?t.filter(((t,e)=>e%4==0)):3===e?t.filter(((t,e)=>e%5==0)):void 0,Xa=Js(void 0,2,5),ja=(t,e,i,s,r,n)=>0===e?[t[1],t[3],t[5]]:1===e?[t[0],t[3]]:2===e?[t[1]]:void 0,$a=(t,e)=>{const i=Ci(t),s=ki(t);if(e)return(t,e)=>{const r=[],n=Math.floor(i(t)),o=Math.ceil(i(e));for(let t=n-1;t<=o+1;t+=1){const e=s**t;r.push(e)}return r};const r=10===t?9:4;return(t,e)=>{const n=Math.round(i(t)),o=Math.round(i(e)),a=[],h=s**n,l=(s**o-h)/r;for(let i=1;i<=r;i+=1){const s=h+l*i;s>t&&s<e&&a.push(s)}return a}},Za=s.Record({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new va,majorTickStyle:new va,minorTickStyle:new va,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class Qa extends Za{je(t){const e=this.formattingOffset,i=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(e,i)=>Fi.LogarithmicNoExponents(e,i,void 0,t.base):Fi.Numeric),s=this.get("majorFormattingFunction")||("logarithmic"===t.type?(e,i)=>Fi.LogarithmicNoExponents(e,i,void 0,t.base):Fi.Numeric),r=this.get("minorFormattingFunction")||("logarithmic"===t.type?(e,i)=>Fi.LogarithmicNoExponents(e,i,void 0,t.base):Fi.Numeric),n=[],o=[];Ta(this.extremeTickStyle)||n.push({ih:"Extreme ticks",vr:this.extremeTickStyle,pr:void 0===e?i:(t,s,r)=>i(e+t,s,r),Ur:$s,$e:!0,kr:!0}),o.push({ih:"Major ticks",Hg:0,vr:this.majorTickStyle,pr:void 0===e?s:(t,i,r)=>s(e+t,i,r),Ur:"logarithmic"===t.type?$a(t.base,!0):Ha(0,!0),Bh:"logarithmic"===t.type?{Mr:Ka}:{Mr:Wa},Yr:void 0}),Ta(this.minorTickStyle)||o.push({ih:"Minor ticks",Hg:1,vr:this.minorTickStyle,pr:void 0===e?r:(t,i,s)=>r(e+t,i,s),Ur:"logarithmic"===t.type?$a(t.base,!1):Ha(1,!1),Bh:"logarithmic"===t.type?{Mr:ja}:{Mr:Xa},Yr:50});const a=this.cursorFormatter?this.cursorFormatter:Fi.Numeric;return{Ze:n,Qe:o,Je:void 0===e?a:(t,i,s)=>a(e+t,i,s),Ke:1e-9,qe:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const e=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(e))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const e=this.setMajorTickStyle(t).setMinorTickStyle(t);return e.extremeTickStyle!==Ma?e.setExtremeTickStyle(t):e}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((e=>e.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const qa=(t,e,i="image/png",s)=>{e+=`.${i.slice(i.indexOf("image/")+6)}`;const r=t.captureFrame(i,s);if("image/png"!==i&&r.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${i}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Tt.navigator.msSaveBlob)Tt.navigator.msSaveBlob(r,e);else{const t=Tt.document.createElement("a");Tt.document.body.appendChild(t);const i=Tt.URL.createObjectURL(r);t.href=i,t.download=e,t.click(),setTimeout((()=>{Tt.URL.revokeObjectURL(i),Tt.document.body.removeChild(t)}),0)}},Ja=(t,i,s,r,n,o)=>{const a=t.sc(i,s,r,n,o,!0);return a.setDraggingMode(e.UIDraggingModes.draggable),a},th=(t,e)=>{if("relative"===t)return e;if(t instanceof Li)return t;const i=t.x instanceof ar?t.x.At:t.x.x,s=t.y instanceof ar?t.y.At:t.y.y;return Ni(i,s)},eh=(t,e,i,s,r)=>{if(i){const n=t,o=e,a=Aa(o)?o:Yi(o)?s:void 0;if(a&&Oi(i)){const t=ct(n,a,r.At);return r.Go({engineX:t.x,engineY:t.y})}if(a&&Yi(i))return ct(n,a,s);if(a&&Aa(i))return ct(n,a,i)}else{const i=t;if(Yi(e)){const t=r.No(i);return ct({x:t.engineX,y:t.engineY},r.At,s)}if(Aa(e)){const t=e,s=r.No(i);return ct({x:s.engineX,y:s.engineY},r.At,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class ih{constructor(t,e,i,s,n,o,a,h){this.coordsRelative="relative",this.coordsClient="client",this.ip=[],this.sp=[],this.R=new r.Eventer,this.ep=void 0,this.hp=void 0,this.rp=void 0,this.Xt=x(0,0,0,0),this.np=!1,this.ji=!1,this.op=()=>{this.ap=!0,this.lp.Ms()},this.up=t=>e=>{const i=this.ip.indexOf(e);-1!==i&&this.ip.splice(i,1),this.cs.Ms(),t.Y()},this.cp=t=>{const e=this.sp.indexOf(t);-1!==e&&this.sp.splice(e,1),this.cs.Ms()},this.ap=!0,this.onInViewChange=t=>this.R.on("inViewChange",t),this.offInViewChange=t=>this.R.off(t,"inViewChange"),this.SA=t,this.dp=i,this.lp=s,this.removePanel=n,this.ts=e.cs.ts;const l=e.cs.oi();if(this.uiScale=i.d2({scaleXYConstructor:Vi}).Vi(0,100).Oi(0,100).it(l),this.mg=i.d2({scaleXYConstructor:Vi}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).it(l),this.engine=e.cs.fp,this.cs=e.cs.Ap,this.hs=this.cs.hs.rs(this,{}),this.gp=()=>e.pp("unidentified ui"),this.yp=e.mp(),this.vp=this.lp.Le(this.uiScale).Ee(u(0,0)).it(u(100,100)).Be(o).De(a).setMouseMoveEventHandler(((t,e)=>this.R.emit("mouseMovePanelBackground",this,e))).setMouseEnterEventHandler(((t,e)=>this.R.emit("mouseEnterPanelBackground",this,e))).setMouseLeaveEventHandler(((t,e)=>this.R.emit("mouseLeavePanelBackground",this,e))).setMouseDownEventHandler(((t,e)=>this.R.emit("mouseDownPanelBackground",this,e))).setMouseUpEventHandler(((t,e)=>this.R.emit("mouseUpPanelBackground",this,e))).setMouseClickEventHandler(((t,e)=>this.R.emit("mouseClickPanelBackground",this,e))).setMouseDoubleClickEventHandler(((t,e)=>this.R.emit("mouseDoubleClickPanelBackground",this,e))).setMouseWheelEventHandler(((t,e)=>this.R.emit("mouseWheelPanelBackground",this,e))).setMouseDragStartEventHandler(((t,e,i)=>this.R.emit("mouseDragStartPanelBackground",this,e,i))).setMouseDragEventHandler(((t,e,i,s,r)=>this.R.emit("mouseDragPanelBackground",this,e,i,s,r))).setMouseDragStopEventHandler(((t,e,i,s)=>this.R.emit("mouseDragStopPanelBackground",this,e,i,s))).setTouchStartEventHandler(((t,e)=>this.R.emit("touchStartPanelBackground",this,e))).setTouchMoveEventHandler(((t,e)=>this.R.emit("touchMovePanelBackground",this,e))).setTouchEndEventHandler(((t,e)=>this.R.emit("touchEndPanelBackground",this,e))),h){const t=h.on(this.op);this.Sp=()=>h.off(t)}else{const t=e.cs.Lo(this.op);this.xp=e.cs.Ro.bind(e.cs,t)}const c=e.cs.zo((t=>{this.np=t,this.R.emit("inViewChange",this,t)}));this.bp=e.cs.Vo.bind(e.cs,c),this.ep=n}getTheme(){return this.ts}getSizePixels(){return this.mg.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.vp.Be(t),this.lp.Ms(),this}getBackgroundFillStyle(){return this.vp.Xh()}setBackgroundStrokeStyle(t){return this.vp.De(t),this.lp.Ms(),this}getBackgroundStrokeStyle(){return this.vp.mo()}translateCoordinate(t,e,i){return eh(t,e,i,this.mg,this.cs)}Mp(t){return this.ip.push(t),this.cs.Ms(),t}_p(t){return this.sp.push(t),this.cs.Ms(),t}addUIElement(t=Wo,e=this.uiScale){e=th(e,this.mg);const i=this.gp();return this.Mp(Ja(t,i,this.uiScale,e,this.up(i),this.ts))}addLegendBox(t=sa,i=this.uiScale){i=th(i,this.mg);const s=this._p(Ja(t,this.yp,this.uiScale,i,this.cp,this.ts));return s.setDraggingMode(e.UIDraggingModes.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(Ds.RightCenter).setPosition({x:100,y:50}):s.setOrigin(Ds.CenterBottom).setPosition(this.uiScale.pi({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.sp}dispose(){return this.ji||(this.ji=!0,this.xp&&this.xp(),this.Sp&&this.Sp(),sh(this.uiScale),sh(this.mg),this.bp&&this.bp(),this.hp&&this.hp(),this.lp.Y(),this.yp.Y(),this.ip.slice().forEach((t=>{t.dispose()})),this.sp.slice().forEach((t=>{t.dispose()})),this.cs.Ms(),this.ep&&this.ep(this),this.R.emit("dispose",this)),this}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}saveToFile(t,e,i){return qa(this.engine,t,e,i),this}Or(t){this.Xt=t,this.op()}J(){return this.mg.J(),this.uiScale.J(),this}K(){return this.mg.K(),this.uiScale.K(),this}Re(t){if(this.ap){const t=this.lp.cs.oi(),e=t.x,i=t.y;this.uiScale.it(e,i),this.mg.it(e,i);const s=[this.Xt.left,this.Xt.right],r=[this.Xt.bottom,this.Xt.top];this.uiScale.Ei(s),this.uiScale.zi(r);const n=this.uiScale.getInnerIntervalPixels();this.mg.Vi(0,n.x).Ei(s).Oi(0,n.y).zi(r),this.R.emit("resize",this,n.x,n.y,e,i)}this.ap=!1}wp(){for(let t=0;t<this.ip.length;t+=1)this.ip[t].zs().Re();for(let t=0;t<this.sp.length;t+=1)this.sp[t].zs().Re();this.rp&&this.rp()}Cp(t,e){if(t){const i=t(e);this.onResize(i.zs.bind(i)),this.hp=i.Y.bind(i),this.rp=i.zs.bind(i)}}onBackgroundMouseEnter(t){return this.R.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.R.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.R.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.R.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.R.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.R.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.R.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.R.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.R.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.R.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.R.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.R.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.R.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.R.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.R.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.R.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.R.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.R.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.R.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.R.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.R.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.R.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.R.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.R.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.R.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.R.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.R.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.R.off(t,"touchEndPanelBackground")}onResize(t){return this.R.on("resize",t)}offResize(t){return this.R.off(t,"resize")}getIsInView(){return this.np}}const sh=t=>{t.ii&&t.ii()};class rh extends ih{constructor(t,e,i,s,r,n){super(t,e,i,e.kp("uipanel bg",0),s,e.cs.ts.uiPanelBackgroundFillStyle,e.cs.ts.uiPanelBackgroundStrokeStyle,n),this.Cp(r,this.mg)}setMinimumSize(t){return this.Id=t,this.cs.Ms(),this}getMinimumSize(){return this.Id}Re(t){super.Re(t),super.wp()}}const nh=x(10,10,10,10);class oh extends ih{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,l),this.Tp={},this.ka=nh,this.dh=!0,this.Fp=e.Ip("chart internal ui",0),this.bh=this.Fp.Gr(this.uiScale).yr("Chart").Ee(u(50,100)).$a(u(0,1)).Qh(a).Be(h).setMouseInteractions(!1),this.Pp=this.hs.kg([this.bh]).bs(this.ts.effectsText)}setAnimationsEnabled(t){return this.dh=t,this}getAnimationsEnabled(){return this.dh}setTitle(t){return this.bh.yr(t),this.cs.Ms(),this}getTitle(){return this.bh.Cr()}getTitleSize(){return this.bh.zs().ed()}setTitleFillStyle(t){return this.bh.Be(t),this.op(),this}getTitleFillStyle(){return this.bh.Xh()}setTitleFont(t){return this.bh.Qh(t),this.op(),this}getTitleFont(){return this.bh.Zh()}setTitleRotation(t){return this.bh.Jh(t),this.cs.Ms(),this}getTitleRotation(){return this.bh.Kh()}setTitleEffect(t){return this.Pp.bs(t),this.cs.Ms(),this}getTitleEffect(){return this.Pp._s()}setTitleMargin(t){var e,i;return this.Tp="object"==typeof t?this.Tp?(e=this.Tp,{left:void 0!==(i=t).left?i.left:e.left,top:void 0!==i.top?i.top:e.top,right:void 0!==i.right?i.right:e.right,bottom:void 0!==i.bottom?i.bottom:e.bottom}):t:{left:t,top:t,right:t,bottom:t},this.op(),this}getTitleMargin(){return this.Tp}setPadding(t){return this.ka="object"==typeof t?S(this.ka,t):{left:t,top:t,right:t,bottom:t},this.op(),this}getPadding(){return this.ka}Dp(t){const e=t.Bp(),i=null==e?void 0:e.height,s=null==e?void 0:e.width;if(void 0!==i&&void 0!==s)return{x:i/2,y:s/2}}dispose(){return super.dispose(),this.Fp.Y(),this}}const ah={Lp:(t,e)=>t.Xh()!==V&&0!==t.Cr().length&&t.getVisible()?t.zs().ed().y:0,Rp(t,e){t.Ee(u(50,100)).Or({top:void 0!==e.top?e.top:10,right:e.right||0,left:e.left||0,bottom:e.bottom||0})}},hh=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,lh=(t,e)=>{const i="series"in t?t.series:void 0;if(!i||!("getCursorFormattingOverride"in i))return e;const s=i.getCursorFormattingOverride();return s?s(t,e):e},uh=(t,e,i,s,n,o,a)=>{let h,l,u=n,c=o,d=null,f=!0;const g=new r.Eventer;if(s){f=!1;const e=()=>{f=!0,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())},i=()=>{t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())},r=()=>{f=!1,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())},n=()=>{f=!0,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())},o=()=>{t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())},a=()=>{f=!1,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())};s.onSeriesBackgroundMouseEnter(e),s.onSeriesBackgroundMouseMove(i),s.onSeriesBackgroundMouseLeave(r),s.onSeriesBackgroundTouchStart(n),s.onSeriesBackgroundTouchMove(o),s.onSeriesBackgroundTouchEnd(a),s.Ep(((e,i)=>{i.onMouseEnter(((e,s,r)=>{i.getCursorEnabled()?(h=r||void 0,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())):l||t.cs.Ms()})),i.onMouseMove(((e,s,r)=>{i.getCursorEnabled()?(h=r||void 0,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())):l||t.cs.Ms()})),i.onMouseLeave((()=>{i.getCursorEnabled()?(h=void 0,t.getCursorMode()&&(l&&m?y.Re(...m):t.cs.Ms())):l||t.cs.Ms()}))}))}let m;const y={setCursor:e=>(e(i),t),getCursor:()=>i,setCursorMode:e=>(u=e,t.cs.Ms(),t),getCursorMode:()=>u,setCustomCursor:t=>{l=t},onCursorTargetChanged:t=>g.on("cursorTargetChanged",t),offCursorTargetChanged:t=>{g.off(t)},setCursorFormatting:e=>(c=e,t.cs.Ms(),t),getCursorFormatting:()=>c,Y:()=>{i.dispose(),e.Y()},Re:(e,s,r,n)=>{m=[e,s,r,n];const o=t.cs.Xn();let y=[];if((null==n?void 0:n.explicitTarget)&&u)y=[n.explicitTarget];else if(!e&&u){const t=s.find((t=>t.getIsUnderMouse())),e=o&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Ss?t.Ss(o):void 0;if(h=e||h,h&&"show-all"!==u&&"show-all-interpolated"!==u)y=[h];else if("show-all"===u||"show-all-interpolated"===u||"show-nearest"===u||"show-nearest-interpolated"===u){if((f||void 0!==t)&&o&&r){for(const t of s){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;if(t.getCursorEnabled&&!t.getCursorEnabled()||!t.getVisible())continue;const e=r(t,o,u);e&&y.push(e)}"show-nearest"!==u&&"show-nearest-interpolated"!==u||(y.sort(((t,e)=>a(t,o)-a(e,o))),y.length=1)}}else if(("show-pointed"===u||"show-pointed-interpolated"===u)&&o&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&r){const e=r(t,o,u);e&&(y=[e])}}y=ve(y.map((t=>Be(t))));const p=(null==n?void 0:n.overrideCursorPositions)||((t,e)=>e),x=y[0],A=y.length>0?y:void 0;if(x!==d&&o&&(l&&l(x,A,o),g.emit("cursorTargetChanged",x,A,o),d=x),l)i.getVisible()&&(i.setVisible(!1),i.zs().Re());else{if(y&&y.length>0){const e=c(t,y[0],y);i.setVisible(!0).setPosition(...p(y,y.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(e)))}else i.setVisible(!1);(null==n?void 0:n.afterCursorPointedAt)&&n.afterCursorPointedAt(y),i.zs().Re()}},solveNearest:(e,i,s,r)=>{const n=e||t.cs.Xn();if(!n)return[];let o=[];if("show-all"===i||"show-all-interpolated"===i||"show-nearest"===i||"show-nearest-interpolated"===i){for(const t of s){if(!t.getCursorEnabled()||!t.getVisible())continue;const e=r(t,n,i);e&&o.push(e)}"show-nearest"!==i&&"show-nearest-interpolated"!==i||(o.sort(((t,e)=>a(t,n)-a(e,n))),o.length=1)}return o=ve(o.map((t=>Be(t)))),o},zp:i};return y};class ch{constructor(t,e){this.Vp=t,this.Op=e}alter(t){this.Np=void 0!==this.Np?this.Np:this.Op(),this.Gp=t,this.Vp(t)}resetValue(){void 0!==this.Gp&&(void 0!==this.Np&&this.isAltered()&&this.Vp(this.Np),this.Np=void 0,this.Gp=void 0)}getNormalValue(){return void 0!==this.Np?this.Np:this.Op()}isAltered(){return void 0!==this.Gp&&this.Op()===this.Gp}}class dh{constructor(t,e){this.Wp=[],this.Yp=t,this.At=e}update(){return this.Yp.getVisible()?!(this.Hp()&&(!this.$p()||(this.resetTable(),this.Yp.zs(),this.Hp()))&&(this.Xp(),this.Yp.zs(),this.Hp()&&(this.resetTable(),this.Yp.zs(),1))):(this.$p()&&this.resetTable(),!0)}$p(){for(let t=0;t<this.Wp.length;t+=1)if(this.Wp[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Wp.length;t+=1)this.Wp[t].resetValue();return this}Hp(){return((t,i)=>{const s=ct(t.getPosition(u(-1,-1),e.UISpace.PaddedBackground),t.scale,i),r=ct(t.getPosition(u(1,1),e.UISpace.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||r.x>i.x.getInnerEnd()||s.y<i.y.getInnerStart()||r.y>i.y.getInnerEnd()})(this.Yp,this.At)}jp(){return((t,i)=>{const s=ct(t.getPosition(u(-1,-1),e.UISpace.PaddedBackground),t.scale,i),r=ct(t.getPosition(u(1,1),e.UISpace.PaddedBackground),t.scale,i);return s.x<i.x.getInnerStart()||r.x>i.x.getInnerEnd()})(this.Yp,this.At)}Zp(){return((t,i)=>{const s=ct(t.getPosition(u(-1,-1),e.UISpace.PaddedBackground),t.scale,i),r=ct(t.getPosition(u(1,1),e.UISpace.PaddedBackground),t.scale,i);return s.y<i.y.getInnerStart()||r.y>i.y.getInnerEnd()})(this.Yp,this.At)}Qp(t){return this.Wp.push(t),t}}class fh extends dh{constructor(){super(...arguments),this.Ca=this.Qp(new ch((t=>this.Yp.setOrigin(t)),(()=>this.Yp.getOrigin())))}Xp(){const t=this.Ca.getNormalValue(),e=u(this.jp()?-t.x:t.x,this.Zp()?-t.y:t.y);this.Ca.alter(e)}}class gh extends dh{constructor(t,e,i,s){super(t,e),this.Jp=this.Qp(new ch((t=>this.Yp.setTextFont((e=>e.setSize(t)))),(()=>this.Yp.getTextFont().getSize()))),this.Kp=i,this.qp=s}Xp(){const t=this.Jp.getNormalValue(),e=this.Kp;if(e<t)for(let i=1;i<=this.qp;i+=1){const s=t-(t-e)*(i/this.qp);if(this.Jp.alter(s),this.Yp.zs(),!this.Hp())return}}}const mh={Flip:(t,e)=>new fh(t,e),FontSize:(t=5,e=5)=>(i,s)=>new gh(i,s,t,e)},yh={None:Nn,Rectangle:To,Circle:wo,Diamond:Co,Pointer:ko};class ph extends Po{constructor(){super(...arguments),this.Xu=this.ts.cursorResultTableTextFont,this.Nd=0,this.ty=this.ts.cursorResultTableTextFillStyle}setContent(t){let e;void 0===t?e=[]:Array.isArray(t)?(e=[],t.forEach((t=>{e.push(Array.isArray(t)?t:[t])}))):e=[[t]];for(let t=0;t<e.length;t+=1){const i=e[t];let s=!1;for(let t=0;t<i.length;t+=1){const e=i[t],r="object"==typeof e&&"text"in e?e.text:"string"==typeof e?e:void 0,n="object"==typeof e&&"icon"in e?e.icon:co(e)?e:void 0,o=e instanceof Zi&&e;if(!(r&&r.length>0||n||o)){s=!0;break}}s||(i.unshift(""),i.push(""))}const i=e.length;let s=this.getMembers().length;for(let t=0;t<Math.max(i,s);t+=1){const n=this.getRow(t,!0);if(t>=i)this.getMembers()[t].dispose(),t-=1,s-=1;else{const i=e[t].length;let s=n.getMembers().length;for(let o=0;o<Math.max(i,s);o+=1){const a=e[t][o],h="object"==typeof a&&"font"in a?a.font:void 0,l="object"==typeof a&&"fillStyle"in a?a.fillStyle:void 0,u="object"==typeof a&&"text"in a?a.text:"string"==typeof a?a:void 0,c="object"==typeof a&&"icon"in a?a.icon:co(a)?a:void 0,d=a instanceof Zi&&a,f=n.getMembers();if(o>=i)n.getMembers()[o].dispose(),o-=1,s-=1;else if(void 0!==u&&u.length>0||c||d){const t=h?this.Xu.withMutations((t=>{for(const e of Object.keys(h)){const i=h[e];void 0!==i&&t.set(e,i)}return t})):this.Xu,e=l||this.ty,i=f[o];if(u){let s;i&&i instanceof bo?s=i:(i&&i.dispose(),s=n.addElement(Mo,o)),s.setText(u).setFont(t).setFillStyle(e).setTextRotation(this.Nd)}else if(c){let s;i&&i instanceof Eo?s=i:(i&&i.dispose(),s=n.addElement(Ro,o)),s.setFillStyle(e).setShape(c).setSize({y:t.size,x:t.size}),s.setMargin(5)}else if(d){let s;i&&"setTextFillStyleHidden"in(r=i)&&"setText"in r?s=i:(i&&i.dispose(),s=n.addElement($o.setBackground(yh.None),o).setOn(!0));const a=d.Ps();void 0!==a&&s.setButtonShape(a),s.setText(d.getName()).setTextFont(t).setTextFillStyle(e).setTextRotation(this.Nd),d.styleLegendEntry(s)}}else{const t=f[o];t&&t instanceof Io||(t&&t.dispose(),n.addGap(void 0,o))}}}}var r;return this.Bs.Ms(),this}setTextFillStyle(t){this.ty="function"==typeof t?t(this.ty):t;for(let t=0;t<this.getMemberCount();t+=1){const e=this.getRow(t);for(let t=0;t<e.getMembers().length;t+=1){const i=e.getMembers()[t];i instanceof bo&&i.setFillStyle(this.ty)}}return this.Bs.Ms(),this}getTextFillStyle(){return this.ty}setTextFont(t){return mr(t)?this.Xu=t:this.Xu=t(this.Xu),this.Bs.Ms(),this}getTextFont(){return this.Xu}setTextRotation(t){return this.Nd=t,this.Bs.Ms(),this}getTextRotation(){return this.Nd}iy(){for(let t=0;t<this.kd.length;t+=1)for(let e=0;e<this.kd[t].getMembers().length;e+=1)this.kd[t].getMembers()[e].dispose()}zs(){for(let t=0;t<this.kd.length;t+=1)this.kd[t].setMinimumSize(void 0);super.zs();for(let t=0;t<this.kd.length;t+=1)this.kd[t].setMinimumSize(this.size.x);return super.zs(),this}}class xh{constructor(t,e,i,s,n,o){this.sy=[],this.ey=!0,this.hy=!0,this.np=!1,this.Zi=!0,this.ji=!1,this.ny=[],this.R=new r.Eventer,this.Bs=t,this.renderingScale=e,this.scale=i,this.oy=s,this.ly=n,this.ts=o,this.Yp=new ph(this.Bs,this.renderingScale,this.scale,this.ly,Rt,o).setMouseInteractions(!1).setBackground((t=>t.setFillStyle(o.cursorResultTableFillStyle).setStrokeStyle(o.cursorResultTableStrokeStyle))).setTextFillStyle(o.cursorResultTableTextFillStyle).setTextFont(o.cursorResultTableTextFont),this.uy=mh.Flip(this.Yp,this.scale)}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t)}setPointMarkerVisible(t){return this.ey=t,this.sy.forEach((e=>e.pointMarker.setVisible(e.targetVisible&&t))),this.Bs.Ms(),this}getPointMarkerVisible(){return this.ey}setPointMarker(t){return this.sy.forEach((e=>t(e.pointMarker))),this.ny.push(t),this.Bs.Ms(),this}setResultTableVisible(t){return this.hy=t,this.Bs.Ms(),this}getResultTableVisible(){return this.hy}setResultTable(t){return t(this.Yp),this.Bs.Ms(),this}setAutoFitStrategy(t){return this.uy&&this.uy.resetTable(),this.uy=t?t(this.Yp,this.Bs.cs.At):void 0,this.Bs.Ms(),this}getAutoFitStrategy(){return void 0!==this.uy}setVisible(t){return this.Zi=t,this.Bs.Ms(),this}getVisible(){return this.Zi}dispose(){return this.sy.forEach((t=>t.pointMarker.dispose())),this.Yp.dispose(),this.ny.length=0,this.oy(this),this.R.emit("dispose"),this}Re(){return this.uy&&this.uy.update(),this.Yp.setVisible(this.np&&this.Zi&&this.hy),this.sy.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.np&&this.Zi&&this.ey))),this.sy.forEach((t=>t.pointMarker.Re())),this.Yp.Re(),this}zs(){return this.sy.forEach((t=>t.pointMarker.zs())),this.Yp.zs(),this}Ay(t,e){const i=e===this.scale?t:ct(t,e,this.scale);this.Yp.setPosition(i)}}const Ah=t=>t.setResultTable((t=>t.setEffect(!0).setOrigin(u(-1,-1)).setMargin(5)));class Sh extends xh{constructor(){super(...arguments),this.Sa={x:0,y:0}}setPosition(t){const e=this.renderingScale,i=th(t.resultTableScale,e),s=i===this.scale?t.resultTable:ct(t.resultTable,i,this.scale),r=th(t.pointMarkerScale,e),n=r===this.scale?t.pointMarker:ct(t.pointMarker,r,this.scale);this.Sa=n;let o=this.sy[0];if(!o){const t=new Eo(this.Bs,this.renderingScale,this.scale,Rt,this.ts).setMouseInteractions(!1).setFillStyle(this.ts.cursorPointMarkerFillStyle).setSize(this.ts.cursorPointMarkerSize).setShape(this.ts.cursorPointMarkerShape);o={pointMarker:t,targetVisible:!0},this.sy.push(o),this.ny.forEach((e=>e(t)))}return o.pointMarker.setPosition(n),this.Yp.setPosition(s),this.Bs.Ms(),this}zs(){return super.zs(),this.np=((t,e,i=e)=>{const s=e!==i?ct(t,e,i):t;return s.x>=i.x.getInnerStart()&&s.x<=i.x.getInnerEnd()&&s.y>=i.y.getInnerStart()&&s.y<=i.y.getInnerEnd()})(this.Sa,this.scale),this}}class vh{constructor(t,e=[]){this.gy=[],this.py=(t,e)=>(this.gy.forEach((i=>i(t,e))),t),this.addStyler=t=>new vh(this.ly,this.gy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new vh(t,this.gy.map((t=>t))),this.yy=(t,e,i,s,r)=>this.py(new Sh(t,e,i,s,this.ly,r),r),this.ly=t,this.gy=e}}const bh=new vh(To,[Ah]),Mh=new vh(ko,[Ah,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(u(0,-1)).setMargin(0).setBackground((t=>{t instanceof ko&&t.setDirection(e.UIDirections.Down).setPointerLength(10).setPointerAngle(60)}))))]),Th=bh,wh=bh,Ch=bh,kh=Mh,Eh=new vh(To,[Ah,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(Ds.LeftBottom)))]);var Rh;e.SliceLabelIndices=void 0,(Rh=e.SliceLabelIndices||(e.SliceLabelIndices={}))[Rh.LabelsInsideSlices=0]="LabelsInsideSlices",Rh[Rh.LabelsOnSides=1]="LabelsOnSides";const Ih={SortByName:(t,e)=>t.getName().localeCompare(e.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,e)=>t.getAnimatedValue()-e.getAnimatedValue(),SortByValueDescending:(t,e)=>e.getAnimatedValue()-t.getAnimatedValue(),None:()=>0},_h={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,e)=>`${t.getName()}: ${(100*e).toFixed(2)}%`};class Fh extends Zi{constructor(){super(...arguments),this.Cs="Slice",this.M=0}}const Dh=(t,e)=>{Qt(e),t.setExploded(!t.getExploded())};class Bh extends Fh{}class Ph extends Bh{constructor(t,e,i,s,r,n,o,a){super(s,n,o,a),this.my=!1,this.vy=V,this.Sy=V,this.xy=this.M,this.by=this.my?1:0,this.My=this.getVisible(),this._y=$((()=>this.chart.cs.Ms())),this.wy=$((()=>this.chart.cs.Ms())),this.Cy=()=>{this.ky=void 0},this.Ty=()=>{this.Fy=void 0},this.index=t,this.chart=s,this.scale=r,this.qi=n,this.Iy=e.nd(r).ds(this.getHighlight()),this.As(this.Iy),this.ih=i.Gr(r).ds(this.getHighlight()),this.As(this.ih,{isText:!0}),this.onMouseClick(Dh),this.onTouchEnd(Dh)}setValue(t){return this.chart.getAnimationsEnabled()?this.My&&this.Py(this.xy,t):this.xy=t,this.M=t,this.chart.cs.Ms(),this}getValue(){return this.M}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let e=0;e<t.length;e+=1)t[e]!==this&&t[e].getExploded()&&t[e].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.Fy&&this.Fy.finish(),this.Fy=this.wy(300,X.ease)([[this.by,t?1:0]],(([t])=>{this.by=t,this.chart.cs.Ms()})),this.Fy.onEveryAnimationEnd(this.Ty),this.my=!this.my):!1!==this.chart.getMultipleSliceExplosion()||t?(this.by=this.my?0:1,this.my=!this.my):(this.by=0,this.my=!this.my),this.chart.cs.Ms(),this}getExploded(){return this.my}setVisible(t){return this.My=t,!1===t?this.chart.getAnimationsEnabled()&&this.xy>0?(this.ky&&(this.ky.finish(!1),this.ky=void 0),this.Py(this.xy,0,(()=>super.setVisible(!1)))):(this.xy=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.ky&&(this.ky.finish(!1),this.ky=void 0),super.setVisible(!0),this.Py(this.xy,this.M)):(this.xy=this.M,super.setVisible(!0)),this}Py(t,e,i){this.ky=this._y(300,X.ease)([[t,e]],(([t])=>{this.xy=t,this.chart.cs.Ms()})),this.ky.onEveryAnimationEnd(this.Cy),i&&this.ky.onAnimationEnd(i)}setStyle(t,e,i,s){this.vy=t,this.Sy=i,this.Iy.Be(this.vy).De(e),this.ih.Be(this.Sy).Qh(s);for(let t=0;t<this.Ji.length;t+=1)this.styleLegendEntry(this.Ji[t])}getAnimatedValue(){return this.xy}getAnimatedExplosion(){return this.by}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.vy,stroke:this.Iy.mo()})}}const Lh=(t,e,i)=>ui(e,li(Si(.5*(t.ru()+t.Ti())*Math.PI/180),i)),Vh=(t,e,i,s,r,n)=>{const o=t.length;let a=90;for(let h=0;h<o;h+=1){const l=t[h],u=a-360*e[h],c=l.getAnimatedExplosion();if(0===c||1===o)l.Iy.Ee(i);else{const t=ui(i,li(Si(.5*(a+u)*Math.PI/180),n*c));l.Iy.Ee(t)}l.Iy.cu(a).Ye(u).fu(s).Au(s).gu(r),a=u}},zh=t=>{const e=t.getSlices();for(let t=0;t<e.length;t+=1)e[t].setExploded(!1)};class Nh extends oh{constructor(t,e,i,s,r,n,o){super(t,e,i,e.kp("pieChart bg",0),s,e.cs.ts.pieChartBackgroundFillStyle,e.cs.ts.pieChartBackgroundStrokeStyle,e.cs.ts.pieChartTitleFont,e.cs.ts.pieChartTitleFillStyle,n),this.Dy=[],this.By=Ih.SortByName,this.Kl=0,this.Ly=this.ts.pieChartSliceFillStylePalette,this.Ry=this.ts.pieChartSliceStrokeStyle,this.Ey=!0,this.zy=this.ts.pieChartSliceLabelFont,this.Vy=this.ts.pieChartSliceLabelFillStyle,this.Oy=0,this.Ny=!1,this.Gy=20,this.Wy=!0,this.Uy=!0,this.Yy=t=>{const e=this.Dy.indexOf(t);e>=0&&(this.Dy.splice(e,1),this.Hy())},this.cs.Zn(fa.pf),this.$y=e.Xy("pieChart bottom",0),this.jy=e.Xy("pieChart top",1),this.bh.yr("Pie Chart"),this.Cp(r,this.mg),this.onBackgroundMouseDoubleClick(zh);const a=Ji(new ts(zh));this.onBackgroundTouchStart(a.onTouchStart),this.onBackgroundTouchMove(a.onTouchMove),this.onBackgroundTouchEnd(a.onTouchEnd);const h=e.Zy(),l=Dt(o?o.cursorBuilder:void 0,wh);this.Qy=uh(this,h,l.yy(h,this.uiScale,this.uiScale,Rt,this.ts),void 0,"show-pointed",Oh,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled))}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=wh){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}addSlice(t,e){const i=new Ph(this.Oy,this.$y,this.jy,this,this.mg,this.Yy,this.ts,this.cs.hs);this.Oy+=1,i.setName(t);const s=this.dh;return this.dh=!1,i.setValue(e),this.dh=s,i.setEffect(this.Wy),this.Jy(i),this.Dy.push(i),this.Hy(),i.setHighlightOnHover(this.Ey),i.onMouseMove((()=>{this.getCursorMode()&&this.cs.Ms()})),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Dy}setMultipleSliceExplosion(t){return this.Ny=t,this}getMultipleSliceExplosion(){return this.Ny}setInnerRadius(t){return this.Kl=t,this.cs.Ms(),this}getInnerRadius(){return this.Kl}setSliceExplosionOffset(t){return this.Gy=t,this.cs.Ms(),this}getSliceExplosionOffset(){return this.Gy}setLUT(t){return this.jd=t,this.cs.Ms(),this}setSliceFillStyle(t){this.Ly=t;for(let t=0;t<this.Dy.length;t+=1)this.Jy(this.Dy[t]);return this.cs.Ms(),this}getSliceFillStyle(){return this.Ly}setSliceStrokeStyle(t){this.Ry="function"==typeof t?t(this.Ry):t;for(let t=0;t<this.Dy.length;t+=1)this.Jy(this.Dy[t]);return this.cs.Ms(),this}getSliceStrokeStyle(){return this.Ry}setSliceEffect(t){return this.Wy=t,this.Dy.forEach((e=>e.hs.os.bs(t))),this.cs.Ms(),this}getSliceEffect(){return this.Wy}setSliceSorter(t){return this.By=t,this.Dy=this.Dy.sort(this.By),this.cs.Ms(),this}getSliceSorter(){return this.By}setLabelFillStyle(t){this.Vy="function"==typeof t?t(this.Vy):t;for(let t=0;t<this.Dy.length;t+=1)this.Jy(this.Dy[t]);return this.cs.Ms(),this}getLabelFillStyle(){return this.Vy}setLabelFont(t){this.zy="function"==typeof t?t(this.zy):t;for(let t=0;t<this.Dy.length;t+=1)this.Jy(this.Dy[t]);return this.cs.Ms(),this}getLabelFont(){return this.zy}setLabelEffect(t){return this.Uy=t,this.Dy.forEach((e=>e.hs.ns.bs(t))),this.cs.Ms(),this}getLabelEffect(){return this.Uy}setLabelFormatter(t){return this.Ky=t,this.cs.Ms(),this}getLabelFormatter(){return this.Ky}setSliceHighlightOnHover(t){return this.Ey=t,this.Dy.forEach((e=>e.setHighlightOnHover(t))),this}Re(t){super.Re(t),ah.Rp(this.bh,this.Tp),super.wp();const e=ah.Lp(this.bh,this.Tp),i=u(this.mg.x.getInnerInterval()-(this.ka.left+this.ka.right),this.mg.y.getInnerInterval()-(this.ka.bottom+this.ka.top+e)),s=u(this.ka.left+i.x/2,this.ka.bottom+i.y/2);if(this.jd){const t=this.jd;this.Dy.forEach((e=>{this.Jy(e,new U({color:t.getColors(e.getAnimatedValue())}))}))}for(let t=0;t<this.Dy.length;t+=1){const e=this.Dy[t].getAnimatedValue()>0;this.Dy[t].Iy.setVisible(e),this.Dy[t].ih.setVisible(e)}this.Dy=this.Dy.sort(this.By);const r=this.Dy.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const e=r[t];e.ih.yr(this.Ky(e,o[t])).zs()}this.Qy.Re(!1,this.Dy,((t,e,i)=>{const s=o[r.indexOf(t)]||0,n=this.cs.No(e);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.cs.At,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.cs.At},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}})),this.qy(r,o,s,i)}Jy(t,e=this.Ly(t.index,t)){t.setStyle(e,this.Ry,this.Vy,this.zy)}Hy(){this.Dy=this.Dy.sort(this.By),this.cs.Ms()}ef(){return this.Dy}dispose(){return super.dispose(),this.Dy.slice().forEach((t=>t.dispose())),this.Qy.Y(),this.jy.Y(),this.$y.Y(),this}}const Oh=(t,e,i)=>[[e.slice],[{text:e.value.toString(),font:{weight:"bold"}}]],Uh={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},Yh=(...t)=>{const e=[];return t.forEach((t=>{var i;t&&"object"==typeof(i=t)&&i&&"pattern"in i&&e.push({type:"DataPattern",args:t})})),e};class Gh extends Nh{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n,o),this.Ky=_h.NamePlusValue,this.tm=[],this.im=40,this.sm=5,this.hm=10,this.rm=this.ts.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rm=t;for(let t=0;t<this.tm.length;t+=1)this.tm[t].We(this.rm);return this.cs.Ms(),this}getLabelConnectorStyle(){return this.rm}setLabelSliceOffset(t){return this.im=t,this.cs.Ms(),this}getLabelSliceOffset(){return this.im}setLabelConnectorGapStart(t){return this.sm=t,this.cs.Ms(),this}getLabelConnectorGapStart(){return this.sm}setLabelConnectorEndLength(t){return this.hm=t,this.cs.Ms(),this}getLabelConnectorEndLength(){return this.hm}qy(t,e,i,s){const r=this.zy.getSize(),n=this.im,o=this.hm,a=this.sm,h=Math.min(this.Gy,n-a);let l=0;if(1===t.length)l=t[0].ih.ed().x;else for(let e=0;e<t.length;e+=1)l=Math.max(l,t[e].ih.ed().x);const u=Math.max(.5*(Math.min(s.x-2*l-2*o,s.y-2*r)-2*n),0);if(u<50){const n=Math.max(.5*Math.min(s.x,s.y-2*r),0);Vh(t,e,i,n,this.Kl,h),t.forEach((t=>t.ih.setVisible(!1))),this.tm.forEach((t=>t.setVisible(!1)))}else{Vh(t,e,i,u,this.Kl,h);let s=90;const r=t.map(((t,r)=>{const a=360*e[r],h=s-a,l=Si(xi(.5*(s+h))),c=l.x>=0?-1:1,d=ui(ui(i,li(l,u+n)),{x:c*-o,y:0});s=h;const f={x:c,y:0};t.ih.Ee(d).$a(f),t.ih.zs();const g=Je(t.ih.th());return{position:d,alignment:f,shape:t.ih,boundaries:g,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<r.length;t+=1){const e=r[t],i=l[l.length-1];i&&!1!==We([i.boundaries,e.boundaries])?e.shape.setVisible(!1):(l.push(e),e.shape.setVisible(!0))}for(let t=0;t<this.tm.length;t+=1)this.tm[t].setVisible(!1);l.forEach(((t,e)=>{const s=t.slice.Iy,r=Lh(s,i,u+a+h*t.slice.getAnimatedExplosion()),n=pi(t.position.y,r,i),o=t.position;this.nm([r,n,o])}))}}getMinimumSize(){return u(500,300)}nm(t){let e;for(let t=0;t<this.tm.length;t+=1)if(!this.tm[t].getVisible()){e=this.tm[t].setVisible(!0);break}void 0===e&&(e=this.jy.om(this.mg,void 0,[Uh.InternalUI]).We(this.rm).setMouseInteractions(!1),this.tm.push(e)),e.Ot().Al(t)}}class Hh extends Nh{constructor(){super(...arguments),this.Ky=_h.Name,this.am=.5}qy(t,e,i,s){const r=this.Gy,n=Math.max(0,.5*Math.min(s.x,s.y)-r);Vh(t,e,i,n,this.Kl,r);for(let e=0;e<t.length;e+=1){const s=t[e],o=s.Iy,a=s.ih,h=this.Kl/100,l=((1-h)*this.am+h)*n+s.getAnimatedExplosion()*r,u=Lh(o,i,l);a.Ee(u).Wa(0).Ya(0)}}getMinimumSize(){return u(200,200)}setLabelPosition(t){return this.am=t,this.cs.Ms(),this}getLabelPosition(){return this.am}}const Wh={LabelsOnSides:Gh,LabelsInsideSlices:Hh},Kh=t=>{if(ns(t)){const e=t.getThickness(),i=t.getFillStyle();if(Y(i))return 1===e?pr:new Ar({size:e,fillStyle:i,shape:"sphere"})}return pr};class Xh{constructor(t,e,i,s,n,o,a,h,l,u){this.R=new r.Eventer,this.M=0,this.Zi=!0,this.ji=!1,this.Ms=t,this.lm=e,this.um=i,this.dm=s,this.fm=n,this.Am=o,this.Nd=a,this.ty=h,this.gm=l,this.rc=u}setValue(t){return t===this.M||(this.M=t,this.Ms(),this.R.emit("valueChange",this,this.M)),this}getValue(){return this.M}setTickStyle(t){return this.um="function"==typeof t?t(this.um):t,this.Ms(),this}getTickStyle(){return this.um}setTickLength(t){return this.dm=t,this.Ms(),this}getTickLength(){return this.dm}setGridStrokeStyle(t){return this.fm="function"==typeof t?t(this.fm):t,this.Ms(),this}getGridStrokeStyle(){return this.fm}setTextPadding(t){return this.Am=t,this.Ms(),this}getTextPadding(){return this.Am}setTextRotation(t){return this.Nd=t,this.Ms(),this}getTextRotation(){return this.Nd}setTextFillStyle(t){return this.ty="function"==typeof t?t(this.ty):t,this.Ms(),this}getTextFillStyle(){return this.ty}setTextFont(t){return this.gm="function"==typeof t?t(this.gm):t,this.Ms(),this}getTextFont(){return this.gm}setTextFormatter(t){return this.rc=t,this.Ms(),this}onValueChange(t){return this.R.on("valueChange",t)}offValueChange(t){return this.R.off(t,"valueChange")}dispose(){return this.ji||(this.ji=!0,this.lm(),this.Ms(),this.R.emit("dispose",this)),this}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}setVisible(t){const e=this.Zi!==t;return this.Zi=t,e&&(this.R.emit("visibleStateChanged",this,this.Zi),this.Ms()),this}getVisible(){return this.Zi}onVisibleStateChanged(t){return this.R.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.R.off(t,"visibleStateChanged")}}class jh extends Xh{constructor(t,e,i,s,r,n,o,a,h,l,u,c,d){super(t,e,i,s,r,n,o,a,h,l),this.pm=u,this.ym=c,this.ka=d}setBackgroundFillStyle(t){return this.pm="function"==typeof t?t(this.pm):t,this.Ms(),this}getBackgroundFillStyle(){return this.pm}setBackgroundStrokeStyle(t){return this.ym="function"==typeof t?t(this.ym):t,this.Ms(),this}getBackgroundStrokeStyle(){return this.ym}setPadding(t){return this.ka="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.ka,...t},this.Ms(),this}getPadding(){return this.ka}}class $h{constructor(t,e,i,s){this.vm=[],this.Sm=new Map,this.xm=t,this.bm=e,this.Mm=i,this._m=s}wm(){this.Mm&&this.Mm();const t=[];return{add:(e,i)=>{t.push({instanceUniqueProperties:e,instanceSharedProperties:i})},finishPlot:()=>{const e=[];let i=[];t.forEach((t=>{const i=e.find((e=>((t,e)=>{const i=Object.keys(t);for(const s of i)if(t[s]!==e[s])return!1;return!0})(e.sharedProperties,t.instanceSharedProperties)));i?i.instances.push(t.instanceUniqueProperties):e.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const s=this.vm.slice(),r=[];e.forEach((t=>{let e=s.pop();e||(e=this.xm(),this.vm.push(e));const n=[],o=e.Cm().slice();t.instances.forEach(((t,e)=>{const i=o.shift();n.push({...t,existingMember:i})}));const a=this.bm(e,n,t.sharedProperties);i=ae(i,a,{canReturnB:!0});for(let i=0;i<t.instances.length;i+=1)r.push({Zo:t.instances[i].Zo,collection:e,member:a[i]});o.forEach((t=>{null==e||e.Fd(t)}))})),s.forEach((t=>{t.dispose();const e=this.vm.indexOf(t);e<0?pe(0,(()=>{})):this.vm.splice(e,1)})),r.forEach((t=>{const e=this.Sm.get(t.Zo);e&&t.collection.cs.lo({entity:e.collection,collectionMember:e.member},{entity:t.collection,collectionMember:t.member})})),this.Sm.clear(),r.forEach((t=>{this.Sm.set(t.Zo,t)})),this._m&&this._m(this.vm,i)}}}km(){this.vm.forEach((t=>{t.dispose()})),this.vm.length=0}}class Zh{constructor(t){this.Tm=[],this.Fm=t}wm(){return this.Im(),{add:()=>this.ul(),finishPlot:()=>{this.Pm()}}}ul(){let t=this.Tm.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.Fm()},this.Tm.push(t)),t.isFree=!1,t.shape}Im(){this.Tm.forEach((t=>{t.isFree=!0}))}Pm(){this.Tm.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.Tm.splice(this.Tm.indexOf(t),1)}))}km(){this.Tm.forEach((t=>t.shape.dispose())),this.Tm.length=0}}class Qh extends ar{constructor(t,e,i,s,r,n,o,a,h){super(t,e,i,s,a,{numeric:e.Dm({x:t.cs.ts.xAxis3DNumericTicks,y:t.cs.ts.yAxis3DNumericTicks,z:t.cs.ts.zAxis3DNumericTicks}),datetime:e.Dm({x:t.cs.ts.xAxis3DDateTimeTicks,y:t.cs.ts.yAxis3DDateTimeTicks,z:t.cs.ts.zAxis3DDateTimeTicks}),time:e.Dm({x:t.cs.ts.xAxis3DTimeTicks,y:t.cs.ts.yAxis3DTimeTicks,z:t.cs.ts.zAxis3DTimeTicks})},{type:"linear"}),this.Ef=[],this.Bm=()=>{},this.Lm=()=>{},this.Rm=()=>{},this.Em=()=>{},this.chart=t,this.zm=r,this.Vm=n,this.Om=o,this.Nm=this.zm.At;const l=this.zh.Dm({x:this.ts.xAxis3DStrokeStyle,y:this.ts.yAxis3DStrokeStyle,z:this.ts.zAxis3DStrokeStyle});this.Gm=this.zm.om([Uh.InternalUI]).We(l).Wm(Kh(l)).setMouseInteractions(!1),this.wh=this.Vm.Gr(this.Om).setMouseInteractions(!1).Be(e.Dm({x:t.cs.ts.xAxis3DTitleFillStyle,y:t.cs.ts.yAxis3DTitleFillStyle,z:t.cs.ts.zAxis3DTitleFillStyle})).Qh(e.Dm({x:t.cs.ts.xAxis3DTitleFont,y:t.cs.ts.yAxis3DTitleFont,z:t.cs.ts.zAxis3DTitleFont})).oa(3),this.Um=new Zh((()=>this.Vm.Gr(this.Om).oa(2).Nr(Ie).Or(Ie))),this.Ym=new $h((()=>this.Vm.Hm(this.Om).setMouseInteractions(!1).oa(1)),((t,e,i)=>(t.Be(i.fillStyle).De(i.strokeStyle),e.map((({positions:e,existingMember:i})=>{const s=i||t.Xr();return s.Cl(e),s}))))),this.$m=new $h((()=>this.zm.Yg().setMouseInteractions(!1)),((t,e,i)=>(t.Ot().We(i.lineStyle),e.map((({positions:e,existingMember:i})=>i||t.Al(e)))))),this.hs=h,this.qh=this.hs.kg([this.wh]).bs(s.effectsText),this.Gm.setMouseEnterEventHandler(this.Bm).setMouseLeaveEventHandler(this.Lm).setMouseDragEventHandler(this.Rm).setMouseDragStopEventHandler(this.Em),i.ug=this}setTickStrategy(t,e){return super.Gh(t,e)}getTickStrategy(){return this.hh}addCustomTick(){const t=new jh((()=>this.chart.cs.Ms()),(()=>{const e=this.Ef.indexOf(t);e>=0&&this.Ef.splice(e,1)}),this.ts.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.tickLength,this.ts.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.ts.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.ts.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.ts.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),V,nt,{left:4,right:4,top:4,bottom:4});return this.Ef.push(t),this.chart.cs.Ms(),t}setStrokeStyle(t){return this.Gm.We(t).Wm(Kh(this.Gm.mu())),this.chart.cs.Ms(),this}getStrokeStyle(){return this.Gm.mu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Gm.setVisible(t),!1===t&&(this.$m.km(),this.Um.km(),this.Ym.km()),this.zm.Ms(),this}Lg(){return this.chart.getSeries()}Xm(t){return Math.abs(this.At.st(t)*this.zm.jm(1))}Er(t,e,i){const s=Math.abs(this.At.st(e-t)*this.zm.jm(1));return{min:t-i*s,max:e+i*s}}Sr(t,e){const i=new qh(e,t,this.Vm,this.Om,this.zm);return i.ih.oa(0),i}br(t,e){const i=this.Zm(e,t.M,t.Dh.vr.tickLength,t.Dh.vr.tickPadding);return t.ih.Ee(i.labelPosition).$a(i.labelAlignment),i}Zm(t,e,i,s){const{wuSize:r,start:n,end:o,tickDirection3D:a,tickDirection2D:h}=t,l=(e-this.At.getInnerStart())/(this.At.getInnerEnd()-this.At.getInnerStart()),c=Le.addVec(qe(n,o,l),Le.multiplyVec(Le.multiply(a,this.zm.jm(.5*this.Gm.mu().getThickness())),r)),d=Le.addVec(c,Le.multiplyVec(Le.multiply(a,this.zm.jm(i)),r)),f=this.zm.Qm(d)||u(0,0);return{labelPosition:ui(ct(f,this.chart.cs.At,this.Om),li(h,s)),labelAlignment:{x:-h.x,y:-h.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:l}}Jm(t,e,i){const{wuSize:s,start:r,end:n,tickDirection3D:o}=e,a=(t-this.At.getInnerStart())/(this.At.getInnerEnd()-this.At.getInnerStart()),h=Le.addVec(qe(r,n,a),Le.multiplyVec(Le.multiply(o,this.zm.jm(.5*this.Gm.mu().getThickness())),s)),l=Le.addVec(h,Le.multiplyVec(Le.multiply(o,this.zm.jm(10)),s)),c=this.zm.Qm(h)||u(0,0),d=this.zm.Qm(l)||u(0,0);return this.Vm.Ue(this.Om).He(c).Ye(d).We(new rs({fillStyle:new U({color:C(120*i)}),thickness:1}))}Lr(t,e){return Jh(t,e,this.At)}Re(t){if(!this.Zi)return;const e=Math.min(this.Wh,this.Uh),i=Math.max(this.Wh,this.Uh),s=this.Nm,r=f(s.x.rt(),s.y.rt(),s.z.rt());let n,o;this.Km()?(n=f(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerStart()),o=f(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerEnd())):(n=f(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),o=this.zh.qm(f(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),n));const a=this.zh.rf,h=this.zm.Qm(n)||u(0,0),l=this.zm.Qm(o)||u(0,0),c=qe(n,o,.5),d=Le.addVec(c,Le.multiplyVec(Le.multiply(a,-1),r)),g=this.zm.Qm(c)||u(0,0),m=this.zm.Qm(d)||u(0,0),y=oi(ci(ct(g,this.chart.cs.At,this.Om),ct(m,this.chart.cs.At,this.Om)));this.Gm.Ot().Al([n,o]);const{gridlinePositionA:p,gridlinePositionB:x,gridlinePositionC:A}=this.zh.tv(t),S=t=>({x:-1===t.x?this.Nm.x.getInnerStart():1===t.x?this.Nm.x.getInnerEnd():0,y:-1===t.y?this.Nm.y.getInnerStart():1===t.y?this.Nm.y.getInnerEnd():0,z:-1===t.z?this.Nm.z.getInnerStart():1===t.z?this.Nm.z.getInnerEnd():0}),v=S(p),b=S(x),M=S(A),T={physicalAxisSize:hi(ci(h,l)),wuSize:r,start:n,end:o,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:v,gridlinePositionB:b,gridlinePositionC:M},w=this.ar(T),C=this.$m.wm();for(const[t,e]of this.rh)for(const[,i]of e){const e=w.get(i);if(!e)continue;const s=this.sv(T,e);C.add({Zo:0,positions:[s.tickStroke.start,s.tickStroke.end]},{lineStyle:t.vr.tickStyle}),s.gridStroke&&C.add({Zo:0,positions:s.gridStroke},{lineStyle:t.vr.gridStrokeStyle})}const k=this.Um.wm(),E=this.Ym.wm(),R={x:0,y:0};this.Ef.forEach((t=>{if(!t.Zi||t.M<e||t.M>i)return;const s=this.Zm(T,t.M,t.dm,t.Am),r=this.sv(T,s);if(t.ty!==V){const e=k.add().Ee(s.labelPosition).$a(s.labelAlignment).Be(t.ty).Qh(t.gm).yr(t.rc(t.M)).Jh(t.Nd),i=e.zs().oi();if(R.x=Math.max(R.x,i.x),R.y=Math.max(R.y,i.y),t.pm!==V){const i=e.th(),s=[{x:i[0].x-t.ka.left,y:i[0].y+t.ka.top},{x:i[1].x+t.ka.right,y:i[1].y+t.ka.top},{x:i[2].x+t.ka.right,y:i[2].y-t.ka.bottom},{x:i[3].x-t.ka.left,y:i[3].y-t.ka.bottom}];E.add({Zo:0,positions:s},{fillStyle:t.pm,strokeStyle:t.ym})}}C.add({Zo:0,positions:[r.tickStroke.start,r.tickStroke.end]},{lineStyle:t.um}),r.gridStroke&&C.add({Zo:0,positions:r.gridStroke},{lineStyle:t.fm})})),k.finishPlot(),E.finishPlot(),C.finishPlot();const I=this.wr(((t,e)=>{const i=e.ih.oi();return t.x=Math.max(t.x,i.x),t.y=Math.max(t.y,i.y),t}),{x:R.x,y:R.y}),_=Math.atan((l.y-h.y)/(l.x-h.x));this.wh.$a({x:0,y:0}).Jh(180*-_/Math.PI);const F=Le.addVec(c,Le.multiplyVec(Le.multiply(a,this.zm.jm(.5*this.Gm.mu().getThickness()+this.Tr(((t,e)=>Math.max(t,e.tickLength)),0))),r)),D=this.zm.Qm(F)||u(0,0),B=ui(ct(D,this.chart.cs.At,this.Om),ui(ui(di(I,y),li(y,this.Tr(((t,e)=>Math.max(t)),0))),di(li(this.wh.zs().oi(),.5),y)));this.wh.Ee(B),this.Gm.ev={overrideFollowing:!1,skipMousePicking:!1}}sv(t,e){const{gridlinePositionA:i,gridlinePositionB:s,gridlinePositionC:r}=t,n=e.posTickStart3D,o=e.posTickEnd3D,a=e.tickPositionRelative;let h;return It(a,0)||It(a,1)||(h=[this.hv()?{...i,x:n.x}:this.rv()?{...i,y:n.y}:this.Km()?{...i,z:n.z}:{x:0,y:0,z:0},this.hv()?{...s,x:n.x}:this.rv()?{...s,y:n.y}:this.Km()?{...s,z:n.z}:{x:0,y:0,z:0},this.hv()?{...r,x:n.x}:this.rv()?{...r,y:n.y}:this.Km()?{...r,z:n.z}:{x:0,y:0,z:0}]),{gridStroke:h,tickStroke:{start:n,end:o}}}tr(){super.tr(),this.$m.km(),this.Um.km(),this.Ym.km()}hv(){return this.zh.hv()}rv(){return this.zh.rv()}Km(){return this.zh.Km()}}class qh extends hr{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.nv=r}}const Jh=(t,e,i)=>_t(t+.1*(e-t)+Math.abs(i.rt())/100*Math.sign(e-t),Math.min(t,e),Math.max(t,e)),tl=(t,e,i,s)=>({Fr:()=>{const i=t();let s;for(const t of i){if(!t.ov())continue;const i=e(t);s=void 0===i?s:void 0!==s?Math.min(s,i):i}return s},Ir:()=>{const e=t();let s;for(const t of e){if(!t.ov())continue;const e=i(t);s=void 0===e?s:void 0!==s?Math.max(s,e):e}return s},Dr:()=>{const e=t();let i;for(const t of e){if(!t.ov())continue;const e=s(t);i=void 0===e?i:void 0!==i?Math.max(i,e):e}return i}}),el=t=>({...tl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Dr().y)),Dm:t=>t.y,qm:(t,e)=>({x:e.x,y:t.y,z:e.z}),rf:f(-1,0,0),tv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:f(e.x,0,e.z),gridlinePositionB:f(e.x,0,-e.z),gridlinePositionC:f(-e.x,0,-e.z)}},hv:()=>!1,rv:()=>!0,Km:()=>!1}),il=t=>({...tl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.Dr().z)),Dm:t=>t.z,qm:(t,e)=>({x:e.x,y:e.y,z:t.z}),rf:f(1,0,0),tv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:f(e.x,-e.y,0),gridlinePositionB:f(e.x,e.y,0),gridlinePositionC:f(-e.x,e.y,0)}},hv:()=>!1,rv:()=>!1,Km:()=>!0});class sl extends Zi{constructor(t,e,i,s,r){super(t,e,s,r),this.av=Jn,this.lv=!0,this.uv=!0,this.cv=!0,this.chart=t,this.zm=i,this.ss=new Map,this.onMouseWheel(this.chart.dv),this.onMouseDrag(this.chart.fv),this.onMouseDragStop(this.chart.Av),this.onTouchStart(this.chart.gv.onTouchStart),this.onTouchMove(this.chart.gv.onTouchMove),this.onTouchEnd(this.chart.gv.onTouchEnd)}Ki(t,e){const i=null==t?void 0:t.dataPoint;if(i)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:i},...i,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.lv=t,this}getCursorEnabled(){return this.lv}setCursorFormattingOverride(t){return this.pv=t,this}getCursorFormattingOverride(){return this.pv}setAutoScrollingEnabled(t){return this.uv=t,this.chart.cs.Ms(),this}getAutoScrollingEnabled(){return this.uv}setColorShadingStyle(t){return this.av=t,this.ss.forEach(((e,i)=>i.yv(t))),this.zm.Ms(),this}getColorShadingStyle(){return this.av}setDepthTestEnabled(t){return this.cv=t,this.ss.forEach(((e,i)=>i.mv(t))),this.zm.Ms(),this}getDepthTestEnabled(){return this.cv}vv(){}Re(){}_m(){}getXMax(){const t=this.Qa;return t?t.St():void 0}getXMin(){const t=this.Qa;return t?t.vt():void 0}getYMax(){const t=this.Qa;return t?t.bt():void 0}getYMin(){const t=this.Qa;return t?t.xt():void 0}getZMax(){const t=this.Qa;return t?t.Sv():void 0}getZMin(){const t=this.Qa;return t?t.xv():void 0}Dr(){const t=this.Qa;return t?f(t.Tl(),t.Fl(),t.bv()):f(0,0,0)}}class rl extends sl{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Cs="Box Series 3D",this.Mv=.25,this._v=!1,this.Zd=()=>de(this.Te),this.Te=me(this.ts.boxSeries3DFillStyle,r),this.Qa=this.zm.Cv().mv(this.cv).Be(this.Te).wv(this.Mv).ds(this.getHighlight()),this.As(this.Qa)}invalidateData(t){const e=t.length;if(0===e)return this;this._v&&this.chart.cs.Zn(fa.Tf);const i=t[0];if(!i)return this;let s;if("xMin"in i||"yMin"in i||"zMin"in i||"xMax"in i||"yMax"in i||"zMax"in i){s=[];for(let i=0;i<e;i+=1){const e=t[i],r="xMin"in e&&"xMax"in e,n="yMin"in e&&"yMax"in e,o="zMin"in e&&"zMax"in e;s[i]={color:e.color,value:e.value,id:e.id,xCenter:r?(e.xMin+e.xMax)/2:void 0,yCenter:n?(e.yMin+e.yMax)/2:void 0,zCenter:o?(e.zMin+e.zMax)/2:void 0,xSize:r?e.xMax-e.xMin:void 0,ySize:n?e.yMax-e.yMin:void 0,zSize:o?e.zMax-e.zMin:void 0}}}else s=t;return this.Qa.kv(s.slice()),this.chart.cs.Ms(),this._v=!0,this}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Qa.Be(t),this.chart.cs.Ms(),this}getFillStyle(){return this.Te}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Mv=void 0!==t?_t(t,0,1):void 0,this.Qa.wv(this.Mv),this.zm.Ms(),this}getRoundedEdges(){return this.Mv}ov(){return this.uv&&this.getVisible()}ze(t,e){t.ds(e),this.chart.cs.Ms()}Re(){super.Re(),this.Qa.zs(!1)}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}}class nl extends sl{constructor(t,e,i,s,r){super(t,e,i,s,r),this._v=!1,this.Zd=()=>de(this.yu.getFillStyle())}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const e=this.yu;return this.Qa.We(e),this.zm.Ms(),this}getStrokeStyle(){return this.yu}add(t){return this._v&&this.chart.cs.Zn(fa.Tf),this._v=!0,(t=Array.isArray(t)?t:[t])?(this.Qa.Al(t.slice()),this.zm.Ms(),this):this}clear(){return this.Qa.Ot(),this}getPointAmount(){const t=this.Qa;return t.pl()+t.yl()}ov(){return this.uv&&this.getPointAmount()>0&&this.getVisible()}ze(t,e){t.ds(e),this.zm.Ms()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{stroke:this.yu})}}class ol extends nl{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Cs="Line Series 3D",this.yu=me(s.lineSeries3DStrokeStyle,r),this.Tv=Pr.pointStyle3D,this.Fv(this.yu),this.Qa=this.zm.om([Uh.UserSeries]).mv(this.cv).We(this.yu).Wm(this.Tv).ds(this.getHighlight()),this.As(this.Qa)}setStrokeStyle(t){super.setStrokeStyle(t),this.Fv(this.yu);const e=this.Tv;return this.Qa.Wm(e),this}Fv(t){const e=new Tr.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.Tv=e}}class al extends nl{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Cs="Point Line Series 3D",this.Zd=()=>de(this.yu.getFillStyle())||de(this.Tv.getFillStyle()),this.Tv=me(s.pointLineSeries3DPointStyle,r),this.yu=me(s.lineSeries3DStrokeStyle,r),this.Iv(),this.Qa=this.zm.om([Uh.UserSeries]).mv(this.cv).We(this.yu).Wm(this.Tv).ds(this.getHighlight()),this.As(this.Qa)}setPointStyle(t){return this.Tv="function"==typeof t?t(this.Tv):t,this.Iv(),this.Qa.Wm(this.Tv),this.zm.Ms(),this}getPointStyle(){return this.Tv}setStrokeStyle(t){super.setStrokeStyle(t);const e=this.yu,i=Math.abs(e.getThickness()),s=this.Tv,r=s.getSize();i>("object"==typeof r?Math.max(r.x,r.y,r.z):r)&&(this.Tv=s.setSize(i)),this.Iv();const n=this.Tv;return this.Qa.Wm(n),this.zm.Ms(),this}Iv(){const t=this.Tv,e=t.getSize();this.Tv=t.setSize(e)}ze(t,e){t.ds(e),this.zm.Ms()}}class hl extends sl{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this._v=!1,((null==n?void 0:n.individualPointSizeAxisEnabled)||(null==n?void 0:n.individualPointSizeEnabled))&&this.chart.cs.Zn(fa.Ff)}add(t){return this._v&&this.chart.cs.Zn(fa.Tf),this._v=!0,(t=Array.isArray(t)?t:[t])?(this.Qa.Al(t.slice()),this.zm.Ms(),this):this}clear(){return this.Qa.Ot(),this}getPointAmount(){const t=this.Qa;return t.pl()+t.yl()}ov(){return this.uv&&this.getPointAmount()>0&&this.getVisible()}ze(t,e){t.ds(e),this.zm.Ms()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{point3D:this.Pv})}}class ll extends hl{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Cs="Point Series 3D",this.Zd=()=>de(this.Pv.getFillStyle());const o=void 0!==(null==n?void 0:n.automaticColorIndex)?n.automaticColorIndex:this.chart.getSeries().length;this.Pv=me(s.pointSeries3DPointStyle,o);const a={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...n};this.Qa=this.zm.Bv(a).mv(this.cv).Dv(this.Pv).ds(this.getHighlight()),this.As(this.Qa)}setPointStyle(t){this.Pv="function"==typeof t?t(this.Pv):t;const e=this.Pv;return this.Qa.Dv(e),this.zm.Ms(),this}getPointStyle(){return this.Pv}}class ul extends hl{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Cs="Point Cloud Series 3D",this.Zd=()=>de(this.Pv.getFillStyle());const o=this.chart.getSeries().length;this.Pv=me(s.pointCloudSeries3DPointStyle,o);const a={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...n};this.Qa=this.zm.Bv(a).Dv(this.Pv).ds(this.getHighlight()),this.As(this.Qa)}setPointStyle(t){this.Pv="function"==typeof t?t(this.Pv):t;const e=this.Pv;return this.Qa.Dv(e),this.zm.Ms(),this}getPointStyle(){return this.Pv}}const cl={Triangulated:ll,Pixelated:ul};class dl extends oh{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.Lv=[],this.Rv=0,this.Ev=t=>{const e=this.Lv.indexOf(t);e>=0&&(this.Lv.splice(e,1),this.R.emit("seriesDispose",this,t))},this.onSeriesBackgroundMouseEnter=t=>this.R.on("mouseEnterSeriesBackground",t),this.onSeriesBackgroundMouseLeave=t=>this.R.on("mouseLeaveSeriesBackground",t),this.onSeriesBackgroundMouseMove=t=>this.R.on("mouseMoveSeriesBackground",t),this.onSeriesBackgroundMouseDown=t=>this.R.on("mouseDownSeriesBackground",t),this.onSeriesBackgroundMouseUp=t=>this.R.on("mouseUpSeriesBackground",t),this.onSeriesBackgroundMouseClick=t=>this.R.on("mouseClickSeriesBackground",t),this.onSeriesBackgroundMouseDoubleClick=t=>this.R.on("mouseDoubleClickSeriesBackground",t),this.onSeriesBackgroundMouseDragStart=t=>this.R.on("mouseDragStartSeriesBackground",t),this.onSeriesBackgroundMouseDrag=t=>this.R.on("mouseDragSeriesBackground",t),this.onSeriesBackgroundMouseDragStop=t=>this.R.on("mouseDragStopSeriesBackground",t),this.onSeriesBackgroundMouseWheel=t=>this.R.on("mouseWheelSeriesBackground",t),this.onSeriesBackgroundTouchStart=t=>this.R.on("touchStartSeriesBackground",t),this.onSeriesBackgroundTouchMove=t=>this.R.on("touchMoveSeriesBackground",t),this.onSeriesBackgroundTouchEnd=t=>this.R.on("touchEndSeriesBackground",t),this.offSeriesBackgroundMouseEnter=t=>this.R.off(t,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=t=>this.R.off(t,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=t=>this.R.off(t,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=t=>this.R.off(t,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=t=>this.R.off(t,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=t=>this.R.off(t,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=t=>this.R.off(t,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=t=>this.R.off(t,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=t=>this.R.off(t,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=t=>this.R.off(t,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=t=>this.R.off(t,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=t=>this.R.off(t,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=t=>this.R.off(t,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=t=>this.R.off(t,"touchEndSeriesBackground"),this.zv=this.hs.kg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.Lv.forEach((e=>e.setAnimationHighlight(t))),this}Vv(t,e){this.zv.gs([e]),t.setMouseMoveEventHandler(((t,e)=>{this.R.emit("mouseMoveSeriesBackground",this,e)})).setMouseEnterEventHandler(((t,e)=>{this.R.emit("mouseEnterSeriesBackground",this,e)})).setMouseLeaveEventHandler(((t,e)=>{this.R.emit("mouseLeaveSeriesBackground",this,e)})).setMouseDownEventHandler(((t,e)=>this.R.emit("mouseDownSeriesBackground",this,e))).setMouseUpEventHandler(((t,e)=>this.R.emit("mouseUpSeriesBackground",this,e))).setMouseClickEventHandler(((t,e)=>this.R.emit("mouseClickSeriesBackground",this,e))).setMouseDoubleClickEventHandler(((t,e)=>this.R.emit("mouseDoubleClickSeriesBackground",this,e))).setMouseWheelEventHandler(((t,e)=>this.R.emit("mouseWheelSeriesBackground",this,e))).setMouseDragStartEventHandler(((t,e,i)=>this.R.emit("mouseDragStartSeriesBackground",this,e,i))).setMouseDragEventHandler(((t,e,i,s,r)=>this.R.emit("mouseDragSeriesBackground",this,e,i,s,r))).setMouseDragStopEventHandler(((t,e,i,s)=>this.R.emit("mouseDragStopSeriesBackground",this,e,i,s))).setTouchStartEventHandler(((t,e)=>{this.R.emit("touchStartSeriesBackground",this,e)})).setTouchMoveEventHandler(((t,e)=>{this.R.emit("touchMoveSeriesBackground",this,e)})).setTouchEndEventHandler(((t,e)=>{this.R.emit("touchEndSeriesBackground",this,e)}))}setSeriesBackgroundFillStyle(t){return this.Ov.Be(t),this.cs.Ms(),this}getSeriesBackgroundFillStyle(){return this.Ov.Xh()}setSeriesBackgroundStrokeStyle(t){return this.Nv.De(t),this.cs.Ms(),this}getSeriesBackgroundStrokeStyle(){return this.Nv.mo()}setSeriesBackgroundEffect(t){return this.zv.bs(t),this.cs.Ms(),this}getSeriesBackgroundEffect(){return this.zv._s()}Gv(t){this.Lv.push(t),void 0!==this.Wv&&t.setHighlightOnHover(this.Wv),this.R.emit("seriesAdded",this,t)}ef(){return this.Lv}setSeriesHighlightOnHover(t){return this.Wv=t,this.Lv.forEach((e=>e.setHighlightOnHover(t))),this}dispose(){return this.Lv.slice().forEach(Et),super.dispose()}Ep(t){return this.R.on("seriesAdded",t)}Uv(t){return this.R.off(t)}Yv(t){return this.R.on("seriesDispose",t)}Hv(t){return this.R.off(t)}}const fl=Le.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class gl{constructor(t,e,i,s){this.$v=!0,this.Xv=!0,this.jv=2*-Math.PI/2160,this.Zv=2*Math.PI/2160,this.Qv=.1,this.Jv=1*Math.PI/180,this.Kv=t,this.qv=e,this.tS=i,this.Qm=s}getDefaultCameraConfiguration(t){const e={direction:fl,location:Le.multiply(fl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:e.direction,cameraLocation:e.location})||e}applyCameraInteractions(t,e){let i={direction:t.cameraDirection,location:t.cameraLocation};return e.forEach((t=>{"rotate"===t.type?i=this.iS(i,t):"wheel-zoom"===t.type?i=this.sS(i,t):"rotate+zoom"===t.type?i=this.eS(i,t):"fixed-rotate"===t.type?i=this.hS(i,t):"move"===t.type&&(i=this.rS(i,t))})),this.$v?i=this.nS(t.boundingBox,i):this.Xv&&(i=this.oS(t.boundingBox,i)),i}iS(t,e){const{rotation:i}=e,s=t.location,r=Le.multiply(Le.normalize(t.location),-1),{Right:n,Up:o}=this.aS(r);let a=s;const h=this.lS(r),l=i.x*this.jv*h;a=Le.rotateAroundAxis(a,o,l);const u=(i.y>0?1:-1)*Math.min(Math.abs(i.y)*this.Zv,h-this.Jv);return 0!==u&&(a=Le.rotateAroundAxis(a,n,u)),{location:a,direction:Le.multiply(Le.normalize(a),-1)}}sS(t,e){const{deltaY:i}=e;this.$v&&this.uS(!1);const s=t.location,r=Le.multiply(Le.normalize(s),-1),n=i*this.Qv,o=Le.length(s)*-n;return{direction:r,location:Le.addVec(s,Le.multiply(r,o))}}eS(t,e){const{rotation:i,cameraDistance:s}=e;this.$v&&this.uS(!1);let r=this.iS(t,{type:"rotate",rotation:i});const n=r.location,o=Le.multiply(Le.normalize(n),-1),a=Le.multiply(o,-s);return r={direction:Le.multiply(Le.normalize(a),-1),location:a},r}hS(t,e){this.$v&&this.uS(!1);const{rotation:i}=e,s=t.location,r=t.direction,{Right:n,Up:o}=this.aS(r),a=i.x*this.jv;let h=Le.normalize(Le.rotateAroundAxis(r,o,a));const l=i.y*this.Zv;return h=Le.normalize(Le.rotateAroundAxis(h,n,l)),{location:s,direction:h}}rS(t,e){this.$v&&this.uS(!1),this.Xv=!1;const{amountRight:i,amountForward:s}=e,r=t.location,n=t.direction,{Right:o}=this.aS(n);return{location:Le.addVec(r,Le.multiply(n,.01*s),Le.multiply(o,.01*i)),direction:n}}boundingBoxChanged(t){const e={location:t.cameraLocation,direction:Le.multiply(Le.normalize(t.cameraLocation),-1)};return this.$v?this.nS(t.boundingBox,e):this.oS(t.boundingBox,e)}cameraLocationChanged(t){const e={location:t.cameraLocation,direction:Le.multiply(Le.normalize(t.cameraLocation),-1)};return this.$v?this.nS(t.boundingBox,e):this.oS(t.boundingBox,e)}viewportChanged(t){const e={location:t.cameraLocation,direction:Le.multiply(Le.normalize(t.cameraLocation),-1)};if(this.$v)return this.nS(t.boundingBox,e)}nS(t,e,i){let s=e;i=void 0!==i?i:0,s=this.cS(t,s,100,20,1,i,5);const r=this.lS(s.direction);return s=this.dS(s,this.fS(t,s,100,1),r),s}cS(t,e,i,s,r,n,o){return ml(n,o,(t=>({direction:e.direction,location:Le.multiply(e.direction,-t)})),(e=>this.AS(t,e)),i,r,"linear",s)}fS(t,e,i,s){const{Right:r,Left:n,Up:o,Down:a}=this.aS(e.direction),h=this.gS(t,!1,e);let l=e;const u=s,c=.1;return Math.abs(h.bottom-h.top)>u&&(l=h.bottom<h.top?yl(0,c,(t=>({location:l.location,direction:Le.normalize(Le.lerp(l.direction,a,t))})),(e=>this.pS(t,e)),0,u,!0,i):yl(0,c,(t=>({location:l.location,direction:Le.normalize(Le.lerp(l.direction,o,t))})),(e=>this.pS(t,e)),0,u,!0,i)),Math.abs(h.left-h.right)>u&&(l=h.left<h.right?yl(0,c,(t=>({location:l.location,direction:Le.normalize(Le.lerp(l.direction,n,t))})),(e=>this.yS(t,e)),0,u,!0,i):yl(0,c,(t=>({location:l.location,direction:Le.normalize(Le.lerp(l.direction,r,t))})),(e=>this.yS(t,e)),0,u,!0,i)),l}AS(t,e){const i=this.gS(t,!0,e);return Math.min(i.left+i.right,i.top+i.bottom)}yS(t,e){const i=this.gS(t,!1,e);return Math.abs(i.left-i.right)}pS(t,e){const i=this.gS(t,!1,e);return Math.abs(i.top-i.bottom)}gS(t,e,i){const s=Je(this.mS(t,e,i).map((t=>ct(t,this.Kv,this.qv))));return{left:s.min.x,right:this.qv.x.getInnerEnd()-s.max.x,top:this.qv.y.getInnerEnd()-s.max.y,bottom:s.min.y}}mS(t,e,i){const s=this.tS,r=f(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),n=f(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),o=[],a=e?16:4,h=(r.x+n.x)/2,l=(r.z+n.z)/2,u=Math.sqrt(2)*(n.x-h),c=Math.sqrt(2)*(n.z-l);return[r.y,n.y].forEach((t=>{for(let e=0;e<a;e+=1){const i=Math.PI/4+2*Math.PI*e/a,s=h+Math.cos(i)*u,r=l+Math.sin(i)*c;o.push({x:s,y:t,z:r})}})),o.map((t=>this.Qm(t,i))).filter((t=>void 0!==t))}oS(t,e){const i=Le.length(e.location),s=this.vS(t);return i<s?{direction:e.direction,location:Le.multiply(e.direction,-s)}:e}vS(t){return.8*Math.sqrt(t.x**2+t.y**2+t.z**2)}aS(t){const e=f(0,1,0),i=Le.normalize(Le.cross(e,Le.multiply(t,-1)));let s=Le.cross(i,t);return s.y=Math.abs(s.y),s=Le.normalize(s),{Right:i,Up:s,Down:Le.multiply(s,-1),Left:Le.multiply(i,-1)}}lS(t){const e={x:0,y:1,z:0},i=Le.angle(t,e),s=Le.angle(t,Le.multiply(e,-1));return Math.min(i,s)}dS(t,e,i){return{location:Le.lerp(t.location,e.location,i),direction:Le.normalize(Le.lerp(t.direction,e.direction,i))}}uS(t){return this.$v=t,this}SS(){return this.$v}}const ml=(t,e,i,s,r,n,o,a)=>{let h,l=0,u=(e+t)/2;do{const a=i(u);if(h={value:u,result:a,score:s(a)},Math.abs(h.score-r)<=n)break;const c=h.score>r;c&&"linear"===o||!c&&"reversed"===o?(u=(h.value+t)/2,e=h.value):(u=(h.value+e)/2,t=h.value),l+=1}while(l<a);return h.result},yl=(t,e,i,s,r,n,o,a)=>{let h,l=0,u=t;do{const c=i(u),d=s(c);if(void 0===h||Math.abs(d-r)<Math.abs(h.score-r)){if(h={value:u,result:c,score:s(c)},Math.abs(h.score-r)<=n)break}else if(o)break;l+=1,u+=1/(a-1)*(e-t)}while(l<a);return h.result};class pl extends sl{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Cs="Surface Grid Series 3D",this.xS={},this._v=!1,this.Zd=()=>de(this.Te),this.av=Qn;const o=void 0!==(null==s?void 0:s.automaticColorIndex)?s.automaticColorIndex:this.chart.getSeries().length;this.Te=me(this.ts.surfaceGridSeries3DFillStyle,o),this.bS=me(this.ts.surfaceGridSeries3DWireframeStyle,o);const a={heatmapDataType:"intensity",dataOrder:s.dataOrder||"columns",columns:s.columns,rows:s.rows};this.Kn=a,this.Qa=this.zm._S(a).Be(this.Te).MS(this.bS).yv(this.av).ds(this.getHighlight()),this.As(this.Qa),this.setHighlightOnHover(!1)}Ki(t,e){const i=null==t?void 0:t.dataPoint;if(i)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:i},...i,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:K(this.Te)?this.Te.lut:void 0}}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}wS(){const t=this.xS.start||{x:0,z:0};let e;e=this.xS.end?{x:(this.xS.end.x-t.x)/this.Kn.columns,z:(this.xS.end.z-t.z)/this.Kn.rows}:this.xS.step?this.xS.step:{x:1,z:1},this.Qa.CS(t,e),this.chart.cs.Ms()}setStart(t){return this.xS.start=t,this.wS(),this}getStart(){return this.Qa.kS().start}setStep(t){return this.xS.step=t,this.wS(),this}getStep(){return this.Qa.kS().step}setEnd(t){return this.xS.end=t,this.wS(),this}getEnd(){return this.Qa.kS().end}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Qa.Be(this.Te),this.zm.Ms(),this}getFillStyle(){return this.Te}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.Qa.MS(this.bS),this.zm.Ms(),this}getWireframeStyle(){return this.Qa.TS()}setIntensityInterpolation(t){return t=t||"disabled",this.Qa.FS(t),this.zm.Ms(),this}getIntensityInterpolation(){return this.Qa.IS()}invalidateIntensityValues(t){if(this._v&&this.chart.cs.Zn(fa.Tf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Kn.dataOrder?t.length:t[0].length,rows:"rows"===this.Kn.dataOrder?t.length:t[0].length},i="columns"===this.Kn.dataOrder?this.Kn.columns:this.Kn.rows,s="columns"===this.Kn.dataOrder?this.Kn.rows:this.Kn.columns;if(e.x>i||e.y>s){if(!0===this.chart.SA.io){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Kn.columns}x${this.Kn.rows}, input ${e.columns}x${e.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.Qa.PS({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Kn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Kn.dataOrder?t.values.length:t.values[0].length};let i="columns"===this.Kn.dataOrder?t.iColumn:t.iRow;const s=i+e.primary-1;let r="columns"===this.Kn.dataOrder?t.iRow:t.iColumn;const n=r+e.secondary-1,o=("columns"===this.Kn.dataOrder?this.Kn.columns:this.Kn.rows)-1,a=("columns"===this.Kn.dataOrder?this.Kn.rows:this.Kn.columns)-1;if(i<0||r<0||s>o||n>a){if(!0===this.chart.SA.io){const i=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Kn.columns}x${this.Kn.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(i)}const h=Math.max(-i,0),l=Math.max(-r,0),u=Math.max(s-o,0),c=Math.max(n-a,0),d=e.primary-(h+u),f=[];if(0===l&&0===c)for(let e=0;e<d;e+=1)f[e]=t.values[h+e];else for(let e=0;e<d;e+=1)f[e]=t.values[h+e].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},i=Math.max(i,0),r=Math.max(r,0)}this.Qa.PS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.zm.Ms(),this._v=!0,this}invalidateHeightMap(t){if(this._v&&this.chart.cs.Zn(fa.Tf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Kn.dataOrder?t.length:t[0].length,rows:"rows"===this.Kn.dataOrder?t.length:t[0].length},i="columns"===this.Kn.dataOrder?this.Kn.columns:this.Kn.rows,s="columns"===this.Kn.dataOrder?this.Kn.rows:this.Kn.columns;if(e.x>i||e.y>s){if(!0===this.chart.SA.io){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Kn.columns}x${this.Kn.rows}, input ${e.columns}x${e.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.Qa.DS({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Kn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Kn.dataOrder?t.values.length:t.values[0].length};let i="columns"===this.Kn.dataOrder?t.iColumn:t.iRow;const s=i+e.primary-1;let r="columns"===this.Kn.dataOrder?t.iRow:t.iColumn;const n=r+e.secondary-1,o=("columns"===this.Kn.dataOrder?this.Kn.columns:this.Kn.rows)-1,a=("columns"===this.Kn.dataOrder?this.Kn.rows:this.Kn.columns)-1;if(i<0||r<0||s>o||n>a){if(!0===this.chart.SA.io){const i=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Kn.columns}x${this.Kn.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(i)}const h=Math.max(-i,0),l=Math.max(-r,0),u=Math.max(s-o,0),c=Math.max(n-a,0),d=e.primary-(h+u),f=[];if(0===l&&0===c)for(let e=0;e<d;e+=1)f[e]=t.values[h+e];else for(let e=0;e<d;e+=1)f[e]=t.values[h+e].slice(l,0===c?void 0:-c);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},i=Math.max(i,0),r=Math.max(r,0)}this.Qa.DS({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.zm.Ms(),this._v=!0,this}setCullMode(t){return this.Qa.BS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Qa.LS()}vv(){}Re(){}_m(){}ov(){return this.uv&&this.getVisible()}ze(t,e){t.ds(e),this.zm.Ms()}}class xl extends sl{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Cs="Surface Grid Series 3D",this.xS={},this.Zd=()=>de(this.Te),this.chart.cs.Zn(fa.Tf),this.av=Qn;const o=void 0!==(null==s?void 0:s.automaticColorIndex)?s.automaticColorIndex:this.chart.getSeries().length;this.Te=me(this.ts.surfaceScrollingGridSeries3DFillStyle,o),this.bS=me(this.ts.surfaceScrollingGridSeries3DWireframeStyle,o);const a={heatmapDataType:"intensity",scrollDimension:s.scrollDimension||"columns",columns:s.columns,rows:s.rows};this.Kn=a,this.Qa=this.zm.RS(a).Be(this.Te).MS(this.bS).yv(this.av).ds(this.getHighlight()),this.As(this.Qa),this.setHighlightOnHover(!1)}Ki(t,e){const i=null==t?void 0:t.dataPoint;if(i)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:i},...i,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:K(this.Te)?this.Te.lut:void 0}}wS(){const t=this.xS.start||{x:0,z:0};let e;e=this.xS.step?this.xS.step:{x:1,z:1},this.Qa.CS(t,e),this.chart.cs.Ms()}setStart(t){return this.xS.start=t,this.wS(),this}getStart(){return this.Qa.kS().start}setStep(t){return this.xS.step=t,this.wS(),this}getStep(){return this.Qa.kS().step}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Qa.Be(this.Te),this.zm.Ms(),this}getFillStyle(){return this.Te}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.Qa.MS(this.bS),this.zm.Ms(),this}getWireframeStyle(){return this.Qa.TS()}setIntensityInterpolation(t){return t=t||"disabled",this.Qa.FS(t),this.zm.Ms(),this}getIntensityInterpolation(){return this.Qa.IS()}clear(){return this.Qa.Ot(),this.zm.Ms(),this}addValues(t){if(!t)return this;let e=t.yValues,i=t.intensityValues;if(!e&&!i)return this;if(e&&0===e.length&&(e=void 0),i&&0===i.length&&(i=void 0),e){const t=e[0].length,i=0+t-1,s="columns"===this.Kn.scrollDimension?this.Kn.rows:this.Kn.columns;if(i>s-1){if(!0===this.chart.SA.io){const e=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${s} ${"columns"===this.Kn.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(e)}const i=[];for(let t=0;t<e.length;t+=1)i[t]=e[t].slice(0,s+1);e=i}}if(i){const t=i[0].length,e=0+t-1,s="columns"===this.Kn.scrollDimension?this.Kn.rows:this.Kn.columns;if(e>s-1){if(!0===this.chart.SA.io){const e=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${s} ${"columns"===this.Kn.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(e)}const e=[];for(let t=0;t<i.length;t+=1)e[t]=i[t].slice(0,s+1);i=e}}if(e&&i){const t=e.length,s=i.length;if(t!==s){if(!0===this.chart.SA.io){const e=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${s}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Tt.console.warn(e)}t>s?e=e.slice(0,s):i=i.slice(0,t)}}const s=e?e.length:null==i?void 0:i.length,r=e?e[0].length:null==i?void 0:i[0].length;return this.Qa.ES({startPrimary:0,startSecondary:0,lengthPrimary:s,lengthSecondary:r,heightMapValues:e,intensityValues:i}),this.zm.Ms(),this}setCullMode(t){return this.Qa.BS("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Qa.LS()}vv(){}Re(){}_m(){}ov(){return this.uv&&this.getVisible()}ze(t,e){t.ds(e),this.zm.Ms()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}}const Al=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof wl),Sl=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z);class vl extends sl{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Cs="Mesh Model 3D",this.zS=new Float32Array,this.At={x:1,y:1,z:1},this.VS={x:0,y:0,z:0},this.OS={x:0,y:0,z:0},this.NS={x:0,y:0,z:0},this.GS={x:0,y:0,z:0},this.tl=Oe,this.Zd=()=>de(this.getFillStyle());const o=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.Qa=this.zm.WS().mv(this.cv).Be(me(this.ts.meshModel3DFillStyle||this.ts.pointSeriesFillStyle,o)).ds(this.getHighlight()),this.As(this.Qa)}Ki(t,e){const i=this.getFillStyle();return De({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:K(i)?i.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0},(()=>{const s=this.Qa.US(t,e);if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.mg,axisLocation:s.coordAxis},...s.coordAxis,index:s.index,value:s.value,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:K(i)?i.lut:void 0}}))}setModelGeometry(t){const{indices:e,vertices:i,normals:s}=t;let r=ze,n=Ve,o=ze,a=Ve,h=ze,l=Ve;for(let t=0;t<i.length;t+=3){const e=i[t],s=i[t+1],u=i[t+2];r=Math.max(r,e),n=Math.min(n,e),o=Math.max(o,s),a=Math.min(a,s),h=Math.max(h,u),l=Math.min(l,u)}this.tl={min:{x:n,y:a,z:l},max:{x:r,y:o,z:h}};for(let t=0;t<i.length;t+=3)i[t]-=this.tl.min.x,i[t+1]-=this.tl.min.y,i[t+2]-=this.tl.min.z;return this.GS={x:this.tl.max.x-this.tl.min.x,y:this.tl.max.y-this.tl.min.y,z:this.tl.max.z-this.tl.min.z},this.zS=i instanceof Float32Array?i:new Float32Array(i),this.checkedNormals=s&&!Number.isNaN(s[0])?s instanceof Float32Array?s:new Float32Array(s):void 0,this.checkedNormals||this.setColorShadingStyle(Qn),this.Qa.YS({vertices:this.zS,normals:this.checkedNormals,indices:e instanceof Uint16Array?e:new Uint16Array(e),modelSize:this.GS}),this.chart.cs.Ms(),this}setVertexValues(t){return this.Qa.HS(t),this.chart.cs.Ms(),this}setScale(t){const e={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.At=e,this.Qa.$S(e),this.chart.cs.Ms(),this}getScale(){return this.At}setModelLocation(t){return this.OS=t,this.Qa.XS(t),this.chart.cs.Ms(),this}getModelLocation(){return this.OS}setModelAlignment(t){return this.VS=t,this.Qa.jS(t),this.chart.cs.Ms(),this}getModelAlignment(){return this.VS}setModelRotation(t){const e={x:xi(t.x),y:xi(t.y),z:xi(t.z)};return this.NS=e,this.Qa.ZS(this.NS),this.chart.cs.Ms(),this}getModelRotation(){return this.NS}setBackfaceCullingMode(t){return this.Qa.QS(t),this.chart.cs.Ms(),this}getBackfaceCullingMode(){return this.Qa.JS()}setFillStyle(t){return this.Qa.Be(t),this.chart.cs.Ms(),this}getFillStyle(){return this.Qa.Xh()}setColorShadingStyle(t){return this.checkedNormals||t!==Jn?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new to.Simple))}ov(){return!1}ze(t,e){t.ds(e),this.chart.cs.Ms()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.getFillStyle()})}}class bl extends xh{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n),this.chart=o,this.KS=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(n.cursor3DGridStrokeStyleX).setTickStyle(n.cursor3DTickStrokeStyleX).setTextFillStyle(n.cursor3DTickLabelFillStyleX).setTextFont(n.cursor3DTickLabelFontX).setBackgroundFillStyle(n.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(n.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(n.cursor3DTickLabelPaddingX),this.qS=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(n.cursor3DGridStrokeStyleY).setTickStyle(n.cursor3DTickStrokeStyleY).setTextFillStyle(n.cursor3DTickLabelFillStyleY).setTextFont(n.cursor3DTickLabelFontY).setBackgroundFillStyle(n.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(n.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(n.cursor3DTickLabelPaddingY),this.tx=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(n.cursor3DGridStrokeStyleZ).setTickStyle(n.cursor3DTickStrokeStyleZ).setTextFillStyle(n.cursor3DTickLabelFillStyleZ).setTextFont(n.cursor3DTickLabelFontZ).setBackgroundFillStyle(n.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(n.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(n.cursor3DTickLabelPaddingZ)}setTickX(t){return t(this.KS),this.chart.cs.Ms(),this}setTickY(t){return t(this.qS),this.chart.cs.Ms(),this}setTickZ(t){return t(this.tx),this.chart.cs.Ms(),this}setTicks(t){return t(this.KS),t(this.qS),t(this.tx),this.chart.cs.Ms(),this}dispose(){return super.dispose(),this.KS.dispose(),this.qS.dispose(),this.tx.dispose(),this}Re(){return this.KS.setVisible(this.Zi&&this.np),this.qS.setVisible(this.Zi&&this.np),this.tx.setVisible(this.Zi&&this.np),super.Re()}setPosition(t){this.np=!0;const e=this.renderingScale,i=th(t.resultTableScale,e),s=i===this.scale?t.resultTable:ct(t.resultTable,i,this.scale);this.Yp.setPosition(s),this.KS.setValue(t.axisLocation.x),this.qS.setValue(t.axisLocation.y),this.tx.setValue(t.axisLocation.z);let r=this.sy[0];if(!r){const t=new Eo(this.Bs,this.renderingScale,this.scale,Rt,this.ts).setMouseInteractions(!1).setFillStyle(this.ts.cursorPointMarkerFillStyle).setSize(this.ts.cursorPointMarkerSize).setShape(this.ts.cursorPointMarkerShape);r={pointMarker:t,targetVisible:!0},this.sy.push(r),this.ny.forEach((e=>e(t)))}return r.pointMarker.setPosition(s),this.chart.cs.Ms(),this}}class Ml{constructor(t,e){this.gy=[],this.py=(t,e)=>(this.gy.forEach((i=>i(t,e))),t),this.addStyler=t=>new Ml(this.ly,this.gy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new Ml(t,this.gy.map((t=>t))),this.yy=(t,e,i,s,r,n)=>this.py(new bl(t,e,i,s,this.ly,r,n),r),this.ly=t,this.gy=e}}const Tl=new Ml(To,[(t,e)=>{Ah(t)}]);class wl extends dl{constructor(t,e,i,s,r,n,o){var a;super(t,e,i,e.kp("chart3D bg",0),s,e.cs.ts.chart3DBackgroundFillStyle,e.cs.ts.chart3DBackgroundStrokeStyle,e.cs.ts.chart3DTitleFont,e.cs.ts.chart3DTitleFillStyle,n),this.ix=1,this.sx=[],this.hx=2,this.nx=!0,this.ox=!0,this.lx=!0,this.ux=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.yn=[],this.wn=()=>{const t=this.zm.Ax();this.yx.gx(t),this.mx.gx(t);const e=this.vx.viewportChanged(this.Sx());e&&this.xx(e),this.cs.Ms()},this.bx=!1,this.fv=(t,e,i,s,r)=>{if(this.bx=!0,this.lx){const t=r;this.sx.push({type:"rotate",rotation:t}),this.cs.Ms(),Qt(e)}},this.Av=(t,e,i,s,r)=>{this.bx=!1},this.dv=(t,e)=>{if(this.ox){if(this.nx)Math.sign(this.ux)!==Math.sign(e.deltaY)?this.ux=ye(e):this.ux+=ye(e);else{const t=ye(e);this.sx.push({type:"wheel-zoom",deltaY:t})}this.cs.Ms(),Qt(e)}},this.cs.Zn(fa.Sf),this.bh.yr("Chart3D"),this.Mx=i.d3(),this.Mx.x.q(-1,1),this.Mx.y.q(-1,1),this.Mx.z.q(-1,1),this.zm=e._x("chart3D layer3D",0,this.Mx),this.yx=e.wx("chart3D series bg",0),this.mx=e.Xy("chart3D axis ui",1),this.Cx={x:new Qh(this,(a=()=>this.Lv,{...tl(a,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Dr().x)),Dm:t=>t.x,qm:(t,e)=>({x:t.x,y:e.y,z:e.z}),rf:f(0,-1,0),tv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:f(0,e.y,e.z),gridlinePositionB:f(0,e.y,-e.z),gridlinePositionC:f(0,-e.y,-e.z)}},hv:()=>!0,rv:()=>!1,Km:()=>!1}),this.Mx.x,this.ts,this.zm,this.mx,this.mg,!1,this.hs),y:new Qh(this,el((()=>this.Lv)),this.Mx.y,this.ts,this.zm,this.mx,this.mg,!1,this.hs),z:new Qh(this,il((()=>this.Lv)),this.Mx.z,this.ts,this.zm,this.mx,this.mg,!1,this.hs)},this.kx=this.zm.om([Uh.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.ts.chart3DBoundingBoxStrokeStyle),this.Ov=this.yx.lc(this.cs.At,yn.Simple).Be(this.ts.chart3DSeriesBackgroundFillStyle).De(nt).setMouseInteractions(!0),this.Nv=this.yx.lc(this.cs.At,yn.Simple).Be(V).De(this.ts.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Vv(this.Ov,this.Nv),this.Tx({x:1,y:1,z:1},!0),this.vx=new gl(this.cs.At,this.mg,this.Mx,((t,e)=>(e&&this.xx(e),this.zm.Qm(t)))),this.Fx=this.vx.getDefaultCameraConfiguration(this.Ix(this.Px)),this.xx(this.Fx);const h=Dt(o?o.cursorBuilder:void 0,Tl),l=e.Zy();let c;this.Qy=uh(this,l,h.yy(l,this.mg,this.mg,Rt,this.ts,this),this,"show-pointed",Cl,(()=>0)),this.gv=Ji(new is(((t,e,i)=>{c={locationOne:e,locationTwo:i,cameraLocation:this.zm.getCameraLocation()}}),((t,e,i,s,r,n)=>{if(!this.lx&&!this.ox)return;const o=(c.locationOne.x-c.locationTwo.x)**2+(c.locationOne.y-c.locationTwo.y)**2,a=(e.x-i.x)**2+(e.y-i.y)**2,h=Le.length(c.cameraLocation),l=o/a*h,d=u((s.x+r.x)/2,(s.y+r.y)/2);this.sx.push({type:"rotate+zoom",rotation:this.lx?d:{x:0,y:0},cameraDistance:this.ox?l:h}),this.cs.Ms(),Qt(n)}),(t=>{})),new es((t=>{}),((t,e,i,s,r)=>{if(this.lx){const t=s;this.sx.push({type:"rotate",rotation:t}),this.cs.Ms(),Qt(r)}}),(t=>{}))),this.onBackgroundTouchStart(this.gv.onTouchStart),this.onBackgroundTouchMove(this.gv.onTouchMove),this.onBackgroundTouchEnd(this.gv.onTouchEnd),this.onSeriesBackgroundTouchStart(this.gv.onTouchStart),this.onSeriesBackgroundTouchMove(this.gv.onTouchMove),this.onSeriesBackgroundTouchEnd(this.gv.onTouchEnd),this.onBackgroundMouseDrag(this.fv),this.onBackgroundMouseDragStop(this.Av),this.onBackgroundMouseWheel(this.dv),this.onBackgroundMouseDown(((t,e)=>{Qt(e)})),this.onSeriesBackgroundMouseDrag(this.fv),this.onSeriesBackgroundMouseDragStop(this.Av),this.onSeriesBackgroundMouseWheel(this.dv),this.onSeriesBackgroundMouseDown(((t,e)=>{Qt(e)})),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.onResize(this.wn),this.wn(),this.Cp(r,this.mg)}setProjection(t){this.zm.Dx(t);const e=this.vx.viewportChanged(this.Sx());return e&&this.xx(e),this.cs.Ms(),this}getProjection(){return this.zm.Bx()}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=Tl){const e=this.gp(),i=t.yy(e,this.mg,this.mg,this.up(e),this.ts,this);return this.Mp(i),i}addPointSeries(t){const e=new(t&&t.type||ll)(this,this.Ev,this.zm,this.ts,this.cs.hs,t);return this.Gv(e),e}addLineSeries(t){const e=new ol(this,this.Ev,this.zm,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addPointLineSeries(t){const e=new al(this,this.Ev,this.zm,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addSurfaceGridSeries(t){const e=new pl(this,this.Ev,this.zm,t,this.ts,this.cs.hs);return this.Gv(e),e}addSurfaceScrollingGridSeries(t){const e=new xl(this,this.Ev,this.zm,t,this.ts,this.cs.hs);return this.Gv(e),e}addBoxSeries(t){const e=new rl(this,this.Ev,this.zm,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addMeshModel(t){const e=new vl(this,this.Ev,this.zm,this.ts,t,this.cs.hs);return this.Gv(e),e}translateCoordinate(t,e,i){if(Al(e)||Al(i)||Sl(t)){if(Al(e)&&Al(i)&&Sl(t)){if("axes"===e.id&&"world"===i.id)return this.zm.Lx(t);if("world"===e.id&&"axes"===i.id)return this.zm.Rx(t);if(e.id===i.id)return t}if(Al(e)&&Oi(i)&&Sl(t)){const e=this.zm.Qm(t);return e?this.cs.Go({engineX:e.x,engineY:e.y}):{clientX:-1,clientY:-1}}if(Al(e)&&Yi(i)&&Sl(t)){const e=this.zm.Qm(t);return e?ct(e,this.cs.At,this.mg):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return eh(t,e,i,this.mg,this.cs)}getDefaultAxisX(){return this.Cx.x}getDefaultAxisY(){return this.Cx.y}getDefaultAxisZ(){return this.Cx.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.Cx.x,this.Cx.y,this.Cx.z]}setCameraLocation(t){let e={location:t,direction:Le.normalize(Le.multiply(t,-1))};const i=this.vx.cameraLocationChanged(this.Sx(e));return i&&(e=i),this.xx(e),this.cs.Ms(),this}getCameraLocation(){return this.zm.getCameraLocation()}getCameraDirection(){return this.zm.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.vx.uS(t);const e=this.vx.cameraLocationChanged(this.Sx());return e&&this.xx(e),this}getCameraAutomaticFittingEnabled(){return this.vx.SS()}onCameraChange(t){return this.R.on("cameraChange",t)}offCameraChange(t){return this.R.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.kx.We(t).Wm(Kh(this.kx.mu())),this.zm.Ms(),this}getBoundingBoxStrokeStyle(){return this.kx.mu()}setBoundingBox(t){return this.Tx(t,!1),this}Tx(t,e){this.Px=t;const i=this.Ix(t);if(this.Mx.x.it(i.x),this.Mx.y.it(i.y),this.Mx.z.it(-i.z),!e){const t=this.vx.boundingBoxChanged(this.Sx());t&&this.xx(t)}this.cs.Ms()}getBoundingBox(){return this.Px}Re(t){if(ah.Rp(this.bh,this.Tp),0!==this.ux){const e=this.ux*t*.006;this.sx.push({type:"wheel-zoom",deltaY:e}),this.ux=Math.sign(this.ux)*Math.max(Math.abs(this.ux)-.01*t,0),0!==this.ux&&this.cs.Ms(!0)}const e=this.getCameraDirection();if(this.sx.length>0){const t=this.vx.applyCameraInteractions(this.Sx(),this.sx);t&&this.xx(t),this.sx.length=0}this.Ex&&Le.equals(this.Ex.location,this.Fx.location)&&Le.equals(this.Ex.direction,this.Fx.direction)||this.R.emit("cameraChange",this,this.getCameraLocation()),this.Ex=this.Fx,super.Re(t);for(let t=0;t<this.Lv.length;t+=1)this.Lv[t].vv();for(let t=0;t<this.Lv.length;t+=1)this.Lv[t].Re();this.Cx.x.Br(),this.Cx.y.Br(),this.Cx.z.Br(),this.Cx.x.Re(e),this.Cx.y.Re(e),this.Cx.z.Re(e),this.Qy.Re(this.bx,this.Lv,void 0),super.wp();const i=this.Mx,s=f(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),r=f(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd());this.kx.Ot().Al([f(r.x,s.y,s.z),f(r.x,r.y,s.z),f(r.x,r.y,r.z),f(r.x,s.y,r.z),f(s.x,s.y,r.z),f(s.x,r.y,r.z),f(r.x,r.y,r.z),f(r.x,r.y,s.z),f(s.x,r.y,s.z),f(s.x,r.y,r.z),f(s.x,s.y,r.z),f(s.x,s.y,s.z)]);const n=[f(s.x,s.y,s.z),f(r.x,s.y,s.z),f(s.x,r.y,s.z),f(r.x,r.y,s.z),f(s.x,s.y,r.z),f(r.x,s.y,r.z),f(s.x,r.y,r.z),f(r.x,r.y,r.z)].map((t=>this.zm.Qm(t))),o=this.zm.Qm(f((s.x+r.x)/2,(s.y+r.y)/2,(s.z+r.z)/2)),a=oe(n,o),h=[];for(let t=0;t<a.length;t+=1){const e=a[t];si(e,o,a[t>0?t-1:a.length-1],a[t<a.length-1?t+1:0])||h.push(e)}const l=oe(h,o);this.Ov.Cl(l),this.Nv.Cl(l);for(let t=0;t<this.Lv.length;t+=1)this.Lv[t]._m()}dispose(){return this.yn.forEach((t=>{t()})),this.yn.length=0,this.Mx.Y(),this.zm.Y(),this.mx.Y(),this.yx.Y(),this.Qy.Y(),super.dispose()}J(){return this.Mx.x.J(),this.Mx.y.J(),this.Mx.z.J(),super.J()}K(){return super.K()}xx(t){this.zm.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(Le.addVec(t.location,Le.multiply(t.direction,-this.hx))),this.Fx=t,this.cs.Ms()}Ix(t){return Le.divide(t,Le.length(t)/this.ix)}Sx(t=this.Fx){return{boundingBox:this.Ix(this.Px),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.ox=t,this}getMouseInteractionZoom(){return this.ox}setMouseInteractionRotate(t){return this.lx=t,this}getMouseInteractionRotate(){return this.lx}forEachAxis(t){return t(this.Cx.x),t(this.Cx.y),t(this.Cx.z),this}getSeries(){return this.Lv}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((e=>e.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.nx=!!t,this}getAnimationZoom(){return this.nx}}const Cl=(t,e,i)=>{var s,r;return gt(e)?lh(e,[[e.series],[t.getDefaultAxisX().getTitle()||"X","",{text:Wi(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Wi(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:Wi(e.axisZ.formatValue(e.z),e.axisZ),font:{weight:"bold"}}],void 0!==e.intensity?["Value","",{text:Wi(e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]:[]]):yt(e)?lh(e,[[e.series],void 0!==e.value?["Value","",{text:Wi(e.value.toFixed(2),null===(r=e.lut)||void 0===r?void 0:r.units),font:{weight:"bold"}}]:[]]):lh(e,[[e.series],[t.getDefaultAxisX().getTitle()||"X","",{text:Wi(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Wi(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:Wi(e.axisZ.formatValue(e.z),e.axisZ),font:{weight:"bold"}}]])},kl={Column:Vo,Row:zo};class El extends rh{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.zx=new Map,this.Vx=this.addUIElement(kl.Row).setPosition({x:0,y:100}).setOrigin(Ds.LeftTop).setBackground((t=>t.setFillStyle(V).setStrokeStyle(nt)))}add(t,e){return(t instanceof oh?[t]:t instanceof bf?t.getCells().filter((t=>t.panel instanceof oh)).map((t=>t.panel)):[]).forEach((t=>{const i=this.Vx.addElement(da.VerticalLegendBox).setBackground((t=>t.setFillStyle(V).setStrokeStyle(nt))).add(t,e).setTitle(t.getTitle());this.zx.set(t,i)})),this.cs.Ms(),this}setLegendBoxes(t){return this.zx.forEach(((e,i)=>t(e,i))),this}getMinimumSize(){return super.getMinimumSize()||this.Vx.getSize()}}const Rl={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},Il=(t,e)=>!(!e.name||t.name.toLowerCase()!==e.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in e&&t.ISO_A3.toLowerCase()===e.ISO_A3.toLowerCase(),_l=(t,e)=>{let i=e.geometry;return i=Fl(t,e,i),i=Dl(t,e,i),i},Fl=(t,e,i)=>{if(t===Rl.Asia){const t=[];for(let e=0;e<i.length;e+=1){t[e]=[];const s=i[e],r=t[e];for(let t=0;t<s.length;t+=1){const e=s[t];e.x<-100?r[t]={x:e.x+360,y:e.y}:r[t]=e}}return t}return i},Dl=(t,e,i)=>{const s=e.name.toLowerCase();let r;if(t===Rl.USA&&("alaska"===s?r={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===s&&(r={translate:{x:48,y:7},scale:{x:1,y:1}})),r){const{translate:t,scale:n}=r,o=Je(Ft(i)),a=[];for(let e=0;e<i.length;e+=1){a[e]=[];const r=i[e],h=a[e];for(let e=0;e<r.length;e+=1){const i=r[e];let a=i.x;"alaska"===s&&1===Math.sign(a)&&(a=-180-(180-a)),h[e]={x:t.x+(a-o.min.x)*n.x+o.min.x,y:t.y+(i.y-o.min.y)*n.y+o.min.y}}}return e.outlier=!0,e.transform={...r,vertexBoundaries:o},a}return i},Bl={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},Pl={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class Ll extends oh{constructor(t,e,i,s,r,n,o){super(t,e,i,e.kp("mapChart bg",0),s,e.cs.ts.mapChartBackgroundFillStyle,e.cs.ts.mapChartBackgroundStrokeStyle,e.cs.ts.mapChartTitleFont,e.cs.ts.mapChartTitleFillStyle,o),this.Ox=[],this.At=this.dp.d2({scaleXYConstructor:Vi}),this.$i=!0,this.Nx=this.ts.mapChartSeparateRegionFillStyle,this.Gx=this.ts.mapChartSeparateRegionStrokeStyle,this.dh=!0,this.Wx=0,this.Ux=!0,this.Yx=new Map,this.onMouseEnter=t=>this.R.on("mouseEnter",t),this.onMouseLeave=t=>this.R.on("mouseLeave",t),this.onMouseClick=t=>this.R.on("mouseClick",t),this.onMouseDoubleClick=t=>this.R.on("mouseDoubleClick",t),this.onMouseDown=t=>this.R.on("mouseDown",t),this.onMouseUp=t=>this.R.on("mouseUp",t),this.onMouseMove=t=>this.R.on("mouseMove",t),this.offMouseEnter=t=>this.R.off(t,"mouseEnter"),this.offMouseLeave=t=>this.R.off(t,"mouseLeave"),this.offMouseClick=t=>this.R.off(t,"mouseClick"),this.offMouseDoubleClick=t=>this.R.off(t,"mouseDoubleClick"),this.offMouseDown=t=>this.R.off(t,"mouseDown"),this.offMouseUp=t=>this.R.off(t,"mouseUp"),this.offMouseMove=t=>this.R.off(t,"mouseMove"),this.offMouseDragStart=t=>this.R.off(t,"mouseDragStart"),this.offMouseDrag=t=>this.R.off(t,"mouseDrag"),this.offMouseDragStop=t=>this.R.off(t,"mouseDragStop"),this.offMouseWheel=t=>this.R.off(t,"mouseWheel"),this.onMapDataReady=t=>{const e=this.R.on("mapDataReady",t);return this.Hx&&Tt.setTimeout((()=>t())),e},this.onViewChange=t=>this.R.on("viewChange",t),this.$x=(t,e,i,s,r)=>{this.At.x.it(s).si([this.Xt.left+this.ka.left,this.Xt.right+this.ka.right]),this.At.y.it(r).si([this.Xt.bottom+this.ka.bottom,this.Xt.top+this.ka.top+ah.Lp(this.bh,this.Tp)]),this.Xx&&this.jx(this.Zx,this.At,this.Xx)},this._t=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i),r=null==s?void 0:s.region;r&&(this.getCursorMode()&&(this.Jx(s),Qt(t)),this.Ux&&this.cs.us.ks(r,!0),this.Kx=r,this.R.emit("mouseEnter",this,t,s))},this.wt=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i),r=null==s?void 0:s.region;this.qx(),r&&(this.Ux&&this.cs.us.ks(r,!1),this.Kx=void 0,this.R.emit("mouseLeave",this,t,s),t&&Qt(t))},this.It=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i),r=null==s?void 0:s.region;r&&(this.getCursorMode()&&(this.Jx(s),Qt(t)),this.Kx=r,this.R.emit("mouseMove",this,t,s))},this.Ct=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i);this.R.emit("mouseClick",this,t,s)},this.kt=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i);this.R.emit("mouseDoubleClick",this,t,s)},this.Tt=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i);this.R.emit("mouseDown",this,t,s)},this.Ft=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i);this.R.emit("mouseUp",this,t,s)},this.Dt=(t,e,i)=>{const s=i;if(!s||!this.Hx)return;const r=this.Qx(this.Hx,s);this.R.emit("mouseDragStart",this,t,e,r)},this.Pt=(t,e,i,s,r)=>{const n=r;if(!n||!this.Hx)return;const o=this.Qx(this.Hx,n);this.R.emit("mouseDrag",this,t,e,i,s,o)},this.Bt=(t,e,i,s)=>{const r=s;if(!r||!this.Hx)return;const n=this.Qx(this.Hx,r);this.R.emit("mouseDragStop",this,t,e,i,n)},this.Lt=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i);this.R.emit("mouseWheel",this,t,s)},this.Rt=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i),r=null==s?void 0:s.region;r&&(this.Jx(s),this.Ux&&this.cs.us.ks(r,!0),this.Kx=r,this.R.emit("touchStart",this,t,s),Qt(t))},this.Et=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i),r=null==s?void 0:s.region;r&&(this.Jx(s),this.Kx=r,this.R.emit("touchMove",this,t,s),Qt(t))},this.zt=(t,e)=>{const i=e;if(!i||!this.Hx)return;const s=this.Qx(this.Hx,i),r=null==s?void 0:s.region;this.qx(),r&&(this.Ux&&this.cs.us.ks(r,!1),this.Kx=void 0,this.R.emit("touchEnd",this,t,s),Qt(t))},this.cs.Zn(fa.bf),this.dh=!1!==(null==n?void 0:n.animationsEnabled),this.tb=e.Xy("mapChart plotting",0),this.onResize(this.$x),this.bh.yr("Map Chart");const a=e.Zy(),h=Dt(n?n.cursorBuilder:void 0,Eh);this.Qy=uh(this,a,h.yy(a,this.uiScale,this.uiScale,Rt,this.ts),void 0,"show-pointed",zl,(()=>0)),this.ib=this.hs.kg(),this.Cp(r,this.uiScale),this.sb=this.tb.Hm(this.At).setMouseInteractions(this.$i).setMouseEnterEventHandler(((t,e,i)=>this._t(e,i))).setMouseLeaveEventHandler(((t,e,i)=>this.wt(e,i))).setMouseClickEventHandler(((t,e,i)=>this.Ct(e,i))).setMouseDoubleClickEventHandler(((t,e,i)=>this.kt(e,i))).setMouseDownEventHandler(((t,e,i)=>this.Tt(e,i))).setMouseUpEventHandler(((t,e,i)=>this.Ft(e,i))).setMouseMoveEventHandler(((t,e,i)=>this.It(e,i))).setMouseDragStartEventHandler(((t,e,i,s)=>this.Dt(e,i,s))).setMouseDragEventHandler(((t,e,i,s,r,n)=>this.Pt(e,i,s,r,n))).setMouseDragStopEventHandler(((t,e,i,s,r)=>this.Bt(e,i,s,r))).setMouseWheelEventHandler(((t,e,i)=>this.Lt(e,i))).setTouchStartEventHandler(((t,e,i)=>this.Rt(e,i))).setTouchMoveEventHandler(((t,e,i)=>this.Et(e,i))).setTouchEndEventHandler(((t,e,i)=>this.zt(e,i))).Be(this.ts.mapChartFillStyle).De(this.ts.mapChartStrokeStyle),this.eb=this.tb.Hm(this.At).setMouseInteractions(this.$i).Be(this.ts.mapChartOutlierRegionFillStyle).De(this.ts.mapChartOutlierRegionStrokeStyle);const l=Dt(n&&n.type,Rl.World);this.Zx=l,this.hb(l).then((()=>{this.R.emit("mapDataReady")}))}getRegionUnderMouse(){return this.Kx}setFillStyle(t){return this.sb.Be(t),this.cs.Ms(),this}getFillStyle(){return this.sb.Xh()}setStrokeStyle(t){return this.sb.De(t),this.cs.Ms(),this}getStrokeStyle(){return this.sb.mo()}setEffect(t){return this.ib.bs(t),this.cs.Ms(),this}getEffect(){return this.ib._s()}setOutlierRegionFillStyle(t){return this.eb.Be(t),this.cs.Ms(),this}getOutlierRegionFillStyle(){return this.eb.Xh()}setOutlierRegionStrokeStyle(t){return this.eb.De(t),this.cs.Ms(),this}getOutlierRegionStrokeStyle(){return this.eb.mo()}setSeparateRegionFillStyle(t){return this.Nx="function"==typeof t?t(this.Nx):t,this.Ox.forEach((t=>t.Be(this.Nx))),this.cs.Ms(),this}getSeparateRegionFillStyle(){return this.Nx}setSeparateRegionStrokeStyle(t){return this.Gx="function"==typeof t?t(this.Gx):t,this.Ox.forEach((t=>t.De(this.Gx))),this.cs.Ms(),this}getSeparateRegionStrokeStyle(){return this.Gx}invalidateRegionValues(t){if(!this.Hx||!this.rb)return this.nb=this.nb||[],this.nb.push(t),this;if("function"==typeof t)for(let e=0;e<this.Hx.regions.length;e+=1){const i=this.Hx.regions[e],s=this.rb[e],r=t({...i,geometry:void 0},s);if(void 0!==r&&r!==s){this.rb[e]=r;const t=this.Yx.get(i);null==t||t.forEach((t=>{t.ob(r)}))}}else for(const e of t)if(e)for(let t=0;t<this.Hx.regions.length;t+=1){const i=this.Hx.regions[t],s=this.rb[t];if(void 0!==e.value&&e.value!==s&&Il(i,e)){this.rb[t]=e.value;const s=this.Yx.get(i);null==s||s.forEach((t=>{t.ob(e.value)}))}}return this.cs.Ms(),this}onMouseDragStart(t){return this.R.on("mouseDragStart",t)}onMouseDrag(t){return this.R.on("mouseDrag",t)}onMouseDragStop(t){return this.R.on("mouseDragStop",t)}onMouseWheel(t){return this.R.on("mouseWheel",t)}onTouchStart(t){return this.R.on("touchStart",t)}onTouchMove(t){return this.R.on("touchMove",t)}onTouchEnd(t){return this.R.on("touchEnd",t)}offTouchStart(t){return this.R.off(t,"touchStart")}offTouchMove(t){return this.R.off(t,"touchMove")}offTouchEnd(t){return this.R.off(t,"touchEnd")}setMouseInteractions(t){return this.$i=t,this.sb.setMouseInteractions(t),this}getMouseInteractions(){return this.$i}setHighlight(t){var e;return t=be(t),this.Wx=t,null===(e=this.Hx)||void 0===e||e.regions.forEach((e=>{this.cs.us.ks(e,t)})),this.R.emit("highlight",this,t),this}getHighlight(){return this.Wx}setAnimationHighlight(t){var e;return null===(e=this.Hx)||void 0===e||e.regions.forEach((e=>{this.cs.us.Ts(e,t)})),this}getAnimationHighlight(){var t;return this.cs.us.Fs(null===(t=this.Hx)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Ux=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Ux}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}offMapDataReady(t){return this.R.off(t,"mapDataReady")}offViewChange(t){return this.R.off(t,"viewChange")}async hb(t){const e=await((t,e)=>{let i;if(t===Rl.World)i="countries_world.json";else if(t===Rl.NorthAmerica)i="countries_northAmerica.json";else if(t===Rl.SouthAmerica)i="countries_southAmerica.json";else if(t===Rl.Africa)i="countries_africa.json";else if(t===Rl.Europe)i="countries_europe.json";else if(t===Rl.Asia)i="countries_asia.json";else if(t===Rl.USA)i="states_usa.json";else if(t===Rl.Canada)i="territoriesProvinces_canada.json";else{if(t!==Rl.Australia){const e=`LCJS MapChart unidentified \`type\`: ${t}`;throw Tt.alert(e),new Error(e)}i="territories_australia.json"}const s=`${e}/maps/${i}`;return Tt.fetch(s).then((t=>t.json())).catch((t=>{ke(e,s,"Map Chart",{shouldCrash:!0})}))})(t,this.SA.Ks);this.rb=new Array(e.regions.length).map((t=>{})).fill(void 0);const i=Bl[t];if(!i)throw new Error("Unidentified map type.");for(const t of e.outliers)for(const e of t.geometry)this.eb.Xr().Cl(e);if(t===Rl.USA){const t=25.8,e=29.7;this.Ox.push(this.tb.Le(this.At).setMouseInteractions(!1).Be(this.Nx).De(this.Gx).Ee({x:-126,y:t}).it({x:10,y:e-t}),this.tb.Le(this.At).setMouseInteractions(!1).Be(this.Nx).De(this.Gx).Ee({x:-113,y:t}).it({x:7,y:e-t}))}const s=this.cs.us.$r(this.sb,{animationEnabled:this.dh});for(let i=0;i<e.regions.length;i+=1){const r=e.regions[i],n=_l(t,r),o=[];for(const t of n)t.length<3||o.push(this.sb.Xr().Cl(t));this.Yx.set(r,o),s.Xr(r,(t=>{o.forEach((e=>e.ds(t)))}))}if(this.ib.gs([this.sb]),this.Xx=i,this.jx(t,this.At,i),this.Hx=e,this.nb){for(const t of this.nb)this.invalidateRegionValues(t);this.nb=void 0}this.cs.Ms()}jx(t,e,i){const s=Pl[t],r=e.x.getCellSize(),n=e.y.getCellSize()/r,o={min:{x:i.min.x,y:i.min.y},max:{x:i.max.x,y:i.max.y}};if(n<s){const t=(o.max.x-o.min.x)*(s/n-1);o.min.x-=t/2,o.max.x+=t/2}else if(n>s){const t=(o.max.y-o.min.y)*(n/s-1);o.min.y-=t/2,o.max.y+=t/2}e.x.q(o.min.x,o.max.x),e.y.q(o.min.y,o.max.y);const a=this.At.x.li(),h=this.At.y.li();this.R.emit("viewChange",{latitudeRange:{start:o.min.y,end:o.max.y},longitudeRange:{start:o.min.x,end:o.max.x},margin:{top:h[1],bottom:h[0],left:a[0],right:a[1]}})}Jx(t){this.ab=t,this.cs.Ms()}qx(){this.ab=void 0,this.cs.Ms()}Qx(t,e){const i=Array.from(this.Yx.entries()).findIndex((([t,i])=>i.includes(e))),s=null==t?void 0:t.regions[i],r=this.cs.Xn();if(!r)return;const n=this.cs.No(r),o=this.rb&&this.rb[i];let a=ct({x:n.engineX,y:n.engineY},this.cs.At,this.At);a={x:_t(a.x,this.At.x.getInnerStart(),this.At.x.getInnerEnd()),y:_t(a.y,this.At.y.getInnerStart(),this.At.y.getInnerEnd())};let h=a.x,l=a.y;const u=s.transform;s.outlier&&u&&(h=(h-u.translate.x-u.vertexBoundaries.min.x)/u.scale.x+u.vertexBoundaries.min.x,l=(l-u.translate.y-u.vertexBoundaries.min.y)/u.scale.y+u.vertexBoundaries.min.y);const c=this.getFillStyle();return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.cs.At,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.cs.At},region:s,value:o,longitude:l,latitude:h,lut:K(c)?c.lut:void 0}}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=Eh){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}setAnimationsEnabled(t){return this.dh=!t,this}getAnimationsEnabled(){return this.dh}getMinimumSize(){}ef(){return[this]}Re(t){super.Re(t),super.wp(),ah.Rp(this.bh,this.Tp);const e=y(this.At.x.ei(),this.At.y.ei(),this.At.x.ri(),this.At.y.ri());return this.tb.gx(e),this.Qy.Re(!1,[],void 0,{explicitTarget:this.ab}),this}dispose(){return this.tb.Y(),this.Qy.Y(),sh(this.At),super.dispose()}J(){return super.J(),this.At.J(),this}K(){return super.K(),this.At.K(),this}Zd(){return de(this.getFillStyle())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter((()=>{this.setHighlight(!0)})),t.onMouseLeave((()=>{this.setHighlight(!1)})),this.onMouseEnter((()=>t.setHighlight(!0))),this.onMouseLeave((()=>t.setHighlight(!1))),this.onTouchStart((()=>t.setHighlight(!0))),this.onTouchEnd((()=>t.setHighlight(!1))),this.styleLegendEntry(t,i),this}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.getFillStyle()})}}const Vl=(t,e)=>{const i=t>0,s=e>0;return`${[ge(Math.abs(0|t),2),"° ",ge(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(i?"E":"W")}, ${[ge(Math.abs(0|e),2),"° ",ge(Math.abs(0|(e<0?e=-e:e)%1*60),2),"' "].join("")+(s?"N":"S")}`},zl=(t,e,i)=>{var s;const r=[[e.region.name],[Vl(e.longitude,e.latitude)]];return void 0!==e.value&&r.push({text:Wi(e.value.toFixed(1),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}),r};class Nl extends ar{constructor(t,e,i,s,r,n,o,a,h){super(t,e,e.lb(i),s,r,{numeric:e.ub({amplitude:s.polarAmplitudeAxisNumericTicks,radial:s.polarAmplitudeAxisNumericTicks}),datetime:e.ub({amplitude:s.polarAmplitudeAxisDateTimeTicks,radial:s.polarAmplitudeAxisDateTimeTicks}),time:e.ub({amplitude:s.polarAmplitudeAxisTimeTicks,radial:s.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.cb=n,this.fb=o,this.Ab=a,this.hs=h,this.gb=i,this.pb=e.ub({amplitude:s.polarAmplitudeAxisStrokeStyle,radial:s.polarRadialAxisStrokeStyle}),this.wh=a.Gr(i).setMouseInteractions(!1).Qh(e.ub({amplitude:s.polarAmplitudeAxisTitleFont,radial:s.polarRadialAxisTitleFont})).Be(e.ub({amplitude:s.polarAmplitudeAxisTitleFillStyle,radial:s.polarRadialAxisTitleFillStyle})),this.qh=this.hs.kg([this.wh]).bs(s.effectsText)}setTickStrategy(t,e){return super.Gh(t,e)}setStrokeStyle(t){return this.pb="function"==typeof t?t(this.pb):t,this.fb.Ms(),this}getStrokeStyle(){return this.pb}Sr(t,e){return new Ol(e,t,this.gb,this.Ab,this.yb(this.cb,this.gb),this.Ab.Ue(this.gb).setMouseInteractions(!1))}br(t,e){const i=this.mb(this.gb,t);this.vb&&!1===this.vb(t)?t.ih.setVisible(!1):t.ih.setVisible(!0).Ee(ui(this.Sb(this.gb,t.M),i.padding)).$a(i.alignment).Jh(i.rotation).Na(i.offset.x,i.offset.y),this.xb(this.gb,t.bb,t.Mb,t)}setMouseInteractions(t){return this}Re(){this.ar({physicalAxisSize:0});const t=this.wr(((t,e)=>{const i=e.Dh.vr,s=.5*this.pb.getThickness()+i.tickLength+i.tickPadding+Math.abs(e.ih.zs().ed().y);return Math.max(t,s)}),0);return this._b(this.gb,this.pb,t),this.wb(this.gb,this.wh,t),t}}class Ol extends hr{constructor(t,e,i,s,r,n,o){super(t,e,s,i,o),this.bb=r,this.Mb=n,r.setMouseInteractions(!1),this.ss.push(r,n)}}class Ul extends Nl{constructor(t,e,i,s,r,n,o,a,h){super(t,Yl((()=>this.Lg())),e,i,s,r,n,o,a),this.Gm=this.fb.Ue(this.gb).setMouseInteractions(!1),this.Cb=h,this.setScrollStrategy(Ws.expansion),this.setTickStrategy(Ks.Numeric),this.setTitle("Amplitude")}Lg(){return this.Cb()}Lr(t,e){return Xi(t,e,this.gb.y)}Er(t,e,i){const s=2*(e-t),r=this.gb.x.Li(s);return{min:t-i*r,max:e+i*r}}Sb(t,e){return{x:t.kb()?e-t.Tb().start:t.Tb().start-e,y:0}}yb(t,e){return t.nd(e)}xb(t,e,i,s){const r=s.Dh.vr,n=t.kb()?s.M-t.Tb().start:t.Tb().start-s.M;It(s.M,t.Tb().start)||It(s.M,t.Tb().end)?e.setVisible(!1):e.setVisible(!0).cu(0).Ye(360).pu(void 0).gu(0).du(n).pu(60).Be(V).De(r.gridStrokeStyle);const o=.5*this.pb.getThickness();i.He({x:n,y:-o*t.Wi().y}).Ye({x:n,y:-(o+r.tickLength)*t.Wi().y}).We(r.tickStyle)}mb(t,e){const i=e.Dh.vr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Wi().y*-(.5*this.pb.getThickness()+i.tickLength+i.tickPadding)},rotation:0,offset:{x:0,y:0}}}_b(t,e,i){const s=t.kb()?t.Tb().end-t.Tb().start:t.Tb().start-t.Tb().end;this.Gm.He({x:0,y:0}).Ye({x:s,y:0}).We(e)}wb(t,e,i){const s=t.kb()?(t.Tb().start+t.Tb().end)/2-t.Tb().start:t.Tb().start-(t.Tb().start+t.Tb().end)/2;e.$a({x:0,y:1}).Ee({x:s,y:-i*t.Wi().y})}}const Yl=t=>({...tl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),lb:t=>({getInnerStart:()=>t.Tb().start,getInnerEnd:()=>t.Tb().end,q:(e,i)=>t.Fb(e,i),ut:(e,i,s,r,n)=>t.y.ut(e,i,s,r,n)}),ub:t=>t.amplitude});class Gl extends Nl{constructor(t,e,i,s,r,n,o,a){super(t,Wl,e,i,s,r,n,o,a),this.Ib=90,this.Pb=12,this.Db=Hl,this.Gm=this.fb.nd(this.gb).setMouseInteractions(!1),this.vb=t=>{let e=180*(t.M-this.gb.Bb())/Math.PI%360;for(;e<0;)e+=360;for(;e>360;)e-=360;if(e>=0&&e<=20||e>=340&&e<=360)return!1},this.ah=void 0,this.setTickStyle(i.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Ib)}setTickStyle(t){return this.Lb="function"==typeof t?t(this.Lb):t,this.Rb(),this.fb.Ms(),this}getTickStyle(){return this.Lb}setTickFormattingFunction(t){return this.Db=t,this.Rb(),this.fb.Ms(),this}getTickFormattingFunction(){return this.Db}setClockwise(t){this.gb.Eb(t);const e=this.Ib*Math.PI/180;return t?this.gb.zb(e+Math.PI/2):this.gb.zb(e-Math.PI/2),this.fb.Ms(),this}getClockwise(){return!this.gb.Vb()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Ib=t;const e=t*Math.PI/180;return this.getClockwise()?this.gb.zb(e+Math.PI/2):this.gb.zb(e-Math.PI/2),this.fb.Ms(),this}getNorth(){return 180*this.gb.Bb()/Math.PI}setDivision(t){return this.Pb=t,this.Rb(),this.fb.Ms(),this}getDivision(){return this.Pb}Lg(){return[]}Lr(t,e){return e}Er(t,e,i){return{min:t,max:e}}Sb(t,e){const i=t.Vb()?1:-1,s=t.Bb(),r=t.kb()?t.Tb().end-t.Tb().start:t.Tb().start-t.Tb().end;return{x:Math.cos((e-s)*i)*r,y:Math.sin((e-s)*i)*r}}yb(t,e){return t.Ue(e)}xb(t,e,i,s){const r=this.Lb,n=t.Vb()?1:-1,o=t.Bb(),a=(s.M-o)*n,h=Math.cos(a),l=Math.sin(a),u=t.kb()?t.Tb().end-t.Tb().start:t.Tb().start-t.Tb().end,c={x:h*u,y:l*u};e.He({x:0,y:0}).Ye(c);const d={x:c.x+h*r.tickLength*t.Wi().x,y:c.y+l*r.tickLength*t.Wi().y};i.He(c).Ye(d),e.We(r.gridStrokeStyle),i.We(r.tickStyle)}mb(t,e){const i=this.Lb,s=t.Vb()?1:-1,r=t.Bb();let n,o=(e.M-r)*s;for(;o<0;)o+=2*Math.PI;for(;o>=2*Math.PI;)o-=2*Math.PI;n=o>0&&o<=Math.PI?-o+Math.PI/2:-o-Math.PI/2;const a=i.tickLength+i.tickPadding,h=Math.cos(o)*a*t.Wi().x,l=Math.sin(o)*a*t.Wi().y;return{alignment:{x:0,y:0},padding:{x:h,y:l},rotation:180*n/Math.PI,offset:{x:h,y:l}}}_b(t,e,i){const s=t.kb()?t.Tb().end-t.Tb().start:t.Tb().start-t.Tb().end;this.Gm.cu(0).Ye(360).gu(0).du(s+.5*e.getThickness()*t.Wi().x).pu(360).Be(V).De(e)}wb(t,e,i){const s=t.Bb(),r=this.mb(t,{M:0+s}),n=t.kb()?t.Tb().end-t.Tb().start:t.Tb().start-t.Tb().end;e.$a(r.alignment).Jh(r.rotation).Na(r.offset.x,r.offset.y).Ee(ui({x:n,y:0},r.padding))}Rb(){this.sr({Ze:[],Qe:[{ih:"Radial ticks",Hg:0,vr:this.Lb,pr:this.Db,Ur:(t,e,i,s)=>{const r=[],n=2*Math.PI/this.Pb;for(let t=0;t<2*Math.PI;t+=n)r.push(t);return r},Bh:{Mr:()=>{},Lh:()=>!1},Yr:void 0}],Je:Hl,Ke:void 0,qe:void 0})}}const Hl=(t,e,i)=>(180*t/Math.PI).toFixed(0),Wl={Fr:()=>{},Ir:()=>{},Dr:()=>{},lb:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,q:(t,e)=>{},ut:(e,i,s,r,n)=>t.x.ut(e,i,s,r,n)}),ub:t=>t.radial},Kl=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),Xl=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude);class jl extends Zi{constructor(t,e,i,s,r,n){super(e,i,r,n),this.Cs="Sector",this.Ob=0,this.Nb=1*Math.PI/2,this.Gb=void 0,this.Wb=void 0,this.Bs=t,this.gb=s,this.Iy=this.Bs.nd(this.gb).ds(this.getHighlight()),this.As(this.Iy),this.Te=r.polarSectorFillStyle,this.Fe=r.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Ob=_t(t,0,360),this.Bs.Ms(),this}getAngleStart(){return this.Ob}setAngleEnd(t){return this.Nb=_t(t,0,360),this.Bs.Ms(),this}getAngleEnd(){return this.Nb}setAmplitudeStart(t){return this.Gb=t,this.Bs.Ms(),this}getAmplitudeStart(){return this.Gb}setAmplitudeEnd(t){return this.Wb=t,this.Bs.Ms(),this}getAmplitudeEnd(){return this.Wb}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Bs.Ms(),this}getFillStyle(){return this.Te}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Bs.Ms(),this}getStrokeStyle(){return this.Fe}Re(){const t=this.gb.Tb(),e=180*this.gb.Bb()/Math.PI,i=void 0!==this.Gb?_t(this.Gb,t.start,t.end):t.start,s=void 0!==this.Wb?_t(this.Wb,t.start,t.end):t.end,r=this.gb.kb()?i-t.start:t.start-i,n=this.gb.kb()?s-t.start:t.start-s,o=Math.min(r,n),a=Math.max(r,n),h=this.gb.Vb()?1:-1,l=Math.abs(this.Nb-this.Ob);this.Iy.cu((this.Ob-e)*h).Ye((this.Nb-e)*h).gu(100*o/a).du(a).Be(this.Te).De(this.Fe).pu(Math.ceil(l/2))}ze(t,e){t.ds(e),this.Bs.Ms()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te,stroke:this.Fe})}}class $l extends Zi{constructor(){super(...arguments),this.uv=!0,this.lv=!0}setAutoScrollingEnabled(t){return this.uv=t,this.chart.cs.Ms(),this}getAutoScrollingEnabled(){return this.uv}vv(){}Re(){}_m(){}setCursorEnabled(t){return this.lv=t,this}getCursorEnabled(){return this.lv}setCursorFormattingOverride(t){return this.pv=t,this}getCursorFormattingOverride(){return this.pv}}class Zl extends $l{constructor(t,e,i,s,r,n){super(e,i,r,n),this.Bs=t,this.chart=e,this.scale=s}getAmplitudeMin(){return this.Ub?this.Ub.min:void 0}getAmplitudeMax(){return this.Ub?this.Ub.max:void 0}}const Ql=(t,e)=>{const i=[],s=e.Tb().start,r=e.Tb().end,n=e.kb(),o=e.Vb()?1:-1,a=e.Bb(),h=Math.abs(r-s),l=Math.min(s,r)+.001*h,u=Math.max(s,r)-.001*h;for(const e of t){const t=_t(e.amplitude,l,u),r=e.angle*Math.PI/180-a,h=Math.cos(r*o)*(n?t-s:s-t),c=Math.sin(r*o)*(n?t-s:s-t),d=e.color;i.push({x:h,y:c,color:d})}return i},ql=t=>{const e={min:Ve,max:ze};for(const i of t)e.min=Math.min(e.min,i.amplitude),e.max=Math.max(e.max,i.amplitude);return e},Jl=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),tu=(t,e)=>{let i=Ai(t);for(e.Vb()||(i*=-1),i+=180*e.Bb()/Math.PI;i<0;)i+=360;i%=360;const s=hi(t),r=e.Tb(),n=Math.abs(r.end-r.start);return{angle:i,amplitude:Gn(r.start,r.end,s/n)}};class eu extends Zl{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n),this.Cs="Heatmap Series",this.Yb=!0,this._v=!1,this.Zd=()=>de(this.Te);const a=this.chart.getSeries().length;this.Te=me(this.ts.polarHeatmapSeriesFillStyle||this.ts.heatmapGridSeriesFillStyle,a);const h=o.amplitudeStart||0,l=o.amplitudeEnd?(o.amplitudeEnd-h)/(o.annuli-1):o.amplitudeStep||1,u={sectors:o.sectors,annuli:o.annuli,amplitudeStart:h,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:o.dataOrder||"annuli"};this.Kn=u,this.Hb=t.$b(s,[],u).Be(this.Te).ds(this.getHighlight()),this.As(this.Hb);const c=Math.min(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep),d=Math.max(u.amplitudeStart,u.amplitudeStart+(u.annuli-1)*u.amplitudeStep);this.Ub={min:c,max:d},this.setHighlightOnHover(!1)}solveNearest(t,e="show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=ct(s,this.chart.cs.At,this.scale),n=tu(r,this.scale),o=hh(e)?this.Hb.Xb(n):this.Hb.qc(n);if(!o)return;const a=Ql([o],this.scale)[0];return{cursorPosition:{pointMarker:a,pointMarkerScale:this.scale,resultTable:a,resultTableScale:this.scale},series:this,angle:o.angle,amplitude:o.amplitude,intensity:o.cellValue,annulus:o.iAnnulus,sector:o.iSector,lut:K(this.Te)?this.Te.lut:void 0}}Ki(t,e){return De({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:K(this.Te)?this.Te.lut:void 0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this._v&&this.chart.cs.Zn(fa.Tf),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,sectors:"annuli"===this.Kn.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Kn.dataOrder?t.length:t[0].length},i="annuli"===this.Kn.dataOrder?this.Kn.annuli:this.Kn.sectors,s="annuli"===this.Kn.dataOrder?this.Kn.sectors:this.Kn.annuli;if(e.x>i||e.y>s){if(!0===this.chart.SA.io){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${i}x${s}, input ${e.x}x${e.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);if(0===(t=r).length||0===t[0].length)return this}this.Hb.PS({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Kn.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Kn.dataOrder?t.values.length:t.values[0].length},i="annuli"===this.Kn.dataOrder?t.iAnnulus:t.iSector,s=i+e.primary-1,r="annuli"===this.Kn.dataOrder?t.iSector:t.iAnnulus,n=r+e.secondary-1,o="annuli"===this.Kn.dataOrder?this.Kn.annuli-1:this.Kn.sectors-1,a="annuli"===this.Kn.dataOrder?this.Kn.sectors-1:this.Kn.annuli-1;if(i<0||r<0){if(!0===this.chart.SA.io){const e=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Tt.console.warn(e)}return this}if(s>o||n>a){if(!0===this.chart.SA.io){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${o}x${a}, input ${e.primary}x${e.secondary} starting at [${i},${r}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const h=Math.max(s-o,0),l=e.primary-h,u=Math.max(n-a,0),c=[];for(let e=0;e<l;e+=1)c[e]=t.values[e].slice(0,u>0?-u:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:c}).values.length||0===t.values[0].length)return this}this.Hb.PS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.Bs.Ms(),this._v=!0,this}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Hb.Be(this.Te),this.Bs.Ms(),this}getFillStyle(){return this.Te}clear(){return this.Hb.Ot(),this.Bs.Ms(),this}setIntensityInterpolation(t){return t=t||"disabled",this.Hb.FS(t),this.Bs.Ms(),this}getIntensityInterpolation(){return this.Hb.IS()}ov(){return this.uv&&this.getVisible()}ze(t,e){t.ds(e),this.Bs.Ms()}Re(){}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}}class iu extends Zl{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Cs="Line Series",this.jb=[],this.Zb=!1,this.Qb=!1,this.yu=me(this.ts.polarLineSeriesStrokeStyle,n),this.Jb=t.om(s,void 0,[Uh.UserSeries]).We(this.yu).ds(this.getHighlight()),this.As(this.Jb)}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=this.Jb.Kb(s);if(!r)return;const n=tu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ki(t,e){return De({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,"show-nearest")))}setData(t){return 0!==this.jb.length&&this.chart.cs.Zn(fa.Tf),this.jb=Jl(t),this.Zb=!0,this.Ub=ql(this.jb),this.Bs.Ms(),this}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const e=this.yu;return this.Jb.We(e),this.Bs.Ms(),this}getStrokeStyle(){return this.yu}setConnectDataAutomaticallyEnabled(t){return this.Qb=t,this.Bs.Ms(),this}getConnectDataAutomaticallyEnabled(){return this.Qb}ov(){return this.uv&&this.jb.length>0&&this.getVisible()}ze(t,e){t.ds(e),this.Bs.Ms()}Re(){if(this.Zb||this.scale.qb()){const t=Ql(this.jb,this.scale),e=Je(t);this.Qb?(t.push({...t[0]}),this.Jb.Hl(!0)):this.Jb.Hl(!1),this.Jb.Ot().Al(t).ta(e),this.Zb=!1,this.Jb.zs()}}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{stroke:this.yu})}}class su extends Zl{constructor(t,i,s,r,n,o,a){super(t,i,s,r,n,a),this.Cs="Point Line Series",this.jb=[],this.Zb=!1,this.Qb=!1,this.tM=3,this._a=0,this.iM=e.PointShape.Circle,this.Te=me(this.ts.polarPointLineSeriesFillStyle,o),this.yu=me(this.ts.polarPointLineSeriesStrokeStyle,o),this.Jb=t.om(r,void 0,[Uh.UserSeries]).We(this.yu).ds(this.getHighlight()),this.As(this.Jb),this.sM=t.Bv(r).Be(this.Te).ll(this.iM).it(this.tM).ds(this.getHighlight()),this.As(this.sM)}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=this.Jb.Kb(s);if(!r)return;const n=tu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ki(t,e){return De({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}setData(t){return 0!==this.jb.length&&this.chart.cs.Zn(fa.Tf),this.jb=Jl(t),this.Zb=!0,this.Ub=ql(this.jb),this.Bs.Ms(),this}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const e=this.yu;return this.Jb.We(e),this.Bs.Ms(),this}getStrokeStyle(){return this.yu}setPointFillStyle(t){this.Te="function"==typeof t?t(this.Te):t;const e=this.Te;return this.sM.Be(e),this.Bs.Ms(),this}getPointFillStyle(){return this.Te}setPointSize(t){return this.tM=t,this.sM.it(t),this.Bs.Ms(),this}getPointSize(){return this.tM}setPointShape(t){return this.iM=t,this.sM.ll(this.iM),this}getPointShape(){return this.iM}setPointRotation(t){return this._a=t,this.sM.Jh(t),this.Bs.Ms(),this}getPointRotation(){return this._a}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te,stroke:this.yu})}setConnectDataAutomaticallyEnabled(t){return this.Qb=t,this.Bs.Ms(),this}getConnectDataAutomaticallyEnabled(){return this.Qb}ov(){return this.uv&&this.jb.length>0&&this.getVisible()}ze(t,e){t.ds(e),this.Bs.Ms()}Re(){if(this.Zb||this.scale.qb()){const t=Ql(this.jb,this.scale),e=Je(t);this.Qb?(t.push({...t[0]}),this.Jb.Hl(!0)):this.Jb.Hl(!1),this.Jb.Ot().Al(t).ta(e),this.sM.Ot().Al(t).ta(e),this.Zb=!1,this.Jb.zs(),this.sM.zs()}}Ps(){return this.ws||this.iM}}class ru extends bn{constructor(t,e,i,s,n,o,a,h,l){super(),this.Zo=_e(),this.R=new r.Eventer,this.ji=!1,this.eM=s,this.hM=n,this.rM=o,this.nM=a,this.oM=h,this.Bs=t,this.scale=e,this.aM=i,this.ts=l}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}dispose(){return this.aM&&this.aM(this),this.Bs.cs.Ms(),this.R.emit("dispose",this),this.ji=!0,this}setVisible(t){return super.setVisible(t),this.rM(),this.Bs.cs.Ms(),this}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}setMouseInteractions(t){return this.nM(this,t),this}getMouseInteractions(){return this.oM(this)}}class nu extends ru{constructor(t,e,i,s,r,n,o,a,h,l,u,c,d,f,g,y,p){super(t,e,i,s,r,n,o,a,p),this.lM=1,this.uM=1,this.Bs=t,this.scale=e,this.dimensionStrategy=h,this.start=l,this.end=u,this.lowerExtreme=c,this.lowerQuartile=d,this.median=f,this.upperQuartile=g,this.upperExtreme=y,this.boundaries=m(this.dimensionStrategy.toPoint(l,c),this.dimensionStrategy.toPoint(u,y)),this.cM=this.ts.boxSeriesBodyFillStyle,this.dM=this.ts.boxSeriesBodyStrokeStyle,this.yu=this.ts.boxSeriesStrokeStyle,this.fM=this.ts.boxSeriesMedianStrokeStyle,this.zs()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.lM=t,this.zs(),this}getBodyWidth(){return this.lM}setBodyFillStyle(t){return this.cM="function"==typeof t?t(this.cM):t,this.hM(),this}getBodyFillStyle(){return this.cM}setBodyStrokeStyle(t){return this.dM="function"==typeof t?t(this.dM):t,this.hM(),this}getBodyStrokeStyle(){return this.dM}setTailWidth(t){return this.uM=t,this.zs(),this}getTailWidth(){return this.uM}setStrokeStyle(t){return this.yu="function"==typeof t?t(this.yu):t,this.hM(),this}getStrokeStyle(){return this.yu}setMedianStrokeStyle(t){return this.fM="function"==typeof t?t(this.fM):t,this.hM(),this}getMedianStrokeStyle(){return this.fM}zs(){this.eM()}getDominantStyle(){return this.getBodyFillStyle()}}class ou extends $l{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,h,l),this.Ds=!0,this.ss=new Map,this.chart=t,this.Bs=i,this.axisX=s,this.axisY=r,this.axisXAttachHandler=n,this.axisYAttachHandler=o,this.AM=a,this.scale=Ni(s.At,r.At),this.gM=t.pM,t.pM+=1,this.yM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.mM),this.onMouseLeave(this.chart.vM),this.onMouseWheel(this.chart.dv),this.onMouseDragStart(this.chart.SM),this.onMouseDrag(this.chart.fv),this.onMouseDragStop(this.chart.Av),this.onTouchStart(this.chart.gv.onTouchStart),this.onTouchMove(this.chart.gv.onTouchMove),this.onTouchEnd(this.chart.gv.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}xM(){const t=Array.from(this.ss.keys());for(const e of t)if(e.bM)return e.bM}setClipping(t){return this.Ds=t,this.Bs.Ms(),this}getClipping(){return this.Ds}attacheAxis(){this.MM=this.axisXAttachHandler(this),this._M=this.axisYAttachHandler(this)}As(t,e){super.As(t,e),t.oa(this.gM)}getName(){const t=this.fs(),e="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Cs||e.length>0&&e||"Series"}setDrawOrder(t){return this.gM=t.seriesDrawOrderIndex,this.ss.forEach(((t,e)=>{e.oa(this.gM)})),this.chart.cs.Ms(),this}dispose(){return super.dispose(),this.MM(this),this._M(this),this}_m(){super._m(),Hi(this.Ds,Array.from(this.ss.keys()),this.scale)}getBoundaries(){return m(u(this.getXMin()||0,this.getYMin()||0),u(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const au=(t,e,i,s)=>{const r=t.length;let n=0;if(void 0!==e){const r=i-e;if(r>0){const e=t.slice(n,r);n+=r,s(e,!0)}}for(;n<r;){const e=t.slice(n,n+i);n+=i,s(e,!1)}},hu=(t,e=t=>t)=>{const i=[];let s;for(let r=0;r<t.length;r+=1){s=t[r];const n=e(s.al()),o=s.ol(),a=o?e(o):[];let h=!1,l=!1;"Yl"in s&&(h=s.Yl(),l=s.$l()),i.push.apply(i,n.slice(h?1:0,n.length-(l&&0===a.length?1:0))),i.push.apply(i,a.slice(h&&0===n.length?1:0,a.length-(l?1:0)))}return i};class lu extends ou{constructor(){super(...arguments),this.wM=[],this.CM=void 0,this.kM=!1,this.aM=t=>{const e=this.wM.findIndex((e=>e===t));e>=0&&this.wM.splice(e,1),this.kM=!0,this.CM=void 0,this.Bs.Ms()},this.eM=()=>{this.CM=void 0,this.kM=!0,this.chart.cs.Ms()},this.hM=()=>{this.kM=!0,this.chart.cs.Ms()},this.rM=()=>{this.CM=void 0,this.kM=!0,this.chart.cs.Ms()},this.nM=(t,e)=>{this.setMouseInteractions(e)},this.TM=t=>this.getMouseInteractions()}Re(){super.Re(),this.kM&&(this.FM(this.wM),this.kM=!1)}clear(){return this.wM.slice().forEach(Et),this.wM.length=0,this.kM=!0,this.CM=void 0,this.Bs.Ms(),this}IM(t,e){void 0!==e?this.wM.splice(e,0,t):this.wM.push(t),this.kM=!0,this.PM&&this.PM(t),t.onMouseEnter(((t,e)=>this._t(t,e,void 0,{}))),t.onMouseLeave(((t,e)=>this.wt(t,e,void 0))),t.onMouseClick(((t,e)=>this.Ct(t,e,void 0,{}))),t.onMouseDoubleClick(((t,e)=>this.kt(t,e,void 0,{}))),t.onMouseDown(((t,e)=>this.Tt(t,e,void 0,{}))),t.onMouseUp(((t,e)=>this.Ft(t,e,void 0,{}))),t.onMouseMove(((t,e)=>this.It(t,e,void 0,{}))),t.onMouseDragStart(((t,e,i)=>this.Dt(t,e,i,void 0,{}))),t.onMouseDrag(((t,e,i,s,r)=>this.Pt(t,e,i,s,r,void 0,{}))),t.onMouseDragStop(((t,e,i,s)=>this.Bt(t,e,i,s,void 0,{}))),t.onMouseWheel(((t,e)=>this.Lt(t,e,void 0,{}))),t.onTouchStart(((t,e)=>this.Rt(t,e,void 0,{}))),t.onTouchMove(((t,e)=>this.Et(t,e,void 0,{}))),t.onTouchEnd(((t,e)=>this.zt(t,e,void 0,{}))),this.Bs.Ms()}ov(){return this.uv&&this.wM.length>0&&this.getVisible()}setDefaultStyle(t){this.PM=t,this.wM.forEach(t),t(this.DM);for(let t=0;t<this.Ji.length;t+=1)this.styleLegendEntry(this.Ji[t]);return this.kM=!0,this.chart.cs.Ms(),this}getXMax(){return this.CM||(this.CM=this.BM()),this.CM.max.x}getXMin(){return this.CM||(this.CM=this.BM()),this.CM.min.x}getYMax(){return this.CM||(this.CM=this.BM()),this.CM.max.y}getYMin(){return this.CM||(this.CM=this.BM()),this.CM.min.y}Dr(){return u(0,0)}BM(){const t=m(c(Ve,Ve),c(ze,ze));for(let e=0;e<this.wM.length;e+=1)if(this.wM[e].getVisible()){const i=this.wM[e].getBoundaries();t.min.x=Math.min(t.min.x,i.min.x),t.min.y=Math.min(t.min.y,i.min.y),t.max.x=Math.max(t.max.x,i.max.x),t.max.y=Math.max(t.max.y,i.max.y)}return t}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.wM.length>0?this.wM[0].getDominantStyle():this.DM.getDominantStyle()})}}const uu=(t,e=1,i)=>{const s=void 0!==i?i:0,r=new Array(t.length);for(let i=0;i<t.length;i+=1)r[i]={x:s+e*i,y:t[i]};return r};class cu extends ou{constructor(t,i,s,r,n,o,a,h,l,u,c){super(t,i,s,r,n,o,a,h,u,c),this.LM=[],this._u=[],this.RM=0,this.Is=!1,this.Xi=e.HighlightModes.onHover,this.chart.cs.Zn(fa._f),this.EM=l}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.RM=void 0!==e&&e>0?e:0,this.Bs.Ms(),this}add(t){if(0!==this.LM.length&&this.chart.cs.Zn(fa.Tf),Array.isArray(t)?this.zM(t):this.zM([t]),this._u.length>0){const t=this._u[this._u.length-1];this.VM={x:t.x,y:t.y}}return this}addArrayX(t,e=1,i){let s=i;return s||(s=this.VM?this.VM.y+e:0),this.add(((t,e=1,i)=>{const s=void 0!==i?i:0,r=new Array(t.length);for(let i=0;i<t.length;i+=1)r[i]={x:t[i],y:s+e*i};return r})(t,e,s)),this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.VM?this.VM.x+e:0),this.add(uu(t,e,s)),this}addArraysXY(t,e){if(t.length!==e.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,e)=>{const i=new Array(t.length);for(let s=0;s<t.length;s+=1)i[s]={x:t[s],y:e[s]};return i})(t,e)),this}getPointAmount(){return this.LM.reduce(((t,e)=>t+e.pl()+e.yl()),this._u.length)}clear(){this.OM=void 0;for(let t=0;t<this.LM.length;t+=1)this.LM[t].Ot();return this._u.length=0,this.VM=void 0,this.Bs.Ms(),this.R.emit("dataClear",this),this}getLastPoint(){return this.VM}ov(){return this.uv&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.EM.getXMax(this.LM,this.OM)||0}getXMin(){return this.EM.getXMin(this.LM,this.OM)||0}getYMax(){return this.EM.getYMax(this.LM,this.OM)||0}getYMin(){return this.EM.getYMin(this.LM,this.OM)||0}Dr(){const t=u(0,0);for(const e of this.LM)t.x=Math.max(t.x,e.Tl()),t.y=Math.max(t.y,e.Fl());return t}NM(t,e,i,s){this.EM.NM(t,e,i,s,this.scale,(t=>{}))}vv(){super.vv(),this.GM&&this.NM(this.LM,this.getPointAmount(),this.GM,this.RM)}Re(){super.Re();const t=this.getBoundaries();this._u.length>0&&(this.WM(this._u),this._u=[]);for(const e of this.LM)e.ta(t);return super.Re()}_m(){super._m(),this.OM=void 0,this._u.length=0}zM(t){0!==t.length&&(this.OM?this.OM=ei(this.OM,Je(t)):this.OM=Je(t),this.R.emit("dataAdd",this,t,this.OM),this._u=ae(this._u,t,{canReturnB:!1}),this.Bs.Ms())}UM(){return hu(this.LM)}YM(t){return this.R.on("dataAdd",t)}HM(t){return this.R.off(t)}$M(t){return this.R.on("dataClear",t)}XM(t){return this.R.off(t)}}const du=(t,e,i,s)=>{let r,n,o=Number.MAX_VALUE;for(let a=0;a<e.length;a+=1){const h=e[a],l=i(h,t);if(l){const e=s(t,l);(void 0===r||e<o)&&(r=l,n=h,o=e)}}return r&&n?[r,n]:void 0};class fu extends lu{constructor(t,e,i,s,r,n,o,a,h,l,u,c){super(t,e,i,s,r,n,o,a,l,u),this.Cs="Box Series",this.jM=Re(),this.ZM=t=>ct(this.Ls.toPoint((t.start+t.end)/2,t.median),this.scale,this.Bs.cs.At),this.chart.cs.Zn(fa.Cf),this.Ls=h,this.DM=new nu(this.Bs,this.scale,this.aM,Rt,Rt,Rt,Rt,(t=>!1),this.Ls,0,0,0,0,0,0,0,this.ts).dispose(),this.QM=new $h((()=>{const t=this.Bs.Yg(this.scale);return this.As(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.We(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.$g(e.start,e.end),i}))))),this.JM=new $h((()=>{const t=this.jM.Mt(this.Bs.Hm(this.scale));return this.As(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Be(i.fillStyle).De(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.Cl(e.vertices),this.jM.Vt(i,e.figure),i})))),(()=>{this.jM.Ot()}),((t,e)=>{this.ys(e)}))}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.wM.length)return;const r=du(s,this.wM.filter((t=>t.getVisible())),this.ZM,$e);if(!r)return;const n=ct(r[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],start:r[1].start,end:r[1].end,lowerExtreme:r[1].lowerExtreme,lowerQuartile:r[1].lowerQuartile,median:r[1].median,upperQuartile:r[1].upperQuartile,upperExtreme:r[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}yM(t){if(!(t instanceof Vi||t instanceof zi))throw new Error("BoxSeries only supports Linear Axes")}FM(t){const e=this.JM.wm(),i=this.QM.wm();t.forEach((t=>{if(!t.getVisible())return;const s=this.Ls.toPoint((t.start+t.end-t.lM*(t.end-t.start))/2,t.lowerQuartile),r=this.Ls.toPoint((t.end-t.start)*t.lM,t.upperQuartile-t.lowerQuartile),n=this.Ls.toPoint((t.start+t.end)/2,t.lowerQuartile),o=this.Ls.toPoint((t.start+t.end)/2,t.lowerExtreme),a=this.Ls.toPoint((t.start+t.end)/2,t.upperQuartile),h=this.Ls.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Ls.toPoint((t.start+t.end-t.uM*(t.end-t.start))/2,t.lowerExtreme),u=this.Ls.toPoint((t.start+t.end+t.uM*(t.end-t.start))/2,t.lowerExtreme),c=this.Ls.toPoint((t.start+t.end-t.uM*(t.end-t.start))/2,t.upperExtreme),d=this.Ls.toPoint((t.start+t.end+t.uM*(t.end-t.start))/2,t.upperExtreme),f=this.Ls.toPoint((t.start+t.end-t.lM*(t.end-t.start))/2,t.median),g=this.Ls.toPoint((t.start+t.end+t.lM*(t.end-t.start))/2,t.median);e.add({Zo:t.Zo,vertices:[{x:s.x,y:s.y},{x:s.x,y:s.y+r.y},{x:s.x+r.x,y:s.y+r.y},{x:s.x+r.x,y:s.y}],figure:t},{fillStyle:t.cM,strokeStyle:t.dM}),i.add({Zo:0,start:n,end:o,figure:t},{strokeStyle:t.yu}),i.add({Zo:0,start:a,end:h,figure:t},{strokeStyle:t.yu}),i.add({Zo:0,start:l,end:u,figure:t},{strokeStyle:t.yu}),i.add({Zo:0,start:c,end:d,figure:t},{strokeStyle:t.yu}),i.add({Zo:0,start:f,end:g,figure:t},{strokeStyle:t.fM})})),e.finishPlot(),i.finishPlot()}add(t){const e=new nu(this.Bs,this.scale,this.aM,this.eM,this.hM,this.rM,this.nM,this.TM,this.Ls,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.ts);return this.IM(e),this.kM=!0,this.chart.cs.Ms(),e}}class gu extends ru{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.tl=m(u(0,0),u(0,0)),this.Bs=t,this.scale=e,this.Te=me(h.ellipseSeriesFillStyle,l),this.Fe=me(h.ellipseSeriesStrokeStyle,l)}getBoundaries(){return this.tl}setDimensions(t){return this.dimensions=t,this.tl=m(u(t.x-t.radiusX,t.y-t.radiusY),u(t.x+t.radiusX,t.y+t.radiusY)),this.eM(),this.Bs.Ms(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.hM(),this}getFillStyle(){return this.Te}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.hM(),this}getStrokeStyle(){return this.Fe}getDominantStyle(){return this.Te}}class mu extends lu{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Cs="Ellipse Series",this.jM=Re(),this.ZM=t=>{const e=t.getDimensions(),i=u(e.x,e.y);return ct(i,this.scale,this.Bs.cs.At)},this.chart.cs.Zn(fa.Cf),this.KM=c,this.DM=new gu(this.Bs,this.scale,Rt,Rt,Rt,Rt,Rt,(t=>!1),this.ts,this.KM).dispose(),this.JM=new $h((()=>{const t=this.jM.Mt(this.Bs.Hm(this.scale));return this.As(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Be(i.fillStyle).De(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.Cl(e.vertices),this.jM.Vt(i,e.figure),i})))),(()=>{this.jM.Ot()}),((t,e)=>{this.ys(e)}))}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.wM.length)return;const r=du(s,this.wM.filter((t=>t.getVisible())),this.ZM,$e);if(!r)return;const n=ct(r[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}yM(t){if(!(t instanceof Vi||t instanceof zi))throw new Error("EllipseSeries only supports Linear Axes")}FM(t){const e=this.JM.wm();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensions(),s=[],r=void 0!==i.drawSteps?i.drawSteps:72;for(let t=0;t<=r;t+=1){const e=t/r*2*Math.PI,n=i.x+i.radiusX*Math.cos(e),o=i.y+i.radiusY*Math.sin(e);s.push({x:n,y:o})}const n=t.getFillStyle(),o=t.getStrokeStyle();e.add({Zo:t.Zo,vertices:s,figure:t},{fillStyle:n,strokeStyle:o})})),e.finishPlot()}add(t){const e=new gu(this.Bs,this.scale,this.aM,this.eM,this.hM,this.rM,this.nM,this.TM,this.ts,this.KM).setDimensions(t);return this.IM(e),this.kM=!0,this.chart.cs.Ms(),e}}class yu extends ru{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h),this.qM=[],this.tl=Ne,this.Bs=t,this.scale=e,this.Te=me(h.polygonSeriesFillStyle,l),this.Fe=me(h.polygonSeriesStrokeStyle,l)}getBoundaries(){return this.tl}setDimensions(t){return this.qM=t,this.tl=Je(this.qM),this.eM(),this.Bs.Ms(),this}getDimensions(){return this.qM}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.hM(),this}getFillStyle(){return this.Te}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.hM(),this}getStrokeStyle(){return this.Fe}getDominantStyle(){return this.Te}}class pu extends lu{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Cs="Polygon Series",this.jM=Re(),this.ZM=t=>{const e=t.getBoundaries(),i=u((e.min.x+e.max.x)/2,(e.min.y+e.max.y)/2);return ct(i,this.scale,this.Bs.cs.At)},this.chart.cs.Zn(fa.Cf),this.KM=c,this.DM=new yu(this.Bs,this.scale,Rt,Rt,Rt,Rt,Rt,(t=>!1),this.ts,this.KM).dispose(),this.JM=new $h((()=>{const t=this.jM.Mt(this.Bs.Hm(this.scale));return this.As(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Be(i.fillStyle).De(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.Cl(e.vertices),this.jM.Vt(i,e.figure),i})))),(()=>{this.jM.Ot()}),((t,e)=>{this.ys(e)}))}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.wM.length)return;const r=du(s,this.wM.filter((t=>t.getVisible())),this.ZM,$e);if(!r)return;const n=ct(r[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],coordinates:r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}yM(t){}FM(t){const e=this.JM.wm();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensions(),s=t.getFillStyle(),r=t.getStrokeStyle();e.add({Zo:t.Zo,vertices:i,figure:t},{fillStyle:s,strokeStyle:r})})),e.finishPlot()}add(t){const e=new yu(this.Bs,this.scale,this.aM,this.eM,this.hM,this.rM,this.nM,this.TM,this.ts,this.KM).setDimensions(t);return this.IM(e),this.kM=!0,this.chart.cs.Ms(),e}}class xu extends ru{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h),this.t_={x:0,y:0,width:0,height:0},this.i_={x1:0,y1:0,x2:0,y2:0},this.tl=m(u(0,0),u(0,0)),this.Te=me(h.rectangleSeriesFillStyle,l),this.Bs=t,this.scale=e,this.Fe=me(h.rectangleSeriesStrokeStyle,l)}getBoundaries(){return this.tl}setDimensions(t){return"x"in t?(this.t_=t,this.i_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.i_=t,this.t_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.tl=Je([this.t_,u(this.t_.x+this.t_.width,this.t_.y+this.t_.height)]),this.eM(),this.Bs.Ms(),this}getDimensionsPositionAndSize(){return this.t_}getDimensionsTwoPoints(){return this.i_}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.hM(),this}getFillStyle(){return this.Te}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.hM(),this}getStrokeStyle(){return this.Fe}getDominantStyle(){return this.Te}}class Au extends lu{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Cs="Rectangle Series",this.jM=Re(),this.ZM=t=>{const e=t.getDimensionsPositionAndSize(),i=u(e.x+e.width/2,e.y+e.height/2);return ct(i,this.scale,this.Bs.cs.At)},this.chart.cs.Zn(fa.Cf),this.KM=c,this.DM=new xu(this.Bs,this.scale,Rt,Rt,Rt,Rt,Rt,(t=>!1),this.ts,this.KM).dispose(),this.JM=new $h((()=>{const t=this.jM.Mt(this.Bs.Hm(this.scale));return this.As(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Be(i.fillStyle).De(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.Cl(e.vertices),this.jM.Vt(i,e.figure),i})))),(()=>{this.jM.Ot()}),((t,e)=>{this.ys(e)}))}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.wM.length)return;const r=du(s,this.wM.filter((t=>t.getVisible())),this.ZM,$e);if(!r)return;const n=ct(r[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensionsPositionAndSize(),...r[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}yM(t){}FM(t){const e=this.JM.wm();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensionsTwoPoints(),s=[{x:i.x1,y:i.y1},{x:i.x1,y:i.y2},{x:i.x2,y:i.y2},{x:i.x2,y:i.y1}],r=t.getFillStyle(),n=t.getStrokeStyle();e.add({Zo:t.Zo,vertices:s,figure:t},{fillStyle:r,strokeStyle:n})})),e.finishPlot()}add(t){const e=new xu(this.Bs,this.scale,this.aM,this.eM,this.hM,this.rM,this.nM,this.TM,this.ts,this.KM).setDimensions(t);return this.IM(e),this.kM=!0,this.chart.cs.Ms(),e}}class Su extends ru{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.tl=m(u(0,0),u(0,0)),this.ts=h,this.Bs=t,this.scale=e,this.Fe=me(h.segmentSeriesStrokeStyle,l)}getBoundaries(){return this.tl}setDimensions(t){return this.dimensions=t,this.tl=m(u(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),u(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.eM(),this.Bs.Ms(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.hM(),this}getStrokeStyle(){return this.Fe}getDominantStyle(){const t=this.Fe;return t!==nt?t.getFillStyle():V}}class vu extends lu{constructor(t,e,i,s,r,n,o,a,h,l,c){super(t,e,i,s,r,n,o,a,h,l),this.Cs="Segment Series",this.s_=Re(),this.ZM=t=>{const e=t.getDimensions(),i=u((e.startX+e.endX)/2,(e.startY+e.endY)/2);return ct(i,this.scale,this.Bs.cs.At)},this.chart.cs.Zn(fa.Cf),this.KM=c,this.DM=new Su(this.Bs,this.scale,Rt,Rt,Rt,Rt,Rt,(t=>!1),this.ts,this.KM).dispose(),this.QM=new $h((()=>{const t=this.s_.Mt(this.Bs.Yg(this.scale));return this.As(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.We(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.$g(e.start,e.end),this.s_.Vt(i,e.figure),i})))),(()=>{this.s_.Ot()}),((t,e)=>{this.ys(e)}))}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.wM.length)return;const r=du(s,this.wM.filter((t=>t.getVisible())),this.ZM,$e);if(!r)return;const n=ct(r[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}yM(t){}FM(t){const e=this.QM.wm();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensions(),s={x:i.startX,y:i.startY},r={x:i.endX,y:i.endY},n=t.getStrokeStyle();e.add({Zo:t.Zo,start:s,end:r,figure:t},{strokeStyle:n})})),e.finishPlot()}add(t){const e=new Su(this.Bs,this.scale,this.aM,this.eM,this.hM,this.rM,this.nM,this.TM,this.ts,this.KM).setDimensions(t);return this.IM(e),this.kM=!0,this.chart.cs.Ms(),e}}class bu extends ou{constructor(t,e,i,s,r,n,o,a,h,l,u,c){super(t,e,i,s,r,n,o,a,l,u),this.Cs="Heatmap Grid Series",this.xS={},this.chart.cs.Zn(fa.wf),this.e_=h,this.ts=l;const d=c;this.Te=me(l.heatmapGridSeriesFillStyle,d),this.bS=me(this.ts.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:h.dataOrder||"columns",columns:h.columns,rows:h.rows};this.Kn=f,this.h_=this.Bs.r_(this.scale,[],f).Be(this.Te).MS(this.bS).ds(this.getHighlight()),this.As(this.h_),this.setHighlightOnHover(!1)}solveNearest(t,e="show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=ct(s,this.Bs.cs.At,this.scale),n=hh(e)?this.h_.Xb(r):this.h_.qc(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:K(this.Te)?this.Te.lut:void 0}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:K(this.Te)?this.Te.lut:void 0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}wS(){const t=this.xS.start||{x:0,y:0};let e;e=this.xS.end?{x:(this.xS.end.x-t.x)/this.Kn.columns,y:(this.xS.end.y-t.y)/this.Kn.rows}:this.xS.step?this.xS.step:{x:1,y:1},this.h_.CS(t,e),this.chart.cs.Ms()}setStart(t){return this.xS.start=t,this.wS(),this}getStart(){return this.h_.kS().start}setStep(t){return this.xS.step=t,this.wS(),this}getStep(){return this.h_.kS().step}setEnd(t){return this.xS.end=t,this.wS(),this}getEnd(){return this.h_.kS().end}clear(){return this.h_.Ot(),this.Bs.Ms(),this.R.emit("dataClear",this),this}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.h_.MS(this.bS),this.Bs.Ms(),this.R.emit("styleChange",this),this}getWireframeStyle(){return this.bS}setIntensityInterpolation(t){return t=t||"disabled",this.h_.FS(t),this.Bs.Ms(),this.R.emit("styleChange",this),this}getIntensityInterpolation(){return this.h_.IS()}ov(){return this.uv&&this.getVisible()}Zd(){return de(this.Te)}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}n_(t){this.h_.n_().forEach((e=>{t.h_.PS(e)}))}XM(t){return this.R.off(t)}$M(t){return this.R.on("dataClear",t)}o_(t){return this.R.on("styleChange",t)}a_(t){return this.R.off(t)}getXMax(){const t=this.h_;return t?t.St():void 0}getXMin(){const t=this.h_;return t?t.vt():void 0}getYMax(){const t=this.h_;return t?t.bt():void 0}getYMin(){const t=this.h_;return t?t.xt():void 0}Dr(){const t=u(0,0);return t.x=Math.max(t.x,this.h_.Tl()),t.y=Math.max(t.y,this.h_.Fl()),t}yM(t){if(!(t instanceof Vi))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Vi&&t._i())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}ze(t,e){t.ds(e),this.Bs.Ms()}Re(){return super.Re(),this.h_.ta(this.getBoundaries()),this}}class Mu extends bu{constructor(t,e,i,s,r,n,o,a,h,l,u,c){super(t,e,i,s,r,n,o,a,h,l,u,c),this._v=!1}invalidateIntensityValues(t){if(this._v&&this.chart.cs.Zn(fa.Tf),Array.isArray(t)){if(0===t.length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Kn.dataOrder?t.length:t[0].length,rows:"rows"===this.Kn.dataOrder?t.length:t[0].length},i="columns"===this.Kn.dataOrder?this.Kn.columns:this.Kn.rows,s="columns"===this.Kn.dataOrder?this.Kn.rows:this.Kn.columns;if(e.x>i||e.y>s){if(!0===this.chart.SA.io){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Kn.columns}x${this.Kn.rows}, input ${e.columns}x${e.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.h_.PS({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Kn.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Kn.dataOrder?t.values.length:t.values[0].length},i="columns"===this.Kn.dataOrder?t.iColumn:t.iRow,s=i+e.primary-1,r="columns"===this.Kn.dataOrder?t.iRow:t.iColumn,n=r+e.secondary-1,o=("columns"===this.Kn.dataOrder?this.Kn.columns:this.Kn.rows)-1,a=("columns"===this.Kn.dataOrder?this.Kn.rows:this.Kn.columns)-1;if(i<0||r<0){if(!0===this.chart.SA.io){const e=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Tt.console.warn(e)}return this}if(s>o||n>a){if(!0===this.chart.SA.io){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Kn.columns}x${this.Kn.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(i)}const i=Math.max(s-o,0),r=e.primary-i,h=Math.max(n-a,0),l=[];for(let e=0;e<r;e+=1)l[e]=t.values[e].slice(0,h>0?-h:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.h_.PS({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.R.emit("invalidateIntensity",this,t),this.Bs.Ms(),this._v=!0,this}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.h_.Be(this.Te),this.R.emit("styleChange",this),this.Bs.Ms(),this}getFillStyle(){return this.Te}l_(t){return this.R.on("invalidateIntensity",t)}u_(t){return this.R.off(t)}}class Tu extends ou{constructor(t,e,i,s,r,n,o,a,h,l,u,c){super(t,e,i,s,r,n,o,a,l,u),this.Cs="Scrolling Heatmap Grid Series",this.xS={},this.chart.cs.Zn(fa.wf),this.chart.cs.Zn(fa.Tf);const d=c;this.Te=me(l.heatmapScrollingGridSeriesFillStyle,d),this.bS=me(this.ts.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...h};this.Kn=f,this.c_=this.Bs.d_(this.scale,[],f).Be(this.Te).MS(this.bS).ds(this.getHighlight()),this.As(this.c_),this.setHighlightOnHover(!1)}solveNearest(t,e="show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=ct(s,this.Bs.cs.At,this.scale),n=hh(e)?this.c_.Xb(r):this.c_.qc(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:K(this.Te)?this.Te.lut:void 0}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:K(this.Te)?this.Te.lut:void 0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}wS(){const t=this.xS.start||{x:0,y:0};let e;e=this.xS.step?this.xS.step:{x:1,y:1},this.c_.CS(t,e),this.chart.cs.Ms()}setStart(t){return this.xS.start=t,this.wS(),this}getStart(){return this.c_.kS().start}setStep(t){return this.xS.step=t,this.wS(),this}getStep(){return this.c_.kS().step}clear(){return this.c_.Ot(),this.Bs.Ms(),this}setWireframeStyle(t){return this.bS="function"==typeof t?t(this.bS):t,this.c_.MS(this.bS),this.Bs.Ms(),this}getWireframeStyle(){return this.bS}setPixelInterpolationMode(t){return t=t||"disabled",this.c_.FS(t),this.Bs.Ms(),this}getPixelInterpolationMode(){return this.c_.IS()}setDataCleaning(t){return this.c_.Cu(t),this.Bs.Ms(),this}ov(){return this.uv&&this.getVisible()}Zd(){return de(this.Te)}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}Be(t){return this.Te="function"==typeof t?t(this.Te):t,this.c_.Be(this.Te),this.Bs.Ms(),this}yM(t){if(!(t instanceof Vi))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Vi&&t._i())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.c_.St()||0}getXMin(){return this.c_.vt()||0}getYMax(){return this.c_.bt()||0}getYMin(){return this.c_.xt()||0}Dr(){const t=u(0,0);return t.x=Math.max(t.x,this.c_.Tl()),t.y=Math.max(t.y,this.c_.Fl()),t}ze(t,e){t.ds(e),this.Bs.Ms()}}class wu extends Tu{constructor(t,e,i,s,r,n,o,a,h,l,u,c){super(t,e,i,s,r,n,o,a,h,l,u,c)}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const e=t.length,i=t[0].length,s=("columns"===this.Kn.scrollDimension?t.length:t[0].length,"rows"===this.Kn.scrollDimension?t.length:t[0].length,0+i-1),r=this.Kn.resolution-1;if(s>r){if(!0===this.chart.SA.io){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Kn.resolution}, input ${e}x${i}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Tt.console.warn(t)}const s=[];for(let i=0;i<e;i+=1)s[i]=t[i].slice(0,r+1);t=s}return this.c_.ES(t),this.Bs.Ms(),this}invalidateIntensityValues(t){return this.c_.PS(t.iSample,t.values),this.Bs.Ms(),this}getSampleCount(){return this.c_.f_()}setFillStyle(t){return this.Be(t),this}getFillStyle(){return this.Te}}const Cu=(t,e,i)=>{let s,r,n=Number.MAX_VALUE;for(let o=0;o<e.length;o+=1){const a=e[o],h=i(a,t);if(h){const e=$e(t,h[0]),i=$e(t,h[1]);(void 0===s||e<n||i<n)&&(s=h,r=a,e<n?n=e:i<n&&(n=i))}}return s&&r?[s,r]:void 0};class ku extends ou{constructor(){super(...arguments),this.LM=[],this._u=[],this.A_=[],this.g_=[],this.GM=1e3,this.RM=0,this.Xi=e.HighlightModes.onHover,this.Dl={type:"disabled",packager:(t,e,i)=>t.slice()},this.p_=[],this.y_=[],this.m_=!1,this.v_=(t,e)=>{const i=t.Kb(e);if(i)return[ct(i[0],this.scale,this.Bs.cs.At),ct(i[1],this.scale,this.Bs.cs.At)]},this.S_=(t,e)=>{const i=t.x_(e);if(i)return[ct(i[0],this.scale,this.Bs.cs.At),ct(i[1],this.scale,this.Bs.cs.At)]},this.Zd=()=>de(this.b_)||de(this.M_),this.__=t=>{const e=t.length;if(this.LM.length>0){const i=this.LM.length-1,s=this.LM[i];if(e>0){const[e,i]=s.al(),[r,n]=s.ol();if((r?e.length+r.length:e.length)>=this.GM){const o=r&&r.length>0?r[r.length-1]:e[e.length-1],a=n&&n.length>0?n[n.length-1]:i[e.length-1],h=(o.x+t[0].position)/2,l=yi(h,o,u(t[0].position,t[0].high)).y,c=yi(h,a,u(t[0].position,t[0].low)).y,f=d(h,l,c);s.Al(f,m(u(h,c),u(h,l))).Hl(!0),this.w_([f].concat(t)).Ul(!0)}else s.Al(t)}}else e>0&&this.w_(t)},this.C_=t=>{const e=this.p_,i=t.length;if(this.p_.length>0){if(i>0){const i=e[e.length-1],s=i.al(),r=i.ol();if(s.length+r.length>=this.GM){const n=r.length>0?r[r.length-1]:s[s.length-1],o=(n.x+t[0].x)/2,a=yi(o,n,u(t[0].x,t[0].y)).y,h=u(o,a);i.Al(h,m(u(o,a),u(o,a))).Hl(!0),e.push(this.k_([h].concat(t),this.OM).Ul(!0))}else i.Al(t)}}else i>0&&e.push(this.k_(t))},this.T_=t=>{const e=this.y_,i=t.length;if(this.y_.length>0){if(i>0){const i=e[e.length-1],s=i.al(),r=i.ol();if(s.length+r.length>=this.GM){const n=r.length>0?r[r.length-1]:s[s.length-1],o=(n.x+t[0].x)/2,a=yi(o,n,u(t[0].x,t[0].y)).y,h=u(o,a);i.Al(h,m(u(o,a),u(o,a))).Hl(!0),e.push(this.F_([h].concat(t)).Ul(!0))}else i.Al(t)}}else i>0&&e.push(this.F_(t))}}fs(){return"ProgressiveX"}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.RM=void 0!==e&&e>0?e:0,this.Bs.Ms(),this}clear(){for(let t=0;t<this.LM.length;t+=1)this.LM[t].dispose();for(let t=0;t<this.p_.length;t+=1)this.p_[t].dispose();for(let t=0;t<this.y_.length;t+=1)this.y_[t].dispose();return this._u.length=0,this.A_.length=0,this.g_.length=0,this.OM=void 0,this.LM.length=0,this.p_.length=0,this.y_.length=0,this.Bs.Ms(),this.R.emit("dataClear",this),this}getPointAmount(){return this.LM.reduce(((t,e)=>t+e.pl()+e.yl()),this._u.length)}getXMax(){return Yt(this.LM,Pt,Math.max,Nt,this.OM)||0}getXMin(){return Yt(this.LM,Bt,Math.min,zt,this.OM)||0}getYMax(){return Yt(this.LM,Vt,Math.max,Ut,this.OM)||0}getYMin(){return Yt(this.LM,Lt,Math.min,Ot,this.OM)||0}Dr(){const t=u(0,0);for(const e of this.LM)t.x=Math.max(t.x,e.Tl()),t.y=Math.max(t.y,e.Fl());return t}ov(){return this.uv&&this.getPointAmount()>0&&this.getVisible()}yM(t){}zM(t,e,i){this._u=ae(this._u,t,{canReturnB:!1}),this.A_=ae(this.A_,e,{canReturnB:!1}),this.g_=ae(this.g_,i,{canReturnB:!1}),this.Bs.Ms()}I_(t,e,i,s){this.P_(e,i,s),this.zM(Array.isArray(t)?t:[t],e,i)}P_(t,e,i){const s=ei(Je(t),Je(e));this.OM?this.OM=ei(this.OM,s):this.OM=s,i&&(this.OM=ei(this.OM,i))}D_(){const t=this.LM.length,e=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let i=0;if(t>1)for(let s=0;s<t-1;s+=1)this.scale.x.pi(this.LM[s].St(),this.LM[s].Tl())<e&&(i+=1);return i}NM(t,e,i,s){if(i>0){const r=Math.ceil(i/e),n=t.length-r;if(n>0&&s>0){const e=n-s>0?s:n;if(e>0){for(let i=0;i<e;i+=1)t[i].dispose();t.splice(0,e)}}}}B_(t){const e=this.LM.length>0?this.LM[this.LM.length-1]:void 0,i=e?e.al()[0].length+(e.ol()[0]?e.ol()[0].length:0):void 0;au(t,i,this.GM,this.__)}L_(t){const e=this.p_.length>0?this.p_[this.p_.length-1].al().length+this.p_[this.p_.length-1].ol().length:void 0;au(t,e,this.GM,this.C_)}R_(t,e){const i=this.p_.length>0?this.p_[this.p_.length-1].al().length+this.p_[this.p_.length-1].ol().length:void 0;au(t,i,this.GM,this.C_),au(e,i,this.GM,this.T_)}w_(t,e){const i=this.Bs.E_(this.scale).Al(t,e).Be(this.b_).Gl(this.M_).Ol(this.Dl).ds(this.getHighlight());return this.LM.push(i),this.As(i),i}z_(t,e,i){const s=this.Bs.om(this.scale,void 0,[Uh.UserSeries]).Al(t,i).setMouseInteractions(!1).We(e).ds(this.getHighlight());return this.As(s),s}k_(t,e){return this.z_(t,this.V_,e)}F_(t,e){return this.z_(t,this.O_,e)}N_(t){this.b_="function"==typeof t?t(this.b_):t;const e=this.b_;for(let t=0;t<this.LM.length;t+=1)this.LM[t].Be(e);this.Bs.Ms()}G_(t){this.M_="function"==typeof t?t(this.M_):t;const e=this.M_;for(let t=0;t<this.LM.length;t+=1)this.LM[t].Gl(e);this.Bs.Ms()}W_(){return this.b_}Wl(){return this.M_}U_(t){this.V_="function"==typeof t?t(this.V_):t;const e=this.V_;for(let t=0;t<this.p_.length;t+=1)this.p_[t].We(e);this.Bs.Ms()}Y_(t){this.O_="function"==typeof t?t(this.O_):t;const e=this.O_;for(let t=0;t<this.y_.length;t+=1)this.y_[t].We(e);this.Bs.Ms()}H_(){return this.V_}X_(){return this.O_}ze(t,e){t.ds(e),this.j_(e),this.Bs.Ms()}j_(t){for(let e=0;e<this.p_.length;e+=1)this.p_[e].ds(t);for(let e=0;e<this.y_.length;e+=1)this.y_[e].ds(t)}vv(){if(super.vv(),this.m_=!1,this.RM>0){const t=this.D_();this.NM(this.LM,this.GM,this.RM,t),this.p_.length>0&&this.NM(this.p_,this.GM,this.RM,t),this.y_.length>0&&this.NM(this.y_,this.GM,this.RM,t),this.m_=!0}}Re(){if(super.Re(),this._u.length>0&&(this.B_(this._u),this.Z_(this.A_,this.g_),this.m_=!0),this.m_){const t=this.getBoundaries();for(const e of this.LM)e.ta(t);for(const e of this.p_)e.ta(t);for(const e of this.y_)e.ta(t)}}_m(){super._m(),this.OM=void 0,this._u.length=0,this.A_.length=0,this.g_.length=0}}class Eu extends ku{constructor(t,e,i,s,r,n,o,a,h=0,l,u){super(t,e,i,s,r,n,o,a,l,u),this.chart.cs.Zn(fa._f),this.Q_=h}add(t){0!==this.LM.length&&this.chart.cs.Zn(fa.Tf);const e=Array.isArray(t)?t:[t];if(e.length>0){const t=this.J_(e),[i,s]=this.K_(t);this.I_(t,i,s,m(u(Ve,this.Q_),u(ze,this.Q_)));const r=this._u[this._u.length-1];this.VM=r?{position:r.position,high:r.high,low:r.low}:void 0,this.R.emit("dataAdd",this,e,this.OM)}return this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.VM?this.VM.position+e:0),this.add(uu(t,e,s)),this}YM(t){return this.R.on("dataAdd",t)}HM(t){return this.R.off(t)}$M(t){return this.R.on("dataClear",t)}XM(t){return this.R.off(t)}}class Ru extends Eu{constructor(t,e,i,s,r,n,o,a,h,l,u){super(t,e,i,s,r,n,o,a,h,l,u);const c=t.getSeries().length;this.b_=me(this.ts.areaSeriesBipolarHighFillStyle,c),this.V_=me(this.ts.areaSeriesBipolarHighStrokeStyle,c),this.M_=me(this.ts.areaSeriesBipolarLowFillStyle,c),this.O_=me(this.ts.areaSeriesBipolarLowStrokeStyle,c)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=Cu(s,this.LM,hh(e)?this.S_:this.v_);if(void 0!==r&&void 0!==r[0]){const t=ct(r[0][0],this.Bs.cs.At,this.scale),e=ct(r[0][1],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,e]}}}J_(t){return this.q_(t)}Z_(t,e){return this.R_(t,e)}q_(t){let e=0;const i=[],s=t.length,r=this.Q_;return s>0&&(this.tw&&(this.tw.y<=r&&r<=t[0].y||this.tw.y>=r&&r>=t[0].y)&&(i[e]=d(.5*(this.tw.x+t[0].x),r,r),e+=1),this.tw=t[s-1],1===s?this.iw(t[0],i,e):this.sw(t,i)),i}iw(t,e,i=0){return e[i]=d(t.x,t.y,this.Q_),i+1}sw(t,e){let i=0,s=0;const r=t.length-1,n=this.Q_;for(;s<r;){const r=t[s],o=t[s+=1],a=d(r.x,r.y,n);if(0!==i&&Gt(e[i-1],a)||(e[i]=a,i+=1),r.y<=n&&n<=o.y||r.y>=n&&n>=o.y){const t=r.y,s=o.y,a=n,h=t===s?o.x:Gn(r.x,o.x,(a-t)/(s-t));e[i]=d(h,n,n),i+=1}e[i]=d(o.x,o.y,n),i+=1}return i}K_(t){const e=t.length,i=Array(e),s=Array(e),r=this.Q_;for(let n=0;n<e;n+=1){const e=t[n];e.high>r?(i[n]=u(e.position,e.high),s[n]=u(e.position,r)):e.high<r?(i[n]=u(e.position,r),s[n]=u(e.position,e.high)):(i[n]=u(e.position,e.high),s[n]=u(e.position,e.high))}return[i,s]}UM(){return hu(this.LM,(t=>t[0]))}setPositiveFillStyle(t){return this.N_(t),this}setNegativeFillStyle(t){return this.G_(t),this}setPositiveStrokeStyle(t){return this.U_(t),this}setNegativeStrokeStyle(t){return this.Y_(t),this}getPositiveFillStyle(){return this.W_()}getNegativeFillStyle(){return this.Wl()}getPositiveStrokeStyle(){return this.H_()}getNegativeStrokeStyle(){return this.X_()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.b_,fill2:this.M_,behavior:{colorStep:!0}})}}class Iu extends Eu{constructor(){super(...arguments),this.O_=nt}Z_(t){return this.L_(t)}K_(t){const e=t.length,i=Array(e);for(let s=0;s<e;s+=1){const e=t[s];i[s]=u(e.position,e.high)}return[i,[]]}setStrokeStyle(t){return this.U_(t),this}getStrokeStyle(){return this.H_()}}class _u extends Iu{constructor(t,e,i,s,r,n,o,a,h,l,u){super(t,e,i,s,r,n,o,a,h,l,u);const c=t.getSeries().length;this.b_=V,this.M_=me(this.ts.areaSeriesNegativeFillStyle,c),this.V_=me(this.ts.areaSeriesNegativeStrokeStyle,c)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=Cu(s,this.LM,hh(e)?this.S_:this.v_);if(void 0!==r&&void 0!==r[0]){const t=ct(r[0][0],this.Bs.cs.At,this.scale),e=ct(r[0][1],this.Bs.cs.At,this.scale),i=t.y<e.y?t:e;return{cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.axisX,y:this.axisY}},...i,series:this,axisX:this.axisX,axisY:this.axisY}}}J_(t){return this.ew(t)}ew(t){const e=[];return 1===t.length?this.iw(t[0],e):this.sw(t,e),e}iw(t,e,i=0){const s=this.Q_;return e[i]=t.y>s?d(t.x,s,s):d(t.x,t.y,s),i+1}sw(t,e,i=0){let s=0;const r=t.length-1,n=this.Q_;for(;s<r;){const r=t[s],o=t[s+=1];if(r.y<=n){const t=d(r.x,r.y,n);if(0!==i&&Gt(e[i-1],t)||(e[i]=t,i+=1),o.y>n){const t=vi(u(ze,n),u(Ve,n),r,o);t&&(e[i]=d(t.x,t.y,n),i+=1),e[i]=d(o.x,n,n),i+=1}else e[i]=d(o.x,o.y,n),i+=1}else{const t=d(r.x,n,n);if(0!==i&&Gt(e[i-1],t)||(e[i]=t,i+=1),o.y<=n){const t=vi(u(ze,n),u(Ve,n),r,o);t&&(e[i]=d(t.x,t.y,n),i+=1),e[i]=d(o.x,o.y,n),i+=1}else e[i]=d(o.x,n,n),i+=1}}return i}UM(){return hu(this.LM,(t=>t[1]))}setFillStyle(t){return this.G_(t),this}getFillStyle(){return this.Wl()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.M_,stroke:this.V_})}}class Fu extends Iu{constructor(t,e,i,s,r,n,o,a,h,l,u,c){super(t,e,i,s,r,n,o,a,h,l,u);const d=c;this.b_=me(this.ts.areaSeriesPositiveFillStyle,d),this.M_=V,this.V_=me(this.ts.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=Cu(s,this.LM,hh(e)?this.S_:this.v_);if(void 0!==r&&void 0!==r[0]){const t=ct(r[0][0],this.Bs.cs.At,this.scale),e=ct(r[0][1],this.Bs.cs.At,this.scale),i=t.y<e.y?e:t;return{cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.axisX,y:this.axisY}},...i,series:this,axisX:this.axisX,axisY:this.axisY}}}J_(t){return this.hw(t)}hw(t){const e=[];return 1===t.length?this.iw(t[0],e):this.sw(t,e),e}iw(t,e,i=0){const s=this.Q_;return e[i]=t.y<s?d(t.x,s,s):d(t.x,t.y,s),i+1}sw(t,e,i=0){let s=0;const r=t.length-1,n=this.Q_;for(;s<r;){const r=t[s],o=t[s+=1];if(r.y>=n){const t=d(r.x,r.y,n);if(0!==i&&Gt(e[i-1],t)||(e[i]=t,i+=1),o.y<n){const t=vi(u(ze,n),u(Ve,n),r,o);t&&(e[i]=d(t.x,t.y,n),i+=1),e[i]=d(o.x,n,n),i+=1}else e[i]=d(o.x,o.y,n),i+=1}else{const t=d(r.x,n,n);if(0!==i&&Gt(e[i-1],t)||(e[i]=t,i+=1),o.y>=n){const t=vi(u(ze,n),u(Ve,n),r,o);t&&(e[i]=d(t.x,t.y,n),i+=1),e[i]=d(o.x,o.y,n),i+=1}else e[i]=d(o.x,n,n),i+=1}}return i}UM(){return hu(this.LM,(t=>t[0]||[]))}setFillStyle(t){return this.N_(t),this}getFillStyle(){return this.W_()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.b_,stroke:this.V_})}}const Du={Positive:Fu,Negative:_u,Bipolar:Ru};class Bu extends ku{constructor(t,e,i,s,r,n,o,a,h,l,u){super(t,e,i,s,r,n,o,a,h,l),this.chart.cs.Zn(fa._f);const c=u;this.b_=me(this.ts.areaRangeSeriesFillStyle,c),this.V_=me(this.ts.areaRangeSeriesStrokeStyle,c),this.M_=me(this.ts.areaRangeSeriesFillStyleInverted,c),this.O_=me(this.ts.areaRangeSeriesStrokeStyleInverted,c)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=Cu(s,this.LM,hh(e)?this.S_:this.v_);if(void 0!==r&&void 0!==r[0]){const t=ct(r[0][0],this.Bs.cs.At,this.scale),e=ct(r[0][1],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,e]}}}add(t){const e=Array.isArray(t)?t:[t],[i,s]=g(e);this.I_(t,i,s);const r=this._u[this._u.length-1];return this.VM=r?{position:r.position,high:r.high,low:r.low}:void 0,this.R.emit("dataAdd",this,e,this.OM),this}addArraysHighLow(t,e,i=1,s=0){if(t.length!==e.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let r=s;r||(r=this.VM?this.VM.position+i:0),this.add(((t,e,i=1,s)=>{const r=void 0!==s?s:0,n=new Array(t.length);for(let s=0;s<t.length;s+=1)n[s]={position:r+i*s,high:t[s],low:e[s]};return n})(t,e,i,r))}return this}Z_(t,e){this.R_(t,e)}setHighFillStyle(t){return this.N_(t),this}setLowFillStyle(t){return this.G_(t),this}setHighStrokeStyle(t){return this.U_(t),this}setLowStrokeStyle(t){return this.Y_(t),this}getHighFillStyle(){return this.W_()}getLowFillStyle(){return this.Wl()}getHighStrokeStyle(){return this.H_()}getLowStrokeStyle(){return this.X_()}UM(){return hu(this.LM,(t=>{const e=t[0],i=t[1];if(!e||!i)return[];const s=[],r=e.length;for(let t=0;t<r;t+=1)s[t]={position:e[t].x,high:e[t].y,low:i[t].y};return s}))}YM(t){return this.R.on("dataAdd",t)}HM(t){return this.R.off(t)}$M(t){return this.R.on("dataClear",t)}XM(t){return this.R.off(t)}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.b_,fill2:this.M_,behavior:{colorStep:!0}})}}var Pu;e.StepOptions=void 0,(Pu=e.StepOptions||(e.StepOptions={}))[Pu.before=0]="before",Pu[Pu.middle=.5]="middle",Pu[Pu.after=1]="after";const Lu=(t,e)=>{const i=[],s=t.length,r=e;if(s>0){let e=0,n=t[0];i[e]=n,e+=1;for(let o=1;o<s;o+=1){const s=t[o];if(r<=0)i[e]=u(n.x,s.y),e+=1;else{const t=n.x*(1-r)+s.x*r;i[e]=u(t,n.y),e+=1,i[e]=u(t,s.y),e+=1}i[e]=s,e+=1,n=s}}return i},Vu=(t,e)=>{const i=t*t,s=i*t,r=1-t,n=r*r,o=n*r;return u(o*e[0].x+3*t*n*e[1].x+3*i*r*e[2].x+s*e[3].x,o*e[0].y+3*t*n*e[1].y+3*i*r*e[2].y+s*e[3].y)},zu=(t,e=32)=>{if(2===t.length)return[t[0],t[1]];const i=(t=>{const e=1e-5,i=t.length-1,s=Array(i);if(i>1){let r=u(0,0),n=u(0,0),o=u(0,0),a=oi(ci(t[1],t[0]));const h=3;let l=0,c=0;for(let d=0;d<i;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=a,r=n,d+1<i?(a=t[d+2]===t[d+1]?u(0,0):oi(ci(t[d+2],t[d+1])),n=oi(ui(o,a))):n=u(0,0),t[d+1].y===t[d].y)l=0,c=0;else{const i=t[d+1].x-t[d].x;l=Math.abs(r.x)>e?Math.abs(i/(h*r.x)):1,c=Math.abs(n.x)>e?Math.abs(i/(h*n.x)):1}f[1]=ui(li(r,l),f[1]),f[2]=ci(f[2],li(n,c)),s[d]=f}}return s.length>0?s:[]})(t),s=i.length,r=Array(s*e);let n=0;for(let t=0;t<s;t+=1)for(let s=0;s<=e;s+=1)r[n]=Vu(s/e,i[t]),n+=1;return r};class Nu extends cu{constructor(t,e,i,s,r,n,o,a,h,l,c,d,f,g,y){super(t,e,i,s,r,n,o,a,h,c,d),this.LM=[],this.GM=1e5,this.tM=5,this._a=0,this.Ja=!1,this.Ka=!1,this.qa=!1,this.rw=1,this.nw=[],this.ow=(t,e)=>{const i=t.qc(e);if(i)return ct(i,this.scale,this.Bs.cs.At)},this.aw=(t,e)=>{const i=t.x_(e);if(i)return ct(i,this.scale,this.Bs.cs.At)},this.lw=t=>{if(this.LM.length>0){const e=this.LM[this.LM.length-1];if(t.length>0){const i=e.al(),s=e.ol(),r=i.length+s.length-+e.Yl();if(r>=this.GM){const n=s.length>0?s[s.length-1]:i[e.Yl()?r:r-1],o=u((n.x+t[0].x)/2,(n.y+t[0].y)/2);e.Al(o,m(u(o.x,o.y),u(o.x,o.y))).Hl(!0),this.uw([o].concat(t)).Ul(!0)}else e.Al(t,this.OM)}}else t.length>0&&this.uw(t)},this.cw=t=>{if(this.nw.length>0){const e=this.nw[this.nw.length-1];t.length>0&&((e.al().length+e.ol().length)*this.rw>=this.GM?this.dw(t):e.Al(t))}else t.length>0&&this.dw(t)},this.Kn=y,this.iM=l,this.fw=f,this.Aw=me(c.pointLineSeriesFillStyle,g),this.yu=me(this.ts.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}UM(){return hu(this.nw)}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const e=this.yu;for(let t=0;t<this.LM.length;t+=1)this.LM[t].We(e);return this.Bs.Ms(),this}getStrokeStyle(){return this.yu}setPointFillStyle(t){this.Aw="function"==typeof t?t(this.Aw):t;const e=this.Aw;for(let t=0;t<this.nw.length;t+=1)this.nw[t].Be(e);return this.Bs.Ms(),this}getPointFillStyle(){return this.Aw}setPointSize(t){this.tM=t;for(let e=0;e<this.nw.length;e+=1)this.nw[e].it(t);return this.Bs.Ms(),this}getPointSize(){return this.tM}getPointShape(){return this.iM}setPointRotation(t){this._a=t;for(let e=0;e<this.nw.length;e+=1)this.nw[e].Jh(t);return this.Bs.Ms(),this}getPointRotation(){return this._a}setIndividualPointSizeEnabled(t){this.Ja=t,t&&this.chart.cs.Zn(fa.Ff);for(let e=0;e<this.nw.length;e+=1)this.nw[e].cl(t);return this.Bs.Ms(),this}getIndividualPointSizeEnabled(){return this.Ja}setIndividualPointRotationEnabled(t){this.Ka=t;for(let e=0;e<this.nw.length;e+=1)this.nw[e].dl(t);return this.Bs.Ms(),this}getIndividualPointRotationEnabled(){return this.Ka}setIndividualPointValueEnabled(t){this.qa=t;for(let e=0;e<this.nw.length;e+=1)this.nw[e].fl(t);return this.Bs.Ms(),this}getIndividualPointValueEnabled(){return this.qa}setVisible(t){return super.setVisible(t),this.nw.forEach((e=>e.setVisible(t))),this}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.LM.length)return;const r=this.LM[0].Jo()||Gr.NearestX,n=hh(e)?du(s,this.LM,this.aw,r===Gr.NearestX?(t,e)=>Math.abs(t.x-e.x):r===Gr.NearestY?(t,e)=>Math.abs(t.y-e.y):(t,e)=>(t.x-e.x)**2+(t.y-e.y)**2):du(s,this.nw,this.ow,r===Gr.NearestX?(t,e)=>Math.abs(t.x-e.x):r===Gr.NearestY?(t,e)=>Math.abs(t.y-e.y):(t,e)=>(t.x-e.x)**2+(t.y-e.y)**2);if(void 0!==n){const t=ct(n[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Zd(){return de(this.Aw)||de(this.yu.getFillStyle())}Ps(){return this.ws||this.iM}yM(t){}ze(t,e){t.ds(e),this.Bs.Ms()}WM(t){const e=this.LM.length>0?this.LM[this.LM.length-1].al().length+this.LM[this.LM.length-1].ol().length-+this.LM[this.LM.length-1].Yl():void 0;au(t,e,this.GM,this.lw),au(t,e,this.GM,this.cw)}dw(t,e){const i=this.Bs.Bv(this.scale).Al(t,e).setMouseInteractions(this.$i).Be(this.Aw).ll(this.iM).it(this.tM).Jh(this._a).cl(this.Ja).dl(this.Ka).fl(this.qa).ds(this.getHighlight());return this.As(i),this.nw.push(i),i}uw(t,e){const i=this.Bs.om(this.scale,void 0,[Uh.UserSeries,...this.fw]).Al(t,e).setMouseInteractions(this.$i).We(this.yu).ds(this.getHighlight());return this.As(i),this.LM.push(i),i}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{stroke:this.yu,fill:this.Aw})}getPointAmount(){return this.nw.reduce(((t,e)=>t+e.pl()+e.yl()),this._u.length)}clear(){super.clear();for(let t=0;t<this.LM.length;t+=1)this.LM[t].dispose();this.LM.length=0;for(let t=0;t<this.nw.length;t+=1)this.nw[t].dispose();return this.nw.length=0,this}NM(t,e,i,s){super.NM(t,e,i,s),this.EM.NM(this.nw,e,i,s,this.scale,(t=>{}))}}const Ou=(t,e)=>t.ol().length>=e?t.ol().slice(-e):Array.prototype.concat(t.al(),t.ol()).slice(-e),Uu=(t,e,i)=>{const s=Array.prototype.concat(t.al(),t.ol()).slice(0,-i-1).concat(e.slice(i+1,2*i+2));t.Ot().Al(s).zs()};class Yu extends Nu{constructor(t,e,i,s,r,n,o,a,h,l,u,c,d,f,g){super(t,e,i,s,r,n,o,a,h,l,u,c,d,f,g),this.rw=32,this.GM=8e3,this.gw=t=>{if(0===t.length)return;const e=this.nw.length;if(e>0){const i=e>1,s=this.nw[e-1];if(i){const i=Array.prototype.concat(s.al(),s.ol()),r=i.length;if(32*r>=this.GM){const i=Ou(s,3),r=Array.prototype.concat(i,t),n=zu(r,32);Uu(this.LM[e-1],n,32),this.uw(n.slice(66))}else if(r<5){const s=this.nw[e-2],r=Ou(s,3),n=Array.prototype.concat(r,i,t),o=zu(n,32),a=this.LM[e-1],h=o.slice(66);a.Ot().Al(h).zs()}else{const i=this.LM[e-1],r=Array.prototype.concat(i.al(),i.ol()),n=Ou(s,4),o=Array.prototype.concat(n,t),a=zu(o,32),h=r.slice(0,-66).concat(a.slice(33));i.Ot().Al(h).zs()}}else{const i=Array.prototype.concat(s.al(),s.ol()),r=i.length,n=this.LM[e-1];if(32*r>=this.GM){const e=Ou(s,3),i=Array.prototype.concat(e,t),r=zu(i,32);Uu(this.LM[0],r,32),this.uw(r.slice(66))}else if(r+t.length>1){const e=Array.prototype.concat(i,t),s=zu(e,32);n.Ot().Al(s).zs()}else n.Al(t)}}else{const e=t.length>0?zu(t,32):t,i=Je(e);this.uw(e,i)}this.cw(t)}}WM(t){const e=this.nw.length,i=this.nw.length>0?this.nw[e-1].al().length+this.nw[e-1].ol().length:void 0;au(t,i,Math.ceil(this.GM/this.rw),this.gw)}}class Gu{constructor(){this.Gi="FreeformPattern",this.Dl={type:"disabled",packager:(t,e,i)=>t.slice()}}NM(t,e,i,s,r,n){if(s>0){const r=Math.trunc((e-s)/i);if(r>0&&t.length>1){const e=t.splice(0,r);for(let t=0;t<e.length;t+=1)n(e[t]),e[t].dispose()}}}pw(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}getXMax(t=[],e){return Yt(t,Pt,Math.max,Nt,e)}getXMin(t=[],e){return Yt(t,Bt,Math.min,zt,e)}getYMax(t=[],e){return Yt(t,Vt,Math.max,Ut,e)}getYMin(t=[],e){return Yt(t,Lt,Math.min,Ot,e)}}const Hu=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Wu=s.Record({Dl:{type:"disabled",packager:(t,e,i)=>t.slice()}});class Ku extends Wu{NM(t,e,i,s,r,n){if(s>0){const e=Math.ceil(s/i),o=t.length-e;if(o>0){const e=this.D_(t,r);if(e>0){const i=o-e>0?e:o;if(i>0){for(let e=0;e<i;e+=1)n(t[e]),t[e].dispose();t.splice(0,i)}}}}}}const Xu=(t,e)=>{const i=e.xt();return t?Math.min(i,t):i},ju=(t,e)=>{const i=e.bt();return t?Math.max(i,t):i};class $u extends Ku{pw(t,e){return Math.abs(t.x-e.x)}getYMax(t=[],e){return t.reduce(ju,e?e.max.y:void 0)}getYMin(t=[],e){return t.reduce(Xu,e?e.min.y:void 0)}}const Zu=(t,e)=>{const i=e.vt();return t?Math.min(i,t):i},Qu=(t,e)=>{const i=e.St();return t?Math.max(i,t):i};class qu extends Ku{pw(t,e){return Math.abs(t.y-e.y)}getXMax(t=[],e){return t.reduce(Qu,e?e.max.x:void 0)}getXMin(t=[],e){return t.reduce(Zu,e?e.min.x:void 0)}}const Ju={horizontalProgressive:new class extends $u{constructor(){super({Dl:Vr()}),this.Gi="HorizontalProgressivePattern"}D_(t,e){const i=t.length,s=Math.min(e.x.getInnerStart(),e.x.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)e.x.pi(t[n].St(),t[n].Tl())<s&&(r+=1);return r}getXMax(t=[],e){return void 0!==e?e?e.max.x:void 0:t.length>0?t[t.length-1].St():void 0}getXMin(t=[],e){return t.length>0&&t[0].pl()>0?t[0].vt():e?e.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",Vr(Hu(t)))}},horizontalRegressive:new class extends $u{constructor(){super({Dl:zr()}),this.Gi="HorizontalRegressivePattern"}D_(t,e){const i=t.length,s=Math.max(e.x.getInnerStart(),e.x.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)s<e.x.pi(t[n].vt(),-t[n].Tl())&&(r+=1);return r}getXMax(t=[],e){return t.length>0&&t[0].pl()>0?t[0].St():e?e.max.x:void 0}getXMin(t=[],e){return void 0!==e?e?e.min.x:void 0:t.length>0?t[t.length-1].vt():void 0}setPrecision(t){return this.set("_columnPackaging",zr(Hu(t)))}},verticalProgressive:new class extends qu{constructor(){super({Dl:Nr()}),this.Gi="VerticalProgressivePattern"}D_(t,e){const i=t.length,s=Math.min(e.y.getInnerStart(),e.y.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)e.y.pi(t[n].bt(),t[n].Fl())<s&&(r+=1);return r}getYMax(t=[],e){return void 0!==e?e?e.max.y:void 0:t.length>0?t[t.length-1].bt():void 0}getYMin(t=[],e){return t.length>0&&t[0].pl()>0?t[0].xt():e?e.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",Nr(Hu(t)))}},verticalRegressive:new class extends qu{constructor(){super({Dl:Or()}),this.Gi="VerticalRegressivePattern"}D_(t,e){const i=t.length,s=Math.max(e.y.getInnerStart(),e.y.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)s<e.y.pi(t[n].xt(),-t[n].Fl())&&(r+=1);return r}getYMax(t=[],e){return t.length>0&&t[0].pl()>0?t[0].bt():e?e.max.y:void 0}getYMin(t=[],e){return void 0!==e?e?e.min.y:void 0:t.length>0?t[t.length-1].xt():void 0}setPrecision(t){return this.set("_columnPackaging",Or(Hu(t)))}},freeform:new Gu};class tc extends Nu{constructor(t,e,i,s,r,n,o,a,h,l,c,d,f,g,y){super(t,e,i,s,r,n,o,a,Ju.horizontalProgressive,h,c,d,f,g,y),this.lw=t=>{const e=this.LM.length>0?this.LM[this.LM.length-1].al().length+this.LM[this.LM.length-1].ol().length:void 0;au(t,e,this.GM,this.yw)},this.yw=t=>{const e=t.length;if(this.LM.length>0){const i=this.LM[this.LM.length-1];if(e>0){const e=i.al(),s=i.ol(),r=s.length>0?s[s.length-1]:e[e.length-1],n=Lu([r].concat(t),this.mw);n.shift();const o=u((r.x+n[0].x)/2,(r.y+n[0].y)/2),a=Array.prototype.concat(o,n);(s.length>0?e.length+s.length:e.length)>=this.GM?(i.Al(o,m(u(o.x,o.y),u(o.x,o.y))).Hl(!0),this.uw(a).Ul(!0),this.dw(t)):i.Al(a)}}else e>0&&this.uw(Lu(t,this.mw));this.cw(t)},this.mw=l,void 0===this.fw.find((t=>"DataPattern"===t.type))&&this.fw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class ec extends ou{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.Sw=t=>t[4]>=t[1],this.CM=m(c(Ve,Ve),c(ze,ze)),this.xw=[],this.bw=!1,this.Mw=-1,this._w=[],this.ww=!0,this.Cw=!1,this.kw=4,this.Tw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.chart.cs.Zn(fa.Af)}UM(){return this._w}YM(t){return this.R.on("dataAdd",t)}HM(t){return this.R.off(t)}$M(t){return this.R.on("dataClear",t)}XM(t){return this.R.off(t)}ov(){return this.uv&&this._w.length>0&&this.getVisible()}Fw(t){if(!(this._w.length<1))return[this._w[t][0],this._w[t][1],this._w[t][2],this._w[t][3],this._w[t][4]]}solveNearest(t,e){if(0===this._w.length)return;const i=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,s=void 0!==this.getPackDataState();let r,n,o,a,h;if(s){const t=this.Iw;if(!t)return;const e=Ee(i,t.length-1,(e=>t[e][0])),s=void 0!==e&&t[e];if(!s)return;a=s[3],o=s[2],n=s[1],h=s[4],r=s[0]}else{const t=Ee(i,this._w.length-1,(t=>this._w[t][0])),e=void 0!==t&&this._w[t];if(!e)return;r=e[0],n=e[1],o=e[2],a=e[3],h=e[4]}return{cursorPosition:{resultTable:u(r,h),resultTableScale:this.scale,pointMarker:u(r,h),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r,y:h,open:n,high:o,low:a,close:h,position:r,isPacked:s,series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){return De({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}yM(t){if(!(t.x instanceof Bi))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.Pw=t.x}Dr(){return u(5,5)}m_(t){const e=t.length-1;if(e<0)return this;for(let i=0;i<=e;i+=1)t[i][3]<this.CM.min.y&&(this.CM.min.y=t[i][3]),this.CM.max.y<t[i][2]&&(this.CM.max.y=t[i][2]);return this.CM.min.x=Math.min(this.CM.min.x,t[0][0]),this.CM.max.x=Math.max(this.CM.max.x,t[e][0]),this}getXMax(){return this.CM.max.x}getXMin(){return this.CM.min.x}getYMax(){return this.CM.max.y}getYMin(){return this.CM.min.y}add(t){this._w.length>0&&this.chart.cs.Zn(fa.Tf);const e=Array.isArray(t[0])?t:[t[0]];if(e.length>0){this.bw=!0;const t=this._w.length,i=this.xw.length,s=e.length;this._w.length=t+s,this.xw.length=i+s;for(let r=0;r<s;r+=1)this._w[t+r]=e[r],this.xw[i+r]=this._w[t+r];this.m_(e),this.R.emit("dataAdd",this,e,void 0),this.Bs.Ms()}return this}setPackData(t){return t!==this.ww&&(this.Cw=!0,this.ww=t,this.chart.cs.Ms()),this}getPackData(){return this.ww}getPackDataState(){const t=this.Mw;if(!(t<0||void 0===this.Iw||this.Iw.length===this._w.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.Dw=t,this.chart.cs.Ms(),this}getFigureWidth(){return this.Dw}setFigureMinimumGap(t){return this.kw=t,this.chart.cs.Ms(),this}getFigureMinimumGap(){return this.kw}clear(){return this._w=[],this.xw=[],this.Iw=void 0,this.Bw(),this.CM.min.x=Ve,this.CM.min.y=Ve,this.CM.max.x=ze,this.CM.max.y=ze,this.R.emit("dataClear",this),this}Lw(t){return this.Pw.getPixelSize()*t/1e3}Rw(){const t=this.Tw.length-1,e=this.Lw(this.Dw+this.kw);let i=Ee(e,t,(t=>this.Tw[t]));return void 0===i?i=e<this.Tw[0]?0:this.Tw[t]<e?t:this.Tw.length/2:this.Tw[i]<e&&(i+=1),this.Tw.length<=i&&(i=t),1e3*this.Tw[i]}Re(){if(super.Re(),!this.ww){this.Iw=void 0;let t=null;if(this.Cw?(this.Cw=!1,t=this._w,this.Bw()):t=this.xw,t.length>=1){for(let e=0;e<t.length;e+=1){const i=t[e],s=i[0];this.Sw(i)?this.Ew(s,i):this.zw(s,i)}this.xw.length=0,this.bw=!1,this.Mw=-1}}}_m(){super._m();const t=this.Rw();if(this.ww&&this._w.length>=1&&(t!==this.Mw||this.bw||this.Cw)){this.Cw=!1,this.Mw=t,this.bw=!1,this.Bw(),this.Iw=[];const e=this._w.length;let i=this._w[0][0]-this._w[0][0]%(t/2)+t,s=0;for(;s<e;){let r=this.Fw(s);if(void 0===r)break;let n=r[3],o=r[2];const a=s;for(s+=1;s<e&&this._w[s][0]<i;)r=this._w[s],this._w[s][3]<n&&(n=this._w[s][3]),o<this._w[s][2]&&(o=this._w[s][2]),s+=1;const h=s-1;let l=r[0];a<h&&(l=this._w[h][0],r=[l,this._w[a][1],o,n,this._w[h][4]]),r[1]<r[4]?this.Ew(l,r):this.zw(l,r),this.Iw.push(r),i+=t}}}}class ic extends ec{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.Vw=1175494351e-14,this.Dw=this.ts.ohlcCandleThicknessPixels||5,this.Ow=this.ts.ohlcCandleTailStrokeStylePositive,this.Nw=this.ts.ohlcCandleTailStrokeStyleNegative,this.Gw=this.ts.ohlcCandleBodyFillStylePositive,this.Ww=this.ts.ohlcCandleBodyFillStyleNegative,this.Uw=i.Yg(this.scale).We(new rs({thickness:this.Dw,fillStyle:this.Gw})),this.Uw.Mu={x:0,y:1},this.Yw=i.Yg(this.scale).We(new rs({thickness:this.Dw,fillStyle:this.Ww})),this.Yw.Mu={x:0,y:-1},this.Hw=i.Yg(this.scale).We(this.Ow),this.$w=i.Yg(this.scale).We(this.Nw),this.As(this.Uw),this.As(this.Yw),this.As(this.Hw),this.As(this.$w)}setBodyThickness(t){return this.Dw=t,this.Uw.We(new rs({thickness:this.Dw,fillStyle:this.Gw})),this.Yw.We(new rs({thickness:this.Dw,fillStyle:this.Ww})),this.chart.cs.Ms(),this}getBodyThickness(){return this.Dw}setBodyFillStylePositive(t){return this.Gw="function"==typeof t?t(this.Gw):t,this.Uw.We(new rs({thickness:this.Dw,fillStyle:this.Gw})),this.chart.cs.Ms(),this}getBodyFillStylePositive(){return this.Gw}setBodyFillStyleNegative(t){return this.Ww="function"==typeof t?t(this.Ww):t,this.Yw.We(new rs({thickness:this.Dw,fillStyle:this.Ww})),this.chart.cs.Ms(),this}getBodyFillStyleNegative(){return this.Ww}setTailStrokeStylePositive(t){return this.Ow="function"==typeof t?t(this.Ow):t,this.Hw.We(this.Ow),this.chart.cs.Ms(),this}getTailStrokeStylePositive(){return this.Ow}setTailStrokeStyleNegative(t){return this.Nw="function"==typeof t?t(this.Nw):t,this.$w.We(this.Nw),this.chart.cs.Ms(),this}getTailStrokeStyleNegative(){return this.Nw}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Gw,fill2:this.Ww,behavior:{colorStep:!0}})}Bw(){return this.Hw.Ot(),this.$w.Ot(),this.Uw.Ot(),this.Yw.Ot(),this}Ew(t,e){return Math.abs(e[1]-e[4])<this.Vw?this.Uw.Xr().$g({x:t,y:e[1]-this.Vw},{x:t,y:e[1]+this.Vw}):this.Uw.Xr().$g({x:t,y:e[1]},{x:t,y:e[4]}),e[4]<e[2]&&this.Hw.Xr().$g({x:t,y:e[4]},{x:t,y:e[2]}),e[3]<e[1]&&this.Hw.Xr().$g({x:t,y:e[3]},{x:t,y:e[1]}),this}zw(t,e){return Math.abs(e[1]-e[4])<this.Vw?this.Yw.Xr().$g({x:t,y:e[1]-this.Vw},{x:t,y:e[1]+this.Vw}):this.Yw.Xr().$g({x:t,y:e[1]},{x:t,y:e[4]}),e[3]<e[4]&&this.$w.Xr().$g({x:t,y:e[3]},{x:t,y:e[4]}),e[1]<e[2]&&this.$w.Xr().$g({x:t,y:e[1]},{x:t,y:e[2]}),this}}class sc extends ec{constructor(t,e,i,s,r,n,o,a,h,l){super(t,e,i,s,r,n,o,a,h,l),this.Dw=this.ts.ohlcBarThicknessPixels||10,this.Xw=this.ts.ohlcBarStrokeStylePositive,this.jw=this.ts.ohlcBarStrokeStyleNegative,this.Zw=i.Yg(this.scale).We(this.Xw),this.As(this.Zw),this.Qw=i.Yg(this.scale).We(this.Xw),this.Qw.Mu={x:-this.Dw/2,y:0},this.As(this.Qw),this.Jw=i.Yg(this.scale).We(this.Xw),this.Jw.Mu={x:this.Dw/2,y:0},this.As(this.Jw),this.Kw=i.Yg(this.scale).We(this.jw),this.As(this.Kw),this.qw=i.Yg(this.scale).We(this.jw),this.qw.Mu={x:-this.Dw/2,y:0},this.As(this.qw),this.tC=i.Yg(this.scale).We(this.jw),this.tC.Mu={x:this.Dw/2,y:0},this.As(this.tC)}setStrokeStylePositive(t){return this.Xw="function"==typeof t?t(this.Xw):t,this.Zw.We(this.Xw),this.Qw.We(this.Xw),this.Jw.We(this.Xw),this.chart.cs.Ms(),this}getStrokeStylePositive(){return this.Xw}setStrokeStyleNegative(t){return this.jw="function"==typeof t?t(this.jw):t,this.Kw.We(this.jw),this.qw.We(this.jw),this.tC.We(this.jw),this.chart.cs.Ms(),this}getStrokeStyleNegative(){return this.jw}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Xw.getFillStyle(),fill2:this.jw.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.Qw.Mu={x:-t/2,y:0},this.qw.Mu={x:-t/2,y:0},this.Jw.Mu={x:t/2,y:0},this.tC.Mu={x:t/2,y:0},this}Bw(){return this.Kw.Ot(),this.Zw.Ot(),this.qw.Ot(),this.Qw.Ot(),this.tC.Ot(),this.Jw.Ot(),this}Ew(t,e){return this.Zw.Xr().$g({x:t,y:e[3]},{x:t,y:e[2]}),this.Qw.Xr().$g({x:t,y:e[1]},{x:t,y:e[1]}),this.Jw.Xr().$g({x:t,y:e[4]},{x:t,y:e[4]}),this}zw(t,e){return this.Kw.Xr().$g({x:t,y:e[3]},{x:t,y:e[2]}),this.qw.Xr().$g({x:t,y:e[1]},{x:t,y:e[1]}),this.tC.Xr().$g({x:t,y:e[4]},{x:t,y:e[4]}),this}}const rc={Candlesticks:ic,Bars:sc},nc=t=>({defaultDragMouseStyle:e.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...tl(t,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.Dr().x))}),oc=t=>({defaultDragMouseStyle:e.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...tl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.Dr().y))});class ac extends xh{constructor(t,e,i,s,r,n,o,a){super(t,e,i,s,r,a),this.iC=!1,this.sC=!1,this.eC=!1,this.hC=!1,this.rC=new Map,this.nC=new Map,this.oC=[],this.aC=[],this.lC=!0,this.uC=!0,this.cC=!1,this.dC=[],this.fC=new Set,this.AC=!1,this.ly=r,this.gC=n,this.pC=o,this.yC=a.cursorGridStrokeStyleX,this.mC=a.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.rC.forEach((t=>t.forEach((t=>t.dispose())))),this.nC.forEach((t=>t.forEach((t=>t.dispose())))),this.oC.length=0,this.aC.length=0,this.ny.length=0,this}Re(){return this.cC&&this.setPosition(...this.dC),this.oC.forEach((t=>t.setVisible(this.Zi&&this.np).setMarkerVisible(this.Zi&&this.np&&this.lC))),this.aC.forEach((t=>t.setVisible(this.Zi&&this.np).setMarkerVisible(this.Zi&&this.np&&this.uC))),super.Re()}setPosition(...t){if(this.dC=t,this.oC.forEach((t=>t.setVisible(!1))),this.aC.forEach((t=>t.setVisible(!1))),this.oC.length=0,this.aC.length=0,0===t.length)return this;const e=this.renderingScale,i=t[0].resultTable,s=th(t[0].resultTableScale,e),r=s===this.scale?i:ct(i,s,this.scale);this.Yp.setPosition(r),this.np=!1,this.sy.forEach((t=>{t.targetVisible=!1}));const n=new Map;return t.forEach(((t,i)=>{const s=t.pointMarkerScale.x,r=t.pointMarkerScale.y,o=n.get(s)||[],a=n.get(r)||[],h=!o.includes(t.pointMarker.x),l=!a.includes(t.pointMarker.y);o.push(t.pointMarker.x),a.push(t.pointMarker.y),n.set(s,o),n.set(r,a);const c=t.pointMarker,d=uc(u(c.x,c.y),s,r);if(h){const t=this.kh(s,!0);t.setValue(c.x),t.setGridStrokeLength(this.iC?d.x:1).setAllocatesAxisSpace(this.AC),this.oC.push(t)}if(l){const t=this.kh(r,!1);t.setValue(c.y),t.setGridStrokeLength(this.sC?d.y:1).setAllocatesAxisSpace(this.AC),this.aC.push(t)}let f=this.sy[i];if(!f){const t=new Eo(this.Bs,this.renderingScale,this.scale,Rt,this.ts).setMouseInteractions(!1).setFillStyle(this.ts.cursorPointMarkerFillStyle).setSize(this.ts.cursorPointMarkerSize).setShape(this.ts.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.sy.push(f),this.ny.forEach((e=>e(t)))}const g=th(t.pointMarkerScale,e),m=g===this.scale?t.pointMarker:ct(t.pointMarker,g,this.scale);f.pointMarker.setPosition(m),f.targetVisible=!0;const y=s.getInterval(),p=r.getInterval(),x=Math.min(y.start,y.end),A=Math.max(y.start,y.end),S=Math.min(p.start,p.end),v=Math.max(p.start,p.end);c.x>=x&&c.x<=A&&c.y>=S&&c.y<=v&&(this.np=!0)})),this}setTickMarkersAllocateAxisSpace(t){return this.AC=t,this.Bs.Ms(),this}getTickMarkersAllocateAxisSpace(){return this.AC}kh(t,e){this.fC.has(t)||(t.onDispose((()=>{var e;null===(e=i.get(t))||void 0===e||e.forEach((t=>t.dispose())),i.delete(t)})),this.fC.add(t));const i=e?this.rC:this.nC,s=e?this.oC:this.aC,r=i.get(t)||[];i.set(t,r);let n=r.find((t=>!s.includes(t)));return n||(n=e?t.tp(!1,this.gC):t.tp(!1,this.pC),r.push(n),this.mr(n,e),n.setMouseInteractions(!1)),n}mr(t,e){const i=e?this.yC:this.mC;return t.setGridStrokeStyle(i),t.setMouseInteractions(!1),(e?this.lC:this.uC)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.iC=t,this.Bs.Ms(),this}getGridStrokeXCut(){return this.iC}setGridStrokeYCut(t){return this.sC=t,this.Bs.Ms(),this}getGridStrokeYCut(){return this.sC}setGridStrokeXStyle(t){return this.yC=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.rC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.yC))))),this}getGridStrokeXStyle(){return this.yC}setGridStrokeYStyle(t){return this.mC=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.nC.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.mC))))),this}getGridStrokeYStyle(){return this.mC}setTickMarkerXVisible(t){return this.lC=t,this.Bs.Ms(),this}getTickMarkerXVisible(){return this.lC}setTickMarkerYVisible(t){return this.uC=t,this.Bs.Ms(),this}getTickMarkerYVisible(){return this.uC}setTickMarkerX(t){return this.rC.forEach((e=>e.forEach((e=>e.setMarker(t))))),this.gC=this.gC.addStyler(t),this.Bs.Ms(),this}setTickMarkerY(t){return this.nC.forEach((e=>e.forEach((e=>e.setMarker(t))))),this.pC=this.pC.addStyler(t),this.Bs.Ms(),this}}class hc{constructor(t,e,i,s){this.gy=[],this.py=(t,e)=>(this.gy.forEach((i=>i(t,e))),t),this.addStyler=t=>new hc(this.ly,this.gC,this.pC,this.gy.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new hc(t,this.gC,this.pC,this.gy.map((t=>t))),this.yy=(t,e,i,s,r)=>this.py(new ac(t,e,i,s,this.ly,this.gC,this.pC,r),r),this.ly=t,this.gy=s,this.gC=e,this.pC=i}}const lc=new hc(To,ca.PointableTextBox,ca.PointableTextBox,[(t,e)=>{Ah(t),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(e.cursorTickMarkerXTextFont).setTextFillStyle(e.cursorTickMarkerXTextFillStyle),En(t)&&t.setBackground((t=>t.setFillStyle(e.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(e.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(e.cursorTickMarkerYTextFont).setTextFillStyle(e.cursorTickMarkerYTextFillStyle),En(t)&&t.setBackground((t=>t.setFillStyle(e.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(e.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),uc=(t,e,i)=>{const s=e.At,r=i.At;let n=(t.x-s.getInnerStart())/(s.getInnerEnd()-s.getInnerStart()),o=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===i.dg&&(n=1-n),1===e.dg&&(o=1-o),u(o,n)};class cc extends cu{constructor(t,e,i,s,r,n,o,a,h,l,u,c,d,f){super(t,e,i,s,r,n,o,a,h,l,u),this.LM=[],this.Yb=!0,this.GM=void 0,this.wu=void 0,this.vC=(t,e)=>{const i=t.Kb(e);if(i)return ct(i,this.scale,this.Bs.cs.At)},this.aw=(t,e)=>{const i=t.x_(e);if(i)return ct(i,this.scale,this.Bs.cs.At)},this.Zd=()=>de(this.yu.getFillStyle()),this.fw=c,this.Kn=f,this.yu=me(this.ts.lineSeriesStrokeStyle,d),this.SC={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}fs(){var t,e;return null===(e=null===(t=this.Kn)||void 0===t?void 0:t.dataPattern)||void 0===e?void 0:e.pattern}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.yu="function"==typeof t?t(this.yu):t;const e=this.yu;for(let t=0;t<this.LM.length;t+=1)this.LM[t].We(e);return this.Bs.Ms(),this}getStrokeStyle(){return this.yu}setDataCleaning(t){return this.wu=t,this.LM.forEach((t=>t.Cu(this.wu))),this.Bs.Ms(),this}setCursorInterpolationEnabled(t){return this.Yb=t,this.Bs.cs.Ms(),this}getCursorInterpolationEnabled(){return this.Yb}yM(t){}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY};if(0===this.LM.length)return;const r=this.LM[0].Jo()||Gr.NearestX,n=du(s,this.LM,hh(e)?this.aw:this.vC,r===Gr.NearestX?(t,e)=>Math.abs(t.x-e.x):r===Gr.NearestY?(t,e)=>Math.abs(t.y-e.y):(t,e)=>(t.x-e.x)**2+(t.y-e.y)**2);if(void 0!==n){const t=ct(n[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}WM(t){let e=this.LM[0];e||(e=this.uw(),this.LM.push(e),this.As(e)),e.Al(t,this.OM)}uw(){return this.Bs.om(this.scale,this.SC,[Uh.UserSeries,...this.fw]).We(this.yu).Cu(this.wu).ds(this.getHighlight())}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{stroke:this.yu})}ze(t,e){t.ds(e),this.Bs.Ms()}NM(t,e,i,s){}}class dc extends cu{constructor(t,e,i,s,r,n,o,a,h,l,u,c,d){super(t,e,i,s,r,n,o,a,new Gu,l,u),this.LM=[],this.tM=5,this._a=0,this.Ja=!1,this.Ka=!1,this.qa=!1,this.GM=void 0,this.ow=(t,e)=>{const i=t.qc(e);if(i)return ct(i,this.scale,this.Bs.cs.At)},this.Kn=d,this.iM=h,this.Te=me(l.pointSeriesFillStyle,c)}add(t){return super.add(t),this}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=du(s,this.LM,this.ow,$e);if(void 0!==r){const t=ct(r[0],this.Bs.cs.At,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Zd(){return de(this.Te)}Ps(){return this.ws||this.iM}yM(t){}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}ze(t,e){t.ds(e),this.Bs.Ms()}setPointFillStyle(t){this.Te="function"==typeof t?t(this.Te):t;const e=this.Te;for(let t=0;t<this.LM.length;t+=1)this.LM[t].Be(e);return this.Bs.Ms(),this}getPointFillStyle(){return this.Te}setPointSize(t){this.tM=t;for(let e=0;e<this.LM.length;e+=1)this.LM[e].it(t);return this.Bs.Ms(),this}getPointSize(){return this.tM}getPointShape(){return this.iM}setPointRotation(t){this._a=t;for(let e=0;e<this.LM.length;e+=1)this.LM[e].Jh(t);return this.Bs.Ms(),this}getPointRotation(){return this._a}setIndividualPointSizeEnabled(t){this.Ja=t,t&&this.chart.cs.Zn(fa.Ff);for(let e=0;e<this.LM.length;e+=1)this.LM[e].cl(t);return this.Bs.Ms(),this}getIndividualPointSizeEnabled(){return this.Ja}setIndividualPointRotationEnabled(t){this.Ka=t;for(let e=0;e<this.LM.length;e+=1)this.LM[e].dl(t);return this.Bs.Ms(),this}getIndividualPointRotationEnabled(){return this.Ka}setIndividualPointValueEnabled(t){this.qa=t;for(let e=0;e<this.LM.length;e+=1)this.LM[e].fl(t);return this.Bs.Ms(),this}getIndividualPointValueEnabled(){return this.qa}WM(t){let e=this.LM[0];e||(e=this.uw()),e.Al(t,this.OM)}uw(){const t=this.Bs.Bv(this.scale).ll(this.iM).it(this.tM).Jh(this._a).cl(this.Ja).dl(this.Ka).fl(this.qa).Be(this.Te).ds(this.getHighlight());return this.LM.push(t),this.As(t),t}}class fc{constructor(t,e,i,s){this.xC=!1,this.R=new r.Eventer,this.chart=i,this.bC=s,this.Ks=t.Ks,this.re=s||Os,this.MC=Tt.document.createElement("div"),this.MC.style.position="absolute",this.MC.style.pointerEvents="none",Tt.document.body.append(this.MC);const n=()=>{const t=i.engine.container.getBoundingClientRect();this.MC.style.left=`${t.left}px`,this.MC.style.top=`${t.top}px`,this.MC.style.width=`${t.width}px`,this.MC.style.height=`${t.height}px`};n(),i.onResize(n),this._C(this.MC),this.wC(),this.CC(),this.kC(),this.TC(e),this.chart.FC().push(this)}_C(t){this.IC=Tt.document.createElement("div"),this.IC.style.pointerEvents="all",t.append(this.IC),this.PC=Tt.document.createElement("div"),this.DC=new _s(this.Ks,this.re,this.chart,this.PC),this.BC=Tt.document.createElement("table"),this.BC.style.borderSpacing="0",this.IC.appendChild(this.DC.Ae()),this.IC.appendChild(this.PC),this.PC.appendChild(this.BC)}CC(){let t=0,e=0,i=0,s=0,r=!1;this.xC=!1,this.IC.onmousedown=n=>{n=n||Tt.event,i=n.clientX,s=n.clientY,r=!0,Tt.document.onmouseup=t=>{this.xC?this.IC.addEventListener("click",Qt,!0):this.IC.removeEventListener("click",Qt,!0),r=!1,this.xC=!1,Tt.document.onmouseup=null,Tt.document.onmousemove=null},Tt.document.onmousemove=n=>{n=n||Tt.event,r&&(t=i-n.clientX,e=s-n.clientY,i=n.clientX,s=n.clientY,this.xC=!0,this.IC.style.top=this.IC.offsetTop-e+"px",this.IC.style.left=this.IC.offsetLeft-t+"px",this.IC.style.removeProperty("right"),this.IC.style.removeProperty("bottom"))}}}kC(){let t=0,e=0,i=0,s=0,r=!1;this.IC.ontouchstart=n=>{n=n||Tt.event,i=n.touches[0].clientX,s=n.touches[0].clientY,r=!0,this.IC.ontouchend=()=>{r=!1,Tt.document.ontouchend=null,Tt.document.ontouchmove=null},this.IC.ontouchmove=n=>{r&&(Qt(n),n=n||Tt.event,t=i-n.touches[0].clientX,e=s-n.touches[0].clientY,i=n.touches[0].clientX,s=n.touches[0].clientY,this.IC.style.top=this.IC.offsetTop-e+"px",this.IC.style.left=this.IC.offsetLeft-t+"px",this.IC.style.removeProperty("right"),this.IC.style.removeProperty("bottom"))}}}wC(){this.IC.style.setProperty("top","10px"),this.IC.style.setProperty("left","10px"),this.IC.style.position="absolute",this.IC.style.display="flex",this.IC.style.alignItems="flex-start",this.PC.style.setProperty("display","none")}removePositionProperty(){this.IC.style.removeProperty("top"),this.IC.style.removeProperty("left"),this.IC.style.removeProperty("bottom"),this.IC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case e.OSMPosition.BottomLeft:this.IC.style.setProperty("bottom","10px"),this.IC.style.setProperty("left","10px");break;case e.OSMPosition.TopLeft:this.IC.style.setProperty("top","10px"),this.IC.style.setProperty("left","10px");break;case e.OSMPosition.BottomRight:this.IC.style.setProperty("bottom","10px"),this.IC.style.setProperty("right","10px");break;case e.OSMPosition.TopRight:default:this.IC.style.setProperty("top","10px"),this.IC.style.setProperty("right","10px")}}TC(t){for(let e=0;e<t.length;e+=1){const i=this.BC.insertRow();for(let s=0;s<t[e].length;s+=1){const r=i.insertCell(),n=t[e][s];"object"!=typeof n?this.LC(n,r):this.addCustomButton(n,r)}}}LC(t,i){switch(t){case e.OnScreenMenuButtonType.ZoomIn:this.RC(new bs(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ZoomInX:this.RC(new Ms(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ZoomInY:this.RC(new Ts(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ZoomOut:this.RC(new ws(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ZoomOutX:this.RC(new Cs(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ZoomOutY:this.RC(new ks(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ZoomToFit:this.RC(new Rs(this.Ks,this.chart,this.re),i);break;case e.OnScreenMenuButtonType.ToggleAnimations:this.RC(new Es(this.Ks,this.chart,this.re),i);break;default:console.error(`No predefined button like "${e.OnScreenMenuButtonType[t]}" exists.`)}}RC(t,e){e.rowSpan=t.qs.rows,e.colSpan=t.qs.columns,t.fe(e)}addCustomButton(t,e){const i=new Is(this.Ks,t,this.chart);return this.RC(i,e),this}dispose(){this.MC.remove(),this.R.emit("dispose",this)}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}}class gc extends ou{constructor(t,e,i,s,r,n,o,a,h,l,u,c){var d;super(t,e,i,s,r,n,o,a,h,l),this.EC=0,this.Kn=c,this.Qa=this.Bs.Sd(this.scale).We(me(this.ts.lineSeriesStrokeStyle,u)).md(me(this.ts.pointSeriesFillStyle,u)).vd(me(this.ts.areaSeriesPositiveFillStyle,u)).zC(void 0).Cd(7),this.Qa.VC=!1!==(null===(d=this.Kn)||void 0===d?void 0:d.allowDataGrouping),this.As(this.Qa)}fs(){return this.getDataSet().jc()}setDataSet(t){var e;return t===(null===(e=this.pd)||void 0===e?void 0:e.Gt)||(t.wc&&this.chart.cs.Zn(fa.If),t.kc&&this.chart.cs.Zn(fa.Ff),this.pd=Fe(t,this.pd,(()=>[t.td((()=>{this.EC+=1,this.EC>1&&this.chart.cs.Zn(fa.Tf),this.chart.cs.Ms()})),t.sd((()=>this.chart.cs.Ms()))])),this.Qa.yd(t),this.chart.cs.Ms()),this}getDataSet(){return this.OC()}setStrokeStyle(t){return this.Qa.We(t),this.Bs.Ms(),this}getStrokeStyle(){return this.Qa.mu()}setAreaFillStyle(t){return this.Qa.vd(t),this.Bs.Ms(),this}getAreaFillStyle(){return this.Qa.NC()}setPointFillStyle(t){return this.Qa.md(t),this.Bs.Ms(),this}getPointFillStyle(){return this.Qa.wd()}setPointSize(t){return this.Qa.Cd(t),this.Bs.Ms(),this}getPointSize(){return this.Qa.GC()}setPointShape(t){return this.Qa.xd(t),this.Bs.Ms(),this}getPointShape(){return this.Qa.bd()}setPointRotation(t){return this.Qa.Md(t),this.Bs.Ms(),this}getPointRotation(){return this.Qa._d()}setPointAlignment(t){return this.Qa.WC(t),this.chart.cs.Ms(),this}getPointAlignment(){return this.Qa.UC()}setCurvePreprocessing(t){return this.Qa.zC(t),this.Bs.Ms(),this}getCurvePreprocessing(){return this.Qa.YC()}add(t){return this.OC().add(t),this.Bs.Ms(),this}addArraysXY(t,e){return this.OC().addArraysXY(t,e),this.Bs.Ms(),this}appendJSON(t,e){return this.OC().appendJSON(t,e),this.Bs.Ms(),this}appendSample(t){return this.OC().appendSample(t),this.Bs.Ms(),this}appendSamples(t){return this.OC().appendSamples(t),this.Bs.Ms(),this}fill(t){return this.OC().fill(t),this.Bs.Ms(),this}setSamples(t){return this.OC().setSamples(t),this.Bs.Ms(),this}alterSamples(t,e){return this.OC().alterSamples(t,e),this.Bs.Ms(),this}alterSamplesByID(t,e){return this.OC().alterSamplesByID(t,e),this.Bs.Ms(),this}getSampleCount(){return this.OC().getSampleCount()}getNextSampleIndex(){return this.OC().getNextSampleIndex()}clear(){return this.OC().clear(),this.Bs.Ms(),this}setMaxSampleCount(t){return this.OC().setMaxSampleCount(t),this.Bs.Ms(),this}getMaxSampleCount(){return this.OC().getMaxSampleCount()}readBack(t){return this.OC().readBack(t)}onMaxSampleCountExceeded(t){return this.OC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.OC().offMaxSampleCountExceeded(t)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){let i=hh(e);void 0!==this.getCurvePreprocessing()&&(i=!1);const s=this.HC(),r=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}),n=s.qc(r,i,this.scale,this.chart.mg);if(void 0!==n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,series:this,axisX:this.axisX,axisY:this.axisY}}Ki(t,e){const i=this.getDataSet(),s=null==t?void 0:t.dataPoint;return void 0===i.jc()||s?s?{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:De({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}HC(){return this.OC()}Zd(){return de(this.getPointFillStyle())||de(this.getStrokeStyle().getFillStyle())||de(this.getAreaFillStyle())}ov(){var t;const e=null===(t=this.pd)||void 0===t?void 0:t.Gt;return this.getAutoScrollingEnabled()&&void 0!==e&&e.mc>0}yM(t){}getXMax(){return this.Qa.St()}getXMin(){return this.Qa.vt()}getYMax(){return this.Qa.bt()}getYMin(){return this.Qa.xt()}Dr(){return{x:this.Qa.Tl(),y:this.Qa.Fl()}}OC(){if(!this.pd){const t=new mo(this.Kn);t.wc&&this.chart.cs.Zn(fa.If),t.kc&&this.chart.cs.Zn(fa.Ff),this.pd=Fe(t,this.pd,(()=>[t.td((()=>{this.EC+=1,this.EC>1&&this.chart.cs.Zn(fa.Tf),this.chart.cs.Ms()})),t.sd((()=>{this.chart.cs.Ms()}))])),this.Qa.yd(t)}return this.pd.Gt}styleLegendEntry(t,e=!1){const i=this.getPointFillStyle(),s=this.getAreaFillStyle();ce(t,this.ts,e,{stroke:this.getStrokeStyle(),fill:i!==V?i:s,behavior:{priority:"stroke"}})}Ps(){return this.ws||this.getPointShape()}ze(t,e){t.ds(e),this.Bs.Ms()}}const mc=(...t)=>(e,i)=>t.forEach((t=>t.forEach((t=>{t.axis.At.it(e),t.axis.gg.it(i)})))),yc=u(10,10);var pc;e.AxisPosition=void 0,(pc=e.AxisPosition||(e.AxisPosition={}))[pc.Top=0]="Top",pc[pc.Bottom=1]="Bottom",pc[pc.Left=2]="Left",pc[pc.Right=3]="Right";const xc=new Set([e.AxisPosition.Top,e.AxisPosition.Bottom,e.AxisPosition.Left,e.AxisPosition.Right]),Ac=t=>t.setStopped(!0),Sc=t=>t.getChartInteractionFitByDrag()?t.fit(!0):void 0,vc=(t,e)=>{const i="linear-highPrecision"===t.Oh.type||"linear-highPrecision"===e.Oh.type,s="logarithmic"===t.Oh.type||"logarithmic"===e.Oh.type;if(i&&s){const i=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.Oh.type}, y: ${e.Oh.type})`;throw new Error(i)}};var bc,Mc,Tc;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(bc||(bc={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(Mc||(Mc={}));class wc extends dl{constructor(t,i,s,r,n,o,a){super(t,i,s,i.kp("chartXY bg",0),r,i.cs.ts.chartXYBackgroundFillStyle,i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.chartXYTitleFont,i.cs.ts.chartXYTitleFillStyle,a),this.$C=this.dp.d2({scaleXYConstructor:Vi}),this.jg=[],this.Zg=[],this.Jg=[],this.Qg=[],this.XC=new Map,this.jC=!0,this.ZC=!0,this.QC=!0,this.Uf=2,this.JC=!0,this.KC=!0,this.qC=[],this.tk=this.Fp.Le(this.$C).Be(V).De(nt).setMouseInteractions(!1),this.ik=this.Fp.Ue(this.$C).We(nt).setMouseInteractions(!1),this.sk=this.Fp.Ue(this.$C).We(nt).setMouseInteractions(!1),this.ek=this.ts.chartXYZoomingRectangleFillStyle,this.hk=this.ts.chartXYZoomingRectangleStrokeStyle,this.rk=this.ts.chartXYFittingRectangleFillStyle,this.nk=this.ts.chartXYFittingRectangleStrokeStyle,this.ak=e.MouseStyles.Default,this.lk=e.MouseStyles.Move,this.uk=e.MouseStyles.ZoomIn,this.ck=e.MouseStyles.Default,this.dk=void 0,this.aA=Cc,this.pM=0,this.fk=(t,e,i)=>{const s=t.solveNearest(e,i);return s&&je(s.cursorPosition.pointMarker.x,s.axisX.getInterval().start,s.axisX.getInterval().end)&&je(s.cursorPosition.pointMarker.y,s.axisY.getInterval().start,s.axisY.getInterval().end)?s:void 0},this.Ak=mc(this.Zg,this.jg),this.gk=mc(this.Jg,this.Qg),this.pk=(t,e,i,s,r)=>{this.Ak(s,r),this.gk(r,s),this.$C.it(s,r),this.cs.Ms()},this.yk=(t,e)=>{this.XC.set(t,e)},this.ag=t=>{const e=this.Zg.findIndex((e=>e.axis===t)),i=this.jg.findIndex((e=>e.axis===t)),s=this.Jg.findIndex((e=>e.axis===t)),r=this.Qg.findIndex((e=>e.axis===t));e>=0&&this.Zg.splice(e,1),i>=0&&this.jg.splice(i,1),s>=0&&this.Jg.splice(s,1),r>=0&&this.Qg.splice(r,1),this.XC.delete(t),this.cs.Ms()},this.addAreaSeries=t=>{const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=t&&t.baseline?t.baseline:0,r=new(t&&t.type?t.type:Du.Positive)(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,s,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(r),r},this.addAreaRangeSeries=t=>{const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=new Bu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(s),s},this.vk=!1,this.Sk=!1,this.mM=()=>{(this.jC||this.ZC)&&(this.dk=this.engine.setMouseStyle(this.ak))},this.vM=()=>{this.vk=!1,this.engine.restoreMouseStyle(this.dk)},this.SM=(t,e,i)=>{var s,r;const n=Dt(null===(s=this.SA.qn)||void 0===s?void 0:s.chartXYRectangleZoomFitMouseButton,0),o=Dt(null===(r=this.SA.qn)||void 0===r?void 0:r.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.dk);const a=this.Fp.cs.Ve(e.clientX,e.clientY);i===n&&(this.jC||this.ZC)?(this.xk(t,a),Qt(e)):i===o&&this.JC&&(this.dk=this.engine.setMouseStyle(this.lk),this.Sk=!0,Qt(e))},this.fv=(t,e,i,s,r)=>{var n,o;const a=u(e.clientX,e.clientY),h=Dt(null===(n=this.SA.qn)||void 0===n?void 0:n.chartXYRectangleZoomFitMouseButton,0),l=Dt(null===(o=this.SA.qn)||void 0===o?void 0:o.chartXYPanMouseButton,2);i===h&&(this.jC||this.ZC)?(this.bk(t,s,a),Qt(e)):i===l&&this.JC&&(this.Mk(li(r,-1)),Qt(e)),this.cs.Ms()},this.Av=(t,e,i,s)=>{var r,n;const o=Dt(null===(r=this.SA.qn)||void 0===r?void 0:r.chartXYRectangleZoomFitMouseButton,0),a=Dt(null===(n=this.SA.qn)||void 0===n?void 0:n.chartXYPanMouseButton,2);if(i===o&&(this.jC||this.ZC)){const i=u(e.clientX,e.clientY);this._k(t,s,i),Qt(e)}else i===a&&this.JC&&Qt(e);this.engine.restoreMouseStyle(this.dk),this.Ov.getIsUnderMouse()&&(this.dk=this.engine.setMouseStyle(this.ak)),this.vk=!1,this.Sk=!1},this.dv=(t,e)=>{if(this.QC){const t=this.Fp.cs.Ve(e.clientX,e.clientY);this.wk(t,u(ye(e),ye(e))),Qt(e)}},this.Ck=(t,e,i,s)=>{},this.kk=(t,e,i,s,r,n)=>{if(this.JC){const t=u(-(s.x+r.x)/2,-(s.y+r.y)/2);this.Mk(t),Qt(n),this.Sk=!0}if(this.QC){const t=this.cs.No({clientX:e.x,clientY:e.y}),o=this.cs.No({clientX:i.x,clientY:i.y}),a=ci(u(Math.abs(t.engineX-s.x-(o.engineX-r.x)),Math.abs(t.engineY-s.y-(o.engineY-r.y))),u(Math.abs(t.engineX-o.engineX),Math.abs(t.engineY-o.engineY)));this.forEachAxisX((t=>{t.getChartInteractionZoomByWheel()&&t.yt(t.At.pi(t.getInterval().start,-a.x),t.At.pi(t.getInterval().end,a.x),!1,!0,"interactionZoom")})),this.forEachAxisY((t=>{t.getChartInteractionZoomByWheel()&&t.yt(t.At.pi(t.getInterval().start,-a.y),t.At.pi(t.getInterval().end,a.y),!1,!0,"interactionZoom")})),Qt(n),this.vk=!0}},this.Tk=(t,e,i,s)=>{this.Sk=!1,this.vk=!1},this.Fk=(t,e,i)=>{(this.ZC||this.jC)&&(this.xk(t,e),Qt(i))},this.Ik=(t,e,i,s,r)=>{(this.ZC||this.jC)&&(this.bk(t,e,i),Qt(r))},this.Pk=(t,e,i,s)=>{(this.ZC||this.jC)&&(this._k(t,e,i),Qt(s))},this.cs.Zn(fa.Mf),this.setPadding({right:24}),this.Dk=i.wx("chartXY series bg",bc.seriesBackground),this.Bk=[bc.gridLine0,bc.gridLine1,bc.gridLine2].map((t=>i.Lk(`chartXY gridline #${t}`,t))),this.ng=i.Lk("chartXY highlighters below",bc.highlightersBelow),this.tb=i.Xy("chartXY plotting",Mc.plotting),this.og=i.Xy("chartXY highlighters above",Mc.highlightersAbove),this.IA=i.Xy("chartXY fg",Mc.fg),this.$C.x.q(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.ka.left+this.ka.right)),this.$C.y.q(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.ka.bottom+this.ka.top)),this.$C.it(this.uiScale.oi().x,this.uiScale.oi().y),this.Ov=this.Dk.Le(this.$C).Be(this.ts.chartXYSeriesBackgroundFillStyle).De(nt),this.Nv=this.IA.Le(this.$C).Be(V).De(this.ts.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.Vv(this.Ov,this.Nv),this.setSeriesBackgroundEffect(!1);const h=Dt(o?o.cursorBuilder:void 0,lc),l=i.Zy();this.Qy=uh(this,l,h.yy(l,this.$C,this.$C,Rt,this.ts),this,"show-all",Ic,((t,e)=>{const i=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((i.clientX-e.clientX)**2+(i.clientY-e.clientY)**2)})),this.addAxisX(o&&o.defaultAxisX),this.addAxisY(o&&o.defaultAxisY),this.onResize(this.pk),this.bh.yr("ChartXY"),this.gv=Ji(new es(this.Fk,this.Ik,this.Pk,1),new is(this.Ck,this.kk,this.Tk)),this.onSeriesBackgroundMouseEnter(this.mM),this.onSeriesBackgroundMouseLeave(this.vM),this.onSeriesBackgroundMouseWheel(this.dv),this.onSeriesBackgroundMouseDragStart(this.SM),this.onSeriesBackgroundMouseDrag(this.fv),this.onSeriesBackgroundMouseDragStop(this.Av),this.onSeriesBackgroundTouchStart(this.gv.onTouchStart),this.onSeriesBackgroundTouchMove(this.gv.onTouchMove),this.onSeriesBackgroundTouchEnd(this.gv.onTouchEnd),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.Cp(n,this.$C)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.Lv}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}solveNearest(t,e=this.getCursorMode()||"show-nearest"){return this.Qy.solveNearest(t,e,this.Lv,this.fk)}addCursor(t=lc){const e=this.gp(),i=t.yy(e,this.$C,this.$C,this.up(e),this.ts);return i.cC=!0,this.Mp(i),i}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.ka.left+this.ka.right,t.y+=this.Xt.top+this.Xt.bottom+this.ka.top+this.ka.bottom;const e=this.bh.zs().ed(),i=S(kc(this.aA||Cc),this.Tp);return t.x+=e.x+i.left+i.right,t.y+=e.y+i.top+i.bottom,this.Rk&&(t.x+=this.Rk.left,t.x+=this.Rk.right,t.y+=this.Rk.top,t.y+=this.Rk.bottom),t.x+=yc.x,t.y+=yc.y,t}addAxisX(t){var e,i;const{opposite:s,type:r}=Ki(t);let n;n="linear"===r.type?this.dp.d1({dimension:"x",scale1DConstructor:Bi}):"linear-highPrecision"===r.type?this.dp.d1({dimension:"x",scale1DConstructor:Bi}).Mi():this.dp.d1({dimension:"x",scale1DConstructor:wi}).Ai(r.base),n.it(this.$C.x.oi());const o=s?this.jg:this.Zg,a=new ma(this.Bk,this.IA,this.Fp,this.ng,this.og,this.cs.hs,n,this.$C.y,(h=()=>a.Lg(),{...pa,...nc(h)}),this,s?100:0,this.ag,this.yk,this.ts,this.dh,r);var h;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=o.reduce(((t,e)=>Math.max(t,e.iParallel+1)),0),u=0):(l=null!==(e=t.iParallel)&&void 0!==e?e:0,u=null!==(i=t.iStack)&&void 0!==i?i:0),o.push({axis:a,iStack:u,iParallel:l}),this.cs.Ms(),a}addAxisY(t){var e,i;const{opposite:s,type:r}=Ki(t);let n;n="linear"===r.type?this.dp.d1({dimension:"y",scale1DConstructor:Bi}):"linear-highPrecision"===r.type?this.dp.d1({dimension:"y",scale1DConstructor:Bi}).Mi():this.dp.d1({dimension:"y",scale1DConstructor:wi}).Ai(r.base),n.it(this.$C.y.oi());const o=s?this.Qg:this.Jg,a=new ma(this.Bk,this.IA,this.Fp,this.ng,this.og,this.cs.hs,n,this.$C.x,(h=()=>a.Lg(),{...xa,...oc(h)}),this,s?100:0,this.ag,this.yk,this.ts,this.dh,r);var h;let l,u;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=o.reduce(((t,e)=>Math.max(t,e.iParallel+1)),0),u=0):(l=null!==(e=t.iParallel)&&void 0!==e?e:0,u=null!==(i=t.iStack)&&void 0!==i?i:0),o.push({axis:a,iParallel:l,iStack:u}),this.cs.Ms(),a}swapAxes(t,e){const i=[this.Zg,this.Jg,this.Qg,this.jg],s=i.find((e=>void 0!==e.find((e=>e.axis===t)))),r=i.find((t=>void 0!==t.find((t=>t.axis===e))));if(!s||!r)return this;if(s!==r)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const n=s.find((e=>e.axis===t)),o=s.find((t=>t.axis===e));if(!n||!o)return this;const a=n.iParallel,h=n.iStack;return n.iParallel=o.iParallel,n.iStack=o.iStack,o.iParallel=a,o.iStack=h,this.cs.Ms(),this}dispose(){return this.Qy.Y(),this.Dk.Y(),this.tb.Y(),this.IA.Y(),this.Bk.forEach((t=>t.Y())),this.og.Y(),this.ng.Y(),this.FC().forEach((t=>t.dispose())),sh(this.$C),this.Zg.slice().forEach((t=>t.axis.dispose())),this.Jg.slice().forEach((t=>t.axis.dispose())),this.Qg.slice().forEach((t=>t.axis.dispose())),this.jg.slice().forEach((t=>t.axis.dispose())),this.Lv.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.Zg,...this.jg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.Jg,...this.Qg].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):xc;return Ft(Array.from(i).map((t=>{switch(t){default:case e.AxisPosition.Top:return this.jg.map((t=>t.axis));case e.AxisPosition.Bottom:return this.Zg.map((t=>t.axis));case e.AxisPosition.Left:return this.Jg.map((t=>t.axis));case e.AxisPosition.Right:return this.Qg.map((t=>t.axis))}})))}Ek(t){let e;return this.forEachAxisX((i=>{e=t===i?"x":e})),this.forEachAxisY((i=>{e=t===i?"y":e})),e}forEachAxisX(t){this.Zg.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis))))),this.jg.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis)))))}forEachAxisY(t){this.Jg.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis))))),this.Qg.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis)))))}setTitlePosition(t){return this.aA=t,this.cs.Ms(),this}getTitlePosition(){return this.aA}zk(t,e,i,s){const r=this.aA||Cc;let n,o=S(kc(r),this.Tp);this.getTitleFillStyle()===V||0===this.getTitle().length?(n={x:0,y:0},o={left:0,top:0,right:0,bottom:0}):n=this.bh.zs().ed();const a=Math.abs(s)+this.ka.bottom+this.Xt.bottom,h=Math.abs(i)+this.ka.top+this.Xt.top,l={left:Math.abs(t)+this.ka.left+this.Xt.left,right:Math.abs(e)+this.ka.right+this.Xt.right,top:h,bottom:a},u=this.uiScale.Wi(),{horizontalAlignment:c,verticalAlignment:d,position:f,marginsWithTitle:g}=Ec(r,u,l,n,o,this.ka);return this.bh.Ee(f).Wa(c).Ya(d),g}Re(t){super.Re(t);for(const t of this.Lv)t.vv();for(const t of this.Lv)t.Re();const e=ve(this.Lv.map((t=>t.xM()))),i=new Set(e.map((t=>t.Vk)));if(1===i.size){const t=Array.from(i)[0],s="x"===t?[this.Zg,this.jg]:[this.Jg,this.Qg],r="y"===t?[this.Zg,this.jg]:[this.Jg,this.Qg];s.forEach((t=>t.forEach((t=>t.axis.Br())))),e.forEach((t=>t.Ok())),r.forEach((t=>t.forEach((t=>t.axis.Br()))))}else this.Jg.forEach((t=>t.axis.Br())),this.Zg.forEach((t=>t.axis.Br())),this.jg.forEach((t=>t.axis.Br())),this.Qg.forEach((t=>t.axis.Br()));const s=this.Jg.map((t=>t.axis.zs())),r=this.Zg.map((t=>t.axis.zs())),n=this.jg.map((t=>t.axis.zs())),o=this.Qg.map((t=>t.axis.zs()));let a=!1;this.forEachAxis((t=>{(t.zr()||t.Vr())&&(a=!0)}));const h=this.vk||this.Sk||!this.KC&&a,l=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Qy.Re(h,l?this.Lv.sort(((t,e)=>e.axisY.getStackIndex()-t.axisY.getStackIndex())):this.Lv,this.fk,{afterCursorPointedAt:t=>{const e=this.cs.Xn();if(t.length>1&&e){const t=this.cs.No(e);this.Qy.zp.Ay({x:t.engineX,y:t.engineY},this.cs.At)}},overrideCursorPositions:(t,e)=>t.map((t=>t.multiHit?t.multiHit.map((e=>({...t.cursorPosition,pointMarker:e}))):[t.cursorPosition])).flat()});const c=Rc(this.Jg,s),d=Rc(this.Zg,r),f=Rc(this.jg,n),g=Rc(this.Qg,o),m=this.zk(c.thicknessTotal,g.thicknessTotal,f.thicknessTotal,d.thicknessTotal),p=this.$C.x.getCellSize()-(m.left+m.right),x=this.$C.y.getCellSize()-(m.bottom+m.top),A=[m.left,m.right],S=[m.bottom,m.top];this.$C.x.q(0,p),this.$C.y.q(0,x),this.$C.x.si(A),this.$C.y.si(S);const v=(t,e,i,s)=>{let r=0;t.groups.forEach((t=>{let n=0;const o=t.stacks.reduce(((t,e)=>Math.max(t,e.zg)),0),a=t.stacks.reduce(((t,e)=>t+(e.axis.getVisible()?e.axis.uA+e.axis.cA:0)),0),h=t.stacks.reduce(((t,e)=>t+(e.axis.getVisible()&&"pixels"in e.axis.Hd?e.axis.Hd.pixels:0)),0),l=e-a-h;t.stacks.forEach((s=>{const a=s.axis,h=a.getVisible(),u=Math.max(e-n,0),c=Math.min(h?"pixels"in a.Hd?a.Hd.pixels:a.Hd.relative/t.sumRelativeSize*l:0,u),d=h?i[0]+n+a.uA:0,f=h?i[1]+(e-n)-c-a.uA:0;a.At.si([d,f]),a.Re({zg:o,Vg:s.Vg,Gg:c,Nk:n,Xg:o+s.Vg,Ug:r}),h&&(n+=c+a.uA+a.cA)})),r+=s*t.thicknessMax}))};v(c,x,S,-1),v(g,x,S,1),v(d,p,A,-1),v(f,p,A,1),this.Rk={left:c.thicknessTotal,top:f.thicknessTotal,right:g.thicknessTotal,bottom:d.thicknessTotal},this.Ov.Ee(u(0,0)).it(u(p,x)),this.Nv.Ee(u(0,0)).it(u(p,x));const b=y(this.$C.x.ei(),this.$C.y.ei(),this.$C.x.ri(),this.$C.y.ri());this.tb.gx(b),this.ng.gx(b),this.og.gx(b),this.rp&&this.rp(),super.wp(),this.Zg.forEach((t=>t.axis.Kg())),this.jg.forEach((t=>t.axis.Kg())),this.Jg.forEach((t=>t.axis.Kg())),this.Qg.forEach((t=>t.axis.Kg()));for(const t of this.Lv)t._m()}J(){for(let t=0;t<this.Zg.length;t+=1)this.Zg[t].axis.J();for(let t=0;t<this.jg.length;t+=1)this.jg[t].axis.J();for(let t=0;t<this.Jg.length;t+=1)this.Jg[t].axis.J();for(let t=0;t<this.Qg.length;t+=1)this.Qg[t].axis.J();return super.J()}mk(t){if(this.XC.has(t))return this.XC.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);let s=Ju.freeform;t&&t.dataPattern&&(s="ProgressiveX"===t.dataPattern.pattern?Ju.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Ju.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Ju.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Ju.verticalRegressive:Ju.freeform);const r=new cc(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,s,this.ts,this.cs.hs,Yh(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,t);return this.Gv(r),r}addPointLineAreaSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=new gc(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,t);return this.Gv(s),s}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(i,s);const r=t&&t.pointShape&&Object.values(e.PointShape).includes(t.pointShape)?"string"==typeof t.pointShape?e.PointShape[t.pointShape]:t.pointShape:e.PointShape.Square,n=new dc(this,this.Ev,this.tb,i,s,this.mk(i),this.mk(s),this.gp,r,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,t);return this.Gv(n),n}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(i,s);const r=t&&t.pointShape&&Object.values(e.PointShape).includes(t.pointShape)?"string"==typeof t.pointShape?e.PointShape[t.pointShape]:t.pointShape:e.PointShape.Square;let n=Ju.freeform;t&&t.dataPattern&&(n="ProgressiveX"===t.dataPattern.pattern?Ju.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?Ju.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?Ju.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?Ju.verticalRegressive:Ju.freeform);const o=new Nu(this,this.Ev,this.tb,i,s,this.mk(i),this.mk(s),this.gp,n,r,this.ts,this.cs.hs,Yh(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,t);return this.Gv(o),o}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(i,s);const r=t&&t.pointShape?t.pointShape:e.PointShape.Square,n=t&&t.mode?t.mode:e.StepOptions.before,o=new tc(this,this.Ev,this.tb,i,s,this.mk(i),this.mk(s),this.gp,r,n,this.ts,this.cs.hs,Yh(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,t);return this.Gv(o),o}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(i,s);const r=t&&t.pointShape?t.pointShape:e.PointShape.Square;let n=Ju.freeform;t&&t.dataPattern&&(n="ProgressiveX"===t.dataPattern.pattern?Ju.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?Ju.horizontalRegressive:Ju.freeform);const o=new Yu(this,this.Ev,this.tb,i,s,this.mk(i),this.mk(s),this.gp,n,r,this.ts,this.cs.hs,Yh(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,t);return this.Gv(o),o}addRectangleSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=new Au(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(s),s}addPolygonSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),s=new pu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(s),s}addSegmentSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=new vu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(s),s}addEllipseSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=new mu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(s),s}addBoxSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=t&&t.dimensionStrategy?t.dimensionStrategy:pa,r=new fu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,s,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length);return this.Gv(r),r}addHeatmapGridSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let s;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new Mu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,t,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length),this.Gv(s),s}addHeatmapScrollingGridSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let s;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new wu(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,t,this.ts,this.cs.hs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length),this.Gv(s),s}addOHLCSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();vc(e,i);const s=new(t&&t.type?t.type:rc.Candlesticks)(this,this.Ev,this.tb,e,i,this.mk(e),this.mk(i),this.gp,this.ts,this.cs.hs);return this.Gv(s),s}addOnScreenMenu(t,e){return new fc(this.SA,t,this,e)}setMouseBackgroundStyle(t=e.MouseStyles.Default){return this.ak=t,this}setMouseZoomStyle(t=e.MouseStyles.ZoomIn){return this.uk=t,this}setMouseFitStyle(t=e.MouseStyles.Default){return this.ck=t,this}setMousePanStyle(t=e.MouseStyles.Move){return this.lk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.jC=t,this}getMouseInteractionRectangleZoom(){return this.jC}setMouseInteractionRectangleFit(t){return this.ZC=t,this}getMouseInteractionRectangleFit(){return this.ZC}setMouseInteractionPan(t){return this.JC=t,this}getMouseInteractionPan(){return this.JC}setMouseInteractionWheelZoom(t){return this.QC=t,this}getMouseInteractionWheelZoom(){return this.QC}setZoomingRectangleFillStyle(t){return this.ek="function"==typeof t?t(this.ek):t,this.cs.Ms(),this}getZoomingRectangleFillStyle(){return this.ek}setZoomingRectangleStrokeStyle(t){return this.hk="function"==typeof t?t(this.hk):t,this.cs.Ms(),this}getZoomingRectangleStrokeStyle(){return this.hk}setFittingRectangleFillStyle(t){return this.rk="function"==typeof t?t(this.rk):t,this.cs.Ms(),this}getFittingRectangleFillStyle(){return this.rk}setFittingRectangleStrokeStyle(t){return this.nk="function"==typeof t?t(this.nk):t,this.cs.Ms(),this}getFittingRectangleStrokeStyle(){return this.nk}addLegendBox(t,e){const i=super.addLegendBox(t,e);if(void 0===e||e===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())i.setOrigin(Ds.RightCenter).setPosition({x:this.uiScale.x.dt(this.uiScale.x.hi()-this.ka.right),y:ut(this.$C.y.dt(this.$C.y.ei()+this.$C.y.ri()/2),this.$C.y,this.uiScale.y)});else{const t=this.aA||Cc,e=Ec(t,this.uiScale.Wi(),this.ka,this.getTitleFillStyle()===V||0===this.getTitle().length?{x:0,y:0}:this.bh.zs().ed(),S(kc(t),this.Tp),this.ka).marginsWithTitle.top;i.setOrigin(Ds.RightTop).setPosition(ct({x:this.mg.x.getInnerEnd()-this.ka.right,y:this.mg.y.getInnerEnd()-e},this.mg,this.uiScale))}return i}xk(t,e){this.forEachAxis(Ac);const i=this.cs.No({clientX:e.x,clientY:e.y}),s=ct({x:i.engineX,y:i.engineY},this.Fp.cs.At,this.$C);this.tk.Ee(s).it(u(0,0))}bk(t,e,i){const s=this.cs.No({clientX:e.x,clientY:e.y}),r=ct({x:s.engineX,y:s.engineY},this.Fp.cs.At,this.$C),n=this.cs.No({clientX:i.x,clientY:i.y}),o=ct({x:n.engineX,y:n.engineY},this.Fp.cs.At,this.$C),a=je(o.x,this.$C.x.getInnerStart(),this.$C.x.getInnerEnd())&&je(o.y,this.$C.y.getInnerStart(),this.$C.y.getInnerEnd()),h=u(Math.min(r.x,o.x),Math.min(r.y,o.y)),l=u(Math.max(r.x,o.x),Math.max(r.y,o.y));this.tk.Ee(h).it(ci(l,h));const c=Math.min(l.x-h.x,l.y-h.y)>=10;a&&c&&l.x===r.x&&this.ZC?(this.vk=!0,this.tk.Be(this.rk).De(this.nk),this.ik.We(this.nk).He(r).Ye(o),this.sk.We(this.nk).He(u(r.x,o.y)).Ye(u(o.x,r.y)),this.dk=this.engine.setMouseStyle(this.ck,this.dk)):a&&c&&(this.jC||this.ZC)?(this.vk=!0,this.tk.Be(this.ek).De(this.hk),this.ik.We(nt),this.sk.We(nt),this.dk=this.engine.setMouseStyle(this.uk,this.dk)):(this.vk=!1,this.tk.De(nt).Be(V),this.ik.We(nt),this.sk.We(nt),this.engine.restoreMouseStyle(this.dk)),this.cs.Ms()}_k(t,e,i){if(this.vk){const t=this.cs.No({clientX:i.x,clientY:i.y}),s=ct({x:t.engineX,y:t.engineY},this.Fp.cs.At,this.$C),r=je(s.x,this.$C.x.getInnerStart(),this.$C.x.getInnerEnd())&&je(s.y,this.$C.y.getInnerStart(),this.$C.y.getInnerEnd()),n=i.x>=e.x||!this.ZC?"zoom":"fit",o=this.tk.Oa(),a=ui(o,this.tk.oi()),h=Math.min(this.tk.oi().x,this.tk.oi().y)>=10;r&&h&&"zoom"===n&&this.jC?(this.forEachAxisX((t=>{if(t.getChartInteractionZoomByDrag()){const e=ct(o,this.$C,t.pg).x,i=ct(a,this.$C,t.pg).x;t.yt(e,i,!0,!0,"interactionSetInterval")}})),this.forEachAxisY((t=>{if(t.getChartInteractionZoomByDrag()){const e=ct(o,this.$C,t.pg).y,i=ct(a,this.$C,t.pg).y;t.yt(e,i,!0,!0,"interactionSetInterval")}}))):r&&h&&"fit"===n&&this.ZC&&this.forEachAxis(Sc)}this.tk.De(nt).Be(V),this.ik.We(nt),this.sk.We(nt),this.cs.Ms()}pan(t){this.forEachAxisX((e=>{e.setStopped(!0).pan(t.x)})),this.forEachAxisY((e=>{e.setStopped(!0).pan(t.y)}))}Mk(t){this.forEachAxisX((e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.x)})),this.forEachAxisY((e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.y)}))}zoom(t,e){this.forEachAxis(Ac),this.forEachAxisX((i=>{i.zoom(i.At.dt(t.x),e.x)})),this.forEachAxisY((i=>{i.zoom(i.At.dt(t.y),e.y)}))}wk(t,e){this.forEachAxisX((i=>{i.getChartInteractionZoomByWheel()&&(Ac(i),i.zoom(i.At.dt(t.x),e.x))})),this.forEachAxisY((i=>{i.getChartInteractionZoomByWheel()&&(Ac(i),i.zoom(i.At.dt(t.y),e.y))}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((e=>e.setAnimationsEnabled(t))),this}ef(){const t=[];return this.forEachAxis((e=>e.Ig((e=>t.push(e))))),super.ef().concat(t)}FC(){return this.qC}Me(){return this.Dp(this.tb)}setCursorEnabledDuringAxisAnimation(t){return this.KC=t,this}getCursorEnabledDuringAxisAnimation(){return this.KC}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,e,i){if(i){const s=t,r=e,n=Aa(r)?r:Yi(r)?this.mg:void 0;if(n&&Oi(i)){const t=ct(s,n,this.cs.At);return this.cs.Go({engineX:t.x,engineY:t.y})}if(n&&Yi(i))return ct(s,n,this.mg);if(n&&Aa(i))return ct(s,n,i)}else{const i=t;if(Yi(e)){const t=this.cs.No(i);return ct({x:t.engineX,y:t.engineY},this.cs.At,this.mg)}if(Aa(e)){const t=e,s=this.cs.No(i);return ct({x:s.engineX,y:s.engineY},this.cs.At,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}e.ChartXYTitlePositionOptions=void 0,(Tc=e.ChartXYTitlePositionOptions||(e.ChartXYTitlePositionOptions={})).CenterTop="center-top",Tc.RightTop="right-top",Tc.LeftTop="left-top",Tc.CenterBottom="center-bottom",Tc.RightBottom="right-bottom",Tc.LeftBottom="left-bottom",Tc.SeriesCenterTop="series-center-top",Tc.SeriesRightTop="series-right-top",Tc.SeriesLeftTop="series-left-top",Tc.SeriesCenterBottom="series-center-bottom",Tc.SeriesRightBottom="series-right-bottom",Tc.SeriesLeftBottom="series-left-bottom";const Cc=e.ChartXYTitlePositionOptions.CenterTop,kc=t=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Te(0,`Unexpected ChartXY title position selection ${t}`)},Ec=(t,e,i,s,r,n)=>{s.x,r.left,r.right;const o=s.y+r.bottom+r.top,a=(r.left-r.right)*e.x,h=(r.bottom-r.top)*e.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-(n.top+r.top)*e.y},marginsWithTitle:{...i,top:i.top+o}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:a,y:100-(n.top-r.top)*e.y},marginsWithTitle:{...i,top:i.top+o}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+a,y:100-(n.top-r.top)*e.y},marginsWithTitle:{...i,top:i.top+o}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+a,y:(n.bottom+r.bottom)*e.y},marginsWithTitle:{...i,bottom:i.bottom+o}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:a,y:(n.bottom+r.bottom)*e.y},marginsWithTitle:{...i,bottom:i.bottom+o}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+a,y:(n.bottom+r.bottom)*e.y},marginsWithTitle:{...i,bottom:i.bottom+o}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+a,y:100-i.top*e.y+h},marginsWithTitle:i};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:i.left*e.x+a,y:100-i.top*e.y+h},marginsWithTitle:i};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-i.right*e.x+a,y:100-i.top*e.y+h},marginsWithTitle:i};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:i.bottom*e.y+h},marginsWithTitle:i};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:i.left*e.x+a,y:i.bottom*e.y+h},marginsWithTitle:i};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-i.right*e.x+a,y:i.bottom*e.y+h},marginsWithTitle:i}}return Te(0,`Unexpected ChartXY title position selection ${t}`)},Rc=(t,e)=>{const i=[];t.forEach(((t,s)=>{const r=e[s],n=i.find((e=>e.iParallel===t.iParallel));n?(n.stacks.push({...t,...r}),n.stacks.sort(((t,e)=>t.iStack-e.iStack))):i.push({iParallel:t.iParallel,stacks:[{...t,...r}]})}));const s=i.map((t=>{const e=t.stacks.reduce(((t,e)=>Math.max(t,e.zg)),0),i=t.stacks.reduce(((t,e)=>Math.max(t,e.Vg)),0),s=t.stacks.reduce(((t,e)=>Math.max(t,e.$d)),0),r=t.stacks.reduce(((t,e)=>t+(e.axis.getVisible()&&"relative"in e.axis.Hd?e.axis.Hd.relative:0)),0);return{...t,ticksSizeMax:e,titleSizeMax:i,sumRelativeSize:r,thicknessMax:s}}));return s.sort(((t,e)=>t.iParallel-e.iParallel)),{groups:s,thicknessTotal:s.reduce(((t,e)=>t+e.thicknessMax),0)}},Ic=(t,e,i)=>{var s;const r=Array.from(new Set(i.map((t=>t.series.fs())))),n=1===r.length&&void 0!==r[0]?r[0]:void 0,o="ProgressiveY"===n||"RegressiveY"===n?{progressiveDimension:"Y",progressiveAxis:e.axisY,valueDimension:"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:"X",progressiveAxis:e.axisX,valueDimension:"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},a=o.progressiveAxis.getTickStrategy();return ft(e)?lh(e,[[e.series],[t.getDefaultAxisX().getTitle()||"X","",{text:Wi(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:Wi(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],void 0!==e.intensity?["Value","",{text:Wi(e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]:[]]):1===i.length?"Time"===a||"DateTime"===a?e.multiHit?[[Wi(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis)],...lh(e,[[e.series,""],[`${o.valueDimension}1`,"",{text:Wi(o.hitValueAxis(e).formatValue(o.value(e.multiHit[0])),o.hitValueAxis(e)),font:{weight:"bold"}}],[`${o.valueDimension}2`,"",{text:Wi(o.hitValueAxis(e).formatValue(o.value(e.multiHit[1])),o.hitValueAxis(e)),font:{weight:"bold"}}]])]:[[Wi(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis)],...lh(e,[[e.series,"",{text:Wi(o.hitValueAxis(e).formatValue(o.value(e)),o.hitValueAxis(e)),font:{weight:"bold"}}]])]:e.multiHit?lh(e,[[e.series],[o.progressiveDimension,"",{text:Wi(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),font:{weight:"bold"}}],[`${o.valueDimension}1`,"",{text:Wi(o.hitValueAxis(e).formatValue(o.value(e.multiHit[0])),o.hitValueAxis(e)),font:{weight:"bold"}}],[`${o.valueDimension}2`,"",{text:Wi(o.hitValueAxis(e).formatValue(o.value(e.multiHit[1])),o.hitValueAxis(e)),font:{weight:"bold"}}]]):lh(e,[[e.series],[o.progressiveDimension,"",{text:Wi(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),font:{weight:"bold"}}],[o.valueDimension,"",{text:Wi(o.hitValueAxis(e).formatValue(o.value(e)),o.hitValueAxis(e)),font:{weight:"bold"}}]]):n?[Wi(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),...i.map((t=>t.multiHit?lh(t,[[t.series,""],[`${o.valueDimension}1`,"",{text:Wi(o.hitValueAxis(t).formatValue(o.value(t.multiHit[0])),o.hitValueAxis(t)),font:{weight:"bold"}}],[`${o.valueDimension}2`,"",{text:Wi(o.hitValueAxis(t).formatValue(o.value(t.multiHit[1])),o.hitValueAxis(t)),font:{weight:"bold"}}]]):lh(t,[[t.series,"",{text:Wi(o.hitValueAxis(t).formatValue(o.value(t)),o.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:i.map((t=>lh(t,[[t.series],[o.progressiveDimension,"",{text:Wi(o.progressiveAxis.formatValue(o.position(t)),o.progressiveAxis),font:{weight:"bold"}}],[o.valueDimension,"",{text:Wi(o.hitValueAxis(t).formatValue(o.value(t)),o.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()};class _c{constructor(t,e,i,s,n,o,a){this.coordsRelative="relative",this.coordsClient="client",this.R=new r.Eventer,this.Gk=[],this.Wk=new Map,this.Lv=new Map,this.Uk=(t,e,i)=>{0!==this.Lv.size&&void 0!==[...this.Lv.values()].find((({series:t})=>!0===t.getVisible()))||this.Yk.yt(e,i,!1,!1,"zoomBandChart"),this.Hk.cs.Ms()},e.cs.Zn(fa.xf),this.SA=t,this.$k=(null==o?void 0:o.orientation)||"x",this.Xk=void 0!==(null==o?void 0:o.useSharedValueAxis)&&o.useSharedValueAxis,this.jk=s,this.Zu="x"===this.$k?pa:xa;const h={...o,defaultAxisX:this.Zu.getWidth({x:null==o?void 0:o.defaultAxis,y:void 0}),defaultAxisY:this.Zu.getHeight({x:null==o?void 0:o.defaultAxis,y:void 0})};this.Hk=new wc(t,e,i,Rt,n,h,a).setTitle("Zoom Band Chart").setMouseInteractions(!1).setCursorMode(void 0),this.engine=this.Hk.engine;const l=this.Hk.getDefaultAxisX().setMouseInteractions(!1),u=this.Hk.getDefaultAxisY().setMouseInteractions(!1);this.Yk=this.Zu.getWidth({x:l,y:u}).setScrollStrategy(Ws.fitting).setAnimationScroll(!1).setStrokeStyle(nt).setTickStrategy(Ks.Empty),(null==o?void 0:o.useSharedValueAxis)?this.Zk=this.Zu.getHeight({x:l,y:u}):this.Zu.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new U({color:this.getTheme().isDark?T(0,0,0,180):T(255,255,255,180)});this.Qk=[this.Hk.IA.Le(this.Yk.pg).Be(c).De(nt),this.Hk.IA.Le(this.Yk.pg).Be(c).De(nt)];const d=this.Hk.IA.Yg(this.Yk.pg).We(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.Jk={collection:d,members:new Array(5).fill(0).map((t=>d.Xr()))};const f=this.getTheme(),g="function"==typeof f.zoomBandChartKnobFillStyle?f.zoomBandChartKnobFillStyle(this.SA.Ks):f.zoomBandChartKnobFillStyle||V;this.Kk=[this.Hk.IA.Le(this.Hk.mg).Be(g).De(nt),this.Hk.IA.Le(this.Hk.mg).Be(g).De(nt)],this.qk=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.tT()}add(t){var e,i,s,r,n;const o=this.Gk.map((t=>t.axis)),a="x"===this.$k?t.axisX:t.axisY;if(!o.includes(a)){const t=a.onIntervalChange(this.Uk);this.Gk.push({axis:a,deattach:()=>{a.offIntervalChange(t)}}),this.Yk.sr(a.ir()),this.iT&&this.iT.remove(),this.iT=dt(...this.Gk.map((t=>t.axis)))}const h=this.Zu.getHeight({x:t.axisX,y:t.axisY});let l;if(this.Xk)l=this.Zk;else{const t=this.Wk.get(h);t?l=t:(l=this.Zu.getHeight({x:this.Hk.addAxisX.bind(this.Hk),y:this.Hk.addAxisY.bind(this.Hk)})(),this.sT(l)),this.Wk.set(h,l)}const u=this.Zu.getWidth({x:this.Yk,y:l}),c=this.Zu.getHeight({x:this.Yk,y:l});let d;const f=[],g=(t,e)=>{const i=t=>{if(0!==t.length)if("x"in t[0]){const i=t;e.add(i)}else{const i=t,s=[];for(let t=0;t<i.length;t+=1){const e=i[t];s.push({x:e[0],y:e[4]})}e.add(s)}},s=t.UM();i(s);const r=t.YM(((t,e)=>i(e)));f.push((()=>t.HM(r)));const n=t.$M((()=>e.clear()));f.push((()=>{t.XM(n)}))};if(t instanceof gc)d=this.Hk.addPointLineAreaSeries({...t.Kn,xAxis:u,yAxis:c}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.HC());else if(t instanceof cc||t instanceof ec){const i=this.Hk.addLineSeries({xAxis:u,yAxis:c,dataPattern:t instanceof cc?null===(e=t.Kn)||void 0===e?void 0:e.dataPattern:void 0});if(t instanceof cc)i.setStrokeStyle(t.getStrokeStyle());else{const e=Fc(t);e&&i.setStrokeStyle(e)}g(t,i),d=i}else if(t instanceof Iu){const e=this.Hk.addAreaSeries({xAxis:u,yAxis:c,baseline:t.Q_}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());g(t,e),d=e}else if(t instanceof dc){const e=this.Hk.addPointSeries({xAxis:u,yAxis:c,pointShape:null===(i=t.Kn)||void 0===i?void 0:i.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof tc){const e=this.Hk.addStepSeries({xAxis:u,yAxis:c,pointShape:null===(s=t.Kn)||void 0===s?void 0:s.pointShape,mode:t.mw}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Yu){const e=this.Hk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(r=t.Kn)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Nu){const e=this.Hk.addSplineSeries({xAxis:u,yAxis:c,pointShape:null===(n=t.Kn)||void 0===n?void 0:n.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Bu){const e=this.Hk.addAreaRangeSeries({xAxis:u,yAxis:c}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.UM()),i=t.YM(((t,i)=>e.add(i)));f.push((()=>t.HM(i))),d=e;const s=t.$M((()=>e.clear()));f.push((()=>{t.XM(s)}))}else{if(!(t instanceof bu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const e=this.Hk.addHeatmapGridSeries({xAxis:u,yAxis:c,...t.e_}),i=()=>{e.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};i(),d=e,t.n_(d);const s=t.l_(((t,i)=>e.invalidateIntensityValues(i))),r=t.o_(i);f.push((()=>{t.u_(s),t.a_(r)}));const n=t.$M((()=>e.clear()));f.push((()=>{t.XM(n)}))}}d.setMouseInteractions(!1);const m=t.onVisibleStateChanged(((t,e)=>{d.setVisible(e)}));f.push((()=>{t.offVisibleStateChanged(m)}));const y=t.onHighlight(((t,e)=>d.setHighlight(e)));f.push((()=>{t.offHighlight(y)}));const p=t.onDispose((()=>{this.disposeSeries(t)}));return f.push((()=>{t.offDispose(p)})),this.Lv.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const e=this.Lv.get(t);if(e){const{clearReferences:i}=e;i(),this.Lv.delete(t),e.series.dispose();const s=this.Zu.getHeight({x:t.axisX,y:t.axisY}),r=this.Wk.get(s);r&&0===r.Lg().length&&(this.Wk.delete(s),r.dispose())}const i="x"===this.$k?t.axisX:t.axisY;if(!Array.from(this.Lv.keys()).find((t=>i===("x"===this.$k?t.axisX:t.axisY)))){const t=this.Gk.findIndex((t=>t.axis===i));this.Gk[t].deattach(),this.Gk.splice(t,1)}return this}setDefocusOverlayFillStyle(t){return this.Qk.forEach((e=>e.Be(t))),this.Hk.cs.Ms(),this}getDefocusOverlayFillStyle(){return this.Qk[0].Xh()}setSplitterStrokeStyle(t){return this.Jk.collection.We(t),this.Hk.cs.Ms(),this}getSplitterStrokeStyle(){return this.Jk.collection.mu()}setKnobFillStyle(t){return this.Kk.forEach((e=>e.Be(t))),this.Hk.cs.Ms(),this}getKnobFillStyle(){return this.Kk[0].Xh()}setKnobStrokeStyle(t){return this.Kk.forEach((e=>e.De(t))),this.Hk.cs.Ms(),this}getKnobStrokeStyle(){return this.Kk[0].mo()}setKnobSize(t){return this.qk=t,this.Hk.cs.Ms(),this}getKnobSize(){return this.qk}getDefaultAxisX(){return this.Hk.getDefaultAxisX()}getDefaultAxisY(){return this.Hk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}sT(t){t.setTickStrategy(Ks.Empty).setMouseInteractions(!1).setNibStyle(nt).setStrokeStyle(nt)}tT(){let t;const i=(t,e,i)=>{var s,r;const n="x"===this.$k?null===(s=Array.from(this.Lv.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.Lv.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.Yk.getInterval();Math.abs(this.Yk.At.ft(t)-this.Yk.At.ft(e))<10||Math.sign(e-t)!==Math.sign(o.end-o.start)||Math.min(t,e)<Math.min(a.start,a.end)||Math.max(t,e)>Math.max(a.start,a.end)&&Math.max(o.start,o.end)<Math.max(t,e)||n.yt(t,e,i,!0,"zoomBandChart")};this.Kk.forEach(((s,r)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(this.Zu.getWidth({x:e.MouseStyles.Horizontal,y:e.MouseStyles.Vertical}),t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const n=t=>{var e,s;const n="x"===this.$k?null===(e=Array.from(this.Lv.keys())[0])||void 0===e?void 0:e.axisX:null===(s=Array.from(this.Lv.keys())[0])||void 0===s?void 0:s.axisY;if(!n)return;const o=this.Zu.getWidth(this.Hk.translateCoordinate(t,this.Hk.coordsAxis)),a=n.getInterval(),h=0===r?o:a.start,l=1===r?o:a.end;i(h,l,!1),Qt(t)};s.setMouseDragEventHandler(((t,e,i,s,r)=>n(e)));const o=Ji(new es(void 0,((t,e,i,s,r)=>n(r))));s.setTouchStartEventHandler(o.onTouchStart),s.setTouchMoveEventHandler(o.onTouchMove),s.setTouchEndEventHandler(o.onTouchEnd)})),this.Hk.onSeriesBackgroundMouseEnter((()=>{t=this.engine.setMouseStyle(e.MouseStyles.Move,t)})),this.Hk.onSeriesBackgroundMouseLeave((()=>{this.engine.restoreMouseStyle(t)}));const s=(t,e)=>{var s,r;const n="x"===this.$k?null===(s=Array.from(this.Lv.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.Lv.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.Yk.At.pi(o.start,this.Zu.getWidth(t)),h=this.Yk.At.pi(o.end,this.Zu.getWidth(t));i(a,h,!1),Qt(e)};this.Hk.onSeriesBackgroundMouseDrag(((t,e,i,r,n)=>s(n,e)));const r=Ji(new es(void 0,((t,e,i,r,n)=>s(r,n))));this.Hk.onSeriesBackgroundMouseWheel(((t,e)=>{var s,r;const n="x"===this.$k?null===(s=Array.from(this.Lv.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.Lv.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=n.getInterval(),a=this.Yk.getInterval(),h=this.Zu.getWidth(this.Hk.translateCoordinate(e,this.Hk.coordsAxis)),l=this.Yk.At.ft(o.start),u=this.Yk.At.ft(o.end),c=this.Yk.At.ft(h),d=_t((c-l)/(u-l),0,1),f=.2*Math.abs(u-l)*n.Uf,g=d*f*-Math.sign(e.deltaY),m=(1-d)*f*Math.sign(e.deltaY),y=_t(this.Yk.At.pi(o.start,g),a.start,a.end),p=_t(this.Yk.At.pi(o.end,m),a.start,a.end);i(y,p,!1),Qt(e)})),this.Hk.onSeriesBackgroundTouchStart(r.onTouchStart),this.Hk.onSeriesBackgroundTouchMove(r.onTouchMove),this.Hk.onSeriesBackgroundTouchEnd(r.onTouchEnd),this.Qk.forEach(((s,r)=>{s.setMouseEnterEventHandler((()=>{t=this.engine.setMouseStyle(e.MouseStyles.Point,t)})),s.setMouseLeaveEventHandler((()=>{this.engine.restoreMouseStyle(t)}));const n=t=>{var e,s;const r="x"===this.$k?null===(e=Array.from(this.Lv.keys())[0])||void 0===e?void 0:e.axisX:null===(s=Array.from(this.Lv.keys())[0])||void 0===s?void 0:s.axisY;if(!r)return;const n=this.Zu.getWidth(this.Hk.translateCoordinate(t,this.Hk.coordsAxis)),o=r.getInterval(),a=this.Yk.getInterval(),h=_t(n-(o.end-o.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(o.end-o.start)),l=h+(o.end-o.start);i(h,l,!0),Qt(t)};s.setMouseClickEventHandler(((t,e)=>n(e)));const o=Ji(new class{constructor(t,e=300){this.Vs=!1,this.Os=[],this.Ns=300,this.Gs=t,this.Ns=e}Es(t,e){const i=Tt.performance.now();let s=!1;for(let t=0;t<this.Os.length;t+=1)i-this.Os[t].time>=this.Ns?(this.Os.splice(t,1),t-=1):this.Os[t].state&&(s=!0);return this.Vs?0===e.interactions.length&&(this.Os.push({state:!1,time:i}),this.Vs=!1):1===e.interactions.length&&"pointerdown"===e.type&&(this.Os.push({state:!0,time:i}),s=!0,this.Vs=!0),s}zs(t,e,i){if(i&&!this.Vs){const i=this.Os.reduce(((t,e)=>(e.state?t.on+=1:t.off+=1,t)),{on:0,off:0});i.on>=1&&i.off>=1&&(this.Gs(t,e),this.Os.length=0)}}}(((t,e)=>n(e))));s.setTouchStartEventHandler(o.onTouchStart),s.setTouchMoveEventHandler(o.onTouchMove),s.setTouchEndEventHandler(o.onTouchEnd)}))}getSizePixels(){return this.Hk.getSizePixels()}onResize(t){return this.Hk.onResize(((e,i,s,r,n)=>t(this,i,s,r,n)))}offResize(t){return this.Hk.offResize(t)}Or(t){this.Hk.Or(t)}getMinimumSize(){return this.Hk.getMinimumSize()}J(){return this.Hk.J()}K(){return this.Hk.K()}Re(t){var e,i,s,r;const n=Se(Array.from(this.Lv.keys()).map((t=>t.chart))),o="x"===this.$k?null===(e=Array.from(this.Lv.keys())[0])||void 0===e?void 0:e.axisX:null===(i=Array.from(this.Lv.keys())[0])||void 0===i?void 0:i.axisY;if("x"===this.$k){const t=n.reduce(((t,e)=>{const i=[];e.forEachAxisY((t=>{if(0!==t.cg)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.qg())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),e=n.reduce(((t,e)=>{const i=[];e.forEachAxisY((t=>{if(100!==t.cg)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.qg())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),i=n.reduce(((t,e)=>Math.max(t,e.getPadding().left)),0),r=n.reduce(((t,e)=>Math.max(t,e.getPadding().right)),0);this.Hk.forEachAxisY((t=>t.setThickness(0))),null===(s=this.getDefaultAxisY())||void 0===s||s.setThickness(t),this.Hk.setPadding({left:i+(0===n.length?10:0),right:r+e+(0===n.length?10:0)})}else{const t=n.reduce(((t,e)=>{const i=[];e.forEachAxisX((t=>{if(0!==t.cg)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.qg())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),e=n.reduce(((t,e)=>{const i=[];e.forEachAxisX((t=>{if(100!==t.cg)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.qg())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),i=n.reduce(((t,e)=>Math.max(t,e.getPadding().bottom)),0),s=n.reduce(((t,e)=>Math.max(t,e.getPadding().top)),0);this.Hk.forEachAxisX((t=>t.setThickness(0))),null===(r=this.getDefaultAxisX())||void 0===r||r.setThickness(t),this.Hk.setPadding({bottom:i+(0===n.length?10:0),top:s+e+(0===n.length?10:0)})}this.Hk.Re(t);const a=this.Yk.getInterval().start,h=this.Yk.getInterval().end,l=_t(o?o.getInterval().start:a,a,h),u=_t(o?o.getInterval().end:h,a,h),c=this.Zu.getHeight(this.Hk.$C.getInnerIntervalPixels());this.Qk[0].Ee(this.Zu.toPoint(a,0)).it(this.Zu.toPoint(l-a,c)),this.Qk[1].Ee(this.Zu.toPoint(u,0)).it(this.Zu.toPoint(h-u,c)),this.Jk.members[0].$g(this.Zu.toPoint(a,c),this.Zu.toPoint(l,c)),this.Jk.members[1].$g(this.Zu.toPoint(l,c),this.Zu.toPoint(l,0)),this.Jk.members[2].$g(this.Zu.toPoint(l,0),this.Zu.toPoint(u,0)),this.Jk.members[3].$g(this.Zu.toPoint(u,0),this.Zu.toPoint(u,c)),this.Jk.members[4].$g(this.Zu.toPoint(u,c),this.Zu.toPoint(h,c));const d=ct(this.Zu.toPoint(l,c/2),this.Yk.pg,this.Hk.mg),f=ct(this.Zu.toPoint(u,c/2),this.Yk.pg,this.Hk.mg),g=this.qk;this.Kk[0].Ee({x:d.x-g.x/2,y:d.y-g.y/2}).it({x:g.x,y:g.y}).Jh(this.Zu.getWidth({x:0,y:90})),this.Kk[1].Ee({x:f.x-g.x/2,y:f.y-g.y/2}).it({x:g.x,y:g.y}).Jh(this.Zu.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Hk.setSeriesBackgroundFillStyle(t),this.Hk.cs.Ms(),this}getSeriesBackgroundFillStyle(){return this.Hk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Hk.setSeriesBackgroundStrokeStyle(t),this.Hk.cs.Ms(),this}getSeriesBackgroundStrokeStyle(){return this.Hk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Hk.setSeriesBackgroundEffect(t),this.Hk.cs.Ms(),this}getSeriesBackgroundEffect(){return this.Hk.getSeriesBackgroundEffect()}getTheme(){return this.Hk.getTheme()}setTitle(t){return this.Hk.setTitle(t),this}getTitle(){return this.Hk.getTitle()}setTitleFillStyle(t){return this.Hk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Hk.getTitleFillStyle()}setTitleFont(t){return this.Hk.setTitleFont(t),this}getTitleFont(){return this.Hk.getTitleFont()}setTitleMargin(t){return this.Hk.setTitleMargin(t),this}getTitleMargin(){return this.Hk.getTitleMargin()}setPadding(t){return this.Hk.setPadding(t),this}getPadding(){return this.Hk.getPadding()}setBackgroundFillStyle(t){return this.Hk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Hk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Hk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Hk.getBackgroundStrokeStyle()}translateCoordinate(t,e,i){return eh(t,e,i,this.Hk.mg,this.Hk.cs)}addUIElement(t,e){return this.Hk.addUIElement(t,e)}addLegendBox(t,e){return this.Hk.addLegendBox(t,e)}getLegendBoxes(){return this.Hk.getLegendBoxes()}saveToFile(t,e,i){return this.Hk.saveToFile(t,e,i),this}dispose(){return this.Hk.dispose(),this.Wk.clear(),this.Lv.clear(),this.jk(this),this}isDisposed(){return this.Hk.isDisposed()}onDispose(t){return this.Hk.onDispose((()=>t(this)))}offDispose(t){return this.Hk.offDispose(t)}}const Fc=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const e=(t=>t instanceof cc||t instanceof Iu?t.getStrokeStyle().getFillStyle():t instanceof dc||t instanceof Nu?t.getPointFillStyle():void 0)(t);return e?new rs({thickness:2,fillStyle:e}):void 0};class Dc extends Zl{constructor(t,i,s,r,n,o,a){super(t,i,s,r,n,a),this.Cs="Point Series",this.jb=[],this.Zb=!1,this.tM=3,this._a=0,this.Te=me(this.ts.polarPointSeriesFillStyle,o),this.pd=new mo({dataPattern:null}),this.Qa=t.Sd(r).We(nt).vd(V).md(this.Te).xd(e.PointShape.Circle).Cd(this.tM).ds(this.getHighlight()).yd(this.pd),this.As(this.Qa)}solveNearest(t,e="show-nearest"){const i=this.chart.translateCoordinate(t,this.chart.coordsAxis),s=Ql([i],this.scale)[0],r=this.pd.qc(s,hh(e),this.scale,this.chart.mg);if(!r)return;const n=tu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ki(t,e){return De({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}setData(t){return 0!==this.jb.length&&this.chart.cs.Zn(fa.Tf),this.jb=Jl(t),this.Zb=!0,this.Ub=ql(this.jb),this.Bs.Ms(),this}setPointAlignment(t){return this.Qa.WC(t),this.chart.cs.Ms(),this}getPointAlignment(){return this.Qa.UC()}setPointFillStyle(t){this.Te="function"==typeof t?t(this.Te):t;const e=this.Te;return this.Qa.md(e),this.Bs.Ms(),this}getPointFillStyle(){return this.Te}setPointSize(t){return this.tM=t,this.Qa.Cd(t),this.Bs.Ms(),this}getPointSize(){return this.tM}setPointShape(t){return this.Qa.xd(t),this.chart.cs.Ms(),this}getPointShape(){return this.Qa.bd()}setPointRotation(t){return this._a=t,this.Qa.Md(t),this.Bs.Ms(),this}getPointRotation(){return this._a}ov(){return this.uv&&this.jb.length>0&&this.getVisible()}ze(t,e){t.ds(e),this.Bs.Ms()}Re(){if(this.Zb||this.scale.qb()){const t=Ql(this.jb,this.scale),e=Je(t);this.pd.clear().add(t),this.Qa.ta(e),this.Zb=!1,this.Qa.zs()}}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}Ps(){return this.ws||this.getPointShape()}}class Bc{constructor(t,e,i,s){this.R=new r.Eventer,this.eT=!1,this.ne=t,this.hT=e,this.Lv=i,this.Qa=s}setGeometry(t){return this.rT=t,this.eT=!0,this.ne.cs.Ms(),this}getGeometry(){return this.rT}setMouseInteractions(t){return this.Qa.setMouseInteractions(t),this}dispose(){return this.Qa.dispose(),this.hT(this),this.R.emit("dispose",this),this}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}setVisible(t){const e=this.Qa.getVisible()!==t;return this.Qa.setVisible(t),e&&this.R.emit("visibleStateChanged",this,t),this.ne.cs.Ms(),this}getVisible(){return this.Qa.getVisible()}onVisibleStateChanged(t){return this.R.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.R.off(t,"visibleStateChanged")}}class Pc extends Zl{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Cs="Polygon Series",this.nT=[],this.oT=[],this.aT=t=>{const e=this.oT.indexOf(t);e>=0&&this.oT.splice(e,1);const i=this.nT.findIndex((e=>e===t.Qa));i>=0&&this.nT.splice(i,1),this.Bs.Ms()},this.Te=me(this.ts.polarPolygonSeriesFillStyle,n),this.Fe=me(this.ts.polarPolygonSeriesStrokeStyle,n)}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=du(s,this.nT,((t,e)=>{const i=t.qc(e);if(i)return ct(i,this.scale,t.cs.At)}),$e);if(!r)return;const n=ct(r[0],r[1].cs.At,this.scale);if(!this.lT(r[1]))return;const o=tu(n,this.scale);return{cursorPosition:{pointMarker:n,pointMarkerScale:this.scale,resultTable:n,resultTableScale:this.scale},series:this,...o}}Ki(t,e){return De({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}addPolygon(){const t=new Bc(this.chart,this.aT,this,this.uT());return this.oT.push(t),t}setFillStyle(t){this.Te="function"==typeof t?t(this.Te):t;const e=this.Te;for(const t of this.nT)t.Be(e);return this.Bs.Ms(),this}getFillStyle(){return this.Te}setStrokeStyle(t){this.Fe="function"==typeof t?t(this.Fe):t;const e=this.Fe;for(const t of this.nT)t.De(e);return this.Bs.Ms(),this}getStrokeStyle(){return this.Fe}ov(){return this.uv&&void 0!==this.oT.find((t=>void 0!==t.cT))&&this.getVisible()}Re(){this.oT.forEach((t=>{(t.eT||this.scale.qb())&&t.dT&&(t.Qa.Cl(Ql(t.dT,this.scale)),t.eT=!1,t.Qa.zs())}))}vv(){super.vv();const t=m(Ve,ze);this.oT.forEach((e=>{if(!e.rT)return;const i=!e.eT&&e.dT?e.dT:Jl(e.rT);e.dT=i;const s=!e.eT&&e.cT?e.cT:ql(i);e.cT=s,t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max)})),this.Ub=t}ze(t,e){t.ds(e),this.Bs.Ms()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te,stroke:this.Fe})}uT(){const t=this.Bs.lc(this.scale,yn.Simple).Be(this.Te).De(this.Fe).ds(this.getHighlight());return this.nT.push(t),this.As(t),t}lT(t){return this.oT.find((e=>e.Qa===t))}}class Lc extends Zl{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Cs="Area Series",this.jb=[],this.Zb=!1,this.Qb=!1,this.fT=!1,this.Te=me(this.ts.polarAreaSeriesFillStyle,n),this.Fe=me(this.ts.polarAreaSeriesStrokeStyle,n)}setData(t){0!==this.jb.length&&this.chart.cs.Zn(fa.Tf);const e=(t=>{const e=[];let i,s,r=!1;for(let n=0;n<t.length;n+=1){const o=t[n];let a=!0;if(i){a=!1;const t=o.angle-i.angle;if(It(t,0))a=!0;else{const e=Math.sign(t);void 0===s?(s=e,a=!0):s===e&&(a=!0)}}a?e.push(o):r=!0,i=o}return{progressivePoints:e,userDataModified:r}})(t);return e.userDataModified&&!1===this.fT&&(console.warn(`${this.Cs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.fT=!0),this.jb=e.progressivePoints,this.Zb=!0,this.Ub=ql(this.jb),this.Bs.Ms(),this}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.Bs.Ms(),this}getFillStyle(){return this.Te}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.Bs.Ms(),this}getStrokeStyle(){return this.Fe}setConnectDataAutomaticallyEnabled(t){return this.Qb=t,this.Bs.Ms(),this}getConnectDataAutomaticallyEnabled(){return this.Qb}ov(){return this.uv&&this.jb.length>0&&this.getVisible()}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te,stroke:this.Fe})}}class Vc extends Lc{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n,o),this.AT=this.Bs.lc(this.scale,yn.Simple).ds(this.getHighlight()),this.As(this.AT)}solveNearest(t,e){const i=this.chart.cs.No(t),s={x:i.engineX,y:i.engineY},r=this.AT.qc(s);if(!r)return;const n=tu(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}Ki(t,e){return De({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}Re(){if(this.Zb||this.scale.qb()){const t=this.jb,e=!0===this.Qb?Ql(t.concat((t=>{if(0===t.length)return t;const e=t[0],i=t[t.length-1];if(It(e.angle,i.angle))return t;const s=1*Math.sign(i.angle-e.angle);let r=0;const n=[];for(let t=i.angle+s;!It(t%360,e.angle%360);t+=s)if(n.push({angle:t,amplitude:0}),r+=1,r>360)return[];for(let t=0;t<n.length;t+=1)n[t].amplitude=Gn(i.amplitude,e.amplitude,(t+1)/(n.length+1));return n})(t)),this.scale):[...Ql(t,this.scale),{x:0,y:0}];this.AT.Cl(e).Be(this.Te).De(this.Fe),this.Zb=!1,this.AT.zs()}}ze(t,e){t.ds(e),this.Bs.Ms()}}class zc extends Li{constructor(){super(...arguments),this.Gi="RadialScale",this.gT={start:0,end:1},this.pT=!1,this.yT=0,this.Z=u(0,0),this.mT=[0,0],this.vT=[0,0],this.u=!0,this.Si=!0,this.ST=!0,this.xT=!0,this.bT={x:0,y:0},this.di={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}Fb(t,e){return t===this.gT.start&&e===this.gT.end||(this.gT={start:t,end:e},this.ST=!0,this.MT()),this}Tb(){return this.gT}kb(){return this.gT.end>=this.gT.start}Eb(t){this.pT=t,this.xT=!0}Vb(){return!1===this.pT}zb(t){this.yT=t,this.xT=!0}Bb(){return this.yT}yi(){return this.Si}_i(){return!1}ct(t,e,i,s){return this.x=new Bi(t.x,e.x,i.x,s?s.x:void 0),this.y=new Bi(t.y,e.y,i.y,s?s.y:void 0),this}mi(){return this.di}qb(){return this.ST}_T(){return this.xT}Wi(){return this.bT}J(){return this.u=!1,this.Si=!1,this.ST=!1,this.xT=!1,this}K(){return this.u=!0,this.Si=!0,this.ST=!0,this.xT=!0,this}it(t,e){return"object"==typeof t?(this.Z.x=t.x,this.Z.y=t.y):(this.Z.x=t,this.Z.y=e),this.MT(),this}Ei(t){return this.mT=t,this.MT(),this}zi(t){return this.vT=t,this.MT(),this}ni(){return u(this.mT[0]+this.mT[1],this.vT[0]+this.vT[1])}oi(){return this.Z}MT(){const t=this.gT,e=u(this.x.ai(this.Z.x),this.y.ai(this.Z.y)),i=this.mT[0]+this.mT[1],s=this.vT[0]+this.vT[1],r=Math.max(e.x-i,0),n=Math.max(e.y-s,0),o=.5*(r>n?n:r),a=[this.mT[0]+Math.max((r-2*o)/2,0),this.mT[1]+Math.max((r-2*o)/2,0)],h=[this.vT[0]+Math.max((n-2*o)/2,0),this.vT[1]+Math.max((n-2*o)/2,0)],l=Math.abs(t.end-t.start);this.x.it(this.Z.x).si(a).q(-l,l),this.y.it(this.Z.y).si(h).q(-l,l),this.bT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.di={x:this.x.mi(),y:this.y.mi()},this.K()}pi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const r=this.Wi(),n=ai(t,e);return n.x*=s,n.y*=s,{x:t.x+i*r.x*n.x,y:t.y+i*r.y*n.y}}}class Nc extends dl{constructor(t,e,i,s,r,n,o){super(t,e,i,e.kp("polarChart bg",0),s,e.cs.ts.polarChartBackgroundFillStyle,e.cs.ts.polarChartBackgroundStrokeStyle,e.cs.ts.polarChartTitleFont,e.cs.ts.polarChartTitleFillStyle,o),this.coordsClient="client",this.rA=[],this.Wo=!0,this.wT=(t,e,i,s,r)=>{this.gb.it(s,r)},this.lA=ee(this.rA),this.CT=t=>{this.rA.push(t)},this.kT=()=>this.Lv,this.cs.Zn(fa.vf),this.Dk=e.wx("polarChart series bg",0),this.TT=e.Xy("polarChart axis gridlines",0),this.FT=e.Xy("polarChart series",1),this.IT=e.Xy("polarChart axis lines",2),this.PT=e.Xy("polarChart axis ticks",3),this.gb=i.d2({scaleXYConstructor:zc}),this.onResize(this.wT),this.bh.yr("Polar Chart"),this.Ov=this.Dk.nd(this.gb).Be(this.ts.polarChartSeriesBackgroundFillStyle).De(nt).cu(0).Ye(360).gu(0),this.Nv=this.Dk.nd(this.gb).Be(V).De(this.ts.polarChartSeriesBackgroundStrokeStyle).cu(0).Ye(360).gu(0),super.Vv(this.Ov,this.Nv),this.Cp(r,this.mg),this.DT=new Ul(this,this.gb,this.ts,!1!==(null==n?void 0:n.animationsEnabled),this.TT,this.IT,this.PT,this.hs,this.kT),this.BT=new Gl(this,this.gb,this.ts,!1!==(null==n?void 0:n.animationsEnabled),this.TT,this.IT,this.PT,this.hs),this.coordsAxis={axisAmplitude:this.DT,axisRadial:this.BT};const a=e.Zy(),h=Dt(n?n.cursorBuilder:void 0,kh);this.Qy=uh(this,a,h.yy(a,this.uiScale,this.uiScale,Rt,this.ts),this,"show-nearest",Uc,((t,e)=>{const i=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((i.clientX-e.clientX)**2+(i.clientY-e.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.Lv}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}solveNearest(t,e=this.getCursorMode()||"show-nearest"){return this.Qy.solveNearest(t,e,this.Lv,((t,e,i)=>t.solveNearest(e,i)))}addCursor(t=kh){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}translateCoordinate(t,e,i){if(i){const e=t,s=this.mg,r=i;if(Oi(r)){const t=ct(e,s,this.cs.At);return this.cs.Go({engineX:t.x,engineY:t.y})}if(Yi(r))return e;if(Kl(r)){const t=ct(e,s,this.gb);return tu(t,this.gb)}}else{const i=t,s=e;if(Ui(i)){if(Kl(s)){const t=this.cs.No(i),e=ct({x:t.engineX,y:t.engineY},this.cs.At,this.gb);return tu(e,this.gb)}if(Oi(s))return i;if(Yi(s)){const t=this.cs.No(i);return ct({x:t.engineX,y:t.engineY},this.cs.At,this.mg)}}else if(Xl(i)){if(Kl(s))return i;const t=Ql([i],this.gb)[0];if(Oi(s)){const e=ct(t,this.gb,this.cs.At),i={engineX:e.x,engineY:e.y};return this.cs.Go(i)}if(Yi(s))return ct(t,this.gb,this.mg)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const e=new iu(this.FT,this,this.Ev,this.gb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addPointSeries(t){const e=new Dc(this.FT,this,this.Ev,this.gb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addPointLineSeries(t){const e=new su(this.FT,this,this.Ev,this.gb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addAreaSeries(t){const e=new Vc(this.FT,this,this.Ev,this.gb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addPolygonSeries(t){const e=new Pc(this.FT,this,this.Ev,this.gb,this.ts,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,this.cs.hs);return this.Gv(e),e}addHeatmapSeries(t){const e=new eu(this.FT,this,this.Ev,this.gb,this.ts,this.cs.hs,t);return this.Gv(e),e}addSector(){const t=new jl(this.FT,this,this.lA,this.gb,this.ts,this.cs.hs);return this.CT(t),t}getAmplitudeAxis(){return this.DT}get amplitudeAxis(){return this.DT}get axisAmplitude(){return this.DT}getRadialAxis(){return this.BT}get radialAxis(){return this.BT}get axisRadial(){return this.BT}Re(t){var e,i;super.Re(t),ah.Rp(this.bh,this.Tp);for(const t of this.Lv)t.vv();this.DT.Br(),this.BT.Br();for(const t of this.Lv)t.Re();for(let t=1;t<=2;t+=1){const e=this.DT.Re(),i=this.BT.Re(),s=ah.Lp(this.bh,this.Tp),r=[this.ka.left+i,this.ka.right+i],n=[this.ka.bottom+i,this.ka.top+i+s];this.gb.Ei(r).zi(n);const o=4;if(!(!this.LT||Math.abs(this.LT.amplitude-e)>=o||Math.abs(this.LT.radial-i)>=o)||1!==t){this.LT={amplitude:e,radial:i};break}}const s=this.gb.Tb().start,r=this.gb.Tb().end,n=this.gb.kb()?((null===(e=this.LT)||void 0===e?void 0:e.radial)||0)*this.gb.x.getPixelSize()+r-s:((null===(i=this.LT)||void 0===i?void 0:i.radial)||0)*this.gb.x.getPixelSize()+s-r;this.Ov.du(n).pu(360),this.Nv.du(n).pu(360);for(const t of this.rA)t.Re();this.Qy.Re(!1,this.Lv,((t,e,i)=>t.solveNearest(e,i)));for(const t of this.Lv)t._m();return super.wp(),this.RT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.DT.setAnimationsEnabled(t),this.BT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Wo=t,this}getMouseInteractions(){return this.Wo}getMinimumSize(){return u(Oc,Oc)}RT(){}forEachAxis(t){return t(this.DT),t(this.BT),this}dispose(){return this.rA.slice().forEach((t=>t.dispose())),this.Qy.Y(),this.Dk.Y(),this.TT.Y(),this.FT.Y(),this.IT.Y(),this.PT.Y(),super.dispose()}ef(){return[...this.Lv,...this.rA]}}const Oc=300,Uc=(t,e,i)=>{var s;return mt(e)?lh(e,[[e.series],["Angle","",{text:e.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Wi(t.getAmplitudeAxis().formatValue(e.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:Wi(e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]]):lh(e,[[e.series],["Angle","",{text:e.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:Wi(t.getAmplitudeAxis().formatValue(e.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class Yc extends Fh{}class Gc extends Yc{constructor(t,e,i,s,r,n,o,a){super(s,n,o,a),this.Cs="Slice",this.M=0,this.my=!1,this.ET=V,this.Sy=V,this.xy=this.M,this._y=$((()=>this.chart.cs.Ms())),this.Cy=()=>{this.ky=void 0},this.index=t,this.chart=s,this.scale=r,this.qi=n,this.AT=e.lc(r,yn.Simple).ds(this.getHighlight()),this.As(this.AT),this.ih=i.Gr(r).ds(this.getHighlight()),this.As(this.ih,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Py(this.xy,t):this.xy=t,this.M=t,this.chart.cs.Ms(),this}getValue(){return this.M}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.xy>0?(this.ky&&(this.ky.finish(!1),this.ky=void 0),this.Py(this.xy,0,(()=>super.setVisible(!1)))):(this.xy=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.ky&&(this.ky.finish(!1),this.ky=void 0),super.setVisible(!0),this.Py(this.xy,this.M)):(this.xy=this.M,super.setVisible(!0)),this}Py(t,e,i){this.ky=this._y(300,X.ease)([[t,e]],(([t])=>{this.xy=t,this.chart.cs.Ms()})),this.ky.onEveryAnimationEnd(this.Cy),i&&this.ky.onAnimationEnd(i)}setStyle(t,e,i,s){this.ET=t,this.Sy=i,this.AT.Be(this.ET).De(e),this.ih.Be(this.Sy).Qh(s);for(let t=0;t<this.Ji.length;t+=1)this.styleLegendEntry(this.Ji[t])}getAnimatedValue(){return this.xy}ze(t,e){return t.ds(e),this.chart.cs.Ms(),this}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.ET,stroke:this.AT.mo()})}}var Hc;e.FunnelSliceModes=void 0,(Hc=e.FunnelSliceModes||(e.FunnelSliceModes={}))[Hc.VariableHeight=0]="VariableHeight",Hc[Hc.VariableWidth=1]="VariableWidth";const Wc=(t,e)=>{let i=100;return t<=0?t=0:(i=t>=100?100:t,t=e*(i/100)),t},Kc=(t,i,s,r,n,o=0,a=e.FunnelSliceModes.VariableHeight,h)=>{i=Wc(i,r.x),s=Wc(s,r.x);const l=t.length;let u=0,c=0;u=t.reduce(((t,e)=>t+e.getAnimatedValue()),0);let d={x:h-i/2,y:r.y+n.bottom},f={x:h+i/2,y:r.y+n.bottom},g={x:0,y:n.bottom},m={x:0,y:n.bottom},y=0,p=0;if(o)for(let i=0;i<t.length;i+=1){const s=10;p+=t[i].getAnimatedValue();const h=a===e.FunnelSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-p/u*r.y;if(a===e.FunnelSliceModes.VariableWidth){o=h-o<s?Math.max(20,h-s):o;break}0!==y&&y-h-o<s&&(o=Math.max(0,y-h-s)),y=h}const x=(i-s)/2/r.y;for(let y=0;y<l;y+=1){const p=t[y];c+=p.getAnimatedValue();const A=a===e.FunnelSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-c/u*r.y;let S=0;y>0&&(d={x:g.x+x*o,y:g.y-o},f={x:m.x-x*o,y:m.y-o}),S=(i+c/u*(s-i))/2,g={x:h-S,y:parseInt(`${a===e.FunnelSliceModes.VariableWidth?d.y-A:A}`,10)},m={x:h+S,y:parseInt(`${a===e.FunnelSliceModes.VariableWidth?f.y-A:A}`,10)},f.x>=d.x&&m.x>g.x&&p.AT.Cl([g,d,f,m])}};class Xc extends oh{constructor(t,i,s,r,n,o,a){super(t,i,s,i.kp("funnelChart bg",0),r,i.cs.ts.funnelChartBackgroundFillStyle,i.cs.ts.funnelChartBackgroundStrokeStyle,i.cs.ts.funnelChartTitleFont,i.cs.ts.funnelChartTitleFillStyle,o),this.Dy=[],this.By=Ih.None,this.Ey=!0,this.Oy=0,this.zT=80,this.VT=20,this.OT=0,this.NT=e.FunnelSliceModes.VariableHeight,this.Wy=!0,this.Yy=t=>{const e=this.Dy.indexOf(t);e>=0&&(this.Dy.splice(e,1),this.Hy())},this.cs.Zn(fa.pf),this.Uy=this.ts.effectsText,this.$y=i.Xy("funnelChart bottom",0),this.jy=i.Xy("funnelChart top",1),this.bh.yr("Funnel Chart"),this.Ly=this.ts.funnelChartSliceFillStylePalette,this.Ry=this.ts.funnelChartSliceStrokeStyle,this.zy=this.ts.funnelChartSliceLabelFont,this.Vy=this.ts.funnelChartSliceLabelFillStyle;const h=i.Zy(),l=Dt(a?a.cursorBuilder:void 0,wh);this.Qy=uh(this,h,l.yy(h,this.uiScale,this.uiScale,Rt,this.ts),void 0,"show-pointed",jc,(()=>0)),this.setAnimationsEnabled(!1!==(null==a?void 0:a.animationsEnabled)),this.Cp(n,this.mg)}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=wh){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}addSlice(t,e){const i=new Gc(this.Oy,this.$y,this.jy,this,this.mg,this.Yy,this.ts,this.cs.hs);return this.Oy+=1,i.setName(t),i.setValue(e),i.hs.ns.bs(this.Uy),i.hs.os.bs(this.Wy),this.Dy.push(i),this.cs.Ms(),i.setHighlightOnHover(this.Ey),i.onMouseMove((()=>{this.getCursorMode()&&this.cs.Ms()})),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Dy}setHeadWidth(t){return this.zT=t,this.cs.Ms(),this}getHeadWidth(){return this.zT}setNeckWidth(t){return this.VT=t,this.cs.Ms(),this}getNeckWidth(){return this.VT}setSliceGap(t){return this.OT=Math.min(Math.max(t,0),20),this.cs.Ms(),this}setSliceMode(t){return this.NT=t,this.cs.Ms(),this}getFunnelSliceMode(){return this.NT}setLUT(t){return this.jd=t,this.cs.Ms(),this}setSliceFillStyle(t){return this.Ly=t,this.cs.Ms(),this}getSliceFillStyle(){return this.Ly}setSliceStrokeStyle(t){return this.Ry="function"==typeof t?t(this.Ry):t,this.cs.Ms(),this}getSliceStrokeStyle(){return this.Ry}setSliceEffect(t){return this.Wy=t,this.Dy.forEach((e=>e.hs.os.bs(t))),this.cs.Ms(),this}getSliceEffect(){return this.Wy}setSliceSorter(t){return this.By=t,this.Dy=this.Dy.sort(this.By),this.cs.Ms(),this}getSliceSorter(){return this.By}setLabelFillStyle(t){return this.Vy="function"==typeof t?t(this.Vy):t,this.cs.Ms(),this}getLabelFillStyle(){return this.Vy}setLabelFont(t){return this.zy="function"==typeof t?t(this.zy):t,this.cs.Ms(),this}getLabelFont(){return this.zy}setLabelEffect(t){return this.Uy=t,this.Dy.forEach((e=>e.hs.ns.bs(t))),this.cs.Ms(),this}getLabelEffect(){return this.Uy}setLabelFormatter(t){return this.Ky=t,this.cs.Ms(),this}getLabelFormatter(){return this.Ky}setSliceHighlightOnHover(t){return this.Ey=t,this.Dy.forEach((e=>e.setHighlightOnHover(t))),this}Re(t){super.Re(t),ah.Rp(this.bh,this.Tp),super.wp();const e=ah.Lp(this.bh,this.Tp),i=u(this.mg.x.getInnerInterval()-(this.ka.left+this.ka.right),this.mg.y.getInnerInterval()-(this.ka.bottom+this.ka.top+e)),s=u(this.ka.left+i.x/2,this.ka.bottom+i.y/2);this.Dy=this.Dy.sort(this.By);for(let t=0,{length:e}=this.Dy;t<e;t+=1)this.Jy(this.Dy[t],t);const r=this.Dy.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const e=r[t];e.ih.yr(this.Ky(e,o[t])).zs()}o.push(n),this.Qy.Re(!1,this.Dy,((t,e,i)=>{const s=o[r.indexOf(t)]||0,n=this.cs.No(e);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.cs.At,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.cs.At},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}})),this.qy(r,o,s,i)}Jy(t,e){t.setStyle(this.jd?new U({color:this.jd.getColors(t.getAnimatedValue())}):this.Ly(e,t),this.Ry,this.Vy,this.zy)}Hy(){this.Dy=this.Dy.sort(this.By),this.cs.Ms()}ef(){return this.Dy}dispose(){return this.Dy.slice().forEach((t=>t.dispose())),this.Qy.Y(),this.$y.Y(),this.jy.Y(),super.dispose()}}const jc=(t,e,i)=>[[e.slice],[{text:e.value.toString(),font:{weight:"bold"}}]],$c=(t,i,s)=>{const r=t.kl();if(r.length>0){let t;const n=(r[1].y-r[0].y)/2+r[0].y;return t=i===e.FunnelLabelSide.Left?(r[0].x-r[1].x)/2+r[1].x-s:(r[2].x-(4===r.length?r[3].x:r[1].x))/2+(4===r.length?r[3].x:r[1].x)+s,{x:t,y:n}}},Zc=t=>{const e=t.kl();if(e.length>0)return{x:(e[2].x-e[1].x)/2+e[1].x,y:(e[1].y-e[0].y)/2+e[0].y}};class Qc extends Xc{constructor(){super(...arguments),this.Ky=_h.NamePlusValue,this.GT=10,this.WT=e.FunnelLabelSide.Left,this.UT=e.SliceLabelIndices.LabelsOnSides,this.tm=[],this.rm=this.ts.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rm=t;for(let t=0;t<this.tm.length;t+=1)this.tm[t].We(this.rm);return this.cs.Ms(),this}getLabelConnectorStyle(){return this.rm}setLabelConnectorGap(t){return this.GT=t,this.cs.Ms(),this}getLabelConnectorGap(){return this.GT}setLabelSide(t){return this.WT=t,this.cs.Ms(),this}getLabelSide(){return this.WT}qy(t,i,s,r){const n=r.x+this.ka.left+this.ka.right,o=r.y+this.ka.top+this.ka.bottom<250||n<250,a=this.GT;let h,l=0;if(!o)for(let e=0;e<t.length;e+=1)l=Math.max(l,t[e].ih.oi().x);h=o?n/2:this.WT===e.FunnelLabelSide.Right?(this.ka.left+(n-(this.ka.right+l)))/2:(this.ka.left+l+(n-this.ka.right))/2;const c=r.x-l,d=u(c,r.y);if(Kc(t,this.zT,this.VT,d,this.ka,this.OT,this.NT,h),o)return t.forEach((t=>t.ih.setVisible(!1))),void this.tm.forEach((t=>t.setVisible(!1)));this.YT(t,this.WT===e.FunnelLabelSide.Left?-1:1,-1,s,r);for(let t=0;t<this.tm.length;t+=1)this.tm[t].setVisible(!1);for(let e=0;e<t.length;e+=1)t[e].getVisible()&&this.nm(this.HT(t[e],-1,s,a))}getMinimumSize(){return u(500,300)}YT(t,e,i,s,r){if(0===t.length)return;const n=s.x+e*r.x*.5,o=1===i?Math.max:Math.min;let a;for(let s=0;s<t.length;s+=1){const r=t[s];if(0===r.AT.kl().length)r.ih.setVisible(!1);else{let t;r.ih.setVisible(!0),a&&(t=a.ih.Oa().y+i*(a.ih.oi().y+10));const s=($c(r.AT,this.WT,0)||u(0,0)).y,h=void 0===t?s:o(s,t);r.ih.Ee(u(n,h)).Wa(e).Ya(0),a=r}}}HT(t,i,s,r){const n=t.AT,o=t.ih,a=$c(n,this.WT,r);if(a){const t={x:yi(this.WT===e.FunnelLabelSide.Left?o.Oa().x-i*(r+o.oi().x):o.Oa().x+i*(r+o.oi().x),a,s).x,y:pi(o.Oa().y,a,s).y};return[a,t,u(this.WT===e.FunnelLabelSide.Left?o.Oa().x-i*(r+o.oi().x):o.Oa().x+i*(r+o.oi().x),t.y)]}}nm(t){if(t){let e;for(let t=0;t<this.tm.length;t+=1)if(!this.tm[t].getVisible()){e=this.tm[t].setVisible(!0);break}void 0===e&&(e=this.jy.om(this.mg,void 0,[Uh.InternalUI]).We(this.rm),this.tm.push(e)),e.Ot().Al(t)}}}class qc extends Xc{constructor(){super(...arguments),this.Ky=_h.Name,this.UT=e.SliceLabelIndices.LabelsInsideSlices}qy(t,e,i,s){const r=this.ka.left+s.x/2;Kc(t,this.zT,this.VT,s,this.ka,this.OT,this.NT,r);for(let e=0;e<t.length;e+=1){const i=t[e],s=i.AT,r=i.ih,n=Zc(s);n&&r.Ee(n).Wa(0).Ya(0)}}getMinimumSize(){return u(200,200)}}const Jc={LabelsOnSides:Qc,LabelsInsideSlices:qc};var td,ed;e.FunnelLabelSide=void 0,(td=e.FunnelLabelSide||(e.FunnelLabelSide={}))[td.Right=0]="Right",td[td.Left=1]="Left";class id extends Fh{}class sd extends id{constructor(t,e,i,s,r,n,o,a){super(s,n,o,a),this.Cs="Slice",this.M=0,this.my=!1,this.ET=V,this.Sy=V,this.xy=this.M,this._y=$((()=>this.chart.cs.Ms())),this.Cy=()=>{this.ky=void 0},this.index=t,this.chart=s,this.scale=r,this.qi=n,this.AT=e.lc(r,yn.Simple).ds(this.getHighlight()),this.As(this.AT),this.ih=i.Gr(r).ds(this.getHighlight()),this.As(this.ih,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.Py(this.xy,t):this.xy=t,this.M=t,this.chart.cs.Ms(),this}getValue(){return this.M}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&this.xy>0?(this.ky&&(this.ky.finish(!1),this.ky=void 0),this.Py(this.xy,0,(()=>super.setVisible(!1)))):(this.xy=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.ky&&(this.ky.finish(!1),this.ky=void 0),super.setVisible(!0),this.Py(this.xy,this.M)):(this.xy=this.M,super.setVisible(!0)),this}Py(t,e,i){this.ky=this._y(300,X.ease)([[t,e]],(([t])=>{this.xy=t,this.chart.cs.Ms()})),this.ky.onEveryAnimationEnd(this.Cy),i&&this.ky.onAnimationEnd(i)}setStyle(t,e,i,s){this.ET=t,this.Sy=i,this.AT.Be(this.ET).De(e),this.ih.Be(this.Sy).Qh(s);for(let t=0;t<this.Ji.length;t+=1)this.styleLegendEntry(this.Ji[t])}getAnimatedValue(){return this.xy}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.ET,stroke:this.AT.mo()})}}e.PyramidSliceModes=void 0,(ed=e.PyramidSliceModes||(e.PyramidSliceModes={}))[ed.VariableHeight=0]="VariableHeight",ed[ed.VariableWidth=1]="VariableWidth";const rd=(t,e)=>{let i=100;return t<=0?t=0:(i=t>=100?100:t,t=e*(i/100)),t},nd=(t,i,s,r,n,o=0,a=e.PyramidSliceModes.VariableHeight,h)=>{i=rd(i,r.x),s=rd(s,r.x);const l=t.length;let u=0,c=0;u=t.reduce(((t,e)=>t+e.getAnimatedValue()),0);let d={x:h-i/2,y:r.y+n.bottom},f={x:h+i/2,y:r.y+n.bottom},g={x:0,y:n.bottom},m={x:0,y:n.bottom},y=0,p=0;if(o)for(let i=0;i<t.length;i+=1){const s=10;p+=t[i].getAnimatedValue();const h=a===e.PyramidSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-p/u*r.y;if(a===e.PyramidSliceModes.VariableWidth){o=h-o<s?Math.max(20,h-s):o;break}0!==y&&y-h-o<s&&(o=Math.max(0,y-h-s)),y=h}const x=(i-s)/2/r.y;for(let y=0;y<l;y+=1){const p=t[y];c+=p.getAnimatedValue();const A=a===e.PyramidSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-c/u*r.y;let S=0;y>0&&(d={x:g.x+x*o,y:g.y-o},f={x:m.x-x*o,y:m.y-o}),S=(i+c/u*(s-i))/2,g={x:h-S,y:parseInt(`${a===e.PyramidSliceModes.VariableWidth?d.y-A:A}`,10)},m={x:h+S,y:parseInt(`${a===e.PyramidSliceModes.VariableWidth?f.y-A:A}`,10)},f.x>=d.x&&m.x>=g.x&&p.AT.Cl([g,d,f,m])}};class od extends oh{constructor(t,i,s,r,n,o,a){super(t,i,s,i.kp("pyramidChart bg",0),r,i.cs.ts.pyramidChartBackgroundFillStyle,i.cs.ts.pyramidChartBackgroundStrokeStyle,i.cs.ts.pyramidChartTitleFont,i.cs.ts.pyramidChartTitleFillStyle,o),this.Dy=[],this.By=Ih.None,this.Ly=this.ts.pyramidChartSliceFillStylePalette,this.Ry=this.ts.pyramidChartSliceStrokeStyle,this.Ey=!0,this.zy=this.ts.pyramidChartSliceLabelFont,this.Vy=this.ts.pyramidChartSliceLabelFillStyle,this.Oy=0,this.zT=0,this.VT=80,this.OT=0,this.NT=e.PyramidSliceModes.VariableHeight,this.Wy=!0,this.Yy=t=>{const e=this.Dy.indexOf(t);e>=0&&(this.Dy.splice(e,1),this.Hy())},this.cs.Zn(fa.pf),this.Uy=this.ts.effectsText,this.$y=i.Xy("pyramidChart bottom",0),this.jy=i.Xy("pyramidChart top",1),this.bh.yr("Pyramid Chart");const h=i.Zy(),l=Dt(a?a.cursorBuilder:void 0,wh);this.Qy=uh(this,h,l.yy(h,this.uiScale,this.uiScale,Rt,this.ts),void 0,"show-pointed",ad,(()=>0)),this.Cp(n,this.mg),this.setAnimationsEnabled(!1!==(null==a?void 0:a.animationsEnabled))}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=wh){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}addSlice(t,e){const i=new sd(this.Oy,this.$y,this.jy,this,this.mg,this.Yy,this.ts,this.cs.hs);return this.Oy+=1,i.setName(t),i.setValue(e),i.hs.ns.bs(this.Uy),i.hs.os.bs(this.Wy),this.Dy.push(i),this.cs.Ms(),i.onMouseMove((()=>{this.getCursorMode()&&this.cs.Ms()})),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Dy}setNeckWidth(t){return this.VT=t,this.cs.Ms(),this}getNeckWidth(){return this.VT}setSliceGap(t){return this.OT=Math.min(Math.max(t,0),20),this.cs.Ms(),this}setSliceMode(t){return this.NT=t,this.cs.Ms(),this}getPyramidSliceMode(){return this.NT}setLUT(t){return this.jd=t,this.cs.Ms(),this}setSliceFillStyle(t){return this.Ly=t,this.cs.Ms(),this}getSliceFillStyle(){return this.Ly}setSliceStrokeStyle(t){return this.Ry="function"==typeof t?t(this.Ry):t,this.cs.Ms(),this}getSliceStrokeStyle(){return this.Ry}setSliceEffect(t){return this.Wy=t,this.Dy.forEach((e=>e.hs.os.bs(t))),this.cs.Ms(),this}getSliceEffect(){return this.Wy}setSliceSorter(t){return this.By=t,this.Dy=this.Dy.sort(this.By),this.cs.Ms(),this}getSliceSorter(){return this.By}setLabelFillStyle(t){return this.Vy="function"==typeof t?t(this.Vy):t,this.cs.Ms(),this}getLabelFillStyle(){return this.Vy}setLabelFont(t){return this.zy="function"==typeof t?t(this.zy):t,this.cs.Ms(),this}getLabelFont(){return this.zy}setLabelEffect(t){return this.Uy=t,this.Dy.forEach((e=>e.hs.ns.bs(t))),this.cs.Ms(),this}getLabelEffect(){return this.Uy}setLabelFormatter(t){return this.Ky=t,this.cs.Ms(),this}getLabelFormatter(){return this.Ky}setSliceHighlightOnHover(t){return this.Ey=t,this.Dy.forEach((e=>e.setHighlightOnHover(t))),this}Re(t){super.Re(t),ah.Rp(this.bh,this.Tp),super.wp();const e=ah.Lp(this.bh,this.Tp),i=u(this.mg.x.getInnerInterval()-(this.ka.left+this.ka.right),this.mg.y.getInnerInterval()-(this.ka.bottom+this.ka.top+e)),s=u(this.ka.left+i.x/2,this.ka.bottom+i.y/2);this.Dy=this.Dy.sort(this.By);for(let t=0,{length:e}=this.Dy;t<e;t+=1)this.Jy(this.Dy[t],t);const r=this.Dy.filter((t=>t.getAnimatedValue()>0));let n=0;for(let t=0;t<r.length;t+=1)n+=r[t].getAnimatedValue();const o=[];for(let t=0;t<r.length;t+=1)o.push((a=r[t].getAnimatedValue())>0?a/n:0);var a;for(let t=0;t<r.length;t+=1){const e=r[t];e.ih.yr(this.Ky(e,o[t])).zs()}o.push(n),this.Qy.Re(!1,this.Dy,((t,e,i)=>{const s=o[r.indexOf(t)]||0,n=this.cs.No(e);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.cs.At,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.cs.At},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}})),this.qy(r,o,s,i)}Jy(t,e){t.setStyle(this.jd?new U({color:this.jd.getColors(t.getAnimatedValue())}):this.Ly(e,t),this.Ry,this.Vy,this.zy)}Hy(){this.Dy=this.Dy.sort(this.By),this.cs.Ms()}ef(){return this.Dy}dispose(){return this.Dy.slice().forEach((t=>t.dispose())),this.Qy.Y(),this.$y.Y(),this.jy.Y(),super.dispose()}}const ad=(t,e,i)=>[[e.slice],[{text:e.value.toString(),font:{weight:"bold"}}]],hd=(t,i,s)=>{const r=t.kl();if(r.length>0){let t;const n=(r[1].y-r[0].y)/2+r[0].y;return t=i===e.PyramidLabelSide.Left?(r[0].x-r[1].x)/2+r[1].x-s:(r[2].x-(4===r.length?r[3].x:r[1].x))/2+(4===r.length?r[3].x:r[1].x)+s,{x:t,y:n}}},ld=t=>{const e=t.kl();if(e.length>0)return{x:(e[2].x-e[1].x)/2+e[1].x,y:(e[1].y-e[0].y)/2+e[0].y}};class ud extends od{constructor(){super(...arguments),this.Ky=_h.NamePlusValue,this.GT=10,this.WT=e.PyramidLabelSide.Left,this.UT=e.SliceLabelIndices.LabelsOnSides,this.tm=[],this.rm=this.ts.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.rm=t;for(let t=0;t<this.tm.length;t+=1)this.tm[t].We(this.rm);return this.cs.Ms(),this}getLabelConnectorStyle(){return this.rm}setLabelConnectorGap(t){return this.GT=t,this.cs.Ms(),this}getLabelConnectorGap(){return this.GT}setLabelSide(t){return this.WT=t,this.cs.Ms(),this}getLabelSide(){return this.WT}qy(t,i,s,r){const n=r.x+this.ka.left+this.ka.right,o=r.y+this.ka.top+this.ka.bottom<250||n<250,a=this.GT;let h,l=0;if(!o)for(let e=0;e<t.length;e+=1)l=Math.max(l,t[e].ih.oi().x);h=o?n/2:this.WT===e.PyramidLabelSide.Right?(this.ka.left+(n-(this.ka.right+l)))/2:(this.ka.left+l+(n-this.ka.right))/2;const c=r.x-l,d=u(c,r.y);if(nd(t,this.zT,this.VT,d,this.ka,this.OT,this.NT,h),o)return t.forEach((t=>t.ih.setVisible(!1))),void this.tm.forEach((t=>t.setVisible(!1)));this.YT(t,this.WT===e.PyramidLabelSide.Left?-1:1,-1,s,r);for(let t=0;t<this.tm.length;t+=1)this.tm[t].setVisible(!1);for(let e=0;e<t.length;e+=1)if(t[e].getVisible()){const i=this.HT(t[e],-1,s,a);i&&this.nm(i)}}getMinimumSize(){return u(500,300)}YT(t,e,i,s,r){if(0===t.length)return;const n=s.x+e*r.x*.5,o=1===i?Math.max:Math.min;let a;for(let s=0;s<t.length;s+=1){const r=t[s];let h;0===r.AT.kl().length?r.ih.setVisible(!1):r.ih.setVisible(!0),a&&(h=a.ih.Oa().y+i*(a.ih.oi().y+10));const l=hd(r.AT,this.WT,0);if(l){const t=l.y,i=void 0===h?t:o(t,h);r.ih.Ee(u(n,i)).Wa(e).Ya(0)}a=r}}HT(t,i,s,r){const n=t.AT,o=t.ih,a=hd(n,this.WT,r);if(a){const t={x:yi(this.WT===e.PyramidLabelSide.Left?o.Oa().x-i*(r+o.oi().x):o.Oa().x+i*(r+o.oi().x),a,s).x,y:pi(o.Oa().y,a,s).y};return[a,t,u(this.WT===e.PyramidLabelSide.Left?o.Oa().x-i*(r+o.oi().x):o.Oa().x+i*(r+o.oi().x),t.y)]}}nm(t){let e;for(let t=0;t<this.tm.length;t+=1)if(!this.tm[t].getVisible()){e=this.tm[t].setVisible(!0);break}void 0===e&&(e=this.jy.om(this.mg,void 0,[Uh.InternalUI]).We(this.rm),this.tm.push(e)),e.Ot().Al(t)}}class cd extends od{constructor(){super(...arguments),this.Ky=_h.Name,this.UT=e.SliceLabelIndices.LabelsInsideSlices}qy(t,e,i,s){const r=this.ka.left+s.x/2;nd(t,this.zT,this.VT,s,this.ka,this.OT,this.NT,r);for(let e=0;e<t.length;e+=1){const i=t[e].AT,s=t[e].ih,r=ld(i);r&&s.Ee(r).Wa(0).Ya(0)}}getMinimumSize(){return u(200,200)}}const dd={LabelsOnSides:ud,LabelsInsideSlices:cd};var fd;e.PyramidLabelSide=void 0,(fd=e.PyramidLabelSide||(e.PyramidLabelSide={}))[fd.Right=0]="Right",fd[fd.Left=1]="Left";const gd=(t,e,i,s,r,n)=>(t.alignmentX=(r+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=r%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(r)*n,t.paddingY=Math.sin(r)*n,t),md=(t,e,i,s,r,n,o,a)=>{if(0===e)return t.paddingX=a,t.alignmentX=-1,t};var yd;e.SpiderWebMode=void 0,(yd=e.SpiderWebMode||(e.SpiderWebMode={}))[yd.Normal=0]="Normal",yd[yd.Circle=1]="Circle";class pd{constructor(t,e,i,s,n,o,a,h){this.R=new r.Eventer,this.$T=t,this.Wr=e,this.scale=i,this.chart=s,this.tag=n,this.axisScale=o,this.XT=a,this.jT=h,this.ZT=this.$T.Ue(this.scale).setMouseInteractions(!1),this.QT=this.Wr.Gr(this.scale).yr(this.tag).setMouseInteractions(!1),this.JT=this.XT(this,this.$T.om(this.scale,void 0,[Uh.InternalUI])).We(this.chart.getNibStyle()),this.jT.gs([this.QT])}qy(t,i,s,r,n,o,a){const h=i.length,l=i[s>0?s-1:h-1],c=i[s],d=i[s<h-1?s+1:0],f=this.chart.getNibLength();this.ZT.He(t).Ye(c).We(this.chart.getAxisStyle()),this.JT.Ot().Al(o===e.SpiderWebMode.Normal?[Qe(c,l,_t(.5*f/hi(ci(l,c)),0,1)),c,Qe(c,d,_t(.5*f/hi(ci(d,c)),0,1))]:((t,e,i,s,r=2)=>{const n=s/i,o=[];for(let a=-s/2;a<=s/2;a+=r){const r=n*(a/s)+e,h=u(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);o.push(h)}return o})(t,r,n,f)),a?this.QT.setVisible(!0).Ee(ui(c,u(a.paddingX,a.paddingY))).Wa(a.alignmentX).Ya(a.alignmentY):this.QT.setVisible(!1)}getLabelSize(){return this.QT.Qh(this.chart.getAxisLabelFont()).Be(this.chart.getAxisLabelStyle()).zs().oi()}dispose(){this.ZT&&this.ZT.dispose(),this.QT&&this.QT.dispose(),this.JT&&this.JT.dispose()}}class xd extends $l{constructor(t,i,s,r,n,o,a,h,l,u,c,d){super(t,l,u,d),this.Cs="Spider Series",this._u=new Map,this.Xi=e.HighlightModes.onHover,this.tM=8,this._a=0,this.KT=(()=>{const t=$((()=>{}));let e;return(i,s,r,n)=>{const o=null==n?void 0:n.onStart,a=null==n?void 0:n.onCompleted,h=(null==n?void 0:n.easing)||X.ease,l=(null==n?void 0:n.durationMs)||1e3;let u;if(e)if(0===e.nextAnimations.length){const t=e.NextAnimation([[i,s]],(([i])=>{e=t,r(i)}),l,h);u=t}else{i=e.nextAnimations.pop().values[0][0];const t=e.NextAnimation([[i,s]],(([i])=>{e=t,r(i)}),l,h);u=t}else u=t(l,h)([[i,s]],(([t])=>{r(t)})),e=u;u.onAnimationEnd((()=>{e=void 0})),o&&u.onAnimationStart(o),a&&u.onAnimationEnd(a)}})(),this.qT={},this.tF={},this.My=this.getVisible(),this.iF=1,this.sF=((t,e)=>{const i=$((()=>{}));let s,r,n=1;return(o,a,h)=>{if(o===r)return;r=o;const l=(null==h?void 0:h.easing)||X.ease,u=(null==h?void 0:h.durationMs)||1e3;s&&(s.finish(!1),s=void 0),!1===o?a&&n?(s=i(u,l)([[n,0]],(([e])=>{n=e,t(n)})),s.onAnimationEnd((()=>{s=void 0,e(!1)}))):(n=0,e(!1)):a?(e(!0),s=i(u,l)([[n,1]],(([e])=>{n=e,t(n)})),s.onAnimationEnd((()=>{s=void 0}))):(n=1,e(!0))}})((t=>{this.iF=t,this.Bs.cs.Ms()}),(t=>{super.setVisible(t)})),this.chart=t,this.Bs=i,this.iM=r,this.eF=n,this.Cx=o,this.hF=a,this.rF=h,this.scale=s,this.nF=me(u.spiderSeriesFillStyle,c),this.oF=me(u.spiderSeriesStrokeStyle,c),this.aF=me(u.spiderSeriesPointFillStyle,c)}Ki(t,e){const i=this.rF(e);if(void 0!==i&&this._u.has(i.tag)){const t=this._u.get(i.tag),e=this.hF(i.tag,t);return{cursorPosition:{pointMarker:e,pointMarkerScale:this.scale,resultTable:e,resultTableScale:this.scale},series:this,axis:i.tag,value:t}}}ov(){return this.uv&&this._u.size>0&&this.getVisible()}addPoints(...t){this._u.size>0&&this.chart.cs.Zn(fa.Tf),t=t.filter((t=>void 0!==t.axis));for(let e=0;e<t.length;e+=1)this.eF(t[e].axis);if(this.chart.getAnimationsEnabled()&&void 0!==this.qT){const e=new Map;let i;t.forEach((t=>e.set(t.axis,t.value))),this.KT(0,1,(t=>{e.forEach(((e,s)=>{const r=(null==i?void 0:i.get(s))||0;this._u.set(s,r+t*(e-r)),this.Bs.cs.Ms()}))}),{easing:this.qT.easing,durationMs:this.qT.durationMs,onStart:()=>{i=new Map(this._u)}})}else for(let e=0;e<t.length;e+=1){const i=t[e].axis;this._u.set(i,t[e].value)}return this.Bs.Ms(),this}getValue(t,e=!1){const i=this._u.get(t),s=this.chart.getOriginValue();if(void 0!==i)return e?s+this.iF*(i-s):i}setAnimationAddPoints(t,e){return this.qT=t?{easing:t,durationMs:e}:void 0,this.Bs.Ms(),this}setVisibleStateChangedAnimation(t,e){return this.tF=t?{easing:t,durationMs:e}:void 0,this.Bs.Ms(),this}setFillStyle(t){return this.nF="function"==typeof t?t(this.nF):t,this.AT&&(this.AT.Be(this.nF),this.Bs.Ms()),this}getFillStyle(){return this.nF}setStrokeStyle(t){return this.oF="function"==typeof t?t(this.oF):t,this.AT&&(this.AT.De(this.oF),this.Bs.Ms()),this}getStrokeStyle(){return this.oF}setPointFillStyle(t){return this.aF="function"==typeof t?t(this.aF):t,this.sM&&(this.sM.Be(this.aF),this.Bs.Ms()),this}getPointFillStyle(){return this.aF}setPointSize(t){return this.tM=t,this.sM&&this.sM.it(t),this}getPointSize(){return this.tM}getPointShape(){return this.iM}setPointRotation(t){return this._a=t,this.sM&&this.sM.Jh(t),this.Bs.Ms(),this}getPointRotation(){return this._a}Re(){if(super.Re(),!this.ji){const t=new Array(this.Cx.length),e=this.chart.getOriginValue();for(let i=0;i<this.Cx.length;i+=1){const s=this._u.get(this.Cx[i].tag);t[i]=void 0!==s?this.hF(this.Cx[i].tag,e+this.iF*(s-e)):this.hF(this.Cx[i].tag,e)}ie(t),t.length>=3&&(this.AT||(this.AT=this.Bs.lc(this.scale,yn.Simple).De(this.oF).Be(this.nF).ds(this.getHighlight()),this.As(this.AT)),this.AT.Cl(t),this.sM||(this.sM=this.Bs.Bv(this.scale).it(this.tM).ll(this.iM).Jh(this._a).Be(this.aF).ds(this.getHighlight()),this.As(this.sM)),this.sM.Ot().Al(t))}}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.nF,stroke:this.oF})}Ps(){return this.ws||this.iM}lF(){for(let t=0;t<this.Ji.length;t+=1)ce(this.Ji[t],this.ts,!1,{fill:this.nF,stroke:this.oF})}ze(t,e){return t.ds(e),this.Bs.Ms(),this}setVisible(t){var e,i;return this.My=t,this.sF(t,this.chart.getAnimationsEnabled()&&void 0!==this.tF,{easing:null===(e=this.tF)||void 0===e?void 0:e.easing,durationMs:null===(i=this.tF)||void 0===i?void 0:i.durationMs}),this}}const Ad=(t,e)=>{const i=Math.PI/2-2*t*Math.PI/e;return i>=0?i:i+2*Math.PI},Sd=t=>Je(t.QT.th()),vd=t=>Je(t.th()),bd=(t,i,s,r)=>t.gu(0).Ee(s).cu(90).Ye(-270).pu(i===e.SpiderWebMode.Circle?void 0:r.length),Md={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Td={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},wd=()=>{Td.alignmentX=0,Td.alignmentY=0,Td.paddingX=0,Td.paddingY=0};class Cd extends dl{constructor(t,i,s,r,n,o,a){super(t,i,s,i.kp("spiderChart bg",0),r,i.cs.ts.spiderChartBackgroundFillStyle,i.cs.ts.spiderChartBackgroundStrokeStyle,i.cs.ts.spiderChartTitleFont,i.cs.ts.spiderChartTitleFillStyle,a),this.ka=x(20,20,20,20),this.axisScale=lt.d1({scale1DConstructor:Bi,dimension:"x"}).q(0,1),this.Cx=[],this.uF=[],this.cF=[],this.dF=Ws.expansion,this.fF=!0,this.AF=md,this.gF=gd,this.Wo=!0,this.pF=e.SpiderWebMode.Normal,this.yF=4,this.mF=this.ts.spiderChartWebStyle,this.vF=this.ts.spiderChartScaleLabelFillStyle,this.SF=this.ts.spiderChartScaleLabelFont,this.xF=5,this.bF=this.ts.spiderChartAxisLabelFillStyle,this.MF=this.ts.spiderChartAxisLabelFont,this._F=5,this.wF=this.ts.spiderChartAxisStrokeStyle,this.CF=this.ts.spiderChartAxisNibStrokeStyle,this.Of=10,this.kF=x(),this.hasAxis=t=>this.Cx.reduce(((e,i)=>e||i.tag===t),!1),this.formatValue=t=>this.axisScale.Di(t,Fi.Numeric),this.TF=()=>{const t=this.Cx.map(Sd).concat(this.cF.map(vd));return We(t)},this.FF=()=>this.IF.nd(this.mg).setMouseInteractions(!1),this.PF=t=>t.dispose(),this.DF=()=>this.IA.Gr(this.mg).setMouseInteractions(!1),this.BF=t=>t.dispose(),this.LF=t=>this.formatValue(this.axisScale.getInnerStart()+t*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.RF=(t,e)=>{let i,s;const r=()=>{void 0!==this.EF&&this.EF.finish(),i=m(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),s=this.dF,this.dF=void 0},n=(e,s,r,n,o)=>{const a=u(r.x-s.x,s.y-r.y),h=this.Cx.findIndex((e=>e===t));if(h>=0&&void 0!==i){const e=Ad(h,this.Cx.length),s=u(Math.cos(e),Math.sin(e)),r=a.x*s.x+a.y*s.y,n=hi(ci(t.ZT.Ii(),t.ZT.Ti())),l=i.min+(i.max-i.min)*Math.max(1+r/n,.01);this.axisScale.q(i.min,l),Qt(o),this.cs.Ms()}},o=()=>{if(i=void 0,void 0!==s)if(this.dh){const t=m(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),e=this.zF(),i=s;if(void 0!==e){const s=i.start(t.min,t.max,e.min,e.max),r=i.end(t.min,t.max,e.min,e.max);this.EF=this.lp.cs.dn(300,X.ease)([[0,1]],(([e])=>{this.axisScale.q(t.min+e*(s-t.min),t.max+e*(r-t.max))})),this.EF.onAnimationEnd((()=>{this.EF=void 0,this.dF=i}))}else this.dF=s}else this.dF=s;s=void 0};e.setMouseEnterEventHandler(this.VF).setMouseLeaveEventHandler(this.OF).setMouseDragStartEventHandler(r).setMouseDragEventHandler(((t,e,i,s,r)=>n(0,u(e.clientX,e.clientY),s,0,e))).setMouseDragStopEventHandler(o);const a=Ji(new es(((t,e,i)=>{this.VF(t),r(),Qt(i)}),n,((t,e,i,s)=>{this.OF(t),o(),Qt(s)})));return e.setTouchStartEventHandler(a.onTouchStart).setTouchMoveEventHandler(a.onTouchMove).setTouchEndEventHandler(a.onTouchEnd)},this.NF=t=>{this.fF&&!this.hasAxis(t)&&this.addAxis(t)},this.hF=(t,e)=>{for(const i of this.Cx)if(i.tag===t){const t=Math.max(Math.min((e-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return Qe(i.ZT.Ii(),i.ZT.Ti(),t)}},this.rF=t=>{if(0===this.Cx.length)return;const e=ci(this.translateCoordinate(t,this.coordsRelative),this.Cx[0].ZT.Ii()),i=Math.atan2(e.y,e.x);let s,r=Ve;for(const t of this.Cx){const e=ci(t.ZT.Ti(),t.ZT.Ii()),n=Math.atan2(e.y,e.x),o=Math.abs(i-n);o<r&&(s=t,r=o)}return s},this.VF=t=>{this.Wo&&(t.We(this.CF),this.cs.Ms())},this.OF=t=>{t.We(this.CF),this.cs.Ms()},this.cs.Zn(fa.mf),this.Dk=i.wx("spiderChart series bg",0),this.IF=i.Xy("spiderChart web shapes",0),this.GF=i.Xy("spiderChart axis bg",1),this.tb=i.Xy("spiderChart plotting",2),this.IA=i.Xy("spiderChart fg",3),this.jT=this.hs.kg().bs(this.ts.effectsText),this.bh.yr("Spider Chart"),this.Ov=this.Dk.nd(this.mg).Be(this.ts.spiderChartSeriesBackgroundFillStyle).De(nt).cu(90).Ye(-270).gu(0),this.Nv=this.Dk.nd(this.mg).Be(V).De(this.ts.spiderChartSeriesBackgroundStrokeStyle).cu(90).Ye(-270).gu(0),super.Vv(this.Ov,this.Nv);const h=i.Zy(),l=Dt(o?o.cursorBuilder:void 0,Mh);this.Qy=uh(this,h,l.yy(h,this.uiScale,this.uiScale,Rt,this.ts),this,"show-pointed",kd,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.Cp(n,this.mg)}getSeries(){return this.Lv}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=Mh){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}addAxis(t){if("string"==typeof t){if(!this.hasAxis(t)){const e=new pd(this.GF,this.IA,this.mg,this,t,this.axisScale,this.RF,this.jT);this.Cx.push(e)}}else t&&this.Cx.push(t);return this.jT.gs(this.Cx.map((t=>t.QT))),this.cs.Ms(),this}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:e.PointShape.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.Lv.length,r=new xd(this,this.tb,this.mg,i,this.NF,this.Cx,this.hF,this.rF,this.Ev,this.ts,s,this.cs.hs);return this.Gv(r),r}getSeriesCount(){return this.Lv.length}setWebMode(t){return this.pF=t,this.cs.Ms(),this}getWebMode(){return this.pF}setWebCount(t){return this.yF=t,this.cs.Ms(),this}getWebCount(){return this.yF}setWebStyle(t){return this.mF="function"==typeof t?t(this.mF):t,this.cs.Ms(),this}getWebStyle(){return this.mF}setScaleLabelStyle(t){return this.vF="function"==typeof t?t(this.vF):t,this.cs.Ms(),this}getScaleLabelStyle(){return this.vF}setScaleLabelFont(t){return this.SF="function"==typeof t?t(this.SF):t,this.cs.Ms(),this}getScaleLabelFont(){return this.SF}setScaleLabelPadding(t){return this.xF=t,this.cs.Ms(),this}getScaleLabelPadding(){return this.xF}setScaleLabelStrategy(t){return this.AF=t,this.cs.Ms(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.cs.Ms(),this}setAxisLabelStyle(t){return this.bF="function"==typeof t?t(this.bF):t,this.cs.Ms(),this}getAxisLabelStyle(){return this.bF}setAxisLabelFont(t){return this.MF="function"==typeof t?t(this.MF):t,this.cs.Ms(),this}getAxisLabelFont(){return this.MF}setAxisLabelEffect(t){return this.jT.bs(t),this.cs.Ms(),this}getAxisLabelEffect(){return this.jT._s()}setAxisLabelPadding(t){return this._F=t,this.cs.Ms(),this}getAxisLabelPadding(){return this._F}setAxisLabelStrategy(t){return this.gF=t,this.cs.Ms(),this}setAxisStyle(t){return this.wF="function"==typeof t?t(this.wF):t,this.cs.Ms(),this}getAxisStyle(){return this.wF}setNibStyle(t){return this.CF="function"==typeof t?t(this.CF):t,this.cs.Ms(),this}getNibStyle(){return this.CF}setNibLength(t){return this.Of=t,this.cs.Ms(),this}getNibLength(){return this.Of}setAutoAxis(t){return this.fF=t,this}getAutoAxis(){return this.fF}setMouseInteractions(t){return this.Wo=t,this}getMouseInteractions(){return this.Wo}setAxisScrollStrategy(t){return this.dF=t,this.cs.Ms(),this}getAxisScrollStrategy(){return this.dF}setAxisInterval(t,e=0){return this.axisScale.q(e,t),this.cs.Ms(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Re(t){super.Re(t),ah.Rp(this.bh,this.Tp);const e=this.Cx.length,i=ah.Lp(this.bh,this.Tp),s=u(this.mg.x.getInnerInterval()-(this.ka.left+this.ka.right),this.mg.y.getInnerInterval()-(this.ka.bottom+this.ka.top+i)),r=((t=0,e=0,i=0,s=0)=>({left:t,top:e,right:i,bottom:s}))(0,0,0,0);if(void 0!==this.gF){const t=Math.min(s.x,s.y)/2;for(let i=0;i<e;i+=1){const s=Ad(i,e),n=Math.cos(s),o=Math.sin(s),a=this.Cx[i].getLabelSize();wd();const h=this.gF(Td,i,e,this.Cx[i].tag,s,this._F),l=u(n*t+h.paddingX,o*t+h.paddingY);n>0?r.right=Math.max(r.right,l.x+.5*(1-h.alignmentX)*a.x-t):r.left=Math.max(r.left,-l.x+.5*(h.alignmentX+1)*a.x-t),o>0?r.top=Math.max(r.top,l.y+.5*(1-h.alignmentY)*a.y-t):r.bottom=Math.max(r.bottom,-l.y+.5*(h.alignmentY+1)*a.y-t)}}if(this.dF){const t=this.zF();if(void 0!==t){const e=this.dF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max),i=this.dF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),t.min,t.max);this.axisScale.q(e,i)}}const n=u(this.mg.x.getInnerStart()+(r.left+this.mg.x.getInnerInterval()-r.right)/2,this.mg.y.getInnerStart()+(r.bottom+this.mg.y.getInnerInterval()-r.top)/2),o=Math.min(s.x/2-(r.left+r.right)/2,s.y/2-(r.bottom+r.top)/2);this.kF=x(this.Xt.left+this.ka.left+r.left,this.Xt.top+this.ka.top+i+r.top,this.Xt.right+this.ka.right+r.right,this.Xt.bottom+this.ka.bottom+r.bottom),this.qy(n,o);for(const t of this.Lv)t.vv();for(const t of this.Lv)t.Re();super.wp(),this.Qy.Re(!1,this.Lv,void 0);for(const t of this.Lv)t._m()}dispose(){return this.Dk.Y(),this.IF.Y(),this.GF.Y(),this.tb.Y(),this.IA.Y(),this.Qy.Y(),super.dispose()}getMinimumSize(){return u(this.kF.left+this.kF.right+100,this.kF.bottom+this.kF.top+100)}qy(t,e){const i=this.Cx.length,s=[];for(let r=0;r<i;r+=1){const n=Ad(r,i),o=u(t.x+Math.cos(n)*e,t.y+Math.sin(n)*e);s.push(o)}bd(this.Ov,this.pF,t,s),bd(this.Nv,this.pF,t,s),this.Ov.du(e),this.Nv.du(e),((t,e,i,s,r,n,o,a)=>{const h=t.length,l=n.length,u=e>0&&l>1;for(let l=0;l<Math.max(e,h);l+=1)if(u&&l<e){l>=h&&t.push(o());const a=t[l];bd(a,i,s,n);const u=r*((l+1)/e);a.du(u)}else l<t.length&&a(t[l]);t.length=u?e:0})(this.uF,this.yF,this.pF,t,e,s,this.FF,this.PF);for(const t of this.uF)t.Be(V).De(this.mF);for(let r=0;r<i;r+=1){const n=this.Cx[r],o=Ad(r,i);wd();const a=void 0!==this.gF?this.gF(Td,r,i,this.Cx[r].tag,o,this._F):void 0;n.qy(t,s,r,o,e,this.pF,a)}((t,e,i,s,r,n,o,a,h,l)=>{const c=r.length,d=t.length;let f=0;if(void 0!==e)for(let h=0;h<c;h+=1){const g=r[h].tag,m=Ad(h,c);for(let r=0;r<i+ +(0===h);r+=1){Md.alignmentX=0,Md.alignmentY=0,Md.paddingX=0,Md.paddingY=0;const y=e(Md,h,c,g,m,r,i,s);if(void 0!==y){f>=d&&t.push(a());const e=t[f];f+=1;const s=(i-r)/i,c=Qe(n,o[h],s);e.Ee(ui(c,u(y.paddingX,y.paddingY))).Wa(y.alignmentX).Ya(y.alignmentY).yr(l(s))}}}for(let e=f;e<d;e+=1)h(t[e]);t.length=f})(this.cF,this.AF,this.yF,this.xF,this.Cx,t,s,this.DF,this.BF,this.LF);for(const t of this.cF)t.Be(this.vF).Qh(this.SF)}zF(){let t,e;const i=this.getSeriesCount()>1;for(const s of this.Cx)for(const r of this.Lv){const n=r.getValue(s.tag,i);void 0!==n&&(t=void 0===t?n:Math.min(t,n),e=void 0===e?n:Math.max(e,n))}if(void 0!==t&&void 0!==e)return m(t,e)}}const kd=(t,e,i)=>lh(e,[[e.series],[e.axis],[{text:t.formatValue(e.value),font:{weight:"bold"}}]]),Ed=(t,e)=>{const i=Math.floor(99999/e),s=Math.floor(99999/e),r=Math.floor(99998/e),n=Math.floor(99998/e),o=Math.floor(99999/(e+1)),a=Math.floor(89999/(e+1)),h=510001+e*a;let l=0;return{WF:()=>{const e=t.UF("dashboard ui",h+l);return l+=1,e},YF:()=>t.UF("dashboard legend",51e4),HF:e=>{const h=1+e*i,l=100001+e*s,u=200002+e*r,c=300002+e*n,d=400001+e*o,f=510001+e*a;let g=0;return{cs:t,kp:(e,i)=>{const s=h+i;return t.UF(e,s)},wx:(e,i)=>{const s=l+i;return t.UF(e,s)},Lk:(e,i)=>{const s=u+i;return t.UF(e,s)},Xy:(e,i)=>{const s=c+i;return t.UF(e,s)},_x:(e,i,s)=>{const r=c+i;return t.$F(e,r,s)},Ip:(e,i)=>{const s=d+i;return t.UF(e,s)},pp:e=>{const i=f+g,s=t.UF(e,i);return g+=1,s},mp:()=>t.UF("panel legend",500002+e),Zy:()=>t.UF("panel cursor",600001+e)}}}};class Rd{constructor(t){this.R=new r.Eventer,this.M=t}_(t){return this.M=t,this.R.emit("set",t),this}C(){return this.M}G(t){return this.R.on("set",t)}U(t){return this.R.off(t,"set")}}const Id={fh:!1,Ah:0,gh:!1,yh:0,ph:!1,mh:0,Sh:0,ah:Ws.fitting},_d=t=>{if(!t||"object"!=typeof t||null===t)return!1;const e=t.type;return!(!e||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(e))},Fd=(t,e,i,s,r,n,o,a)=>{const{type:h,data:l}=t;if(0===l.length)return;const u=[s,r];"spark-line"===h&&Ud(t,e,u,n,o,a),"spark-bar"===h&&Yd({...t,winLoss:!1},e,u,n,o,a),"spark-win-loss"===h&&Yd({...t,winLoss:!0},e,u,n,o,a),"spark-area"===h&&Gd(t,e,u,n,o,a),"spark-pie"===h&&Hd(t,e,u,n,o,a)},Dd=(t,e,i,s)=>({x:Pd(t.x,e.x,i.x,s),y:Ld(t.y,e.y,i.y,s)}),Bd=(t,e,i,s)=>({position:Pd(t.position,e.x,i.x,s),high:Ld(t.high,e.y,i.y,s),low:Ld(t.low,e.y,i.y,s)}),Pd=(t,e,i,s)=>{const r=_t(t,e,e+i);return s[0].x+s[1].x*(r-e)/i},Ld=(t,e,i,s)=>{const r=_t(t,e,e+i);return s[0].y+s[1].y*(r-e)/i},Vd=(t,e,i,s,r,n,o,a)=>{for(const h of t)"point"===h.type&&zd(h,e,i,r,n,o,a),"axis-band"===h.type&&Nd(h,i,r,n,o,a),"constant-line"===h.type&&Od(h,i,s,r,n,o,a)},zd=(t,i,s,r,n,o,a)=>{const{value:h,fillStyle:l,shape:u,size:c,rotation:d}=t;let f={x:NaN,y:NaN};if("start"===h&&(f=i[0]),"end"===h&&(f=i[i.length-1]),"min"===h){f=i[0];for(const t of i)f=f.y<t.y?f:t}if("max"===h){f=i[0];for(const t of i)f=f.y>t.y?f:t}("object"!=typeof h||(f=Dd(h,s,r,n),((t,e)=>{const i=e[0],s=e[1],r=t.x,n=t.y;return i.x<=r&&r<=i.x+s.x&&i.y<=n&&n<=i.y+s.y})(f,n)))&&o.pointSet.add().Ot().ll(void 0!==u?u:e.PointShape.Circle).Jh(d||0).it(c||5).Be(l||a.sparkPointChartFillStyle).Al(f)},Nd=(t,e,i,s,r,n)=>{const{axis:o,start:a,end:h,fillStyle:l,strokeStyle:c}=t;let d=u(ze,Ve),f=u(ze,Ve);"x"===o&&(d=Dd({x:a,y:ze},e,i,s),f=Dd({x:h,y:Ve},e,i,s)),"y"===o&&(d=Dd({x:ze,y:a},e,i,s),f=Dd({x:Ve,y:h},e,i,s));const g=s[0],m=s[1],y=_t(d.x,g.x,g.x+m.x),p=_t(d.y,g.y,g.y+m.y),x=_t(f.x,g.x,g.x+m.x),A=_t(f.y,g.y,g.y+m.y);r.rect.add().Sl(y).xl(p).it(u(x-y,A-p)).Be(l||n.sparkChartBandFillStyle).De(c||n.sparkChartBandStrokeStyle).De(nt)},Od=(t,e,i,s,r,n,o)=>{const{axis:a,value:h,strokeStyle:l}=t,c=h||0,d=e.y,f=i.y,g=e.x,m=i.x,y=[];if("y"===a&&d<=c&&c<=f){const t=Dd(u(g,c),{x:g,y:d},s,r),e=Dd(u(m,c),{x:g,y:d},s,r);y.push([t,e])}if("x"===a&&g<=c&&c<=m){const t=Dd(u(c,d),{x:g,y:d},s,r),e=Dd(u(c,f),{x:g,y:d},s,r);y.push([t,e])}y.length>0&&n.line.add().We(l||o.sparkChartConstantLineStrokeStyle).He(y[0][0]).Ye(y[0][1])},Ud=(t,e,i,s,r,n)=>{const{strokeStyle:o,data:a,markers:h}=t,l=a.length;l>1e4&&r.io&&Tt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=Ve,c=ze,d=Ve,f=ze;for(let t=0;t<l;t+=1){const e=a[t];u=Math.min(u,e.x),c=Math.max(c,e.x),d=Math.min(d,e.y),f=Math.max(f,e.y)}const g={x:c-u,y:f-d},m=a.map((t=>Dd(t,{x:u,y:d},g,i)));e.lineSet.add().ds(n).We(o||s.sparkLineChartStrokeStyle).Ot().Al(m),h&&Vd(h,m,{x:u,y:d},{x:c,y:f},g,i,e,s)},Yd=(t,e,i,s,r,n)=>{const{data:o,fillStyle:a,strokeStyle:h,threshold:l,winFillStyle:u,lossFillStyle:c}=t,d=t.barSize||1,f=t.gap||1,g=t.winLoss,m=l||0,y=f/d*1;let p=Ve,x=ze;if(g)p=-1,x=1;else for(const t of o)p=Math.min(p,t),x=Math.max(x,t);const A={x:0,y:g?-1:Math.min(0,p)},S={x:1*o.length+(o.length-1)*y,y:g?2:Math.max(x,1e-5)};o.map(((t,e)=>{const s={x:1*(e+1)+e*y,y:g?t>=m?1:0:t},r=Dd({x:1*e+e*y,y:g?t>=m?0:-1:0},A,S,i),n=Dd(s,A,S,i);return{value:t,position:r,width:n.x-r.x,height:n.y-r.y}})).forEach((t=>{var i;e.rect.add().ds(n).Ee(t.position).Ml(t.height).bl(t.width).Be((i=t.value,g?(i>=m?u:c)||s.sparkBarChartFillStyle:a||s.sparkBarChartFillStyle)).De(h||s.sparkBarChartStrokeStyle)}))},Gd=(t,e,i,s,r,n)=>{const{data:o,fillStyle:a,strokeStyle:h,markers:l}=t,u=o.length;u>1e4&&r.io&&Tt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let c=Ve,f=ze,g=Ve,m=ze;for(let t=0;t<u;t+=1){const e=o[t];c=Math.min(c,e.x),f=Math.max(f,e.x),g=Math.min(g,e.y),m=Math.max(m,e.y)}const y={x:f-c,y:m-g},p=[],x=[];for(const t of o){const e=d(t.x,t.y,g);p.push(Bd(e,{x:c,y:g},y,i)),x.push(Dd(t,{x:c,y:g},y,i))}e.junction.add().ds(n).Ot().Al(p).Be(a||s.sparkAreaChartFillStyle),e.lineSet.add().ds(n).Ot().Al(x).We(h||s.sparkAreaChartStrokeStyle),l&&Vd(l,x,{x:c,y:g},{x:f,y:m},y,i,e,s)},Hd=(t,e,i,s,r,n)=>{const{data:o,strokeStyle:a}=t,h=o.map((t=>"number"==typeof t?t:t.value)),l=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),c=h.reduce(((t,e)=>t+e),0),d=Dd(u(50,50),{x:0,y:0},{x:100,y:100},i),f=i[1],g=f.x<=f.y?f.x/2:f.y/2;let m=90;h.forEach(((t,i)=>{const r=t/c*360;e.arc.add().ds(n).Ee(d).du(g).gu(0).cu(m).Ye(m+r).Be(l[i]||me(s.sparkPieChartFillStyle,i)).De(a||s.sparkPieChartStrokeStyle),m+=r}))};var Wd,Kd,Xd;!function(t){t[t.UpToDown=0]="UpToDown",t[t.LeftToRight=1]="LeftToRight"}(Wd||(Wd={})),function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t[t.Both=2]="Both"}(Kd||(Kd={})),function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right"}(Xd||(Xd={}));class jd extends bn{constructor(t,e,i,s,r){super(),this.Vs=!1,this.t_={x:0,y:0,height:20,width:20},this.XF={x:10,y:10},this.Bs=t,this.jF=r,this.ZF=new To(t,e,i,Rt,s).setMouseInteractions(!0),this.QF=t.lc(e,yn.Simple).Be(s.dataGridScrollBarButtonArrowFillStyle).De(s.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.Fu(this),this.ZF.onMouseEnter((t=>t.setHighlight(1))),this.ZF.onMouseLeave((t=>t.setHighlight(0)))}JF(){switch(this.jF){case Xd.Up:this.QF.Cl([{x:this.t_.x,y:this.t_.y+this.XF.y/2},{x:this.t_.x+this.XF.x/2,y:this.t_.y-this.XF.y/2},{x:this.t_.x-this.XF.x/2,y:this.t_.y-this.XF.y/2}]);break;case Xd.Down:this.QF.Cl([{x:this.t_.x-this.XF.x/2,y:this.t_.y+this.XF.y/2},{x:this.t_.x+this.XF.x/2,y:this.t_.y+this.XF.y/2},{x:this.t_.x,y:this.t_.y-this.XF.y/2}]);break;case Xd.Left:this.QF.Cl([{x:this.t_.x-this.XF.x/2,y:this.t_.y},{x:this.t_.x+this.XF.x/2,y:this.t_.y+this.XF.y/2},{x:this.t_.x+this.XF.x/2,y:this.t_.y-this.XF.y/2}]);break;case Xd.Right:this.QF.Cl([{x:this.t_.x-this.XF.x/2,y:this.t_.y+this.XF.y/2},{x:this.t_.x+this.XF.x/2,y:this.t_.y},{x:this.t_.x-this.XF.x/2,y:this.t_.y-this.XF.y/2}])}}Ee(t){return this.t_.x=t.x,this.t_.y=t.y,this}Oa(){return u(this.t_.x,this.t_.y)}it(t){return this.t_.height=t.x,this.t_.width=t.y,this}oi(){return{x:this.t_.height,y:this.t_.width}}onMouseDown(t){return this.ZF.onMouseDown(t)}onMouseUp(t){return this.ZF.onMouseUp(t)}setFillStyle(t){return this.ZF.setFillStyle(t),this}getFillStyle(){return this.ZF.getFillStyle()}setStrokeStyle(t){return this.ZF.setStrokeStyle(t),this}getStrokeStyle(){return this.ZF.getStrokeStyle()}Re(){return this.ZF.Re(),this.JF(),this}zs(){return this.ZF.setSize(u(this.t_.height,this.t_.width)).setPosition(u(this.t_.x,this.t_.y)),this}setVisible(t){return this.ZF.setVisible(t),this.QF.setVisible(t),this}dispose(){return this.ZF.dispose(),this.QF.dispose(),this}setMouseInteractions(t){return this.ZF.setMouseInteractions(t),this}getMouseInteractions(){return this.ZF.getMouseInteractions()}onHighlight(t){return this.R.on("highlight",t)}offHighlight(t){return this.R.off(t)}getHighlight(){return this.ZF.getHighlight()}setHighlight(t){return this.ZF.setHighlight(be(t)),this.R.emit("highlight",this,Boolean(t)),this.Bs.Ms(),this}}const $d=(t,e)=>Math.min(Math.max(t,e.getInnerStart()),e.getInnerEnd());class Zd{constructor(t,i,s,n,o,a,h){this.od={x:0,y:0},this.t_={x:0,y:0,height:0,width:0},this.R=new r.Eventer,this.KF={min:u(0,0),max:u(0,0)},this.qF=!1,this.tI=!1,this.iI={x:0,y:0},this.Pu=void 0,this.sI=u(0,0),this.eI={x:0,y:0},this.hI=0,this.rI=15,this.nI=(t,i)=>{this.qF=!0,this.IA.Ms();const s=this.oI.getDraggingMode();this.Pu=this.IA.cs.Kr(s===e.UIDraggingModes.notDraggable?e.MouseStyles.Restricted:s===e.UIDraggingModes.draggable?e.MouseStyles.Move:s===e.UIDraggingModes.onlyHorizontal?e.MouseStyles.Horizontal:e.MouseStyles.Vertical),this.aI&&clearInterval(this.aI)},this.lI=()=>{this.qF=!1,this.IA.Ms(),this.IA.cs.qr(this.Pu)},this.uI=t=>(this.tI=!0,this.iI=ct(this.IA.cs.Ve(t.x,t.y),this.IA.cs.At,this.scale),!0),this.cI=(t,e)=>(this.dI(e),this.aI=setInterval((()=>this.dI(e)),300),!0),this.fI=()=>(clearInterval(this.aI),!0),this.AI=(t,i)=>{const s=this.oI.getDraggingMode();if(s!==e.UIDraggingModes.notDraggable){const r=i||s,n=ct(this.IA.cs.Ve(t.x,t.y),this.IA.cs.At,this.scale),o=u(r!==e.UIDraggingModes.onlyVertical?$d(n.x,this.scale.x):this.t_.x,r!==e.UIDraggingModes.onlyHorizontal?$d(n.y,this.scale.y):this.t_.y),a=u(o.x-this.iI.x,o.y-this.iI.y),h=u(this.oI.getPosition().x+a.x,this.oI.getPosition().y+a.y),l=this.gI(h),c={x:Math.abs(this.sI.x-l.x),y:Math.abs(this.sI.y-l.y)};return this.pI(c),this.eI.y>a.y&&(this.iI=n),this.Re(),!0}return!1},this.yI=(t,e)=>{this.tI=!1,Qt(e),this.IA.Ms()},this.IA=t,this.lp=i,this.scale=n,this.contentScale=o,this.mI=h,this.vI=new jd(t,s,n,a,h===Wd.UpToDown?Xd.Up:Xd.Left).setStrokeStyle(a.dataGridScrollBarButtonStrokeStyle).setFillStyle(a.dataGridScrollBarButtonFillStyle),this.SI=new jd(t,s,n,a,h===Wd.UpToDown?Xd.Down:Xd.Right).setStrokeStyle(a.dataGridScrollBarButtonStrokeStyle).setFillStyle(a.dataGridScrollBarButtonFillStyle),this.oI=new To(t,s,n,Rt,a).setFillStyle(a.dataGridScrollBarFillStyle).setStrokeStyle(a.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(h===Wd.UpToDown?e.UIDraggingModes.onlyVertical:h===Wd.LeftToRight?e.UIDraggingModes.onlyHorizontal:e.UIDraggingModes.notDraggable),this.xI=new To(i,s,n,Rt,a).setFillStyle(a.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(a.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.oI.onMouseEnter(this.nI),this.oI.onMouseLeave(this.lI),this.oI.onMouseDragStart(((t,e)=>this.uI(u(e.clientX,e.clientY))&&Qt(e))),this.oI.onMouseDrag(((t,e)=>this.AI(u(e.clientX,e.clientY))&&Qt(e))),this.oI.onMouseDragStop(this.yI),this.oI.onTouchStart(((t,e)=>this.uI(u(e.clientX,e.clientY))&&Qt(e))),this.oI.onTouchMove(((t,e)=>this.AI(u(e.clientX,e.clientY))&&Qt(e))),this.oI.onTouchEnd(this.yI),this.vI.onMouseDown(((t,e)=>this.cI(t,e)&&Qt(e))),this.SI.onMouseDown(((t,e)=>this.cI(t,e)&&Qt(e))),this.vI.onMouseUp(((t,e)=>this.fI()&&Qt(e))),this.SI.onMouseUp(((t,e)=>this.fI()&&Qt(e))),this.xI.onMouseWheel(((t,e)=>this.bI(e))),this.oI.onMouseWheel(((t,e)=>this.bI(e))),this.xI.onMouseDown(((t,e)=>this.cI(t,e)&&Qt(e))),this.xI.onMouseUp(((t,e)=>this.fI()&&Qt(e)))}MI(t){return this.t_=t,this}bl(t){return this.t_.width=t,this}_I(){return this.t_.width}wI(t){return this.sI=t,this}CI(t){return this.od=t,this}kI(){return this.od}TI(t){return this.rI=t,this}FI(){return this.mI}II(t){let e;switch(this.mI){case Wd.UpToDown:return e=t>0?Math.min(this.sI.y-this.KF.max.y,this.eI.y+t):Math.max(0,this.eI.y+t),e!==this.eI.y&&(this.pI({x:0,y:e}),this.Re(),!0);case Wd.LeftToRight:return e=Math.min(this.KF.max.x-this.sI.x,this.eI.x+t),e!==this.eI.x&&(this.pI({y:0,x:e}),this.Re(),!0);default:return!1}}DI(t){let e;switch(this.mI){case Wd.UpToDown:return e=Math.max(0,this.eI.y-t),e!==this.eI.y&&(this.pI({x:0,y:e}),this.Re(),!0);case Wd.LeftToRight:return e=t>0?Math.max(0,this.eI.x-t):Math.min(this.KF.max.x-this.sI.x,this.eI.x-t),e!==this.eI.x&&(this.pI({x:e,y:0}),this.Re(),!0);default:return!0}}BI(t){switch(this.mI){case Wd.UpToDown:return this.R.on("scrollY",t);case Wd.LeftToRight:return this.R.on("scrollX",t)}return this.R.on("scrollY",t)}gI(t){switch(this.mI){case Wd.UpToDown:if(t.y>this.KF.min.y)return u(t.x,this.KF.min.y);if(t.y<this.KF.max.y)return u(t.x,this.KF.max.y);break;case Wd.LeftToRight:if(t.x<this.KF.min.x)return u(this.KF.min.x,t.y);if(t.x>this.KF.max.x)return u(this.KF.max.x,t.y)}return t}bI(t){t.deltaY>0&&this.LI()&&Qt(t),t.deltaY<0&&this.RI()&&Qt(t)}dI(t){const e=ct(this.IA.cs.Ve(t.clientX,t.clientY),this.IA.cs.At,this.scale);let i;const s=this.oI.getPosition(),r=this.oI.getSize();this.EI(e,s,r)?clearInterval(this.aI):(i=this.mI===Wd.UpToDown?u(0,e.y-s.y>0?this.rI:-this.rI):u(s.x-e.x>0?this.rI:-this.rI,0),(i.x>0||i.y>0)&&this.zI(0!==i.x?Math.abs(i.x):Math.abs(i.y)),(i.x<0||i.y<0)&&this.VI(0!==i.x?Math.abs(i.x):Math.abs(i.y)))}EI(t,e,i){return this.mI===Wd.UpToDown?t.y<e.y+i.y/2&&t.y>e.y-i.y/2:t.x>e.x-i.x/2&&t.x<e.x+i.x/2}OI(t){this.KF=t}zI(t){switch(this.mI){case Wd.UpToDown:{const e=Math.max(0,this.eI.y-t);return e!==this.eI.y&&(this.pI({x:0,y:e}),this.Re(),!0)}case Wd.LeftToRight:{const e=Math.max(0,this.eI.x-t);return e!==this.eI.x&&(this.pI({x:e,y:0}),this.Re(),!0)}default:return!1}}VI(t){switch(this.mI){case Wd.UpToDown:{let e;return e=this.od.x>this.t_.height?Math.min(this.sI.y-this.KF.max.y,this.eI.y+t):0,e!==this.eI.y&&(this.pI({x:0,y:e}),this.Re(),!0)}case Wd.LeftToRight:{const e=Math.min(this.KF.max.x-this.sI.x,this.eI.x+t);return e!==this.eI.x&&(this.pI({y:0,x:e}),this.Re(),!0)}default:return!1}}RI(){return this.zI(this.rI)}LI(){return this.VI(this.rI)}pI(t){if(t.x===this.eI.x&&t.y===this.eI.y)return;let e;switch(this.eI=t,this.mI){case Wd.UpToDown:e=this.eI.y*this.hI*this.contentScale.Wi().y,this.R.emit("scrollY",Kd.Vertical,e),this.IA.cs.Ms();break;case Wd.LeftToRight:e=this.eI.x*this.hI*this.contentScale.Wi().x,this.R.emit("scrollX",Kd.Horizontal,e)}}setVisible(t){return this.vI.setVisible(t),this.SI.setVisible(t),this.xI.setVisible(t),this.oI.setVisible(t),this}dispose(){return this.vI.dispose(),this.SI.dispose(),this.xI.dispose(),this.oI.dispose(),this.aI&&clearInterval(this.aI),this}zs(){switch(this.NI(),this.GI(),this.mI){case Wd.UpToDown:this.vI.Ee({x:this.t_.x,y:this.t_.y+this.t_.height-this.vI.oi().x/2}).it(u(this.t_.width,this.t_.width)).zs(),this.SI.Ee({x:this.t_.x,y:this.t_.y+10}).it(u(this.t_.width,this.t_.width)).zs(),this.xI.setSize({x:this.t_.width,y:this.t_.height-2*this.vI.oi().x}).setPosition({x:this.t_.x,y:this.t_.y+this.SI.oi().y+this.xI.getSize().y/2}),this.oI.setSize(u(this.t_.width,this.WI())),this.sI={x:this.t_.x,y:this.vI.Oa().y-this.vI.oi().y/2-this.oI.getSize().y/2},this.OI({min:{x:this.t_.x,y:this.vI.Oa().y-this.vI.oi().y/2-this.oI.getSize().y/2},max:{x:this.t_.x,y:this.SI.Oa().y+this.SI.oi().x/2+this.oI.getSize().y/2}});break;case Wd.LeftToRight:this.vI.Ee({x:this.t_.x,y:this.t_.y}).it(u(this.t_.height,this.t_.height)).zs(),this.SI.Ee({x:this.t_.x+this.t_.width-this.SI.oi().x,y:this.t_.y}).it(u(this.t_.height,this.t_.height)).zs(),this.xI.setSize({y:this.t_.height,x:this.t_.width-2*this.vI.oi().y}).setPosition({x:this.t_.x+this.vI.oi().x/2+this.xI.getSize().x/2,y:this.t_.y}),this.oI.setSize(u(this.WI(),this.t_.height)),this.sI={x:this.vI.Oa().x+this.vI.oi().x/2+this.oI.getSize().x/2,y:this.t_.y},this.OI({min:{x:this.vI.Oa().x+this.vI.oi().x/2+this.oI.getSize().x/2,y:this.t_.y},max:{x:this.SI.Oa().x-this.SI.oi().x/2-this.oI.getSize().x/2,y:this.t_.y}})}return this.UI(),this}NI(){switch(this.mI){case Wd.UpToDown:this.YI()||this.setVisible(!1),this.YI()&&this.setVisible(!0);break;case Wd.LeftToRight:this.HI()||this.setVisible(!1),this.HI()&&this.setVisible(!0)}}GI(){switch(this.mI){case Wd.UpToDown:this.YI()||this.pI({x:0,y:0});break;case Wd.LeftToRight:this.HI()||this.pI({x:0,y:0})}}YI(){return this.od.x>this.t_.height}HI(){return this.od.y>this.t_.width}WI(){switch(this.mI){case Wd.UpToDown:return this.t_.height*(this.t_.height-2*this.vI.oi().x)/this.od.x;case Wd.LeftToRight:return this.t_.width*(this.t_.width-2*this.vI.oi().y)/this.od.y;default:return 0}}UI(){switch(this.mI){case Wd.UpToDown:this.hI=(this.od.x-this.t_.height)/(this.KF.min.y-this.KF.max.y);break;case Wd.LeftToRight:this.hI=(this.od.y-this.t_.width)/(this.KF.max.x-this.KF.min.x)}}Re(){switch(this.vI.Re(),this.SI.Re(),this.xI.Re(),this.mI){case Wd.UpToDown:this.oI.setPosition({x:this.t_.x,y:this.vI.Oa().y-this.vI.oi().y/2-this.oI.getSize().y/2-this.eI.y}).Re();break;case Wd.LeftToRight:this.oI.setPosition({y:this.t_.y,x:this.vI.Oa().x+this.vI.oi().x/2+this.oI.getSize().x/2+this.eI.x}).Re()}return this}}class Qd{constructor(t,e,i,s,r,n,o){switch(this.IA=t,this.lp=e,this.scale=s,this.contentScale=r,o){case Kd.Vertical:this.$I=this.XI(i,n,Wd.UpToDown);break;case Kd.Horizontal:this.jI=this.XI(i,n,Wd.LeftToRight);break;case Kd.Both:this.$I=this.XI(i,n,Wd.UpToDown),this.jI=this.XI(i,n,Wd.LeftToRight)}this.ZI=Ji(new es(void 0,((t,e,i,s,r)=>{var n,o;0!==s.x&&(null===(n=this.jI)||void 0===n?void 0:n.DI(s.x))&&Qt(r),0!==s.y&&(null===(o=this.$I)||void 0===o?void 0:o.II(s.y))&&Qt(r)})))}XI(t,e,i){return new Zd(this.IA,this.lp,t,this.scale,this.contentScale,e,i)}_I(){return 20}CI(t){var e,i;return null===(e=this.$I)||void 0===e||e.CI(t),null===(i=this.jI)||void 0===i||i.CI(t),this}QI(t){var e;return null===(e=this.jI)||void 0===e||e.TI(t),this}JI(t){var e;return null===(e=this.$I)||void 0===e||e.TI(t),this}KI(t){const e=this.$I;return e&&e.bI(t),this}qI(t){return this.ZI.onTouchStart(this,t),this}tP(t){return this.ZI.onTouchMove(this,t),this}iP(t){return this.ZI.onTouchEnd(this,t),this}onScroll(t){var e,i;return null===(e=this.jI)||void 0===e||e.BI(t),null===(i=this.$I)||void 0===i||i.BI(t),this}dispose(){var t,e;return null===(t=this.$I)||void 0===t||t.dispose(),null===(e=this.jI)||void 0===e||e.dispose(),this}Re(){var t,e;return null===(t=this.$I)||void 0===t||t.Re(),null===(e=this.jI)||void 0===e||e.Re(),this}zs(){var t,e,i,s;const r=this.scale.x,n=this.scale.y;return null===(t=this.$I)||void 0===t||t.MI({x:r.getInnerEnd()-10,y:n.getInnerStart()+20,height:n.getInnerEnd()-20,width:20}),null===(e=this.jI)||void 0===e||e.MI({x:r.getInnerStart()+10,y:n.getInnerStart()+10,height:20,width:r.getInnerEnd()-20}),null===(i=this.$I)||void 0===i||i.zs(),null===(s=this.jI)||void 0===s||s.zs(),this}}class qd extends oh{constructor(t,e,i,s,r,n){super(t,e,i,e.kp("dataGrid bg",0),s,e.cs.ts.dataGridBackgroundFillStyle,e.cs.ts.dataGridBackgroundStrokeStyle,e.cs.ts.dataGridTitleFont,e.cs.ts.dataGridTitleFillStyle,n),this.sP=[],this.eP=[],this.hP=[],this.rP=new Map,this.nP=!0,this.oP=!0,this.aP=!0,this.lP=!0,this.uP=!0,this.cP=!0,this.dP=!0,this.fP=!0,this.AP=!0,this.gP=!0,this.pP=!0,this.yP=!0,this.mP=!0,this.vP=!0,this.SP=!0,this.xP=!0,this.bP=new Set,this.MP=new Set,this._P=!0,this.wP=!0,this.CP=(t,e)=>{t.borders=void 0===e?rf:{...t.borders,...e},this.kP(t),this.yP=!0,this.cs.Ms()},this.kP=t=>{t.borders&&(!1===t.borders.top&&this.TP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.FP,bottom:!1}})),!1===t.borders.bottom&&this.TP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.FP,top:!1}})),!1===t.borders.left&&this.TP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.FP,right:!1}})),!1===t.borders.right&&this.TP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.FP,left:!1}})),!0===t.borders.top&&this.TP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.FP,bottom:!0}})),!0===t.borders.bottom&&this.TP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.FP,top:!0}})),!0===t.borders.left&&this.TP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.FP,right:!0}})),!0===t.borders.right&&this.TP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.FP,left:!0}})))},this.IP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseEnter,i,e)},this.PP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseLeave,i,e)},this.DP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseClick,i,e)},this.BP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseDoubleClick,i,e)},this.LP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseDown,i,e)},this.RP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseUp,i,e)},this.EP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseMove,i,e)},this.zP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseDrag,i,e)},this.VP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseDragStart,i,e)},this.OP=(t,e)=>{const i=this.rP.get(t);i&&this.R.emit(Jd.cellMouseDragStop,i,e)},this.NP=(t,e)=>{const i=this.rP.get(t);i&&(this.R.emit(Jd.cellMouseWheel,i,e),!e.defaultPrevented&&this._P&&this.GP.KI(e))},this.WP=(t,e)=>{const i=this.rP.get(t);i&&(this.R.emit(Jd.cellTouchStart,i,e),!e.defaultPrevented&&this.wP&&this.GP.qI(e))},this.UP=(t,e)=>{const i=this.rP.get(t);i&&(this.R.emit(Jd.cellTouchMove,i,e),!e.defaultPrevented&&this.wP&&this.GP.tP(e))},this.YP=(t,e)=>{const i=this.rP.get(t);i&&(this.R.emit(Jd.cellTouchEnd,i,e),!e.defaultPrevented&&this.wP&&this.GP.iP(e))},this.cs.Zn(fa.uf),this.bh.yr("Data Grid"),this.HP=i.d2({scaleXYConstructor:Vi}),this.HP.x.ug=Id,this.$P=i.d2({scaleXYConstructor:Vi}),this.XP={x:0,y:0},this.jP=this.ts.dataGridTextFont,this.ZP=this.ts.dataGridTextFillStyle,this.FP={top:!0,bottom:!0,left:!0,right:!0},this.QP=this.ts.dataGridCellBackgroundFillStyle,this.JP=this.ts.dataGridBorderStrokeStyle,this.KP="left-center",this.qP={left:5,right:5,bottom:5,top:5},this.tD=e.wx("dataGrid grid bg",0),this.iD=e.wx("dataGrid cell bg",1),this.sD=e.Xy("dataGrid cell content",0),this.eD=e.Xy("dataGrid scrollbar bg",1),this.hD=e.Xy("dataGrid scrollbar fg",2),this.GP=this.rD(),this.onBackgroundMouseWheel(((t,e)=>{this._P&&this.GP.KI(e)})),this.onBackgroundTouchStart(((t,e)=>{this.wP&&this.GP.qI(e)})),this.onBackgroundTouchMove(((t,e)=>{this.wP&&this.GP.tP(e)})),this.onBackgroundTouchEnd(((t,e)=>{this.wP&&this.GP.iP(e)})),this.nD=this.tD.Le(this.HP).Be(this.ts.dataGridBackgroundFillStyle).De(nt).setMouseInteractions(!1),this.oD=this.sD.Yg(this.HP).setMouseInteractions(!1),this.aD=new Zh((()=>this.iD.Le(this.HP).setMouseInteractions(!0).setMouseEnterEventHandler(this.IP).setMouseLeaveEventHandler(this.PP).setMouseClickEventHandler(this.DP).setMouseDoubleClickEventHandler(this.BP).setMouseDownEventHandler(this.LP).setMouseUpEventHandler(this.RP).setMouseMoveEventHandler(this.EP).setMouseDragEventHandler(this.zP).setMouseDragStartEventHandler(this.VP).setMouseDragStopEventHandler(this.OP).setMouseWheelEventHandler(this.NP).setTouchStartEventHandler(this.WP).setTouchMoveEventHandler(this.UP).setTouchEndEventHandler(this.YP))),this.lD=new Zh((()=>this.sD.Le(this.HP).setMouseInteractions(!1))),this.uD=new Zh((()=>this.sD.Gr(this.HP).setMouseInteractions(!1))),this.cD=new Zh((()=>this.sD.om(this.HP,{},[Uh.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1))),this.dD=new Zh((()=>this.sD.Ue(this.HP).setMouseInteractions(!1))),this.fD=new Zh((()=>this.sD.Bv(this.HP).setMouseInteractions(!1))),this.AD=new Zh((()=>this.sD.Le(this.HP).setMouseInteractions(!1))),this.gD=new Zh((()=>this.sD.E_(this.HP).setMouseInteractions(!1))),this.pD=new Zh((()=>this.sD.nd(this.HP).setMouseInteractions(!1))),this.Cp(r,this.uiScale),this.onResize((()=>{this.nP=!0,this.cs.Ms(),this.HP.it(this.mg.oi()),this.$P.it(this.mg.oi())})),this.yD=this.hs.kg([this.nD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}ef(){return[]}dispose(){return super.dispose(),this.tD.Y(),this.iD.Y(),this.sD.Y(),this.eD.Y(),this.hD.Y(),sh(this.HP),sh(this.$P),this.GP.dispose(),this.uD.km(),this.aD.km(),this.lD.km(),this.cD.km(),this.dD.km(),this.fD.km(),this.AD.km(),this.gD.km(),this.pD.km(),this}J(){return super.J(),this.HP.J(),this.$P.J(),this}K(){return super.K(),this.HP.K(),this.$P.K(),this}setBackgroundEffect(t){return this.yD.bs(t),this.cs.Ms(),this}getBackgroundEffect(){return this.yD._s()}setInteractionScrollOnWheel(t){return this._P=t,this}getInteractionScrollOnWheel(){return this._P}setInteractionPanOnTouch(t){return this.wP=t,this}getInteractionPanOnTouch(){return this.wP}onCellMouseEnter(t){return this.R.on(Jd.cellMouseEnter,t)}offCellMouseEnter(t){return this.R.off(t)}onCellMouseLeave(t){return this.R.on(Jd.cellMouseLeave,t)}offCellMouseLeave(t){return this.R.off(t)}onCellMouseClick(t){return this.R.on(Jd.cellMouseClick,t)}offCellMouseClick(t){return this.R.off(t)}onCellMouseDoubleClick(t){return this.R.on(Jd.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.R.off(t)}onCellMouseDown(t){return this.R.on(Jd.cellMouseDown,t)}offCellMouseDown(t){return this.R.off(t)}onCellMouseUp(t){return this.R.on(Jd.cellMouseUp,t)}offCellMouseUp(t){return this.R.off(t)}onCellMouseMove(t){return this.R.on(Jd.cellMouseMove,t)}offCellMouseMove(t){return this.R.off(t)}onCellMouseDrag(t){return this.R.on(Jd.cellMouseDrag,t)}offCellMouseDrag(t){return this.R.off(t)}onCellMouseDragStart(t){return this.R.on(Jd.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.R.off(t)}onCellMouseDragStop(t){return this.R.on(Jd.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.R.off(t)}onCellMouseWheel(t){return this.R.on(Jd.cellMouseWheel,t)}offCellMouseWheel(t){return this.R.off(t)}onCellTouchStart(t){return this.R.on(Jd.cellTouchStart,t)}offCellTouchStart(t){return this.R.off(t)}onCellTouchMove(t){return this.R.on(Jd.cellTouchMove,t)}offCellTouchMove(t){return this.R.off(t)}onCellTouchEnd(t){return this.R.on(Jd.cellTouchEnd,t)}offCellTouchEnd(t){return this.R.off(t)}setGridBackgroundFillStyle(t){return this.nD.Be(t),this.cs.Ms(),this}getGridBackgroundFillStyle(){return this.nD.Xh()}setCellContent(t,e,i,s,r){if("number"==typeof i&&void 0!==s&&void 0!==r){const n=i,o=s,a=r;let h=[];for(let i=t;i<t+n;i+=1)for(let t=e;t<e+o;t+=1){const e=this.TP(i,t);e&&h.push(e)}h=Se(h);let l={highlight:0};for(const t of h){const e=this.sP.indexOf(t);e<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.sP.splice(e,1))}const u={...l,column:t,row:e,columnSpan:n,rowSpan:o,content:a};this.sP.push(u),this.lP=!0,"string"==typeof u.content||"number"==typeof u.content?this.oP=!0:this.aP=!0,this.cs.Ms()}else this.mD(t,e,i);return this}setColumnContent(t,e){const i=e.length;if(0===i)return this;for(let s=0;s<i;s+=1){const i=e[s];this.mD(t,s,i)}return this}setRowContent(t,e){const i=e.length;if(0===i)return this;for(let s=0;s<i;s+=1){const i=e[s];this.mD(s,t,i)}return this}setTableContent(t){const e=t.length;if(0===e)return this;const i=t[0].length;if(0===i)return this;for(let s=0;s<i;s+=1)for(let i=0;i<e;i+=1){const e=t[i][s];this.mD(s,i,e)}return this}setColumnWidth(t,e){let i=this.eP.find((e=>e.column===t));return i||(i={column:t,min:void 0,max:void 0},this.eP.push(i)),"object"==typeof e?(i.min=e.min,i.max=e.max):void 0===e?this.eP.splice(this.eP.indexOf(i),1):(i.min=e,i.max=e),this.cP=!0,this.cs.Ms(),this}setRowHeight(t,e){let i=this.hP.find((e=>e.row===t));return i||(i={row:t,min:void 0,max:void 0},this.hP.push(i)),"object"==typeof e?(i.min=e.min,i.max=e.max):void 0===e?this.hP.splice(this.hP.indexOf(i),1):(i.min=e,i.max=e),this.cP=!0,this.cs.Ms(),this}setColumnPaddings(t,e){return"number"==typeof e&&(e=A(e,e,e,e)),this.vD(t,(t=>this.SD(t,e))),this}setRowPaddings(t,e){return"number"==typeof e&&(e=A(e,e,e,e)),this.xD(t,(t=>this.SD(t,e))),this}setCellPadding(t,e,i){return"number"==typeof i&&(i=A(i,i,i,i)),this.TP(t,e,(t=>this.SD(t,i))),this}setCellsPaddings(t){return"number"==typeof t&&(t=A(t,t,t,t)),this.qP={...this.qP,...t},this.bD((t=>this.SD(t,this.qP))),this}setCellBorders(t,e,i){return this.TP(t,e,(t=>this.CP(t,i))),this}setRowBorders(t,e){return this.xD(t,(t=>this.CP(t,e))),this}setColumnBorders(t,e){return this.vD(t,(t=>this.CP(t,e))),this}setCellsBorders(t){return this.FP=void 0===t?rf:t,this.bD((t=>this.CP(t,this.FP))),this}setCellsBorderStrokeStyle(t){return this.JP="function"==typeof t?t(this.JP):t,this.vP=!0,this.cs.Ms(),this}setColumnTextFillStyle(t,e){return this.vD(t,(t=>this.MD(t,e))),this}setRowTextFillStyle(t,e){return this.xD(t,(t=>this.MD(t,e))),this}setCellTextFillStyle(t,e,i){return this.TP(t,e,(t=>this.MD(t,i))),this}setCellsTextFillStyle(t){return this.ZP="function"==typeof t?t(this.ZP):t,this.bD((t=>this.MD(t,this.ZP))),this}setColumnTextFont(t,e){return this.vD(t,(t=>this._D(t,e))),this}setRowTextFont(t,e){return this.xD(t,(t=>this._D(t,e))),this}setCellTextFont(t,e,i){return this.TP(t,e,(t=>this._D(t,i))),this}setCellsTextFont(t){return this.jP="function"==typeof t?t(this.jP):t,this.bD((t=>this._D(t,this.jP))),this}setColumnContentAlignment(t,e){return this.vD(t,(t=>this.wD(t,e))),this}setRowContentAlignment(t,e){return this.xD(t,(t=>this.wD(t,e))),this}setCellContentAlignment(t,e,i){return this.TP(t,e,(t=>this.wD(t,i))),this}setCellsContentAlignment(t){return this.KP=t,this.bD((t=>this.wD(t,this.KP))),this}setCellBackgroundFillStyle(t,e,i){return this.TP(t,e,(t=>this.CD(t,i))),this}setColumnBackgroundFillStyle(t,e){return this.vD(t,(t=>this.CD(t,e))),this}setRowBackgroundFillStyle(t,e){return this.xD(t,(t=>this.CD(t,e))),this}setCellsBackgroundFillStyle(t){return this.QP="function"==typeof t?t(this.QP):t,this.bD((t=>this.CD(t,this.QP))),this}setCellHighlight(t,e,i){return this.TP(t,e,(t=>{t.highlight=be(i)})),this.mP=!0,this.cs.Ms(),this}setColumnHighlight(t,e){const i=be(e);return this.vD(t,(t=>{t.highlight=i})),this.mP=!0,this.cs.Ms(),this}setRowHighlight(t,e){const i=be(e);return this.xD(t,(t=>{t.highlight=i})),this.mP=!0,this.cs.Ms(),this}removeCell(t,e){return this.TP(t,e,(t=>this.sP.splice(this.sP.indexOf(t),1))),this.uP=!0,this.cs.Ms(),this}removeRow(t){return this.xD(t,(t=>this.sP.splice(this.sP.indexOf(t),1))),this.sP.filter((e=>e.row>t)).forEach((t=>{t.row-=1})),this.uP=!0,this.cs.Ms(),this}removeColumn(t){return this.vD(t,(t=>this.sP.splice(this.sP.indexOf(t),1))),this.sP.filter((e=>e.column>t)).forEach((t=>{t.column-=1})),this.uP=!0,this.cs.Ms(),this}removeCells(){return this.sP.splice(0),this.uP=!0,this.cs.Ms(),this}getColumnMax(){return 0===this.sP.length?0:this.sP.reduce(((t,e)=>Math.max(t,e.column+e.columnSpan-1)),0)}getRowMax(){return 0===this.sP.length?0:this.sP.reduce(((t,e)=>Math.max(t,e.row+e.rowSpan-1)),0)}Re(t){super.Re(t),ah.Rp(this.bh,this.Tp),super.wp();const e=Math.round(this.JP.N()),i=e/2;let s=this.oP||this.aP||this.lP||this.uP||this.cP||this.dP||this.pP||this.yP||this.vP||this.xP;if(s){this.sP.forEach((t=>{this.MP.add(t.column)})),this.sP.forEach((t=>{this.bP.add(t.row)}));const t=this.uD.wm(),r=this.kD(i,t);t.finishPlot();const n=this.TD(this.MP.size,r),o=this.FD(this.bP.size,r),a=n.reduce(Ke,0)+e,h=o.reduce(Ke,0)+e,l=new Array(n.length+1).fill(0).map(((t,e)=>n.reduce(((t,i,s)=>t+(s<e?i:0)),0))),u=new Array(o.length+1).fill(0).map(((t,e)=>o.reduce(((t,i,s)=>t+(s<e?i:0)),0)));if(this.ID){const t=this.ID.columnWidths.every(((t,e)=>t===n[e])),e=this.ID.rowHeights.every(((t,e)=>t===o[e]));t&&e&&(s=!1)}this.ID={columnWidths:n,rowHeights:o,dataGridWidth:a,dataGridHeight:h,columnWidthsCumulative:l,rowHeightsCumulative:u,cellsContentSizes:r}}const r=s||this.aP||this.lP||this.uP||this.fP||this.AP||this.gP||this.yP||this.mP||this.vP||this.nP||this.xP;if((r||this.SP)&&this.ID){const t=this.mg.getInnerIntervalPixels(),s=ah.Lp(this.bh,this.Tp),n=[this.ka.left+i,this.ka.right+i],o=[this.ka.bottom+i,this.ka.top+s+i],a={x:t.x-n[0]-n[1],y:t.y-o[0]-o[1]},h=[this.ka.left,this.ka.right],l=[this.ka.bottom,this.ka.top+s],u={x:Math.round(t.x-h[0]-h[1]),y:Math.round(t.y-l[0]-l[1])},c={x:Math.ceil(i),y:Math.floor(u.y-i)};this.$P.Ei(n).zi(o).Vi(0,a.x).Oi(0,a.y),this.GP.CI({x:this.ID.dataGridHeight,y:this.ID.dataGridWidth}).zs().Re();const d={x:Math.round(this.XP.x),y:Math.round(Math.min(0,this.XP.y))};this.HP.Ei(h).zi(l).Vi(d.x,u.x+d.x).Oi(d.y,u.y+d.y),this.nD.Ee({x:c.x,y:c.y});const f={x:this.HP.x.ei(),y:this.HP.y.ei()+this.GP._I(),width:this.HP.x.ri()+e-this.GP._I(),height:this.HP.y.ri()+e};this.sD.gx(f),this.iD.gx(f),this.tD.gx(f);const g=this.ID,m=[{x:this.HP.x.getInnerStart(),y:this.HP.y.getInnerStart()},{x:this.HP.x.getInnerEnd(),y:this.HP.y.getInnerStart()},{x:this.HP.x.getInnerEnd(),y:this.HP.y.getInnerEnd()},{x:this.HP.x.getInnerStart(),y:this.HP.y.getInnerEnd()}];g.cellsContentSizes.forEach((t=>{var e;const i={x:c.x+g.columnWidthsCumulative[t.cell.column],y:c.y-g.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},s={x:i.x+g.columnWidths[t.cell.column],y:i.y+g.rowHeights[t.cell.row]},r=Ge([i,{x:s.x,y:i.y},s,{x:i.x,y:s.y}],m);null===(e=t.text)||void 0===e||e.setVisible(r)})),r&&this.PD(c,this.ID,e)}this.nP=!1,this.oP=!1,this.aP=!1,this.lP=!1,this.uP=!1,this.cP=!1,this.dP=!1,this.fP=!1,this.AP=!1,this.gP=!1,this.pP=!1,this.yP=!1,this.mP=!1,this.vP=!1,this.SP=!1,this.xP=!1}kD(t,e){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.sP){const{content:r}=t,n={...this.qP,...t.padding};let o,a,h,l={x:0,y:0};if("string"==typeof r||"number"==typeof r){const i=String(r);o=e.add(),l=o.yr(i).Qh(t.textFont||this.jP).zs().ed()}if(_d(r)&&(a=r,l={x:200,y:50}),co(r)){const t=this.cs.DD(r);t.BD()?(h=r,l=h.oi()):t.LD((()=>{this.xP=!0,this.cs.Ms()}))}if(o||a||h){n.top=Math.round(n.top),n.left=Math.round(n.left),n.right=Math.round(n.right),n.bottom=Math.round(n.bottom);const e={x:Math.round(l.x+n.left+n.right+s.left+s.right),y:Math.round(l.y+n.top+n.bottom+s.top+s.bottom)};i.push({cell:t,contentSize:e,text:o,sparkChart:a,icon:h,cellPadding:n,cellMargin:s})}}return i}PD(t,i,s){const{dataGridWidth:r,dataGridHeight:n,cellsContentSizes:o,columnWidths:a,columnWidthsCumulative:h,rowHeights:l,rowHeightsCumulative:u}=i,c={x:r-s,y:-n+s};this.nD.it(c),this.oD.We(this.JP),this.rP.clear();const d={cellBackground:this.aD.wm(),cellIconRect:this.lD.wm(),lineSet:this.cD.wm(),line:this.dD.wm(),pointSet:this.fD.wm(),rect:this.AD.wm(),junction:this.gD.wm(),arc:this.pD.wm()},f=[];for(const i of o){const{cell:r,text:n,sparkChart:o,icon:c,cellPadding:g,cellMargin:m}=i,y={column:r.column,row:r.row},p={x:t.x+h[r.column],y:t.y-u[r.row+r.rowSpan]},x={x:p.x+m.left,y:p.y+m.bottom},A={x:x.x+g.left,y:x.y+g.bottom},S={x:new Array(r.columnSpan).fill(0).reduce(((t,e,i)=>t+a[r.column+i]),0),y:new Array(r.rowSpan).fill(0).reduce(((t,e,i)=>t+l[r.row+i]),0)},v={x:S.x-m.left-m.right,y:S.y-m.top-m.bottom},b={x:v.x-g.left-g.right,y:v.y-g.top-g.bottom};if(n){const t=sf(A,b,r.contentAlignment||this.KP);n.Ee(t[0]).$a({x:t[1],y:t[2]}).Be(this.RD(r.textFillStyle||this.ZP,r.content,this.ZP)).ds(r.highlight)}const M=this.RD(r.backgroundFillStyle||this.QP,r.content);if(M!==V){const t=d.cellBackground.add();t.Ee(p).it(S).Be(M).De(nt).ds(r.highlight),this.rP.set(t,y)}const T=r.borders||this.FP;if(T&&ef(p,S,T,s,f),o){const t=A,e=b;Fd(o,d,this.HP,t,e,this.ts,this.SA,r.highlight)}if(c){const t=c.oi(),i=sf(A,b,r.contentAlignment||this.KP);d.cellIconRect.add().Ee({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).it(t).Be(new so({source:c.dc,fitMode:e.ImageFitMode.Stretch})).De(nt).ds(r.highlight)}}this.oD.Ot();for(const t of f)this.oD.Xr().$g(t[0],t[1]);d.cellBackground.finishPlot(),d.cellIconRect.finishPlot(),d.lineSet.finishPlot(),d.line.finishPlot(),d.pointSet.finishPlot(),d.rect.finishPlot(),d.junction.finishPlot(),d.arc.finishPlot()}TD(t,e){const i=new Array(t).fill(0);for(const t of this.MP.values()){const s=e.filter((e=>t>=e.cell.column&&t+1<=e.cell.column+e.cell.columnSpan)).reduce(((t,e)=>{const i=e.contentSize.x/e.cell.columnSpan;return Math.max(t,i)}),0),r=this.eP.find((e=>e.column===t)),n=r?_t(s,void 0!==r.min?r.min:ze,void 0!==r.max?r.max:Ve):s;i[t]=n}return i}FD(t,e){const i=new Array(t).fill(0);for(const t of this.bP.values()){const s=e.filter((e=>t>=e.cell.row&&t+1<=e.cell.row+e.cell.rowSpan)).reduce(((t,e)=>{const i=e.contentSize.y/e.cell.rowSpan;return Math.max(t,i)}),0),r=this.hP.find((e=>e.row===t)),n=r?_t(s,void 0!==r.min?r.min:ze,void 0!==r.max?r.max:Ve):s;i[t]=n}return i}RD(t,e,i){if(K(t)){try{const i=Number(e);return new U({color:t.getPalette().getColors(i)})}catch(t){}return i||V}return t}MD(t,e){t.textFillStyle="function"==typeof e?e(t.textFillStyle||this.ZP):e,this.gP=!0,this.cs.Ms()}_D(t,e){t.textFont="function"==typeof e?e(t.textFont||this.jP):e,this.pP=!0,this.cs.Ms()}CD(t,e){t.backgroundFillStyle="function"==typeof e?e(t.backgroundFillStyle||this.QP):e,this.AP=!0,this.cs.Ms()}wD(t,e){t.contentAlignment=e,this.fP=!0,this.cs.Ms()}SD(t,e){t.padding={...t.padding,...e},this.dP=!0,this.cs.Ms()}mD(t,e,i){let s=this.TP(t,e);s?s.content=i:(s={column:t,row:e,columnSpan:1,rowSpan:1,content:i,highlight:0},this.sP.push(s),this.lP=!0),"string"==typeof s.content||"number"==typeof s.content?this.oP=!0:this.aP=!0,this.cs.Ms()}bD(t){this.sP.forEach((e=>t(e)))}TP(t,e,i){const s=this.sP.find((i=>t>=i.column&&t+1<=i.column+i.columnSpan&&e>=i.row&&e+1<=i.row+i.rowSpan));return s&&i&&i(s),s}vD(t,e){const i=this.sP.filter((e=>t>=e.column&&t+1<=e.column+e.columnSpan));for(const t of i)t&&e(t)}xD(t,e){const i=this.sP.filter((e=>t>=e.row&&t+1<=e.row+e.rowSpan));for(const t of i)t&&e(t)}rD(){return new Qd(this.hD,this.eD,this.$P,this.$P,this.HP,this.ts,Kd.Both).onScroll(((t,e)=>{this.ID&&(t===Kd.Vertical&&(this.XP.y=-e),t===Kd.Horizontal&&(this.XP.x=e),this.SP=!0,this.cs.Ms())})).QI(50).JI(12)}}const Jd={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var tf;e.DataGridCellContentAlignmentOptions=void 0,(tf=e.DataGridCellContentAlignmentOptions||(e.DataGridCellContentAlignmentOptions={})).Center="center",tf.RightCenter="right-center",tf.LeftCenter="left-center",tf.RightTop="right-top",tf.LeftTop="left-top",tf.RightBottom="right-bottom",tf.LeftBottom="left-bottom",tf.CenterTop="center-top",tf.CenterBottom="center-bottom";const ef=(t,e,i,s,r)=>{const n={x:t.x,y:t.y},o={x:t.x,y:t.y+e.y},a={x:t.x+e.x,y:t.y},h={x:t.x+e.x,y:t.y+e.y};i.top&&r.push([o,h]),i.bottom&&r.push([n,a]),i.left&&r.push([n,o]),i.right&&r.push([a,h])},sf=(t,e,i)=>{const s=t.x,r=t.x+e.x,n=t.x+e.x/2,o=t.y+e.y,a=t.y,h=t.y+e.y/2;switch(i){case"left-center":return[u(s,h),-1,0];case"right-center":return[u(r,h),1,0];case"center":return[u(n,h),0,0];case"left-bottom":return[u(s,a),-1,-1];case"right-bottom":return[u(r,a),1,-1];case"center-bottom":return[u(n,a),0,-1];case"left-top":return[u(s,o),-1,1];case"right-top":return[u(r,o),1,1];case"center-top":return[u(n,o),0,1]}return Te(0,`Unidentified DataGrid cell content alignment option: ${i}`)},rf={top:!1,bottom:!1,left:!1,right:!1};class nf extends ar{constructor(t,e,i,s,r,n){super(t,{Ir(){},Fr(){},Dr(){}},s,e,i,{numeric:e.xAxisNumericTicks,datetime:e.xAxisDateTimeTicks,time:e.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.hs=n,this.Bs=r,this.wh=r.Gr(t.ED).Qh(this.ts.barChartCategoryAxisTitleFont||this.ts.xAxisTitleFont).Be(this.ts.barChartCategoryAxisTitleFillStyle||this.ts.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ls.getWidth({x:0,y:-90})),this.qh=this.hs.kg([this.wh]).bs(e.effectsText),this.zD=r.Ue(t.ED).We(e.barChartCategoryAxisStrokeStyle||e.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Dg=t,this.Bg=t):"object"==typeof t&&(this.Dg=t.min,this.Bg=t.max),this.chart.cs.Ms(),this}getThickness(){return{min:this.Dg,max:this.Bg}}setStrokeStyle(t){return this.zD.We(t),this.chart.cs.Ms(),this}getStrokeStyle(){return this.zD.mu()}zs(){if(!this.Zi)return{zg:0,Vg:0,$d:_t(0,void 0!==this.Dg?this.Dg:0,void 0!==this.Bg?this.Bg:Ve)};const t=this.zD.mu().N()/2,e=this.chart.Ls.getHeight(this.wh.zs().ed());return{zg:t,Vg:e,$d:t+e}}Re(t,e,i,s){const r=this.getInterval(),n=this.chart.valueAxis.getInterval();this.zD.He(this.chart.Ls.toPoint(r.start,n.start)).Ye(this.chart.Ls.toPoint(r.end,n.start)).setVisible(this.Zi),this.wh.Ee(this.chart.Ls.toPoint(.5*(r.start+r.end),this.chart.valueAxis.At.pi(n.start,-(t.zg+s.labelMarginBeforeCategoryAxisPixels)))).$a(this.chart.Ls.toPoint(0,1)).setVisible(this.Zi)}setMouseInteractions(t){return this}Sr(t,e){return new hr(e,t,this.Bs,this.chart.ED)}br(t,e){return{}}Lr(t,e){return e}Er(t,e,i){return{min:t,max:e}}}class of extends ar{constructor(t,e,i,s,r,n,o){super(t,{Ir:()=>{var e;if(t.VD){if("positive"===t.OD||"bipolar"===t.OD){if("after-bar"===(null===(e=t.ND)||void 0===e?void 0:e.position)){const e=this.At.ri();return this.At.pi(t.VD.max,Math.min(this.chart.Ls.getHeight(this.chart.GD())+t.ND.labelMargin,.3*e))}return t.VD.max}return t.WD?_t(-1,-1e-6,t.VD.max):0}},Fr:()=>{var e;if(t.VD){if("negative"===t.OD||"bipolar"===t.OD){if("after-bar"===(null===(e=t.ND)||void 0===e?void 0:e.position)){const e=this.At.ri();return this.At.pi(t.VD.min,-Math.min(this.chart.Ls.getHeight(this.chart.GD())+t.ND.labelMargin,.3*e))}return t.VD.min}return t.WD?_t(1,1e-6,t.VD.min):0}},Dr:()=>{}},s,e,i,{numeric:e.barChartValueAxisTicks||e.yAxisNumericTicks,datetime:e.yAxisDateTimeTicks,time:e.yAxisTimeTicks},o),this.chart=t,this.hs=n,this.Bs=r,this.wh=r.Gr(t.ED).Qh(this.ts.barChartValueAxisTitleFont||this.ts.yAxisTitleFont).Be(this.ts.barChartValueAxisTitleFillStyle||this.ts.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ls.getHeight({x:0,y:-90})),this.qh=this.hs.kg([this.wh]).bs(e.effectsText),this.zD=r.Ue(t.ED).We(e.barChartValueAxisStrokeStyle||this.ts.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.Dg=t,this.Bg=t):"object"==typeof t&&(this.Dg=t.min,this.Bg=t.max),this.chart.cs.Ms(),this}getThickness(){return{min:this.Dg,max:this.Bg}}setStrokeStyle(t){return this.zD.We(t),this.chart.cs.Ms(),this}getStrokeStyle(){return this.zD.mu()}setTickStrategy(t,e){return super.Gh(t,e)}zs(t){if(!this.Zi)return this.tr(),{zg:0,Vg:0,$d:_t(0,void 0!==this.Dg?this.Dg:0,void 0!==this.Bg?this.Bg:Ve)};const e=this.chart.Ls.getWidth(this.chart.ED).ri(),i=this.At.ri();this.ar({physicalAxisSize:i,oppositeAxisSize:e,plotLines:t});let s=0;for(const t of this.rh.values())for(const e of t.values()){const t=e.Dh.vr,i=this.chart.Ls.getWidth(e.ih.ed()),r=t.getTickLength()+t.getTickPadding()+i;s=Math.max(s,r)}const r=s+this.zD.mu().N()/2,n=this.chart.Ls.getWidth(this.wh.zs().ed());return{zg:r,Vg:n,$d:_t(r+n,void 0!==this.Dg?this.Dg:0,void 0!==this.Bg?this.Bg:Ve)}}Re(t){const e=this.getInterval();this.zD.He(this.chart.Ls.toPoint(-.5,this.Wh)).Ye(this.chart.Ls.toPoint(-.5,this.Uh)).setVisible(this.Zi);const i="logarithmic"===this.Oh.type?Math.sqrt(e.start+e.end):.5*(e.start+e.end),s=this.chart.Ls.toPoint(this.chart.categoryAxis.At.pi(-.5,t.zg*this.chart.Ls.UD),i),r=this.chart.Ls.toPoint(this.chart.Ls.YD,0);this.wh.Ee(s).$a(r).setVisible(this.Zi)}setMouseInteractions(t){return this}Sr(t,e){return new hr(e,t,this.Bs,this.chart.ED)}br(t,e){const i=t.Dh.vr,s=this.chart.Ls.toPoint(-.5,t.M),r=this.chart.ED.pi(s,this.chart.Ls.toPoint(i.getTickLength()*this.chart.Ls.UD,0)),n=this.chart.ED.pi(s,this.chart.Ls.toPoint(i.gridStrokeLength*e.oppositeAxisSize*-this.chart.Ls.UD,0)),o=this.chart.ED.pi(r,this.chart.Ls.toPoint(i.getTickPadding()*this.chart.Ls.UD,0));t.ih.Ee(o).$a(this.chart.Ls.toPoint(this.chart.Ls.YD,i.getLabelAlignment())).Jh(i.getLabelRotation()),i.tickStyle!==nt&&0!==i.tickLength&&e.plotLines.add({positions:[s,r]},{lineStyle:i.tickStyle}),i.gridStrokeStyle!==nt&&i.gridStrokeLength>0&&e.plotLines.add({positions:[s,n]},{lineStyle:i.gridStrokeStyle})}Lr(t,e){return"linear"===this.Oh.type?Xi(t,e,this.At):ji(t,e,this.At)}Er(t,e,i){return{min:t,max:e}}}class af extends $l{constructor(t,e,i,s,r,n,o){super(t,e,i,s),this.Zo=_e(),this.M=0,this.HD=!1,this.chart=t,this.chart=t,this.category=r,this.subCategory=n,this.Cs=r,this.Te=me(i.barChartBarFillStyle||i.rectangleSeriesFillStyle,o),this.Fe=me(i.barChartBarStrokeStyle||i.rectangleSeriesStrokeStyle,o),this.onVisibleStateChanged((()=>{this.chart.$D()})),this.onDispose((()=>{this.chart.$D(),this.chart.XD.delete(this.category),this.chart.jD.delete(this)}))}Ki(t,e){const i=this.chart.cs.No(e);return{cursorPosition:{pointMarker:{x:i.engineX,y:i.engineY},pointMarkerScale:this.chart.cs.At,resultTable:{x:i.engineX,y:i.engineY},resultTableScale:this.chart.cs.At},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.HD=!0,this.M=t,this.chart.$D(),this.chart.cs.Ms(),this.chart.XD.delete(this.category),this.chart.jD.delete(this),this}getValue(){return this.M}get value(){return this.M}setFillStyle(t){return this.Te="function"==typeof t?t(this.Te):t,this.chart.$D(),this}getFillStyle(){return this.Te}setStrokeStyle(t){return this.Fe="function"==typeof t?t(this.Fe):t,this.chart.$D(),this}getStrokeStyle(){return this.Fe}ov(){return this.uv}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,e=!1){ce(t,this.ts,e,{fill:this.Te})}}const hf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value),lf=(t,e,i)=>{const s=t.Rd.filter((t=>void 0!==t)),r=s.map((t=>i(t.sizePixels))).reduce(((t,e)=>Math.max(t,e)),1),n=Math.ceil(r/(e/s.length));return n<=1?s:s.filter(((t,e)=>e%n==0))};class uf extends dl{constructor(t,e,i,s,r,n,o){var a;let h;super(t,e,i,e.kp("barChart bg",0),s,e.cs.ts.barChartBackgroundFillStyle||e.cs.ts.chartXYBackgroundFillStyle,e.cs.ts.barChartBackgroundStrokeStyle||e.cs.ts.chartXYBackgroundStrokeStyle,e.cs.ts.barChartTitleFont||e.cs.ts.chartXYTitleFont,e.cs.ts.barChartTitleFillStyle||e.cs.ts.chartXYTitleFillStyle,n),this.coordsBars="barChart",this.ZD=cf.Descending,this.QD=this.ts.barChartCategoryLabels,this.ND=this.ts.barChartValueLabelsAfterBars,this.JD=!1,this.jM=Re(),this.XD=new Map,this.jD=new Map,this.OD="positive",this.KD="columns",this.qD=!0,this.tB=new Map,this.iB={speed:1},this.ky={speed:1},this.sB=.08,this.eB=[],this.wn=(t,e,i,s,r)=>{this.ED.it(s,r)},this.cs.Zn(fa.gf),this.Ls="horizontal"===(null==o?void 0:o.type)?ff:df,this.bh.yr("Bar Chart"),this.hB=e.Xy("barChart plotting 1",0),this.rB=e.Xy("barChart plotting 2",1),this.WD="logarithmic"===(null===(a=null==o?void 0:o.valueAxis)||void 0===a?void 0:a.type),this.WD?"horizontal"===this.Ls.nB?(h=i.d1({scale1DConstructor:Bi,dimension:"y"}),this.ED=(new zi).Ri(i.d1({scale1DConstructor:wi,dimension:"x"}),h)):(h=i.d1({scale1DConstructor:Bi,dimension:"x"}),this.ED=(new zi).Ri(h,i.d1({scale1DConstructor:wi,dimension:"y"}))):(this.ED=i.d2({scaleXYConstructor:Vi}),h=this.Ls.getWidth(this.ED)),this.oB=this.hs.kg(),this.JM=new $h((()=>this.jM.Mt(this.hB.Hm(this.ED).oa(0))),((t,e,i)=>(t.Be(i.fillStyle).De(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Xr();return i.Cl(e.vertices),this.jM.Vt(i,e.bar),e.bar.ys([i]),i})))),(()=>{this.jM.Ot()}),(t=>{this.oB.gs(t)})),this.Ov=this.lp.Le(this.ED).Be(this.ts.barChartSeriesBackgroundFillStyle||V).De(nt),this.Nv=this.lp.Le(this.ED).Be(V).De(this.ts.barChartSeriesBackgroundStrokeStyle||nt).setMouseInteractions(!1),super.Vv(this.Ov,this.Nv),this.categoryAxis=new nf(this,this.ts,!1!==(null==o?void 0:o.animationsEnabled),h,this.rB,this.hs);const l=Ki(null==o?void 0:o.valueAxis);this.valueAxis=new of(this,this.ts,!1!==(null==o?void 0:o.animationsEnabled),this.Ls.getHeight(this.ED),this.rB,this.hs,l.type),this.aB=new Zh((()=>this.rB.Gr(this.ED).Nr(Ie).Or(Ie).oa(1))),this.lB=new $h((()=>this.lp.Yg(this.ED).setMouseInteractions(!1)),((t,e,i)=>(t.We(i.lineStyle),e.map((({positions:e,existingMember:i})=>(i||t.Xr()).$g(e[0],e[1]))))));const u=e.Zy(),c=Dt(o?o.cursorBuilder:void 0,Th);this.Qy=uh(this,u,c.yy(u,this.uiScale,this.uiScale,Rt,this.ts),this,"show-pointed",gf,(()=>0)),this.onResize(this.wn),this.Cp(r,this.ED),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled))}getSeries(){return this.Lv}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=Th){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}setBarsMargin(t){return this.sB=_t(t,0,.49),this.JD=!0,this.cs.Ms(),this}getBarsMargin(){return this.sB}setBarsEffect(t){return this.oB.bs(t),this.cs.Ms(),this}getBarsEffect(){return this.oB._s()}setData(t){let e;if(Array.isArray(t))e=[],t.forEach(((t,i)=>{"string"==typeof t?e.push({category:t}):"number"==typeof t?e.push({category:`Category ${i+1}`,value:t}):"object"==typeof t&&e.push(t)}));else{e=[];const i=Object.keys(t);for(const s of i){const i=t[s];e.push({category:s,value:"number"==typeof i?i:void 0})}}return this.uB("columns",e),this}setDataStacked(t,e){const i=[];return e.forEach((e=>{const{subCategory:s,values:r}=e;r.forEach(((e,r)=>{const n=t[r];i.push({category:n,subCategory:s,value:e})}))})),this.uB("stacks",i),this}setDataGrouped(t,e){const i=[];return e.forEach((e=>{const{subCategory:s,values:r}=e;r.forEach(((e,r)=>{const n=t[r];i.push({category:n,subCategory:s,value:e})}))})),this.uB("groups",i),this}uB(t,e){this.Lv.length>0&&this.cs.Zn(fa.Tf),this.KD=t,this.eB=e.map((t=>t.category)),this.cB(e);const i=Se(e.map((t=>t.category))),s=i.length,r=Se(e.map((t=>t.subCategory))).filter((t=>void 0!==t));if(e.forEach((t=>{let e=this.Lv.find((e=>e.category===t.category&&e.subCategory===t.subCategory));if(!e){const s=i.indexOf(t.category),n=r.includes(t.subCategory)?r.indexOf(t.subCategory):void 0;e=new af(this,this.Ev,this.ts,this.cs.hs,t.category,t.subCategory,Dt(n,s)),this.Gv(e),this.tB.set(e,{category:s,valueStart:this.WD?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&e.setValue(t.value)})),this.Lv.slice().forEach((t=>{void 0===e.find((e=>e.category===t.category&&e.subCategory===t.subCategory))&&(t.dispose(),this.tB.delete(t))})),this.categoryAxis.setInterval(this.Ls.getWidth({x:{start:-.5,end:s-.5},y:{start:s-.5,end:-.5}})),this.VD=0===this.Lv.length?void 0:"stacks"!==t?this.Lv.reduce(((t,e)=>({min:Math.min(t.min,e.getValue()),max:Math.max(t.max,e.getValue())})),{min:Ve,max:ze}):{min:0,max:i.reduce(((t,i)=>Math.max(t,e.reduce(((t,e)=>e.category!==i?t:void 0!==e.value?t+e.value:t),0))),0)},this.VD&&(this.OD=this.VD.min>=0?"positive":this.VD.max<=0?"negative":"bipolar",("bipolar"===this.OD||"negative"===this.OD)&&this.WD))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.cB(this.Lv),this.XD.clear(),this.jD.clear(),this.JD=!0,this.cs.Ms()}setCategoryLabels(t){const e="function"==typeof t?this.QD?t(this.QD):this.QD:t;return this.QD=e?{...this.ts.barChartCategoryLabels,...e}:void 0,this.XD.clear(),this.cs.Ms(),this}getCategoryLabels(){return this.QD}setValueLabels(t){var e;const i="function"==typeof t?this.ND?t(this.ND):this.ND:t,s=(null==i?void 0:i.position)||(null===(e=this.ND)||void 0===e?void 0:e.position);return i&&s?"after-bar"===s?this.ND={...this.ts.barChartValueLabelsAfterBars,...i}:"inside-bar"!==s&&"inside-bar-start"!==s&&"inside-bar-centered"!==s&&"inside-bar-end"!==s||(this.ND={...this.ts.barChartValueLabelsInsideBars,...i}):this.ND=void 0,this.jD.clear(),this.cs.Ms(),this}getValueLabels(){return this.ND}setLabelFittingEnabled(t){return this.qD=t,this.cs.Ms(),this}getLabelFittingEnabled(){return this.qD}getBar(t,e){if(("groups"===this.KD||"stacks"===this.KD)&&void 0===e)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const i=this.Lv.find((i=>i.category===t&&(void 0===e||e===i.subCategory)));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}" ${e?`"${e}"`:""}`);return i}getBars(){return this.Lv}setSorting(t){this.ZD=t;const e=this.Lv.slice();return this.Lv.length=0,this.Lv.push(...ve(this.eB.map((t=>e.find((e=>e.category===t)))))),this.cB(this.Lv),this.cs.Ms(),this}getSorting(){return this.ZD}setAnimationCategoryPosition(t,e=1){return this.iB=t?{speed:e}:void 0,this.cs.Ms(),this}setAnimationValues(t,e=1){return this.ky=t?{speed:e}:void 0,this.cs.Ms(),this}translateCoordinate(t,e,i){if(i&&Gi(t)&&Yi(e))return super.translateCoordinate(t,e,i);const s=e;let r;if(Ui(t))r=this.cs.No(t);else if(Gi(t)){const e=ct(t,this.mg,this.cs.At);r={engineX:e.x,engineY:e.y}}else{if(!hf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const e=ct(this.Ls.toPoint(t.iCategory,t.value),this.ED,this.cs.At);r={engineX:e.x,engineY:e.y}}}if(Oi(s))return this.cs.Go(r);if("barChart"===s){const t=ct({x:r.engineX,y:r.engineY},this.cs.At,this.ED);return{iCategory:this.Ls.getWidth(t),value:this.Ls.getHeight(t)}}if(Yi(s))return ct({x:r.engineX,y:r.engineY},this.cs.At,this.mg);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}ef(){if("columns"===this.KD)return this.Lv;const t=Se(ve(this.Lv.map((t=>t.subCategory))));return ve(t.map((t=>{const e=this.Lv.filter((e=>e.subCategory===t)),i=e[0];if(i)return(t=>{let e=!1;t.forEach((i=>i.onHighlight(((s,r)=>{e||(e=!0,t.forEach((t=>i!==t?t.setHighlight(r):void 0)),e=!1)})))),t.forEach((e=>e.onDispose((()=>{const i=t.indexOf(e);i>=0&&t.splice(i,1)}))))})(e),{attach(s,r){return Me(s,e,{toggleVisibilityOnClick:!0,label:t,style:i.getFillStyle()}),this}}})))}Re(t){var e,i;super.Re(t);const s=this.aB.wm(),r=this.lB.wm(),n=this.Lv.filter((t=>t.getVisible()&&t.HD)),o=Se(n.map((t=>t.category))),a=Se(ve(n.map((t=>t.subCategory)))),h=5e-4*t*((null===(e=this.iB)||void 0===e?void 0:e.speed)||0),l=.003*t*((null===(i=this.iB)||void 0===i?void 0:i.speed)||0),u=this.valueAxis.At,c=u instanceof Bi?(t,e)=>{var i;return Xi(t,e,u,(null===(i=this.ky)||void 0===i?void 0:i.speed)||0)}:(t,e)=>{var i;return ji(t,e,u,(null===(i=this.ky)||void 0===i?void 0:i.speed)||0)};let d;"columns"===this.KD?d=n.map((t=>({bar:t,position:{category:o.indexOf(t.category),valueStart:this.WD?1e-6:0,valueEnd:t.value}}))):"groups"===this.KD?d=n.map((t=>{const e=o.indexOf(t.category),i=a.indexOf(t.subCategory),s=1/(a.length+2*(a.length+1)*this.sB),r=this.sB*s;return{bar:t,position:{category:e+(i-(a.length-1)/2)*(s+r),valueStart:this.WD?1e-6:0,valueEnd:t.value}}})):(d=[],o.forEach(((t,e)=>{const i=n.filter((e=>e.category===t));let s=this.WD?1e-6:0;i.forEach(((e,i)=>{d.push({bar:e,position:{category:o.indexOf(t),valueStart:s,valueEnd:s+e.value}}),s+=e.value}))}))),d.forEach((t=>{const{bar:e,position:i}=t;let s,r,n=this.tB.get(e);void 0===n&&(n=i);const o=i.valueStart;if(this.iB&&n.category!==i.category){const t=Math.sign(i.category-n.category);s=n.category+h*t+l*(i.category-n.category),t!==Math.sign(i.category-s)&&(s=i.category)}else s=i.category;if(this.ky&&n.valueEnd!==i.valueEnd){const t=Math.sign(i.valueEnd-n.valueEnd);r=c(n.valueEnd,i.valueEnd),t!==Math.sign(i.valueEnd-r)&&(r=i.valueEnd)}else r=i.valueEnd;this.tB.set(e,{category:s,valueStart:o,valueEnd:r}),s===i.category&&r===i.valueEnd||this.cs.Ms(!0),s===n.category&&r===n.valueEnd||(this.JD=!0)})),ah.Rp(this.bh,this.Tp);const f=n.length>0;this.categoryAxis.Br(),this.valueAxis.Br();const g=this.categoryAxis.setVisible(f).zs(),m=this.valueAxis.setVisible(f).zs(r),{labelMarginBeforeCategoryAxisPixels:y}=f?this.dB(o,n,s,r):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Re(g,s,r,{labelMarginBeforeCategoryAxisPixels:y}),this.valueAxis.Re(m);const p=this.categoryAxis.getThickness(),x=_t(g.$d+y,void 0!==p.min?p.min:0,void 0!==p.max?p.max:Ve),A={x:Math.min(this.ED.x.getInnerStart(),this.ED.x.getInnerEnd()),y:Math.min(this.ED.y.getInnerStart(),this.ED.y.getInnerEnd())},S=Math.max(this.ED.x.getInnerStart(),this.ED.x.getInnerEnd()),v=Math.max(this.ED.y.getInnerStart(),this.ED.y.getInnerEnd()),b={x:S-A.x,y:v-A.y};this.Ov.Ee(A),this.Ov.it(b),this.Nv.Ee(A),this.Nv.it(b),super.wp(),this.Qy.Re(!1,this.Lv,void 0);const M=ah.Lp(this.bh,this.Tp);if(this.ED.zi([this.Xt.bottom+this.ka.bottom+("vertical"===this.Ls.nB?x:0),this.Xt.top+this.ka.top+M+("horizontal"===this.Ls.nB?m.$d:0)]),this.ED.Ei([this.Xt.left+this.ka.left+this.Ls.getHeight({x,y:m.$d}),this.Xt.right+this.ka.right]),this.hB.gx({x:this.ED.x.ei(),y:this.ED.y.ei(),width:this.ED.x.ri(),height:this.ED.y.ri()}),this.rp&&this.rp(),this.JD){const t=this.JM.wm(),e="groups"===this.KD?1/(a.length+2*(a.length+1)*this.sB):1-2*this.sB;n.forEach((i=>{const s=this.tB.get(i);if(void 0===s)return;const r=s.category-.5*e,n=s.category+.5*e,o=[this.Ls.toPoint(r,s.valueStart),this.Ls.toPoint(r,s.valueEnd),this.Ls.toPoint(n,s.valueEnd),this.Ls.toPoint(n,s.valueStart)];t.add({Zo:i.Zo,vertices:o,bar:i},{fillStyle:i.Te,strokeStyle:i.Fe})})),t.finishPlot()}s.finishPlot(),r.finishPlot(),this.JD=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.rB.Y(),this.hB.Y(),this.Qy.Y(),super.dispose()}cB(t){const e=this.ZD;e&&t.sort(((i,s)=>e({category:i.category,value:t.reduce(((t,e)=>t+(e.category===i.category&&e.value||0)),0)},{category:s.category,value:t.reduce(((t,e)=>t+(e.category===s.category&&e.value||0)),0)})))}dB(t,e,i,s){let r=0;const n=this.QD,o=this.ND,a=this.valueAxis.getInterval(),h=this.Ls.getWidth({x:this.ED.x.ri(),y:this.ED.y.ri()});if(n&&n.labelFillStyle!==V){const o=n.tickLength+n.labelMargin,l=this.Ls.toPoint(0,1),u={Rd:t.map(((t,i)=>{const s=e.reduce(((e,i)=>i.category!==t?e:e+i.value),0),r=n.formatter(t,s);if(!r)return;const h=i;return void 0!==h?{text:r,position:this.Ls.toPoint(h,this.valueAxis.At.pi(a.start,-o)),alignment:l,rotation:n.labelRotation,sizePixels:this.fB(t,s)}:void 0})),Xu:n.labelFont,At:this.ED},c=u?this.qD?lf(u,h,this.Ls.getWidth):u.Rd:[];c.forEach((t=>{t&&i.add().yr(t.text).Ee(t.position).$a(t.alignment).Jh(t.rotation).Be(n.labelFillStyle).Qh(n.labelFont)})),n.tickStyle!==nt&&0!==n.tickLength&&c.forEach((t=>{if(!t)return;const e=this.Ls.getWidth(t.position);s.add({positions:[this.Ls.toPoint(e,this.valueAxis.At.getInnerStart()),this.Ls.toPoint(e,this.valueAxis.At.pi(a.start,-n.tickLength))]},{lineStyle:n.tickStyle})})),r=c.reduce(((t,e)=>e?Math.max(t,this.Ls.getHeight(e.sizePixels)):t),0)+n.tickLength+n.labelMargin}if(o&&o.labelFillStyle!==V){let t;"after-bar"===o.position?t={Rd:e.map(((t,e)=>{const i=o.formatter(t,t.category,t.value);if(!i)return;const s=this.tB.get(t);return void 0!==s?{text:i,position:this.Ls.toPoint(s.category,this.valueAxis.At.pi(s.valueEnd,o.labelMargin*Math.sign(s.valueEnd))),alignment:this.Ls.toPoint(0,-1*Math.sign(s.valueEnd)),rotation:o.labelRotation,sizePixels:this.AB(t)}:void 0})),Xu:o.labelFont,At:this.ED}:"inside-bar"!==o.position&&"inside-bar-start"!==o.position&&"inside-bar-centered"!==o.position&&"inside-bar-end"!==o.position||(t={Rd:e.map(((t,e)=>{const i=o.formatter(t,t.category,t.value);if(!i)return;const s=this.tB.get(t);if(void 0===s)return;const r="bipolar"===this.OD?Math.sign(s.valueEnd):"negative"===this.OD?-1:1,n=this.Ls.toPoint(0,"inside-bar"===o.position||"inside-bar-end"===o.position?1*r:"inside-bar-centered"===o.position?0:-1*r);return{text:i,position:this.Ls.toPoint(s.category,"inside-bar"===o.position||"inside-bar-end"===o.position?this.valueAxis.At.pi(s.valueEnd,-o.labelMargin*r):"inside-bar-centered"===o.position?(s.valueStart+s.valueEnd)/2:this.valueAxis.At.pi(s.valueStart,o.labelMargin*r)),alignment:n,rotation:o.labelRotation,sizePixels:this.AB(t)}})),Xu:o.labelFont,At:this.ED}),t&&(t?this.qD?lf(t,h,this.Ls.getWidth):t.Rd:[]).forEach((t=>{t&&i.add().yr(t.text).Ee(t.position).$a(t.alignment).Jh(t.rotation).Be(o.labelFillStyle).Qh(o.labelFont).setMouseInteractions(!1)}))}return{labelMarginBeforeCategoryAxisPixels:r}}fB(t,e){if(!this.QD||this.QD.labelFillStyle===V)return{x:0,y:0};const i=this.XD.get(t);if(i)return i;const s=this.QD.formatter(t,e),r=this.cs.Ng.Og(s,this.QD.labelFont,this.QD.labelRotation);return r.isEstimate?this.cs.Ms(!0):this.XD.set(t,r),r}AB(t){if(!this.ND||this.ND.labelFillStyle===V)return{x:0,y:0};const e=this.jD.get(t);if(e)return e;const i=this.cs.Ng.Og(this.ND.formatter(t,t.category,t.value),this.ND.labelFont,this.ND.labelRotation);return i.isEstimate?this.cs.Ms(!0):this.jD.set(t,i),i}GD(){return this.Lv.reduce(((t,e)=>{const i=this.AB(e);return{x:Math.max(t.x,i.x),y:Math.max(t.y,i.y)}}),{x:0,y:0})}$D(){this.JD=!0,this.cs.Ms()}getMinimumSize(){return{x:200,y:200}}}const cf={Disabled:void 0,None:void 0,Ascending:(t,e)=>t.value-e.value,Descending:(t,e)=>e.value-t.value,Alphabetical:(t,e)=>t.category.localeCompare(e.category)},df={...pa,nB:"vertical",UD:-1,YD:1},ff={...xa,nB:"horizontal",UD:1,YD:-1},gf=(t,e,i)=>{const s=[[e.bar]],r=t.valueAxis.getTitle();return r&&s.push([r]),e.subCategory?s.push([e.subCategory,"",{text:Wi(t.valueAxis.formatValue(e.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):s.push({text:Wi(t.valueAxis.formatValue(e.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),s};class mf extends oh{constructor(t,e,i,s,r,n,o){super(t,e,i,e.kp("gaugeChart bg",0),s,e.cs.ts.gaugeChartBackgroundFillStyle,e.cs.ts.gaugeChartBackgroundStrokeStyle,e.cs.ts.gaugeChartTitleFont,e.cs.ts.gaugeChartTitleFillStyle,n),this.iu=this.ts.gaugeChartStartAngle,this.su=this.ts.gaugeChartEndAngle,this.gB={start:0,end:100},this.M=0,this.pB=[],this.yB=this.ts.gaugeChartBarThickness,this.mB=this.ts.gaugeChartValueIndicatorThickness,this.vB=this.ts.gaugeChartNeedleLength,this.SB=this.ts.gaugeChartNeedleThickness,this.xB=this.ts.gaugeChartNeedleFillStyle,this.bB=this.ts.gaugeChartNeedleStrokeStyle,this.MB=this.ts.gaugeChartRoundedEdges,this._B=!0,this.wB=!0,this.CB=!0,this.kB=[],this.TB=[],this.FB=!0,this.IB=!0,this.xy=this.M,this.PB=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.DB=this.ts.gaugeChartBarGradient,this.BB=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.LB=this.ts.gaugeChartTickFont,this.RB=this.ts.gaugeChartValueLabelFont,this.EB=this.ts.gaugeChartValueLabelFillStyle,this.zB=this.ts.gaugeChartUnitLabelFont,this.VB=this.ts.gaugeChartUnitLabelFillStyle,this.OB=this.ts.gaugeChartTickFillStyle,this.NB=this.ts.gaugeChartBarColor,this.GB=this.ts.gaugeChartGlowColor,this.WB=this.ts.gaugeChartGlowColor.getA(),this.UB=1,this.YB=1,this.HB=this.ts.gaugeChartNeedleAlignment,this.$B=!1,this.XB=this.ts.gaugeChartGapBetweenBarAndValueIndicators,this.jB=this.ts.gaugeChartBarStrokeStyle,this.ZB=!1,this.cs.Zn(fa.yf),this.bh.yr("Gauge Chart"),this.Cp(r,this.mg),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.QB=this.NB,this.JB=this.GB,this.KB=T(0,0,0,0),this.qB=this.hs.kg(),this.tL=this.hs.kg().bs(this.ts.effectsText),this.iL=this.lp.lc(this.mg).De(this.jB).setMouseInteractions(!1),this.sL=this.lp.nd(this.mg).cu(0).Ye(360).gu(0).De(nt).setMouseInteractions(!1),this.eL=this.Fp.Ue(this.mg).We(this.ts.gaugeChartNeedleStrokeStyle).setMouseInteractions(!1),this.hL=this.Fp.Ue(this.mg).We(new rs({thickness:this.SB,fillStyle:this.xB})).setMouseInteractions(!1),this.rL=this.Fp.Gr(this.mg).Qh(this.RB).Be(this.EB).setMouseInteractions(!1),this.Yd=this.Fp.Gr(this.mg).Qh(this.zB).Be(this.VB).yr("").setMouseInteractions(!1),this.nL=this.lp.Gr(this.mg).Qh(this.LB).Be(this.OB).setMouseInteractions(!1),this.oL=this.lp.Gr(this.mg).Qh(this.LB).Be(this.OB).setMouseInteractions(!1),this.qB.gs([this.iL]),this.tL.gs([this.rL,this.Yd,this.nL,this.oL]),this.aL(),this.onResize((()=>{this.$B=!0}))}aL(){this.hL.We((t=>t.setThickness(this.SB))),this.eL.We((t=>t.setThickness(2*this.bB.getThickness()+this.SB)))}setAnimationsEnabled(t){return this.dh=t,this.IB=t,this.FB=t,this}setInterval(t,e){return this.gB={start:t,end:e},this.$B=!0,this.cs.Ms(),this}getInterval(){return this.gB}setTickFillStyle(t){return this.OB="function"==typeof t?t(this.OB):t,this.TB.forEach((e=>{e.start.Be(t),e.end.Be(t)})),this.nL.Be(t),this.oL.Be(t),this.$B=!0,this.cs.Ms(),this}getTickFillStyle(){return this.OB}setTickFont(t){return this.LB="function"==typeof t?t(this.LB):t,this.TB.forEach((e=>{e.start.Qh(t),e.end.Qh(t)})),this.nL.Qh(t),this.oL.Qh(t),this.$B=!0,this.cs.Ms(),this}getTickFont(){return this.LB}setTickFormatter(t){return this.PB=t,this.$B=!0,this.cs.Ms(),this}getTickFormatter(){return this.PB}setValueLabelFillStyle(t){return this.EB="function"==typeof t?t(this.EB):t,this.rL.Be(t),this.$B=!0,this.cs.Ms(),this}getValueLabelFillStyle(){return this.rL.Xh()}setValueLabelFont(t){return this.RB="function"==typeof t?t(this.RB):t,this.rL.Qh(t),this.$B=!0,this.cs.Ms(),this}getValueLabelFont(){return this.rL.Zh()}setValueFormatter(t){return this.BB="string"==typeof t?e=>t:t,this.$B=!0,this.cs.Ms(),this}getValueLabel(){return this.rL.Cr()||this.BB}setUnitLabelFillStyle(t){return this.VB="function"==typeof t?t(this.VB):t,this.Yd.Be(t),this.$B=!0,this.cs.Ms(),this}getUnitLabelFillStyle(){return this.Yd.Xh()}setUnitLabelFont(t){return this.zB="function"==typeof t?t(this.zB):t,this.Yd.Qh(t),this.$B=!0,this.cs.Ms(),this}getUnitLabelFont(){return this.Yd.Zh()}setUnitLabel(t){return this.Yd.yr(t),this.$B=!0,this.cs.Ms(),this}getUnitLabel(){return this.Yd.Cr()}setNeedleFillStyle(t){return this.xB="function"==typeof t?t(this.xB):t,this.hL.We((e=>e.setFillStyle(t))),this.$B=!0,this.cs.Ms(),this}getNeedleFillStyle(){return this.hL.mu().getFillStyle()}setNeedleThickness(t){return this.SB=t,this.aL(),this.$B=!0,this.cs.Ms(),this}getNeedleThickness(){return this.SB}setNeedleStrokeStyle(t){return this.bB="function"==typeof t?t(this.bB):t,this.eL.We(t),this.aL(),this.$B=!0,this.cs.Ms(),this}getNeedleStrokeStyle(){return this.eL.mu()}setNeedleLength(t){return this.vB=t,this.$B=!0,this.cs.Ms(),this}getNeedleLength(){return this.vB}setBarColor(t){return this.NB=t,this.$B=!0,this.cs.Ms(),this}getBarColor(){return this.QB}setBarGradient(t){return this.DB=t,this.$B=!0,this.cs.Ms(),this}getBarGradient(){return this.DB}setBarStrokeStyle(t){return this.jB="function"==typeof t?t(this.jB):t,this.iL.De(t),this.$B=!0,this.cs.Ms(),this}getBarStrokeStyle(){return this.iL.mo()}setBarThickness(t){return this.yB=t,this.$B=!0,this.cs.Ms(),this}getBarThickness(){return this.yB}setAngleInterval(t,e){return Math.abs(t-e)>360&&(e=t<e?t+360:t-360),this.iu=t,this.su=e,this.$B=!0,this.cs.Ms(),this}getAngleInterval(){return{start:this.iu,end:this.su}}setValue(t){return this.ZB&&this.cs.Zn(fa.Tf),this.ZB=!0,this.M=t,this.FB||(this.xy=this.M),this.$B=!0,this.cs.Ms(),this}getValue(){return this.M}setValueAnimation(t,e=1){return this.FB=t,this.UB=Math.max(0,e),this.$B=!0,this.cs.Ms(),this}setColorAnimation(t,e=1){return this.IB=t,this.YB=Math.max(0,e),this.$B=!0,this.cs.Ms(),this}setRoundedEdges(t){return this.MB=t,this.$B=!0,this.cs.Ms(),this}getRoundedEdges(){return this.MB}setValueIndicators(t){return this.pB=t,this.kB.forEach((t=>{t.dispose()})),this.kB.length=0,this.TB.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.TB.length=0,this.pB.forEach((t=>{const e=this.lp.lc(this.mg).De(nt).Be(new U({color:t.color})).setMouseInteractions(!1);this.kB.push(e);const i=this.lp.Gr(this.mg).Qh(this.LB).Be(this.OB).setMouseInteractions(!1),s=this.lp.Gr(this.mg).Qh(this.LB).Be(this.OB).setMouseInteractions(!1);this.TB.push({start:i,end:s})})),this.qB.gs([this.iL,...this.kB]),this.tL.gs([this.rL,this.Yd,this.nL,this.oL,...this.TB.map((t=>[t.start,t.end])).flat()]),this.$B=!0,this.cs.Ms(),this}getValueIndicators(){return this.pB}setValueIndicatorThickness(t){return this.mB=t,this.$B=!0,this.cs.Ms(),this}getValueIndicatorThickness(){return this.mB}setAutomaticBarColoring(t){return this.CB=!!t,this.$B=!0,this.cs.Ms(),this}getAutomaticBarColoring(){return this.CB}setGlowColor(t){return void 0===t?(this._B=!1,this.JB=void 0):"object"==typeof t&&"auto"in t?(this.wB=t.auto,t.auto&&(this.JB=void 0),void 0!==t.alpha&&(this.WB=t.alpha),this._B=!0):(this.JB=t,this.WB=t.getA(),this.wB=!1,this._B=!0),this.$B=!0,this.cs.Ms(),this}getAutomaticGlowColoring(){return this.wB}setNeedleAlignment(t){return this.HB=t,this.$B=!0,this.cs.Ms(),this}getNeedleAlignment(){return this.HB}setGapBetweenBarAndValueIndicators(t){return this.XB=t,this.$B=!0,this.cs.Ms(),this}getGapBetweenBarAndValueIndicators(){return this.XB}setBarEffect(t){return this.qB.bs(t),this.cs.Ms(),this}getBarEffect(){return this.qB._s()}setLabelEffect(t){return this.tL.bs(t),this.cs.Ms(),this}getLabelEffect(){return this.tL._s()}Re(t){var i;if(super.Re(t),ah.Rp(this.bh,this.Tp),super.wp(),this.xy!==this.M){if(this.FB){const e=5e-4*t,i=.003*t,s=Math.sign(this.M-this.xy);this.xy=this.xy+e*s+i*this.UB*(this.M-this.xy),s!==Math.sign(this.M-this.xy)?this.xy=this.M:this.cs.Ms(!0)}else this.xy=this.M;this.$B=!0}const s=this.pB.find((t=>this.xy>=t.start&&this.xy<=t.end));if(this.QB=this.CB&&s?s.color:this.NB,this.IB){if(this.KB!==this.QB){const e=this.KB.getR(),i=this.KB.getG(),s=this.KB.getB(),r=this.QB.getR(),n=this.QB.getG(),o=this.QB.getB(),a=Math.sign(r-e),h=Math.sign(n-i),l=Math.sign(o-s),u=.005*t,c=.003*t;this.KB=T(e+u*a+c*this.YB*(r-e),i+u*h+c*this.YB*(n-i),s+u*l+c*this.YB*(o-s));const d=Math.abs(r-this.KB.getR()),f=Math.abs(n-this.KB.getG()),g=Math.abs(o-this.KB.getB());d<1&&f<1&&g<1?this.KB=this.QB:this.cs.Ms(!0),this.$B=!0}}else this.KB=this.QB;if(this.$B){let t=Ve,r=ze,n=Ve,o=ze;if(new Array(100).fill(0).forEach(((e,i,s)=>{const a=this.iu+i/s.length*(this.su-this.iu),h=Math.sin(a*Math.PI/180),l=Math.cos(a*Math.PI/180);h<t&&(t=h),h>r&&(r=h),l<n&&(n=l),l>o&&(o=l)})),this.DB?this.iL.Be(new J({stops:[{offset:0,color:w("#000000")},{offset:1,color:this.KB}],position:{x:.5,y:.5}})):this.iL.Be(new U({color:this.KB})),this._B){const t=this.wB&&s?this.KB:null!==(i=this.JB)&&void 0!==i?i:this.GB;this.sL.Be(new J({stops:[{offset:0,color:t.setA(this.WB)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:e.GradientExtent.farthestSide}))}else this.sL.Be(V);const a=this.PB(this.gB.start),h=this.PB(this.gB.end);let l=0,u=0;const c=this.cs.Ng.Og(a,this.nL.Zh(),this.nL.Kh()),d=this.cs.Ng.Og(h,this.oL.Zh(),this.oL.Kh());c.x>l&&(l=c.x),c.y>u&&(u=c.y),d.x>l&&(l=d.x),d.y>u&&(u=d.y),this.TB.forEach(((t,e)=>{if(e>=this.pB.length)return;const i=this.pB[e],s=this.PB(i.start),r=this.PB(i.end),n=this.cs.Ng.Og(s,t.start.Zh(),t.start.Kh()),o=this.cs.Ng.Og(r,t.end.Zh(),t.end.Kh());n.x>l&&(l=n.x),n.y>u&&(u=n.y),o.x>l&&(l=o.x),o.y>u&&(u=o.y)}));const f=this.pB.length>0?this.mB:0,g=this.mg.getInnerIntervalPixels(),m=ah.Lp(this.bh,this.Tp),y={x:g.x,y:g.y-m},p={x:.5*y.x,y:.5*y.y},x=f+2*this.XB+this.yB/2,A=l+x,S=u+x,v=S+m,b=g.y-(v+S),M=g.x-(A+A),T=.5*Math.max(this.yB/2,b<M?b:M),C=.5*T,k=(t+r)*C,E=(n+o)*C,R={x:p.x-E,y:p.y-k},I={x:p.x-.5*E,y:p.y-.5*k};this.sL.Ee(p).du(.5*Math.min(y.x,g.y)),this.rL.Ee(I).yr(this.BB(this.xy)),this.Yd.Ee({x:I.x,y:I.y-this.rL.ed().y-this.Yd.ed().y/4});const _=xf(this.gB,this.iu,this.su,this.xy,R,T+this.HB*(this.vB/2+this.yB/2)),F=_.angle*(Math.PI/180),D=.5*this.vB,B=Math.cos(F),P=Math.sin(F);this.hL.He({x:_.x+D*B,y:_.y+D*P}).Ye({x:_.x-D*B,y:_.y-D*P}),this.eL.He({x:_.x+D*B,y:_.y+D*P}).Ye({x:_.x-D*B,y:_.y-D*P});const L=yf(R,T,this.iu,this.su,this.yB,this.MB,!1,!1);this.iL.Cl(L).ta({min:{x:R.x-T,y:R.y-T},max:{x:R.x+T,y:R.y+T}});const z=R.y+T,N=R.y-T,O=R.x+T,Y=R.x-T,[G,H]=this.gB.start<this.gB.end?[this.gB.start,this.gB.end]:[this.gB.end,this.gB.start],W=T+.5*this.yB+f/2+this.XB,K=W+f/2;this.pB.forEach(((t,e)=>{var i,s;const r=t.start>=G&&t.end<=H;this.kB[e].setVisible(r),this.TB[e].start.setVisible(r),this.TB[e].end.setVisible(r);const n=xf(this.gB,this.iu,this.su,t.start,R,K),o=xf(this.gB,this.iu,this.su,t.end,R,K),a=yf(R,W,n.angle,o.angle,this.mB,this.MB,!(0===e),!(e===this.pB.length-1));this.kB[e].Cl(a);const h=this.gB.start===t.start||this.gB.end===t.start,l=this.gB.start===t.end||this.gB.end===t.end||this.pB.some((e=>e.start===t.end&&e!==t));this.TB[e].start.Ee({x:n.x,y:n.y}).$a({x:Math.min(1,Math.max(-1,2*(n.x-O)/(Y-O)-1)),y:Math.min(1,Math.max(-1,2*(n.y-z)/(N-z)-1))}).yr(null!==(i=t.startLabel)&&void 0!==i?i:h?"":this.PB(t.start)),this.TB[e].end.Ee({x:o.x,y:o.y}).$a({x:Math.min(1,Math.max(-1,2*(o.x-O)/(Y-O)-1)),y:Math.min(1,Math.max(-1,2*(o.y-z)/(N-z)-1))}).yr(null!==(s=t.endLabel)&&void 0!==s?s:l?"":this.PB(t.end))}));const X=this.pB.some((t=>t.start<t.end?this.gB.start>=t.start&&this.gB.start<=t.end:this.gB.start<=t.start&&this.gB.start>=t.end)),j=xf(this.gB,this.iu,this.su,this.gB.start,R,X?K:W-this.XB);this.nL.Ee({x:j.x,y:j.y}).$a({x:Math.min(1,Math.max(-1,2*(j.x-O)/(Y-O)-1)),y:Math.min(1,Math.max(-1,2*(j.y-z)/(N-z)-1))}).yr(a);const $=this.pB.some((t=>t.start<t.end?this.gB.end>=t.start&&this.gB.end<=t.end:this.gB.end<=t.start&&this.gB.end>=t.end)),Z=xf(this.gB,this.iu,this.su,this.gB.end,R,$?K:W-this.XB);this.oL.Ee({x:Z.x,y:Z.y}).$a({x:Math.min(1,Math.max(-1,2*(Z.x-O)/(Y-O)-1)),y:Math.min(1,Math.max(-1,2*(Z.y-z)/(N-z)-1))}).yr(h),this.$B=!1}}getMinimumSize(){return{x:150,y:150}}ef(){return[this]}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setMouseInteractions(!1),ce(t,this.ts,i,{fill:new U({color:this.getBarColor()})}),this}}const yf=(t,e,i,s,r,n=!0,o=!0,a=!0)=>{const h=[],l=.5*r,u=i>s,c=Math.sign(i-s),d=-1*c;if(n){const t=l/(2*Math.PI*e)*360+.1;o&&(i+=t*d),a&&(s+=t*c)}else i+=.1*d,s+=.1*c;const f=pf(t,e+l,i,s,u);if(h.push(...f),n){const r={x:t.x+e*Math.cos(s*(Math.PI/180)),y:t.y+e*Math.sin(s*(Math.PI/180))};let n;n=i>s?pf(r,l,s+180,s+360,u):pf(r,l,s-180,s-360,u),h.push(...n)}const g=pf(t,e-l,s,i,!u);if(h.push(...g),n){const r={x:t.x+e*Math.cos(i*(Math.PI/180)),y:t.y+e*Math.sin(i*(Math.PI/180))};let n;n=i>s?pf(r,l,i-180,i-360,u):pf(r,l,i+180,i+360,u),h.push(...n)}return h},pf=(t,e,i,s,r)=>{i<s&&([i,s]=[s,i]);const n=[],o=r?-1:1,a=r?t=>t>s:t=>t<i;for(let h=r?i:s;a(h);h+=o){const i=h*(Math.PI/180),s=t.x+e*Math.cos(i),r=t.y+e*Math.sin(i);n.push({x:s,y:r})}const h=(r?s:i)*(Math.PI/180),l=t.x+e*Math.cos(h),u=t.y+e*Math.sin(h);return n.push({x:l,y:u}),n},xf=(t,e,i,s,r,n)=>{const[o,a]=t.start<t.end?[t.start,t.end]:[t.end,t.start],h=Math.max(o,Math.min(a,s)),l=t.start<t.end?i-e:e-i,u=t.start<t.end?e+(h-t.start)/(t.end-t.start)*l:e-(h-t.start)/(t.end-t.start)*l,c=u*(Math.PI/180);return{x:r.x+n*Math.cos(c),y:r.y+n*Math.sin(c),angle:Math.round(u)}},Af=(t,e)=>e?t.x:t.y,Sf=(t,e,i,s)=>1===e&&s===(i?t.columnIndex:t.rowIndex)||-1===e&&s===(i?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),vf=(t,e,i,s,r,n)=>{const o=e.length,a=Math.sign(s),h=[],l=e.reduce(((t,e)=>t+e));for(let t=1;t<=o-1;t+=1)h.push(Af(r,n)*e.slice(0,t).reduce(((t,e)=>t+e),0)/l);const u=h.map((t=>0));let c=h[i-1]+s;for(let e=i;e>0&&e<o;e+=a){const s=t.filter((t=>Sf(t,a,n,e))).reduce(((t,e)=>Math.max(t,Af(e.panel.getMinimumSize()||{x:0,y:0},n))),20),o=h[e-1];if(1===a&&c>Af(r,n)-s||-1===a&&c<0+s){u.fill(0);break}if(e!==i&&(1===a?o>c:o<c))break;u[e-1]=c-o,c+=s*a}const d=u.map(((t,e)=>h[e]+t)),f=d.map(((t,e)=>(t-(e>0?d[e-1]:0))/Af(r,n)));return f.push(1-f.reduce(((t,e)=>t+e),0)),f};class bf{constructor(t,e,i,s,n){this.coordsRelative="relative",this.coordsClient="client",this.ji=!1,this.sP=new Array,this.R=new r.Eventer,this.lL=[],this.sp=[],this.uL=void 0,this.cL=!0,this.dL=!0,this.fL=!0,this.np=!1,this.AL=!0,this.gL=()=>{this.AL=!0,this.cs.Ms()},this.pL=[],this.onInViewChange=t=>this.R.on("inViewChange",t),this.offInViewChange=t=>this.R.off(t,"inViewChange"),this.yL=t=>{for(let e=0;e<this.sP.length;e+=1)if(this.sP[e].panel===t){this.sP.splice(e,1),this.cL=!0,this.cs.Ms();break}},this.mL=t=>{const e=this.lL.indexOf(t);e>=0&&this.lL.splice(e,1)},this.cp=t=>{const e=this.sp.indexOf(t);e>=0&&this.sp.splice(e,1)},this.vL=(t,e,i,s,r)=>{if(this.SL(e,i,s,r)){const n={panel:t,columnIndex:e,rowIndex:i,columnSpan:s,rowSpan:r};return this.sP.push(n),this.xL(n),this.cL=!0,t}throw new pt("Out of dashboard range.")},this.bL=e.numberOfRows,this.ML=e.numberOfColumns,this.SA=t,this._L=e,this.wL=s;const o=this.ML*this.bL;this.CL={x:new Rd(new Array(this.ML).fill(1)),y:new Rd(new Array(this.bL).fill(1))},this.ts=i.ts,this.kL=this.ts.dashboardSplitterStyle,this.dh=!1!==(null==e?void 0:e.animationsEnabled),this.TL=Ed(i,o),this.FL=i.UF("dashboard splitters",500001),this.AM=()=>this.TL.WF(),this.yp=this.TL.YF(),this.hs=i.hs.rs(this,{IL:{}}),this.hs.IL.bs(this.ts.effectsDashboardSplitters);const a=i.oi();this.uiScale=lt.d2({scaleXYConstructor:Vi}).Vi(0,100).Oi(0,100).it(a),this.mg=lt.d2({scaleXYConstructor:Vi}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).it(a),this.PL=i.DL.bind(i),this.BL=i.LL.bind(i),this.RL=i.EL.bind(i),this.zL=i.VL.bind(i),this.do=i.do.bind(i),this.Ao=i.Ao.bind(i),this.engine=i.fp,this.cs=i.Ap,i.Lo((()=>this.gL())),i.Ms();const h=i.zo((t=>{this.np=t,this.R.emit("inViewChange",this,t)}));this.bp=i.Vo.bind(i,h),this.OL(),this.setAnimationsEnabled(this.dh);const l=(t=>({on:t.on.bind(t,"resize"),off:t.off.bind(t)}))(this.R);this.createChartXY=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new wc(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,e,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createSpiderChart=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new Cd(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,e,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPolarChart=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new Nc(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,e,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPieChart=t=>{const e=Mf(t,this._L,this.dh),i=e&&e.type?e.type:Gh;return this.vL(new i(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createGaugeChart=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new mf(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createFunnelChart=t=>{const e=Mf(t,this._L,this.dh),i=e&&e.type?e.type:Qc;return this.vL(new i(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPyramidChart=t=>{const e=Mf(t,this._L,this.dh),i=t&&t.type?t.type:ud;return this.vL(new i(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createUIPanel=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new rh(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createLegendBoxPanel=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new El(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createZoomBandChart=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new _c(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,e,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createMapChart=t=>{const e=Mf(t,this._L,this.dh);return this.vL(new Ll(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,e,l),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createChart3D=t=>{const e=Mf(t,this._L,this.dh),i=new wl(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l,e);return this.vL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createDataGrid=t=>{const e=Mf(t,this._L,this.dh),i=new qd(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l);return this.vL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createBarChart=t=>{const e=Mf(t,this._L,this.dh),i=new uf(this.SA,this.TL.HF(this.NL(t.columnIndex,t.rowIndex)),this.GL(e,this.CL),this.yL,n,l,e);return this.vL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)}}NL(t,e){return t+e*this.ML}GL(t,e){return{d1:i=>new i.scale1DConstructor("x"===i.dimension?t.columnIndex:t.rowIndex,"x"===i.dimension?t.columnSpan:t.rowSpan,"x"===i.dimension?this.ML:this.bL,"x"===i.dimension?e.x:e.y),d2:i=>(new i.scaleXYConstructor).ct({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.ML,y:this.bL},e),d3:()=>new at({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.ML,y:this.bL},e)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.PL(t[0]),this.BL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.RL(t[0]),this.zL(t[1]),this}getWidth(){return this.do()}getHeight(){return this.Ao()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.FL.Ms(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.FL.Ms(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.ts}setSplitterStyle(t){const e=this.kL;return this.kL="function"==typeof t?t(this.kL):t,this.WL(e),this}getSplitterStyle(){return this.kL}setSplitterEffect(t){return this.hs.IL.bs(t),this.cs.Ms(),this}getSplitterEffect(){return this.hs.IL._s()}setAnimationHighlight(t){return this.fL=t,this.pL.forEach((e=>this.cs.us.Ts(e.line,t))),this}getAnimationHighlight(){return this.fL}WL(t){for(const t of this.pL)t.line.We(this.kL);this.OL()}setColumnWidth(t,e){const i=this.CL.x.C();return t>=0&&t<i.length&&(i[t]=e,this.CL.x._(i)),this.gL(),this}getColumnWidth(t){const e=this.CL.x.C();if(t>=e.length)throw new pt("Column index is out of dashboard range.");return e[t]}setRowHeight(t,e){const i=this.CL.y.C();return t>=0&&t<i.length&&(i[Math.abs(i.length-1-t)]=e,this.CL.y._(i)),this.gL(),this}getRowHeight(t){const e=this.CL.y.C();if(t>=e.length)throw new pt("Row index is out of dashboard range.");return e[Math.abs(e.length-1-t)]}getSizePixels(){return this.mg.getInnerIntervalPixels()}onResize(t){return this.R.on("resize",t)}offResize(t){return this.R.off(t,"resize")}UL(t,e,i){if(i&&Math.abs(t.x)>0)this.YL(e,t.x);else{if(i||!(Math.abs(t.y)>0))return;this.HL(e,t.y)}for(const t of this.sP)t.panel.K();this.gL()}HL(t,e){const i=vf(this.sP,this.CL.y.C(),t,e,this.mg.oi(),!1);this.CL.y._(i),this.gL()}YL(t,e){const i=vf(this.sP,this.CL.x.C(),t,e,this.mg.oi(),!0);this.CL.x._(i),this.gL()}$L(){this.pL.forEach((t=>t.line.dispose())),this.pL.length=0;for(let t=1;t<=this.ML-1;t+=1)for(let e=0;e<=this.bL-1;e+=1)if(void 0!==this.sP.find((i=>je(e,i.rowIndex,i.rowIndex+i.rowSpan-1)&&(t===i.columnIndex||t===i.columnIndex+i.columnSpan)))){const i=Ji(new es((()=>{this.XL(t)}),((e,i,s,r,n)=>{this.UL(r,t,!0),Qt(n)}),(()=>{this.jL(t)}))),s=this.FL.Ue(this.mg).We(this.kL).setMouseEnterEventHandler((()=>{this.XL(t)})).setMouseLeaveEventHandler((()=>{this.jL(t)})).setMouseDragEventHandler(((e,i,s,r,n)=>{this.UL(n,t,!0),Qt(i)})).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.cs.us.ls(s,(t=>s.ds(t)),{animationEnabled:this.fL}),this.pL.push({row:e,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.bL-1;t+=1)for(let e=0;e<=this.ML-1;e+=1)if(void 0!==this.sP.find((i=>je(e,i.columnIndex,i.columnIndex+i.columnSpan-1)&&(t===i.rowIndex||t===i.rowIndex+i.rowSpan)))){const i=Ji(new es((()=>{this.ZL(t)}),((e,i,s,r,n)=>{this.UL(r,t,!1),Qt(n)}),(()=>{this.QL(t)}))),s=this.FL.Ue(this.mg).We(this.kL).setMouseEnterEventHandler((()=>{this.ZL(t)})).setMouseLeaveEventHandler((()=>{this.QL(t)})).setMouseDragEventHandler(((e,i,s,r,n)=>{this.UL(n,t,!1),Qt(i)})).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.cs.us.ls(s,(t=>s.ds(t)),{animationEnabled:this.fL}),this.pL.push({row:t,column:e,line:s,alignment:"horizontal"})}this.hs.IL.gs(this.pL.map((t=>t.line)))}JL(){const t=this.mg.oi(),e=this.CL.x.C(),i=e.reduce(((t,e)=>t+e)),s=this.CL.y.C(),r=s.reduce(((t,e)=>t+e));this.pL.forEach((n=>{if("vertical"===n.alignment){const o=u(t.x*e.slice(0,n.column).reduce(((t,e)=>t+e),0)/i,t.y*s.slice(0,n.row).reduce(((t,e)=>t+e),0)/r),a=u(o.x,t.y*s.slice(0,n.row+1).reduce(((t,e)=>t+e),0)/r);n.line.He(o).Ye(a)}else{const o=u(t.x*e.slice(0,n.column).reduce(((t,e)=>t+e),0)/i,t.y*s.slice(0,n.row).reduce(((t,e)=>t+e),0)/r),a=u(t.x*e.slice(0,n.column+1).reduce(((t,e)=>t+e),0)/i,o.y);n.line.He(o).Ye(a)}}))}XL(t){this.pL.forEach((e=>{"vertical"===e.alignment&&e.column===t&&(this.cs.us.ks(e.line,1),this.FL.KL(e.line))})),this.uL=this.engine.setMouseStyle(e.MouseStyles.ResizeColumn),this.cs.Ms()}ZL(t){this.pL.forEach((e=>{"horizontal"===e.alignment&&e.row===t&&(this.cs.us.ks(e.line,1),this.FL.KL(e.line))})),this.uL=this.engine.setMouseStyle(e.MouseStyles.ResizeRow),this.cs.Ms()}jL(t){this.pL.forEach((e=>{"vertical"===e.alignment&&e.column===t&&this.cs.us.ks(e.line,0)})),this.engine.restoreMouseStyle(this.uL),this.cs.Ms()}QL(t){this.pL.forEach((e=>{"horizontal"===e.alignment&&e.row===t&&this.cs.us.ks(e.line,0)})),this.engine.restoreMouseStyle(this.uL),this.cs.Ms()}setAnimationsEnabled(t){return this.dh=t,this.getCells().filter((t=>t.panel instanceof oh)).forEach((e=>e.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.dh),this}getAnimationsEnabled(){return this.dh}getCells(){return this.sP.slice()}dispose(){return this.ji||(this.bp&&this.bp(),this.sP.slice().forEach((t=>t.panel.dispose())),this.lL.slice().forEach((t=>t.dispose())),this.sp.slice().forEach((t=>t.dispose())),this.ji=!0,this.wL(),this.R.emit("dispose",this)),this}isDisposed(){return this.ji}onDispose(t){return this.R.on("dispose",t)}offDispose(t){return this.R.off(t,"dispose")}getIsInView(){return this.np}saveToFile(t,e,i){return qa(this.engine,t,e,i),this}qL(t){if(this.AL){const t=this.cs.At.oi(),e=t.x,i=t.y;this.uiScale.it(e,i),this.mg.it(e,i);const s=this.uiScale.getInnerIntervalPixels();this.mg.Vi(0,s.x).Oi(0,s.y),this.R.emit("resize",this,s.x,s.y,e,i),this.dL=!0}this.cL&&(this.$L(),this.cL=!1,this.dL=!0),this.dL&&(this.JL(),this.dL=!1);for(const e of this.sP)e.panel.Re(t);return this.lL.forEach((t=>t.zs())),this.lL.forEach((t=>t.Re())),this.sp.forEach((t=>t.zs())),this.sp.forEach((t=>t.Re())),this.AL=!1,this}J(){for(const t of this.sP)t.panel.J();return this.mg.x.J(),this.mg.y.J(),this.uiScale.x.J(),this.uiScale.y.J(),this}K(){for(const t of this.sP)t.panel.K();return this.mg.x.K(),this.mg.y.K(),this.uiScale.x.K(),this.uiScale.y.K(),this}translateCoordinate(t,e,i){return eh(t,e,i,this.mg,this.cs)}addUIElement(t=Wo,e=this.uiScale){e=th(e,this.mg);const i=Ja(t,this.AM(),this.uiScale,e,this.mL,this.ts);return this.lL.push(i),i}addLegendBox(t=sa,i=this.uiScale){i=th(i,this.mg);const s=Ja(t,this.yp,this.uiScale,i,this.cp,this.ts);return s.setDraggingMode(e.UIDraggingModes.notDraggable),this.sp.push(s),s}getLegendBoxes(){return this.sp}SL(t,e,i,s){return e>=0&&t>=0&&e+s<=this.bL&&t+i<=this.ML}xL(t){const e=this.kL,i=e===nt?0:e.getThickness()/2,s={left:t.columnIndex>0?i:0,top:t.rowIndex<this.bL-1?i:0,right:t.columnIndex<this.ML-1?i:0,bottom:t.rowIndex>0?i:0};t.panel.Or(s)}OL(){this.uiScale.x.si([0,0]),this.uiScale.y.si([0,0]),this.mg.x.si([0,0]),this.mg.y.si([0,0]);for(const t of this.sP)this.xL(t);this.cs.Ms()}}const Mf=(t,e,i)=>{const s={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:i};var r,n;return s.rowIndex=(r=s.rowIndex,n=s.rowSpan,e.numberOfRows-(r+n)),s},Tf={XY:lc,Spider:Mh,BarChart:Th,Map:Eh,Polar:kh,D3:Tl},wf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},Cf={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},kf={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},Ef={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},Rf={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},If={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},Curaçao:{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},_f={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},Ff={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},Df={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},Bf={World:If,USA:_f,NorthAmerica:Ff,SouthAmerica:Df,Canada:Ef,Europe:Rf,Asia:Cf,Africa:wf,Australia:kf},Pf=(t,e)=>Math.abs(t)+Math.abs(e);function Lf(t,e){const i=t.reduce(Pf,0),s=(r=t,Math.max(...r.map((t=>t))));var r;const n=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(e**2*s/i**2,i**2/(e**2*n))}const Vf=({height:t,width:e})=>t>e?{value:e,vertical:!1}:{value:t,vertical:!0},zf=({data:t,dimensions:e})=>{const{x:i,y:s,width:r,height:n}=e,o=t.map((t=>t.value)).reduce(Pf,0),a=t.map((t=>t.animatedValue)).reduce(Pf,0),h=t.map((t=>t.animatedValue*n*r/a)),l=h.reduce(((t,e)=>t+e),0),u=h.map((t=>t/l*100)),c=h.filter(((t,e)=>u[e])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:o,animatedValue:a,x:i,y:s,width:r,height:n,nodeIndex:-1,userNode:{name:"Main Rectangle",value:o}};if(1===t.length){const i={...t[0],x:e.x,y:e.y,width:e.width,height:e.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(i)}else Of(c,Vf(d).value,t,d);return d.children},Nf=(t,e,i,s,r)=>{const n=t.reduce(Pf,0)/e;t.forEach(((t,e)=>{const o=Math.abs(t)/n,{x:a,y:h,children:l}=r,u=s[l.length],c={...u,x:a,y:h,width:i?n:o,height:i?o:n,userNode:{...u.userNode,value:u.value}};i?r.y-=o:r.x+=o,l.push(c)})),i?(r.x+=n,r.y+=e,r.width-=n):(r.x-=e,r.y-=n,r.height-=n)},Of=(t,e,i,s)=>{const r=[{children:t,width:e,row:[]}];for(;r.length>0;){const t=r.pop();if(!t)continue;const{children:e,width:n,row:o}=t;let a=0;const h=[...o];for(;a<e.length;){const t=[...h,e[a]],o=Lf(h,n),l=Lf(t,n);if(!(0===h.length||o>l)){Nf(h,n,Vf(s).vertical,i,s),r.push({children:e.slice(a),width:Vf(s).value,row:[]});break}h.push(e[a]),a+=1}a===e.length&&Nf(h,n,Vf(s).vertical,i,s)}};class Uf extends oh{constructor(t,i,s,r,n,o,a){if(super(t,i,s,i.kp("treeMapChart bg",0),r,i.cs.ts.treeMapChartBackgroundFillStyle||i.cs.ts.chartXYSeriesBackgroundFillStyle,i.cs.ts.treeMapChartBackgroundStrokeStyle||i.cs.ts.chartXYBackgroundStrokeStyle,i.cs.ts.treeMapChartTitleFont||i.cs.ts.chartXYTitleFont,i.cs.ts.treeMapChartTitleFillStyle||i.cs.ts.chartXYTitleFillStyle,a),this.tR=new Map,this.iR=[],this.sR={},this.eR=p([]),this.ky={speed:1},this.hR=Ve,this.rR=!0,this.nR="Go Back",this.oR=[],this.aR=this.ts.treeMapChartPathLabelFillStyle||this.ts.uiTextFillStyle,this.lR=this.ts.treeMapChartPathLabelFont||this.ts.uiTextFont,this.uR=this.ts.treeMapChartLabelHeaderFillStyle||this.ts.uiTextFillStyle,this.cR=this.ts.treeMapChartLabelHeaderFont||this.ts.uiTextFont,this.dR=this.ts.treeMapChartLabelFillStyle||this.ts.uiTextFillStyle,this.fR=this.ts.treeMapChartLabelFont||this.ts.uiTextFont,this.$i=!0,this.Ux=!0,this.AR=!1,this.gR=this.ts.treeMapChartParentColor||R,this.pR=this.ts.treeMapChartNodeStrokeStyle||this.ts.uiBackgroundStrokeStyle,this.onNodeMouseEnter=t=>this.R.on("mouseEnter",t),this.onNodeMouseLeave=t=>this.R.on("mouseLeave",t),this.onNodeMouseClick=t=>this.R.on("mouseClick",t),this.onNodeMouseDoubleClick=t=>this.R.on("mouseDoubleClick",t),this.onNodeMouseDown=t=>this.R.on("mouseDown",t),this.onNodeMouseUp=t=>this.R.on("mouseUp",t),this.onNodeMouseMove=t=>this.R.on("mouseMove",t),this.offNodeMouseEnter=t=>this.R.off(t,"mouseEnter"),this.offNodeMouseLeave=t=>this.R.off(t,"mouseLeave"),this.offNodeMouseClick=t=>this.R.off(t,"mouseClick"),this.offNodeMouseDoubleClick=t=>this.R.off(t,"mouseDoubleClick"),this.offNodeMouseDown=t=>this.R.off(t,"mouseDown"),this.offNodeMouseUp=t=>this.R.off(t,"mouseUp"),this.offNodeMouseMove=t=>this.R.off(t,"mouseMove"),this.offNodeMouseDragStart=t=>this.R.off(t,"mouseDragStart"),this.offNodeMouseDrag=t=>this.R.off(t,"mouseDrag"),this.offNodeMouseDragStop=t=>this.R.off(t,"mouseDragStop"),this.offNodeMouseWheel=t=>this.R.off(t,"mouseWheel"),this.$x=(t,e,i,s,r)=>{this.cs.Ms(),this.AR=!0},this._t=(t,i)=>{const s=this.yR(i);s&&(this.ab=this.mR(s,t),this.Ux&&this.cs.us.ks(i,!0),this.rR&&this.engine.setMouseStyle(e.MouseStyles.Point),this.R.emit("mouseEnter",this,t,this.ab),this.cs.Ms())},this.wt=(t,i)=>{this.yR(i)&&(this.ab=void 0,this.Ux&&this.cs.us.ks(i,!1),this.engine.setMouseStyle(e.MouseStyles.Default),this.R.emit("mouseLeave",this,t,this.ab),this.cs.Ms())},this.It=(t,i)=>{const s=this.yR(i);s&&(this.ab=this.mR(s,t),this.Ux&&this.cs.us.ks(i,!0),this.rR&&this.engine.setMouseStyle(e.MouseStyles.Point),this.R.emit("mouseEnter",this,t,this.ab),this.cs.Ms())},this.Ct=(t,e)=>{const i=this.yR(e);if(i){if(this.rR){const e=(null==i?void 0:i.children.length)?i:i.parentID?this.sR[i.parentID]:void 0;e&&(this.eR._([e]),this.ab=void 0,this.R.emit("viewChange",this.eR.C()),this.AR=!0),t&&Qt(t)}this.R.emit("mouseClick",this,t,this.mR(i,t)),this.cs.Ms()}},this.kt=(t,e)=>{const i=this.yR(e);i&&this.R.emit("mouseDoubleClick",this,t,this.mR(i,t))},this.Tt=(t,e)=>{const i=this.yR(e);i&&this.R.emit("mouseDown",this,t,this.mR(i,t))},this.Ft=(t,e)=>{const i=this.yR(e);i&&this.R.emit("mouseUp",this,t,this.mR(i,t))},this.Dt=(t,e,i)=>{const s=this.yR(i);s&&this.R.emit("mouseDragStart",this,t,e,this.mR(s,t))},this.Pt=(t,e,i,s,r)=>{const n=this.yR(r);n&&this.R.emit("mouseDrag",this,t,e,i,s,this.mR(n,t))},this.Bt=(t,e,i,s)=>{const r=this.yR(s);r&&this.R.emit("mouseDragStop",this,t,e,i,this.mR(r,t))},this.Lt=(t,e)=>{const i=this.yR(e);i&&this.R.emit("mouseWheel",this,t,this.mR(i,t))},this.Rt=(t,e)=>{const i=this.yR(e);i&&(this.ab=this.mR(i,t),this.Ux&&this.cs.us.ks(e,!0),this.R.emit("touchStart",this,t,this.ab),this.cs.Ms(),Qt(t))},this.Et=(t,e)=>{const i=this.yR(e);i&&(this.ab=this.mR(i,t),this.Ux&&this.cs.us.ks(e,!0),this.R.emit("touchMove",this,t,this.ab),this.cs.Ms(),Qt(t))},this.zt=(t,e)=>{const i=this.yR(e);if(i){if(this.ab=void 0,this.rR){const e=(null==i?void 0:i.children.length)?i:i.parentID?this.sR[i.parentID]:void 0;e&&(this.eR._([e]),this.R.emit("viewChange",this.eR.C()),this.AR=!0),t&&Qt(t)}this.Ux&&this.cs.us.ks(e,!1),this.R.emit("touchEnd",this,t,this.ab),this.cs.Ms(),Qt(t)}},this.vR=t=>{const e=this.sR[this.oR[t].id]?[this.sR[this.oR[t].id]]:this.iR;this.eR._(e),this.R.emit("viewChange",e),this.AR=!0,this.cs.Ms()},this.ts.treeMapChartNodeColors)this.SR=this.ts.treeMapChartNodeColors;else{const t=this.ts.pointSeriesFillStyle,e=t=>Y(t)?t.getColor():R;this.SR="function"==typeof t?new Array(5).fill(0).map(((i,s)=>e(t(s)))):[e(t)]}this.cs.Zn(fa.Pf),this.$y=i.wx("TreeMapChart plotting",0),this.jy=i.wx("TreeMap UI plotting",1),this.onResize(this.$x),this.bh.yr("TreeMap Chart");const h=i.Zy(),l=Dt(o?o.cursorBuilder:void 0,Ch);this.Qy=uh(this,h,l.yy(h,this.uiScale,this.uiScale,Rt,this.ts),void 0,"show-pointed",Yf,(()=>0)),this.xR=this.hs.kg(),this.Cp(n,this.uiScale),this.sb=this.$y.Hm(this.mg).Be(new G).De(this.pR),this.bR=this.cs.us.$r(this,{animationEnabled:!1!==(null==o?void 0:o.animationsEnabled)}),this.MR=new Zh((()=>this.jy.Gr(this.mg).setMouseInteractions(!1))),this._R=new Zh((()=>this.jy.Gr(this.uiScale))),this.sb.setMouseInteractions(this.$i).setMouseEnterEventHandler(((t,e,i)=>this._t(e,i))).setMouseLeaveEventHandler(((t,e,i)=>this.wt(e,i))).setMouseClickEventHandler(((t,e,i)=>this.Ct(e,i))).setMouseDoubleClickEventHandler(((t,e,i)=>this.kt(e,i))).setMouseDownEventHandler(((t,e,i)=>this.Tt(e,i))).setMouseUpEventHandler(((t,e,i)=>this.Ft(e,i))).setMouseMoveEventHandler(((t,e,i)=>this.It(e,i))).setMouseDragStartEventHandler(((t,e,i,s)=>this.Dt(e,i,s))).setMouseDragEventHandler(((t,e,i,s,r,n)=>this.Pt(e,i,s,r,n))).setMouseDragStopEventHandler(((t,e,i,s,r)=>this.Bt(e,i,s,r))).setMouseWheelEventHandler(((t,e,i)=>this.Lt(e,i))).setTouchStartEventHandler(((t,e,i)=>this.Rt(e,i))).setTouchMoveEventHandler(((t,e,i)=>this.Et(e,i))).setTouchEndEventHandler(((t,e,i)=>this.zt(e,i))),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled))}setData(t){t=Array.isArray(t)?t.slice():[t];const{wR:e}=(()=>{let t=0;return{wR:e=>{var i;const s=e.map(((t,e)=>({node:t,parent:null}))),r=[];for(;s.length>0;){const e=s.pop();if(!e)continue;const{node:n,parent:o}=e;t+=1;const a={id:t,parentID:null==o?void 0:o.id,name:n.name,value:Number(n.value)||0,animatedValue:Number(n.value)||0,children:[],nodeIndex:o?o.nodeIndex:-1,userNode:n};o?o.children.push(a):r.push(a),null===(i=n.children)||void 0===i||i.forEach((t=>{s.push({node:t,parent:a})}))}const n=t=>{t.children.forEach(n),t.children.length>0&&(t.value+=t.children.reduce(((t,e)=>t+e.value),0),t.animatedValue+=t.children.reduce(((t,e)=>t+e.animatedValue),0),t.children.sort(((t,e)=>e.animatedValue-t.animatedValue)))};r.forEach(n);const o=1===e.length?r[0].children:r;return o.sort(((t,e)=>e.animatedValue-t.animatedValue)),o.forEach(((t,e)=>{t.nodeIndex=e;const i=e=>{e.children.forEach((e=>{e.nodeIndex=t.nodeIndex,i(e)}))};i(t)})),r}}})(),i=e(t);return i.forEach((t=>{const e=this.sR[t.id];e&&this.CR(t,e)})),this.ab=void 0,this.eR._(i),this.iR=i,this.sR=this.kR(i),this.AR=!0,this.cs.Ms(),this}setAnimationValues(t,e=1){return this.ky=t?{speed:e}:void 0,this.cs.Ms(),this}setInitPathButtonText(t){return this.nR=t,this.AR=!0,this.cs.Ms(),this}setDisplayedLevelsCount(t){return this.hR=t,this.AR=!0,this.cs.Ms(),this}setDrillDownEnabled(t){return this.rR=t,this.AR=!0,this.cs.Ms(),this}setDrillDownNode(t){var e,i;if(this.ab=void 0,void 0===t)this.eR._(this.iR);else{const s=[...this.iR];for(;s.length>0;){const r=s.pop();if(r){if(void 0!==r.value&&r.userNode===t||r.parentID&&Array.isArray(t)&&(null===(i=null===(e=this.sR[r.parentID])||void 0===e?void 0:e.userNode)||void 0===i?void 0:i.children)===t){const t=r.children.length?r:r.parentID?this.sR[r.parentID]:this.iR[0];this.eR._([t]);break}if(r.children)for(let t=r.children.length-1;t>=0;t-=1)s.push(r.children[t])}}}return this.R.emit("viewChange",this.eR.C()),this.AR=!0,this.cs.Ms(),this}setNodeColoring(t){return t instanceof Array?(this.sb.Be(new G),this.SR=t):this.sb.Be(t),this.AR=!0,this.cs.Ms(),this}setParentNodeColor(t){return this.gR=t,this.AR=!0,this.cs.Ms(),this}setPathLabelFillStyle(t){return this.aR="function"==typeof t?t(this.aR):t,this.AR=!0,this.cs.Ms(),this}getPathLabelFillStyle(){return this.aR}setPathLabelFont(t){return mr(t)?this.lR=t:this.lR=t(this.lR),this.AR=!0,this.cs.Ms(),this}getPathLabelFont(){return this.lR}setHeaderFont(t){return mr(t)?this.cR=t:this.cR=t(this.cR),this.AR=!0,this.cs.Ms(),this}getHeaderFont(){return this.cR}setHeaderFillStyle(t){return this.uR="function"==typeof t?t(this.uR):t,this.AR=!0,this.cs.Ms(),this}getHeaderFillStyle(){return this.uR}setLabelFont(t){return mr(t)?this.fR=t:this.fR=t(this.fR),this.AR=!0,this.cs.Ms(),this}getLabelFont(){return this.fR}setLabelFillStyle(t){return this.dR="function"==typeof t?t(this.dR):t,this.AR=!0,this.cs.Ms(),this}getLabelFillStyle(){return this.dR}setNodeBorderStyle(t){return this.sb.De(t),this.AR=!0,this.cs.Ms(),this}getNodeBorderStyle(){return this.sb.mo()}setNodeEffect(t){return this.xR.bs(t),this.cs.Ms(),this}getNodeEffect(){return this.xR._s()}setCursor(t){return this.Qy.setCursor(t),this}getCursor(){return this.Qy.getCursor()}setCursorMode(t){return this.Qy.setCursorMode(t),this}getCursorMode(){return this.Qy.getCursorMode()}setCustomCursor(t){return this.Qy.setCustomCursor(t?(e,i,s)=>t(this,e,i,s):void 0),this}onCursorTargetChanged(t){return this.Qy.onCursorTargetChanged(((e,i,s)=>t(this,e,i,s)))}offCursorTargetChanged(t){this.Qy.offCursorTargetChanged(t)}setCursorFormatting(t){return this.Qy.setCursorFormatting(t),this}getCursorFormatting(){return this.Qy.getCursorFormatting()}addCursor(t=Ch){const e=this.gp(),i=t.yy(e,this.uiScale,this.uiScale,this.up(e),this.ts);return this.Mp(i),i}onNodeMouseDragStart(t){return this.R.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.R.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.R.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.R.on("mouseWheel",t)}onNodeTouchStart(t){return this.R.on("touchStart",t)}onNodeTouchMove(t){return this.R.on("touchMove",t)}onNodeTouchEnd(t){return this.R.on("touchEnd",t)}onViewChange(t){return this.R.on("viewChange",t)}offNodeTouchStart(t){return this.R.off(t,"touchStart")}offNodeTouchMove(t){return this.R.off(t,"touchMove")}offNodeTouchEnd(t){return this.R.off(t,"touchEnd")}offViewChange(t){return this.R.off(t,"viewChange")}setMouseInteractions(t){return this.$i=t,this.sb.setMouseInteractions(t),this}getMouseInteractions(){return this.$i}setAnimationHighlight(t){return this.bR.Zr(t),this}getAnimationHighlight(){return this.bR.Qr()}setHighlightOnHover(t){return this.Ux=t,this}getHighlightOnHover(){return this.Ux}mR(t,e){const i=this.cs.No(e);return{cursorPosition:{pointMarker:{x:i.engineX,y:i.engineY},pointMarkerScale:this.cs.At,resultTable:{x:i.engineX,y:i.engineY},resultTableScale:this.cs.At},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}ef(){return[this]}Re(t){super.Re(t),super.wp(),ah.Rp(this.bh,this.Tp);const i=ah.Lp(this.bh,this.Tp);if(this.AR&&this.eR.C().length){this.sb.Ot(),this.tR.clear(),this.bR.jr(),this.dh&&this.TR(t);const s=zf({data:this.eR.C(),dimensions:{x:0+this.ka.left,y:this.mg.y.getInnerEnd()-i-this.ka.top,width:this.mg.x.getInnerEnd()-this.ka.right-this.ka.left,height:this.mg.y.getInnerEnd()-i-this.ka.top-this.ka.bottom}}),r=this.MR.wm();this.FR(s,r),r.finishPlot(),this.IR(),this.iR!==this.eR.C()&&this.iR.length>1&&this.oR.unshift({name:this.nR,id:0});let n=0;const o=this._R.wm(),a=this.lR;this.oR.forEach(((t,i)=>{const s=o.add(),r=this.cs.Ng.Og(t.name,a,0);s.yr(`← ${t.name}`).Qh(a).Ee({x:0,y:100}).$a({x:-1,y:1}).Or({left:this.ka.left+n,top:this.ka.top,right:0,bottom:0}).Be(this.aR).setMouseClickEventHandler((t=>this.vR(i))).setMouseEnterEventHandler((()=>this.engine.setMouseStyle(e.MouseStyles.Point))).setMouseLeaveEventHandler((()=>this.engine.setMouseStyle(e.MouseStyles.Default))),n+=r.x+25})),o.finishPlot(),this.eR.C().every((t=>t.value===t.animatedValue))?this.AR=!1:this.cs.Ms(!0)}return this.Qy.Re(!1,[],void 0,{explicitTarget:this.ab}),this}dispose(){return this.jy.Y(),this.$y.Y(),this.Qy.Y(),this.sb.dispose(),this.tR.clear(),this.MR.km(),this._R.km(),super.dispose()}J(){return super.J(),this}K(){return super.K(),this}Zd(){return de(this.sb.Xh())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),ce(t,this.ts,i,{}),this}FR(t,e,i=!1,s=0){const r=t.map(((t,e)=>({node:t,isChild:i,visibleDepth:s})));for(;r.length>0;){const t=r.pop();if(!t)continue;const{node:i,visibleDepth:s,opacity:n}=t,{x:o,y:a,height:h,width:l,children:u,animatedValue:c,name:d,nodeIndex:f}=i,g=this.SR,m=0===s&&1===this.eR.C().length?this.gR:g[f%g.length],y=[{x:o,y:a},{x:o,y:a-h},{x:l+o,y:a-h},{x:l+o,y:a}],p=this.sb.Xr().Cl(y).PR(m.setA(n||250)).ob(c);this.tR.set(p,i),this.bR.Xr(p,(t=>p.ds(t)));const x=o+5,A=a+25+5,S=Math.max(h-25-5,0),v=Math.max(l-5-5,0);if(u&&u.length&&s<this.hR&&v>15&&S>15){const t=zf({data:u,dimensions:{x:v>0?x:o,y:S>0?a-25:A,width:v,height:S}});for(let e=0;e<t.length;e+=1){const o=(250-(u.length>7?50:150))/(u.length-1),a=1===i.id&&1===this.iR.length||this.iR===this.eR.C()?250:n?n/(s+1):250-e*o;r.push({node:t[e],isChild:!0,visibleDepth:s+1,opacity:a})}}const b=0===s&&1===this.eR.C().length?this.uR:this.dR,M=0===s?this.cR:this.fR,T=this.DR(d,l-25,M),w=this.cs.Ng.Og(T,M,0),C=e.add();l-25>w.x&&h>25?C.yr(T).Ee({x:o+5,y:a-2.5}).$a({x:-1,y:1}).Be(b).Qh(M):C.yr("")}}kR(t){const e={},i=[...t];for(;i.length>0;){const t=i.pop();t&&(e[t.id]=t,t.children&&i.push(...t.children))}return e}yR(t){if(!this.AR&&t)return this.tR.get(t)}IR(){this.oR=[];const t=this.eR.C()[0].id;let e=this.sR[t].parentID;for(;e;)this.oR.push({name:this.sR[e].name,id:e}),e=this.sR[e].parentID;return this.oR.reverse()}DR(t,e,i){let s=this.cs.Ng.Og(t,i,0).x;if(s<=e)return t;const r=t.split(" ");let n=t;for(;r.length>1&&s>e;)r.pop(),n=`${r.join(" ")}...`,s=this.cs.Ng.Og(n,i,0).x;if(s>e)for(n=`${r[0]}...`,s=this.cs.Ng.Og(n,i,0).x;n.length>3&&s>e;)n=`${n.substring(0,n.length-4)}...`,s=this.cs.Ng.Og(n,i,0).x;return n.length<=3&&s>e?"":n}TR(t){var e;const i=[...this.iR];for(;i.length>0;){const s=i.pop();if(!s)continue;const r=s.value-s.animatedValue;if(Math.abs(r)<.0015*s.value||void 0===this.ky)s.animatedValue=s.value;else{const i=r/250*((null===(e=this.ky)||void 0===e?void 0:e.speed)||1)*t;s.animatedValue+=i,(r>0&&s.animatedValue>s.value||r<0&&s.animatedValue<s.value)&&(s.animatedValue=s.value)}s.children&&s.children.length>0&&i.push(...s.children)}}CR(t,e){const i=[{current:t,previous:e}];for(;i.length>0;){const t=i.pop();if(!t)continue;const{current:e,previous:s}=t;e.animatedValue=this.dh?s.animatedValue:e.value,s.nodeIndex<0?e.nodeIndex=0:e.nodeIndex=s.nodeIndex;const r=new Map(s.children.map((t=>[t.id,t])));e.children.forEach(((t,e)=>{const n=r.get(t.id);i.push({current:t,previous:n||s})}))}}}const Yf=(t,e,i)=>[[e.name],[{text:e.value.toString(),font:{weight:"bold"}}]],Gf=(t,i)=>{const s=(t=>{const i=new U({color:t.uiStrokeColorContrastHigh}),s=new U({color:t.uiStrokeColorContrastMedium}),r=new U({color:t.uiStrokeColorContrastLow}),n=new gr({family:t.fontFamily,weight:"normal",style:"normal"}),o=n.setSize(18*t.fontScaler),a=n.setSize(16*t.fontScaler),h=n.setSize(14*t.fontScaler),l=n.setSize(10*t.fontScaler),u=n.withMutations((e=>e.set("size",14*t.fontScaler).set("weight","bold"))),c=n.setSize(13*t.fontScaler),d=new rs({thickness:2,fillStyle:r}),f=new U({color:t.dataHighlightOverlayColor}),g=new rs({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),m=t.dataColorPalette.map((t=>new U({color:t.stroke}))),y=t=>m[t%m.length],p=m.map((t=>new rs({thickness:2,fillStyle:t}))),x=t=>p[t%p.length],A=t.dataColorPalette.map((t=>new U({color:t.border}))).map((t=>new rs({thickness:2,fillStyle:t}))),S=t=>A[t%A.length],v=t.dataColorPalette.map((t=>{const e=t.area;return new it({angle:0,stops:[{offset:0,color:e.setA(0)},{offset:.8,color:e}]})})),b=t=>v[t%v.length],M=t.dataColorPaletteInverted.map((t=>{const e=t.area;return new it({angle:180,stops:[{offset:0,color:e.setA(0)},{offset:.8,color:e}]})})),C=t=>M[t%M.length],k=t.dataColorPalette.map((t=>{const e=t.area;return new it({angle:180,stops:[{color:he(e,T(255,255,255,e.getA()),.3),offset:0},{color:e,offset:.5},{color:he(e,T(0,0,0,e.getA()),.3),offset:1}]})})),E=t=>k[t%k.length],R=t.dataColorPaletteInverted.map((t=>new U({color:t.border}))).map((t=>new rs({thickness:2,fillStyle:t}))),I=t=>R[t%R.length],_=new U({color:t.dataColorPositive}),F=new U({color:t.dataColorNegative}),D=new rs({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastHigh.setA(50)})}),B=new rs({thickness:2,fillStyle:t.axisLineFillStyle}),P=nt,L=new U({color:T(0,0,0,1)}),z=new rs({thickness:1,fillStyle:t.axisGridMajorFillStyle}),N=nt,O=h,Y=t.axisLabelMajorFillStyle,G=new rs({thickness:1,fillStyle:t.axisGridMajorFillStyle}),H=new rs({thickness:1,fillStyle:t.axisTickMajorFillStyle}),W=h,K=t.axisLabelMajorFillStyle,X=new rs({thickness:1,fillStyle:t.axisGridMinorFillStyle}),j=new rs({thickness:1,fillStyle:t.axisTickMinorFillStyle}),$=l,Z=t.axisLabelMinorFillStyle,Q=Ma,q=new va({gridStrokeStyle:z,tickStyle:N,tickLength:50,tickPadding:-14,labelFont:O,labelFillStyle:Y}),J=new va({gridStrokeStyle:G,tickStyle:H,tickLength:7,tickPadding:5,labelFont:W,labelFillStyle:K}),tt=new va({gridStrokeStyle:X,tickStyle:j,tickLength:4,tickPadding:10,labelFont:$,labelFillStyle:Z}),et=new Qa({extremeTickStyle:Q,majorTickStyle:J,minorTickStyle:tt}),st=new Ga({greatTickStyle:q,majorTickStyle:J,minorTickStyle:tt}),rt=new Ra({majorTickStyle:J,minorTickStyle:tt}),ot=new U({color:t.dataHighlightOverlayColor}),at=new rs({thickness:1,fillStyle:s}),ht=new rs({thickness:2,fillStyle:s}),lt=t=>new Tr.Triangulated({shape:"sphere",size:10,fillStyle:m[t%m.length]}),ut=m[0],ct=t.uiTextFillStyle,dt=t.legendBackgroundFillStyle,ft=new rs({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),gt=ue(t.legendButtonDefaultColor),mt=ue(t.isDark?T(70,70,70,255):T(170,170,170,255)),yt=new U({color:t.isDark?T(70,70,70,255):T(170,170,170,255)}),pt=new rs({thickness:1,fillStyle:i}),xt=new ao({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:no.DashedEqual,patternScale:3}),At=new rs({thickness:1,fillStyle:t.cursorGridFillStyle}),St=t.zoomBandChartDefocusOverlayFillStyle,vt=new rs({thickness:2,fillStyle:new U({color:t.zoomBandChartSplitterColor})}),bt=new U({color:t.uiBackgroundColor});let Mt={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:nt,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new rs({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:nt,chartXYTitleFont:o,chartXYTitleFillStyle:t.titleFillStyle,chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:d,chartXYZoomingRectangleFillStyle:f,chartXYZoomingRectangleStrokeStyle:g,chartXYFittingRectangleFillStyle:f,chartXYFittingRectangleStrokeStyle:g,lineSeriesStrokeStyle:x,pointLineSeriesStrokeStyle:x,pointLineSeriesFillStyle:y,pointSeriesFillStyle:y,ellipseSeriesFillStyle:y,ellipseSeriesStrokeStyle:x,polygonSeriesFillStyle:y,polygonSeriesStrokeStyle:x,rectangleSeriesFillStyle:y,rectangleSeriesStrokeStyle:nt,segmentSeriesStrokeStyle:x,boxSeriesBodyFillStyle:y(0),boxSeriesBodyStrokeStyle:nt,boxSeriesStrokeStyle:new rs({thickness:1,fillStyle:m[0]}),boxSeriesMedianStrokeStyle:new rs({thickness:1,fillStyle:new U({color:T(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:_,ohlcCandleBodyFillStyleNegative:F,ohlcCandleTailStrokeStylePositive:new rs({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new rs({thickness:1,fillStyle:new U({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new rs({thickness:2,fillStyle:_}),ohlcBarStrokeStyleNegative:new rs({thickness:2,fillStyle:F}),heatmapGridSeriesFillStyle:y,heatmapGridSeriesWireframeStyle:D,heatmapScrollingGridSeriesFillStyle:y,heatmapScrollingGridSeriesWireframeStyle:D,areaRangeSeriesFillStyle:b,areaRangeSeriesStrokeStyle:S,areaRangeSeriesFillStyleInverted:C,areaRangeSeriesStrokeStyleInverted:I,areaSeriesBipolarHighFillStyle:b,areaSeriesBipolarHighStrokeStyle:S,areaSeriesBipolarLowFillStyle:C,areaSeriesBipolarLowStrokeStyle:I,areaSeriesPositiveFillStyle:b,areaSeriesPositiveStrokeStyle:S,areaSeriesNegativeFillStyle:C,areaSeriesNegativeStrokeStyle:I,xAxisTitleFont:a,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:B,xAxisNibStyle:P,xAxisOverlayStyle:L,xAxisZoomingBandFillStyle:f,xAxisZoomingBandStrokeStyle:nt,xAxisNumericTicks:et,xAxisDateTimeTicks:st,xAxisTimeTicks:rt,yAxisTitleFont:a,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:B,yAxisNibStyle:P,yAxisOverlayStyle:L,yAxisZoomingBandFillStyle:f,yAxisZoomingBandStrokeStyle:nt,yAxisNumericTicks:et,yAxisDateTimeTicks:st,yAxisTimeTicks:rt,bandFillStyle:ot,bandStrokeStyle:at,constantLineStrokeStyle:ht,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:nt,barChartTitleFont:o,barChartTitleFillStyle:t.titleFillStyle,barChartSeriesBackgroundFillStyle:V,barChartSeriesBackgroundStrokeStyle:nt,barChartBarFillStyle:y,barChartBarStrokeStyle:new rs({thickness:1,fillStyle:r}),barChartValueAxisTitleFont:a,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:B,barChartValueAxisTicks:et.setMajorTickStyle((t=>t.setGridStrokeStyle(nt))).setMinorTickStyle((t=>t.setGridStrokeStyle(nt))),barChartCategoryAxisTitleFont:a,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:B,barChartCategoryLabels:{formatter:(t,e)=>t,labelFillStyle:et.majorTickStyle.labelFillStyle,labelFont:et.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:et.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(t,e,i)=>t.chart.valueAxis.formatValue(i),labelFillStyle:et.majorTickStyle.labelFillStyle,labelFont:et.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(t,e,i)=>t.chart.valueAxis.formatValue(i),labelFillStyle:et.majorTickStyle.labelFillStyle,labelFont:et.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:nt,chart3DTitleFont:o,chart3DTitleFillStyle:t.titleFillStyle,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:d,chart3DBoundingBoxStrokeStyle:nt,xAxis3DTitleFont:a,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:B,xAxis3DNumericTicks:et,xAxis3DDateTimeTicks:st,xAxis3DTimeTicks:rt,yAxis3DTitleFont:a,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:B,yAxis3DNumericTicks:et,yAxis3DDateTimeTicks:st,yAxis3DTimeTicks:rt,zAxis3DTitleFont:a,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:B,zAxis3DNumericTicks:et,zAxis3DDateTimeTicks:st,zAxis3DTimeTicks:rt,lineSeries3DStrokeStyle:x,pointLineSeries3DStrokeStyle:x,pointLineSeries3DPointStyle:lt,pointSeries3DPointStyle:lt,pointCloudSeries3DPointStyle:t=>new Tr.Pixelated({size:5,fillStyle:m[t%m.length]}),surfaceGridSeries3DFillStyle:y,surfaceGridSeries3DWireframeStyle:D,surfaceScrollingGridSeries3DFillStyle:y,surfaceScrollingGridSeries3DWireframeStyle:D,boxSeries3DFillStyle:y,meshModel3DFillStyle:y(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:nt,polarChartTitleFont:o,polarChartTitleFillStyle:t.titleFillStyle,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:d,polarSectorFillStyle:ot,polarSectorStrokeStyle:at,polarAmplitudeAxisTitleFont:a,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:B,polarAmplitudeAxisNumericTicks:et,polarAmplitudeAxisDateTimeTicks:st,polarAmplitudeAxisTimeTicks:rt,polarRadialAxisTitleFont:a,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:B,polarRadialAxisTickStyle:J,polarLineSeriesStrokeStyle:x,polarPointLineSeriesFillStyle:y,polarPointLineSeriesStrokeStyle:x,polarPointSeriesFillStyle:y,polarPolygonSeriesFillStyle:E,polarPolygonSeriesStrokeStyle:S,polarAreaSeriesFillStyle:E,polarAreaSeriesStrokeStyle:S,polarHeatmapSeriesFillStyle:y,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:nt,mapChartTitleFont:o,mapChartTitleFillStyle:t.titleFillStyle,mapChartFillStyle:ut,mapChartStrokeStyle:new rs({thickness:1,fillStyle:new U({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:V,mapChartOutlierRegionStrokeStyle:new rs({thickness:1,fillStyle:r}),mapChartSeparateRegionFillStyle:dt,mapChartSeparateRegionStrokeStyle:ft,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:nt,dataGridTitleFont:o,dataGridTitleFillStyle:t.titleFillStyle,dataGridTextFont:h,dataGridTextFillStyle:ut,dataGridCellBackgroundFillStyle:new U({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new rs({thickness:.4,fillStyle:new U({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:nt,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:ft,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:ft,dataGridScrollBarButtonArrowFillStyle:gt,dataGridScrollBarButtonArrowStrokeStyle:ft,sparkLineChartStrokeStyle:x(0),sparkPointChartFillStyle:y(0),sparkBarChartFillStyle:y(0),sparkBarChartStrokeStyle:S(0),sparkAreaChartFillStyle:b(0),sparkAreaChartStrokeStyle:S(0),sparkPieChartFillStyle:y,sparkPieChartStrokeStyle:ft,sparkChartBandFillStyle:ot,sparkChartBandStrokeStyle:at,sparkChartConstantLineStrokeStyle:ht,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:nt,spiderChartTitleFont:o,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:d,spiderChartWebStyle:new rs({thickness:2,fillStyle:r}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:h,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:a,spiderChartAxisStrokeStyle:new rs({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new rs({thickness:2,fillStyle:i}),spiderSeriesFillStyle:E,spiderSeriesStrokeStyle:S,spiderSeriesPointFillStyle:y,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:nt,pieChartTitleFont:o,pieChartTitleFillStyle:t.titleFillStyle,pieChartSliceFillStylePalette:y,pieChartSliceStrokeStyle:ft,pieChartSliceLabelFont:c,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:pt,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:nt,funnelChartTitleFont:o,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartSliceFillStylePalette:y,funnelChartSliceStrokeStyle:ft,funnelChartSliceLabelFont:c,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:pt,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:nt,pyramidChartTitleFont:o,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartSliceFillStylePalette:y,pyramidChartSliceStrokeStyle:ft,pyramidChartSliceLabelFont:c,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:pt,gaugeChartValueLabelFont:c.setSize(60),gaugeChartUnitLabelFont:c.setSize(40),gaugeChartTickFont:c.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:nt,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:T(255,255,255),gaugeChartGlowColor:T(255,255,64),gaugeChartNeedleFillStyle:new U({color:T(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new rs({thickness:2,fillStyle:new U({color:T(0,0,0)})}),gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:nt,gaugeChartTitleFont:o,gaugeChartTitleFillStyle:t.titleFillStyle,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:nt,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new rs({thickness:1,fillStyle:new U({color:w("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleFont:o,treeMapChartPathLabelFillStyle:ct,treeMapChartPathLabelFont:c,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:o,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:c,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:nt,zoomBandChartDefocusOverlayFillStyle:St,zoomBandChartSplitterStrokeStyle:vt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:T(254,204,0,.7),uiButtonFillStyle:gt,uiButtonFillStyleHidden:mt,uiButtonStrokeStyle:ft,uiButtonSize:10,uiBackgroundFillStyle:dt,uiBackgroundStrokeStyle:ft,uiTextFillStyle:ct,uiTextFillStyleHidden:yt,uiTextFont:c,legendTitleFillStyle:ct,legendTitleFont:u,cursorTickMarkerXBackgroundFillStyle:dt,cursorTickMarkerXBackgroundStrokeStyle:ft,cursorTickMarkerXTextFillStyle:ct,cursorTickMarkerXTextFont:c,cursorTickMarkerYBackgroundFillStyle:dt,cursorTickMarkerYBackgroundStrokeStyle:ft,cursorTickMarkerYTextFillStyle:ct,cursorTickMarkerYTextFont:c,cursorPointMarkerFillStyle:xt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:e.PointShape.Cross,cursorResultTableFillStyle:dt,cursorResultTableStrokeStyle:ft,cursorResultTableTextFillStyle:ct,cursorResultTableTextFont:c,cursorGridStrokeStyleX:xt,cursorGridStrokeStyleY:xt,cursor3DGridStrokeStyleX:At,cursor3DGridStrokeStyleY:At,cursor3DGridStrokeStyleZ:At,cursor3DTickStrokeStyleX:J.tickStyle,cursor3DTickStrokeStyleY:J.tickStyle,cursor3DTickStrokeStyleZ:J.tickStyle,cursor3DTickLabelFillStyleX:ct,cursor3DTickLabelFillStyleY:ct,cursor3DTickLabelFillStyleZ:ct,cursor3DTickLabelFontX:c,cursor3DTickLabelFontY:c,cursor3DTickLabelFontZ:c,cursor3DTickLabelBackgroundFillStyleX:bt,cursor3DTickLabelBackgroundFillStyleY:bt,cursor3DTickLabelBackgroundFillStyleZ:bt,cursor3DTickLabelBackgroundStrokeStyleX:ft,cursor3DTickLabelBackgroundStrokeStyleY:ft,cursor3DTickLabelBackgroundStrokeStyleZ:ft,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(Mt={...Mt,...t.overrideThemeProperties}),Mt})(t),r={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:r}},Hf=(t,e)=>{const i=new Image;i.crossOrigin="*";const s=`${t}/${e}`;return i.addEventListener("error",(e=>{ke(t,s,"Theme resource",{shouldCrash:!1})})),i.src=s,i},Wf=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:he(e[s%e.length].stroke,T(255,255,255),.5);return new J({stops:[{color:he(r,T(255,255,255),.5*i).setA(100),offset:0},{color:r.setA(100),offset:.5},{color:he(r,T(30,30,30),.5*i).setA(100),offset:1}]})},Kf=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:he(e[s%e.length].stroke,T(255,255,255),.2);return new J({stops:[{color:he(r,T(255,255,255),.2*i),offset:0},{color:r,offset:.5},{color:he(r,T(0,0,0),.2*i),offset:1}]})},Xf=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:he(e[s%e.length].stroke,T(255,255,255),.2);return new it({angle:90,stops:[{color:he(r,T(255,255,255),.5*i),offset:0},{color:r,offset:.35},{color:he(r,T(30,30,30),.5*i),offset:1}]})},jf=(t,e,i)=>(()=>{const i=new Map;return s=>{const r=i.get(s);if(r)return r;const n=(i=>{const s=!0===t?e[i%e.length].stroke:he(e[i%e.length].stroke,T(255,255,255),.3);return new it({angle:90,stops:[{color:he(s,T(255,255,255),.5),offset:0},{color:s,offset:.35},{color:he(s,T(30,30,30),.5),offset:1}]})})(s);return i.set(s,n),n}})(),$f=we((()=>{const t=T(255,255,255),i=new U({color:t}),s=!0,r=new go({spread:1,blur:9,offset:{x:0,y:0},color:T(0,0,0,150)}),n=new J({position:{x:.8,y:.8},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.ellipse,stops:[{offset:0,color:T(50,51,52)},{offset:.5,color:T(14,15,16)},{offset:1,color:T(0,0,0)}]}),o=new U({color:T(45,45,45)}),a=new J({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:T(120,120,120,100)},{offset:1,color:T(0,0,0,50)}]}),h=new J({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:T(30,30,30,200)},{offset:1,color:T(0,0,0,255)}]}),l=new U({color:T(255,255,220)}),u=new U({color:T(255,255,166)}),c=new U({color:T(255,255,220)}),d=new U({color:T(255,255,220,130)}),f=new U({color:T(255,255,200)}),g=f,m=g,y=new it({angle:45,stops:[{offset:0,color:T(230,230,230)},{offset:1,color:T(150,150,150)}]}),p=new U({color:T(220,220,220)}),x=new U({color:T(200,200,200,50)}),A=new U({color:T(200,200,200,150)}),S=new U({color:T(200,200,200,20)}),v=new U({color:T(220,220,220)}),b=new it({angle:0,stops:[{offset:0,color:T(10,10,10,220)},{offset:1,color:T(30,30,30,220)}]}),M=i,C=T(255,255,200),k=b,E=M,R=T(20,20,20),I=T(0,0,0),_=t,F=T(150,150,150),D=T(50,50,50),B=T(50,50,50),P=T(100,100,100),L=T(200,200,200),V=[T(255,255,91,255),T(255,205,91,255),T(255,155,91,255),T(255,196,188,255),T(255,148,184,255),T(219,148,198,255),T(235,196,224,255),T(169,148,198,255),T(148,226,198,255),T(148,255,176,255),T(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),z=t.setA(20),N=T(176,255,157,255),O=T(255,112,76,255),Y={mapChartFillStyle:new it({angle:135,stops:[{color:T(255,255,91,255),offset:0},{color:T(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:Wf(s,V,.5),pieChartSliceFillStylePalette:Kf(s,V,1),funnelChartSliceFillStylePalette:Xf(s,V,1),pyramidChartSliceFillStylePalette:Xf(s,V,1),rectangleSeriesFillStyle:jf(s,V),gaugeChartBarColor:T(255,255,91,255),gaugeChartGlowColor:T(255,255,91,64)},G=new U({color:T(176,255,157,255)}),H=new U({color:T(255,146,146,255)}),W=new U({color:T(176,255,157,255)}),K=new U({color:T(230,63,63,255)}),X=new U({color:T(176,255,157,120)}),j=new U({color:T(229,63,63,180)}),$=new U({color:T(27,37,36,255)}),Z=new U({color:T(62,27,27,255)}),Q=[T(255,0,0),T(255,255,0),T(0,255,0)],q=[T(10,10,255),T(10,190,255),T(251,255,0),T(255,38,0)],tt=[T(255,255,0),T(255,204,0),T(255,128,0),T(255,0,0)],et=[T(0,0,0),T(167,4,69,255),T(255,0,0),T(252,252,168,255)],st=new J({stops:[{color:T(61,61,80,100),offset:0},{color:T(44,44,55,30),offset:1}]}),rt=new U({color:T(148,148,198,255)}),nt=X.getColor().setA(255),ot=T(100,100,100),at=[T(255,241,149,200),T(255,230,65,200),T(238,211,32,200),T(238,176,32,200),T(255,159,13,200),T(254,120,37,200),T(253,91,56,200),T(253,75,84,200),T(254,95,124,200),T(227,56,160,200),T(226,53,134,200),T(216,90,166,200),T(254,151,206,200),T(237,151,254,200),T(243,177,255,200),T(233,133,252,200),T(210,101,230,200),T(178,61,200,200),T(193,81,156,200),T(217,95,145,200)];return Gf({isDark:s,highlightColorOffset:T(60,60,60,60),highlightColorOffsetAxisOverlay:T(255,255,255,40),effect:r,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:n,dashboardSplitterFillStyle:o,panelBackgroundFillStyle:a,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:c,axisLabelMinorFillStyle:d,uiTitleFillStyle:f,uiTextFillStyle:g,cursorTextFillStyle:m,axisLineFillStyle:y,axisTickMajorFillStyle:p,axisGridMajorFillStyle:x,axisTickMinorFillStyle:A,axisGridMinorFillStyle:S,cursorGridFillStyle:v,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:C,resultTableBackgroundFillStyle:k,resultTableBackgroundBorderFillStyle:E,uiBackgroundColor:R,uiBackgroundBorderColor:I,uiStrokeColorContrastHigh:_,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:D,dataStrokeColorContrastHigh:B,dataStrokeColorContrastMedium:P,dataStrokeColorContrastLow:L,dataColorPalette:V,dataColorPaletteInverted:[{area:T(190,50,50,100),border:T(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:N,dataColorNegative:O,zoomBandChartDefocusOverlayFillStyle:new U({color:T(0,0,0,180)}),zoomBandChartSplitterColor:w("#FBFB5A"),zoomBandChartKnobFillStyle:t=>new so({source:Hf(t,"zoomBandChart/darkgold-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:Y,treeMapChartParentColor:w("#181E21"),treeMapChartNodeColors:at,treeMapChartLabelFillStyle:new U({color:T(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:T(250,250,250)})},{positiveTextFillStyle:G,negativeTextFillStyle:H,positiveFillStyle:W,negativeFillStyle:K,positiveAreaFillStyle:X,negativeAreaFillStyle:j,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:Z,badGoodColorPalette:Q,coldHotColorPalette:q,intensityColorPalette:tt,spectrogramColorPalette:et,bollingerFillStyle:st,bollingerBorderFillStyle:rt,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),Zf=we((()=>{const t=T(255,255,255),i=new U({color:t}),s=!0,r=new go({spread:0,blur:9,offset:{x:0,y:0},color:T(105,255,236,40)}),n=new U({color:T(2,21,30)}),o=new J({stops:[{color:T(19,40,66,150),offset:0},{color:T(0,0,0,150),offset:1}]}),a=new U({color:T(0,5,8,150)}),h=i,l=i,u=i,c=new U({color:T(255,255,220,130)}),d=i,f=i,g=f,m=new U({color:T(20,224,250,255)}),y=i,p=new U({color:T(61,94,110,100)}),x=new U({color:T(61,94,110,255)}),A=new U({color:T(61,94,110,40)}),S=i,v=new U({color:T(0,18,23,255)}),b=i,M=t,C=new U({color:T(0,17,22,240)}),k=i,E=T(0,38,48,220),R=T(0,0,0),I=t,_=T(150,150,150),F=T(19,78,93),D=T(50,50,50),B=T(0,36,48),P=T(200,200,200),L=[T(45,253,253,255),T(44,172,247,255),T(46,100,248,255),T(96,84,199,255),T(184,104,245,255),T(98,160,218,255),T(43,238,245,255),T(38,140,206,255),T(112,96,224,255),T(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),V=t.setA(50),z=T(3,217,194,255),N=T(230,63,63,255),O={mapChartFillStyle:new it({angle:135,stops:[{color:T(118,248,231,255),offset:0},{color:T(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Wf(s,L,1),pieChartSliceFillStylePalette:Kf(s,L,1),funnelChartSliceFillStylePalette:Xf(s,L,1),pyramidChartSliceFillStylePalette:Xf(s,L,1),rectangleSeriesFillStyle:jf(s,L),gaugeChartBarColor:T(3,217,194,255),gaugeChartGlowColor:T(3,217,194,120)},Y=new U({color:T(45,253,253,255)}),G=new U({color:T(255,146,146,255)}),H=new U({color:T(45,253,253,255)}),W=new U({color:T(230,63,63,255)}),K=new U({color:T(1,190,164,120)}),X=new U({color:T(229,63,63,180)}),j=new U({color:T(1,53,57,255)}),$=new U({color:T(62,27,27,255)}),Z=[T(1,104,119,255),T(0,165,144,255),T(0,246,214,255)],Q=[T(0,87,95,255),T(0,125,124,255),T(1,209,182,255),T(0,255,221,255),T(218,112,112,255),T(172,47,47,255)],q=[T(126,255,253,255),T(50,233,230,255),T(0,196,193,255),T(62,138,178,255),T(139,88,191,255),T(162,55,143,255)],tt=[T(13,31,52,255),T(101,50,118,255),T(1,142,172,255),T(2,196,170,255),T(0,255,221,255)],et=new J({stops:[{color:T(122,103,254,70),offset:0},{color:T(178,168,255,10),offset:1}]}),st=new U({color:T(122,103,254,255)}),rt=K.getColor().setA(255),nt=T(15,83,83),ot=[T(139,252,252,150),T(60,239,239,150),T(2,201,201,150),T(26,159,159,150),T(15,146,187,150),T(65,168,200,150),T(67,146,207,150),T(64,108,209,150),T(189,64,233,150),T(219,84,238,150),T(192,55,212,150),T(212,98,229,150),T(248,110,211,150),T(251,154,225,150),T(251,154,184,150),T(233,105,144,150),T(255,133,170,150),T(249,110,135,150),T(245,72,101,150),T(210,57,84,150)];return Gf({isDark:s,highlightColorOffset:T(60,60,60,60),highlightColorOffsetAxisOverlay:T(255,255,255,40),effect:r,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new so({source:Hf(t,"themes/turquoiseHexagon.jpg"),fitMode:e.ImageFitMode.Fill}),dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:h,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:x,axisGridMinorFillStyle:A,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:E,uiBackgroundBorderColor:R,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:_,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:P,dataColorPalette:L,dataColorPaletteInverted:[{area:T(170,60,210,100),border:T(210,100,250)}],dataHighlightOverlayColor:V,dataColorPositive:z,dataColorNegative:N,zoomBandChartDefocusOverlayFillStyle:new U({color:T(0,0,0,180)}),zoomBandChartSplitterColor:w("#2BF4F4"),zoomBandChartKnobFillStyle:t=>new so({source:Hf(t,"zoomBandChart/turquoise-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:w("#002329"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new U({color:T(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:T(250,250,250)})},{positiveTextFillStyle:Y,negativeTextFillStyle:G,positiveFillStyle:H,negativeFillStyle:W,positiveAreaFillStyle:K,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:et,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:rt,unfocusedDataColor:nt})})),Qf=we((()=>{const t=!1,i=new go({spread:0,blur:6,offset:{x:2,y:-2},color:T(0,0,0,30)}),s=new J({position:{x:.8,y:.8},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.ellipse,stops:[{offset:0,color:T(255,255,255)},{offset:1,color:T(255,255,255)}]}),r=new U({color:T(219,227,233,255)}),n=new J({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:T(255,255,255,200)},{offset:1,color:T(240,244,246,200)}]}),o=new J({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:T(255,255,255,255)},{offset:1,color:T(255,255,255,255)}]}),a=new U({color:T(33,43,49)}),h=new U({color:T(33,43,49)}),l=new U({color:T(33,43,49)}),u=new U({color:T(33,43,49,150)}),c=new U({color:T(33,43,49)}),d=c,f=d,g=new it({angle:45,stops:[{offset:0,color:T(225,225,225)},{offset:1,color:T(225,225,225)}]}),m=new U({color:T(150,150,150,255)}),y=new U({color:T(150,150,150,170)}),p=new U({color:T(150,150,150,150)}),x=new U({color:T(150,150,150,100)}),A=new U({color:T(60,70,80)}),S=new it({angle:0,stops:[{offset:0,color:T(255,255,255,240)},{offset:1,color:T(255,255,255,240)}]}),v=new U({color:T(168,186,199)}),b=T(255,255,200),M=new U({color:T(255,255,255,240)}),C=new U({color:T(128,146,159,255)}),k=T(255,255,255,255),E=T(168,168,199,255),R=T(168,186,199,255),I=T(168,186,199,255),_=T(168,186,199,255),F=T(168,186,199,255),D=T(100,100,100),B=T(200,200,200),P=[T(28,181,140,255),T(255,132,0,255),T(240,39,39,255),T(86,121,251,255),T(2,181,213,255),T(13,212,158,255),T(22,167,3,255),T(234,103,232,255),T(62,183,179,255),T(140,93,3,255),T(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),L=T(150,150,150,80),V=T(46,182,120,255),z=T(255,66,66,255),N=new rs({thickness:2,fillStyle:new U({color:T(168,186,199,255)})}),O={mapChartFillStyle:new it({angle:-45,stops:[{color:T(2,181,213,255),offset:0},{color:T(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:Wf(t,P,.8),pieChartSliceFillStylePalette:Kf(t,P,.8),funnelChartSliceFillStylePalette:Xf(t,P,.5),pyramidChartSliceFillStylePalette:Xf(t,P,.5),rectangleSeriesFillStyle:jf(t,P),gaugeChartBarColor:T(46,182,120,255),gaugeChartGlowColor:T(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:N,chart3DSeriesBackgroundStrokeStyle:N,polarChartSeriesBackgroundStrokeStyle:N,spiderChartSeriesBackgroundStrokeStyle:N,dataGridTextFillStyle:new U({color:T(0,88,64,255)})},Y=new U({color:T(4,146,108,255)}),G=new U({color:T(240,39,39,255)}),H=new U({color:T(28,181,140,255)}),W=new U({color:T(230,88,88,255)}),K=new U({color:T(28,181,140,180)}),X=new U({color:T(230,88,88,180)}),j=new U({color:T(229,243,228)}),$=new U({color:T(232,225,216)}),Z=[T(193,48,48,255),T(240,234,60,255),T(45,191,55,255)],Q=[T(10,19,255,255),T(15,191,250,255),T(249,255,2,255),T(253,133,0,255),T(255,24,0,255)],q=[T(50,99,213),T(8,179,77),T(255,246,0),T(255,126,0),T(189,36,30)],tt=[T(16,64,176),T(8,179,77),T(255,246,0),T(255,126,0),T(168,6,0)],et=new U({color:T(185,198,207,255)}),st=new J({stops:[{color:T(151,190,220,10),offset:0},{color:T(151,190,220,50),offset:1}]}),rt=K.getColor().setA(255),nt=T(150,150,150),ot=[T(255,243,136,125),T(254,237,99,125),T(255,216,109,125),T(255,172,100,125),T(255,133,101,125),T(255,113,142,125),T(230,103,129,125),T(242,126,219,125),T(255,155,235,125),T(255,181,240,125),T(203,143,255,125),T(208,154,255,125),T(171,188,255,125),T(197,209,255,125),T(171,187,255,125),T(84,167,239,125),T(38,196,214,125),T(38,214,196,125),T(69,225,141,125),T(36,191,88,125)];return Gf({isDark:t,highlightColorOffset:T(-60,-60,-60,60),highlightColorOffsetAxisOverlay:T(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:h,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTitleFillStyle:c,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:m,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:x,cursorGridFillStyle:A,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:C,uiBackgroundColor:k,uiBackgroundBorderColor:E,uiStrokeColorContrastHigh:R,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:_,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:B,dataColorPalette:P,dataColorPaletteInverted:[{area:T(190,50,50,100),border:T(210,80,80)}],dataHighlightOverlayColor:L,dataColorPositive:V,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new U({color:T(255,255,255,180)}),zoomBandChartSplitterColor:w("#505D65"),zoomBandChartKnobFillStyle:t=>new so({source:Hf(t,"zoomBandChart/light-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:w("#D9D9D9"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new U({color:T(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:T(33,33,33)})},{positiveTextFillStyle:Y,negativeTextFillStyle:G,positiveFillStyle:H,negativeFillStyle:W,positiveAreaFillStyle:K,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:st,bollingerBorderFillStyle:et,highlightPointColor:T(0,0,0),highlightDataGridColor:rt,unfocusedDataColor:nt})})),qf=we((()=>{const t=!1,i=new J({position:{x:.8,y:.8},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.ellipse,stops:[{offset:0,color:T(255,255,255)},{offset:1,color:T(255,255,255)}]}),s=new U({color:T(214,236,216,255)}),r=new J({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:T(233,244,231,70)},{offset:1,color:T(233,244,231,200)}]}),n=new J({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:T(255,255,255,255)},{offset:1,color:T(255,255,255,255)}]}),o=new U({color:T(1,61,53)}),a=new U({color:T(1,61,53)}),h=new U({color:T(1,61,53)}),l=new U({color:T(1,61,53,150)}),u=new U({color:T(1,61,53)}),c=u,d=c,f=new it({angle:45,stops:[{offset:0,color:T(225,225,225)},{offset:1,color:T(225,225,225)}]}),g=new U({color:T(188,211,186,255)}),m=new U({color:T(188,211,186,150)}),y=new U({color:T(188,211,186,50)}),p=new U({color:T(188,211,186,50)}),x=new U({color:T(104,148,111,255)}),A=new it({angle:0,stops:[{offset:0,color:T(255,255,255,240)},{offset:1,color:T(255,255,255,240)}]}),S=new U({color:T(104,148,111)}),v=T(255,255,200),b=new U({color:T(255,255,255,240)}),M=new U({color:T(104,148,111,255)}),C=T(255,255,255,255),k=T(179,201,183,255),E=T(188,211,186,255),R=T(188,211,186,255),I=T(188,211,186,255),_=T(188,211,186,255),F=T(100,100,100),D=T(200,200,200),B=[T(138,195,142,255),T(193,161,114,255),T(178,99,99,255),T(142,156,210,255),T(154,209,219,255),T(164,212,199,255),T(104,156,97,255),T(196,147,195,255),T(92,190,187,255),T(126,100,51,255),T(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),P=T(150,150,150,80),L=T(46,182,84,255),V=T(232,96,96,255),z=new rs({thickness:2,fillStyle:new U({color:T(188,211,186,255)})}),N={mapChartFillStyle:new it({angle:-45,stops:[{color:T(118,160,121,255),offset:0},{color:T(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:Wf(t,B,.8),pieChartSliceFillStylePalette:Kf(t,B,.8),pyramidChartSliceFillStylePalette:Xf(t,B,.5),funnelChartSliceFillStylePalette:Xf(t,B,.5),rectangleSeriesFillStyle:jf(t,B),gaugeChartBarColor:T(46,182,84,255),gaugeChartGlowColor:T(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new U({color:T(77,66,21,255)})},O=new U({color:T(93,151,97,255)}),Y=new U({color:T(178,99,99,255)}),G=new U({color:T(138,195,142,255)}),H=new U({color:T(178,99,99,255)}),W=new U({color:T(138,195,142,180)}),K=new U({color:T(178,99,99,180)}),X=new U({color:T(224,240,237)}),j=new U({color:T(251,227,227)}),$=[T(178,99,99,255),T(215,224,111,255),T(80,186,88,255)],Z=[T(62,64,142,255),T(66,131,77,255),T(250,250,135,255),T(202,161,78,255),T(179,53,53,255)],Q=[T(64,86,138),T(123,192,205),T(255,252,149),T(220,155,92),T(184,78,74)],q=[T(64,86,138),T(123,192,205),T(255,252,149),T(220,155,92),T(132,60,57)],tt=new U({color:T(185,198,207,255)}),et=new J({stops:[{color:T(151,190,220,10),offset:0},{color:T(151,190,220,50),offset:1}]}),st=W.getColor().setA(255),rt=T(150,150,150),nt=[T(242,239,210,150),T(243,238,183,150),T(210,222,136,150),T(204,217,148,150),T(157,190,124,150),T(143,178,72,150),T(198,147,88,150),T(216,148,71,150),T(229,142,103,150),T(225,174,152,150),T(219,149,203,150),T(216,188,209,150),T(109,198,189,150),T(172,206,202,150),T(164,223,217,150),T(174,215,233,150),T(203,225,235,150),T(220,227,243,150),T(207,213,227,150),T(171,182,209,150)];return Gf({isDark:t,highlightColorOffset:T(-60,-60,-60,60),highlightColorOffsetAxisOverlay:T(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:a,axisLabelMajorFillStyle:h,axisLabelMinorFillStyle:l,uiTitleFillStyle:u,uiTextFillStyle:c,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:g,axisGridMajorFillStyle:m,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:x,legendBackgroundFillStyle:A,legendBackgroundBorderFillStyle:S,legendButtonDefaultColor:v,resultTableBackgroundFillStyle:b,resultTableBackgroundBorderFillStyle:M,uiBackgroundColor:C,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:E,uiStrokeColorContrastMedium:R,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:_,dataStrokeColorContrastMedium:F,dataStrokeColorContrastLow:D,dataColorPalette:B,dataColorPaletteInverted:[{area:T(210,70,70,100),border:T(200,110,110)}],dataHighlightOverlayColor:P,dataColorPositive:L,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new U({color:T(255,255,255,180)}),zoomBandChartSplitterColor:w("#446A40"),zoomBandChartKnobFillStyle:t=>new so({source:Hf(t,"zoomBandChart/lightnature-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:w("#EFF7EE"),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new U({color:T(0,0,0)}),treeMapChartLabelHeaderFillStyle:new U({color:T(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:Y,positiveFillStyle:G,negativeFillStyle:H,positiveAreaFillStyle:W,negativeAreaFillStyle:K,positiveBackgroundFillStyle:X,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:q,bollingerFillStyle:et,bollingerBorderFillStyle:tt,highlightPointColor:T(0,0,0),highlightDataGridColor:st,unfocusedDataColor:rt})})),Jf=we((()=>{const t=T(255,255,255),i=new U({color:t}),s=!0,r=new go({spread:1,blur:9,offset:{x:0,y:0},color:T(255,255,255,30)}),n=new U({color:T(6,15,36)}),o=new J({stops:[{color:T(46,13,87,50),offset:0},{color:T(0,0,0,150),offset:1}]}),a=new U({color:T(0,5,8,150)}),h=i,l=i,u=i,c=new U({color:T(255,255,220,130)}),d=i,f=i,g=f,m=new it({angle:45,stops:[{offset:0,color:T(241,133,255,255)},{offset:1,color:T(115,207,238,255)}]}),y=i,p=new U({color:T(61,94,110,100)}),x=new U({color:T(61,94,110,255)}),A=new U({color:T(61,94,110,40)}),S=i,v=new U({color:T(0,18,23,255)}),b=i,M=T(115,207,238,255),C=new U({color:T(0,17,22,240)}),k=i,E=T(0,38,48,255),R=T(0,0,0),I=t,_=T(150,150,150),F=T(19,57,93),D=T(50,50,50),B=T(0,17,48),P=T(200,200,200),L=[T(20,211,237,255),T(98,147,252,255),T(164,73,250,255),T(129,117,253,255),T(95,134,252,255),T(22,133,212,255),T(35,200,242,255),T(104,121,233,255),T(137,69,232,255),T(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),V=t.setA(50),z=T(3,217,194,255),N=T(243,21,110,255),O={mapChartFillStyle:new it({angle:135,stops:[{color:T(118,248,231,255),offset:0},{color:T(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Wf(s,L,.5),pieChartSliceFillStylePalette:Kf(s,L,2),funnelChartSliceFillStylePalette:Xf(s,L,1),pyramidChartSliceFillStylePalette:Xf(s,L,1),rectangleSeriesFillStyle:jf(s,L),gaugeChartBarColor:T(3,217,194,255),gaugeChartGlowColor:T(3,217,194,150)},Y=new U({color:T(20,211,237,255)}),G=new U({color:T(253,145,178,255)}),H=new U({color:T(20,211,237,255)}),W=new U({color:T(239,68,121,255)}),K=new U({color:T(20,211,237,120)}),X=new U({color:T(239,68,121,180)}),j=new U({color:T(1,53,57,255)}),$=new U({color:T(94,19,42,255)}),Z=[T(174,51,132,255),T(204,107,218,255),T(189,215,253,255)],Q=[T(0,63,95,255),T(0,149,255,255),T(0,225,255,255),T(255,154,254,255),T(204,98,170,255),T(139,39,84,255)],q=[T(197,241,255,255),T(70,210,255,255),T(0,164,217,255),T(90,99,222,255),T(138,75,192,255),T(151,27,162,255)],tt=[T(13,31,52,255),T(129,54,130,255),T(131,108,176,255),T(7,162,213,255),T(26,247,255,255)],et=new J({stops:[{color:T(219,42,235,60),offset:0},{color:T(237,73,252,10),offset:1}]}),st=new U({color:T(237,73,252,255)}),rt=K.getColor().setA(255),nt=T(8,70,100),ot=[T(149,230,255,150),T(93,213,243,150),T(20,189,223,150),T(5,151,181,150),T(2,138,198,150),T(2,113,198,150),T(97,148,236,150),T(93,111,230,150),T(151,120,223,150),T(128,87,227,150),T(153,52,230,150),T(179,92,245,150),T(248,110,211,150),T(255,155,228,150),T(251,88,207,150),T(255,0,162,150),T(214,73,177,150),T(209,71,159,150),T(238,101,169,150),T(210,57,134,150)];return Gf({isDark:s,highlightColorOffset:T(60,60,60,60),highlightColorOffsetAxisOverlay:T(255,255,255,40),effect:r,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new so({source:Hf(t,"themes/cyberSpace.jpg"),fitMode:e.ImageFitMode.Fill}),dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:h,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:g,axisLineFillStyle:m,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:x,axisGridMinorFillStyle:A,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:C,resultTableBackgroundBorderFillStyle:k,uiBackgroundColor:E,uiBackgroundBorderColor:R,uiStrokeColorContrastHigh:I,uiStrokeColorContrastMedium:_,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:D,dataStrokeColorContrastMedium:B,dataStrokeColorContrastLow:P,dataColorPalette:L,dataColorPaletteInverted:[{area:T(41,130,255,100),border:T(45,110,240)}],dataHighlightOverlayColor:V,dataColorPositive:z,dataColorNegative:N,zoomBandChartDefocusOverlayFillStyle:new U({color:T(0,0,0,180)}),zoomBandChartSplitterColor:w("#DB77FF"),zoomBandChartKnobFillStyle:t=>new so({source:Hf(t,"zoomBandChart/cyberspace-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:w("#1E1E3B"),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new U({color:T(33,33,33)}),treeMapChartLabelHeaderFillStyle:new U({color:T(250,250,250)})},{positiveTextFillStyle:Y,negativeTextFillStyle:G,positiveFillStyle:H,negativeFillStyle:W,positiveAreaFillStyle:K,negativeAreaFillStyle:X,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:q,spectrogramColorPalette:tt,bollingerFillStyle:et,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:rt,unfocusedDataColor:nt})})),tg={};Object.defineProperty(tg,"darkGold",{get:$f,enumerable:!0}),Object.defineProperty(tg,"turquoiseHexagon",{get:Zf,enumerable:!0}),Object.defineProperty(tg,"light",{get:Qf,enumerable:!0}),Object.defineProperty(tg,"lightNature",{get:qf,enumerable:!0}),Object.defineProperty(tg,"cyberSpace",{get:Jf,enumerable:!0});const eg=tg,ig=eg.darkGold,sg=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let s,r=0,n=0;const o=[],a=t=>{const i=new Tt.Image;i.src=t,i.onload=()=>{o.forEach((t=>{var s;const o=new so({source:i,fitMode:e.ImageFitMode.Stretch});null===(s=t.Ud)||void 0===s||s.Be(o),r=i.width,n=i.height,u(t)}))}};a(i);const h=t.Qn((t=>a(t)));let l;if(new Tt.Image instanceof Tt.HTMLImageElement){const t=new Tt.Image;t.src=i,l=new so({source:t,fitMode:e.ImageFitMode.Stretch})}else if(Tt.lcjs_setup){const t=new Tt.Image;t.src=i;const s=Tt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),l=new so({source:s,fitMode:e.ImageFitMode.Stretch})}else l=new U({color:w("#f00")});const u=t=>{if(t.Ud){const e=t.At.pi({x:t.At.x.getInnerEnd(),y:t.At.y.getInnerStart()},{x:-(3+r),y:3}),i=t.At.pi({x:t.At.x.getInnerEnd(),y:t.At.y.getInnerStart()},{x:-3,y:3+n}),s={x:i.x-e.x,y:i.y-e.y};t.Ud.Ee(e).it(s)}s&&s.Ms()};return s=t.UF("logo",Number.MAX_SAFE_INTEGER),i=>{const r={At:i};return(i=>{i.Ud&&i.Ud.dispose(),s&&(i.Ud=s.Le(i.At).Be(l).setMouseInteractions(!0).De(nt).setMouseEnterEventHandler((()=>{t.Kr(e.MouseStyles.Point)})).setMouseLeaveEventHandler((()=>{t.Kr(e.MouseStyles.None)})).setMouseClickEventHandler(rg).setTouchEndEventHandler(rg),u(i))})(r),o.push(r),{zs:()=>u(r),Y:()=>(e=>{e.Ud&&(e.Ud.dispose(),e.Ud=void 0);const i=o.indexOf(e);i>=0&&o.splice(i,1),o.length<=0&&t.Jn(h)})(r)}}},rg=()=>Tt.open("https://lightningchart.com/lightningchart-js/");class ng{constructor(){this.BR=this.BI.bind(this),Tt.addEventListener("scroll",this.BR,{passive:!0})}Y(){this.BR&&Tt.removeEventListener("scroll",this.BR),this.BR=void 0}}class og{constructor(t,e){this.Ca=t,this.Z=e,this.LR=!0,this.RR=null,this.ER=null}}class ag{constructor(t){this.zR=!1,this.VR=1,this.OR=t,this.NR={Ca:u(0,0),Z:u(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),LR:!0,RR:null,ER:null},this.GR=u(64,64),this.WR=new Uint8ClampedArray(this.GR.x*this.GR.y*this.VR)}UR(t,e){if(!t.LR)return null;if(t.RR&&t.ER){const i=this.UR(t.RR,e);return null!==i?i:this.UR(t.ER,e)}const i=c(t.Z.x,t.Z.y);if(t.Ca.x+t.Z.x>=Number.MAX_SAFE_INTEGER&&(i.x=this.GR.x-t.Ca.x-1),t.Ca.y+t.Z.y>=Number.MAX_SAFE_INTEGER&&(i.y=this.GR.y-t.Ca.y-1),t.Z.x===e.x&&t.Z.y===e.y)return t.LR=!1,t;if(i.x<e.x||i.y<e.y)return null;let s,r;const n=i.x-e.x,o=i.y-e.y;let a=n<o;return 0===n&&0===o&&(a=!(t.Z.x>t.Z.y)),a?(s=new og(ui(t.Ca,{x:0,y:1}),u(t.Z.x,e.y)),r=new og(ui(t.Ca,{x:0,y:e.y+1}),u(t.Z.x,t.Z.y-1-e.y))):(s=new og(ui(t.Ca,{x:1,y:0}),u(e.x,t.Z.y)),r=new og(ui(t.Ca,{x:e.x+1,y:0}),u(t.Z.x-1-e.x,t.Z.y))),t.RR=s,t.ER=r,this.UR(t.RR,e)}YR(t,e){const i={HR:!1,Ca:null};let s=this.UR(this.NR,e);if(null===s)for(;null===s&&this.GR.x<this.OR&&this.GR.y<this.OR;){if(!this.$R(u(2*this.GR.x,2*this.GR.y)))return this.zR=!0,null;i.HR=!0,s=this.UR(this.NR,e)}if(null===s)return this.zR=!0,null;for(let i=0;i<e.y;i+=1)for(let r=0;r<e.x;r+=1){const n=s.Ca.y+i,o=s.Ca.x+r;this.WR[n*this.VR*this.GR.x+o*this.VR+0]=t[i*this.VR*e.x+r*this.VR+0]}return i.Ca=s.Ca,i}$R(t){if(t.x>this.OR||t.y>this.OR)return!1;const e=new Uint8ClampedArray(t.x*t.y*this.VR);for(let i=0;i<this.GR.y;i+=1)for(let s=0;s<this.GR.x;s+=1)e[i*t.x*this.VR+s*this.VR+0]=this.WR[i*this.GR.x*this.VR+s*this.VR+0];return this.GR=t,this.WR=e,!0}}class hg{constructor(t){this.XR=new Map,this.OR=t,this.XR.set(this.XR.size,new ag(this.OR))}jR(t){return this.XR.get(t)}YR(t,e){let i=-1;const s=Array.from(this.XR.values());for(let t=0;t<s.length;t+=1){const e=s[t];if(!e)break;if(!e.zR){i=t;break}}-1===i&&(i=this.XR.size,this.XR.set(this.XR.size,new ag(this.OR)));const r=this.XR.get(i);if(!r)return null;let n=r.YR(t,e);if(!n&&r.zR){const s=this.XR.size,r=new ag(this.OR);this.XR.set(s,r),i=s,n=r.YR(t,e)}return n?{ZR:i,...n}:null}}var lg;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(lg||(lg={}));const ug=fe("font-texture");class cg{constructor(t){this.QR=new Map,this.JR=new Map,this.Zo=ug(),this.KR=t,this.qR=new hg(this.KR.tE||4096)}iE(){return this.JR.forEach((t=>{this.KR.sE(t)})),this.JR.clear(),this}eE(t,e){const i=this.QR.get(e);if(i)return i.get(t)}hE(t,e,i){let s=this.QR.get(e);if(s||(s=new Map,this.QR.set(e,s)),s.has(t.glyph))return lg.Success;const r=this.qR.YR(i,t.size);if(!r||!r.Ca)return lg.Fail;r.HR&&this.rE();const n=this.qR.jR(r.ZR);if(!n)return lg.Fail;let o=this.JR.get(r.ZR);if(!o){const t=this.KR.gl.createTexture();if(!t)throw new xt("Failed to create texture for font!");o=t,this.JR.set(r.ZR,t)}const a=r.Ca,h=n.GR.x,l=n.GR.y,u=-t.offsetX,c=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,g=a.x/h,m=(a.y+t.size.y)/l,y=(a.x+t.size.x)/h,p=a.y/l,x=[g,m,y,m,g,p,g,p,y,m,y,p],A=[u,c,d,c,u,f,u,f,d,c,d,f],S={origin:a,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:A,texCoords:x,packerId:r.ZR,texture:o};s.set(t.glyph,S);const v=this.KR.gl;return v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),v.bindTexture(v.TEXTURE_2D,o),v.texImage2D(v.TEXTURE_2D,0,v.LUMINANCE,n.GR.x,n.GR.y,0,v.LUMINANCE,v.UNSIGNED_BYTE,this.KR.nE?n.WR:new Uint8Array(n.WR)),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.bindTexture(v.TEXTURE_2D,null),r.HR?lg.Resize:lg.Success}rE(){this.QR.forEach((t=>{t.forEach(((e,i)=>{const s=this.qR.jR(e.packerId);if(!s)return;const r=e.origin,n=s.GR.x,o=s.GR.y,a=r.x/n,h=(r.y+e.size.y)/o,l=(r.x+e.size.x)/n,u=r.y/o,c=[a,h,l,h,a,u,a,u,l,h,l,u];e.texCoords=c,t.set(i,e)}))}))}}const dg=t=>{if(t instanceof Vi||t instanceof zc)return t._i()?"linear-highPrecision":"linear";if(t instanceof zi){const e={};return t.x instanceof wi&&(e.x={base:t.x.gi()}),t.y instanceof wi&&(e.y={base:t.y.gi()}),["logarithmic",e]}return"linear"},fg=t=>{const e=Object.keys(t),i={};return e.forEach((e=>{const s=t[e];let r=!1;i[e]=t=>{if(!t)return r;const e=s();return r=e,e}})),i},gg=(t,e,i)=>"value"===t.getLookUpProperty()?i:"x"===t.getLookUpProperty()?{min:e.vt(),max:e.St()}:"y"===t.getLookUpProperty()?{min:e.xt(),max:e.bt()}:"z"===t.getLookUpProperty()?{min:e.xv(),max:e.Sv()}:void 0,mg=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),yg=t=>(e,i)=>i%2?e:e+t;class pg{constructor(t){this.oE=new Map,this.aE=fe("font"),this.lE=new Map,this.uE=new Set,this.KR=t}iE(t=!1){return(t||0===this.uE.size)&&(this.oE.forEach(((t,e)=>{t.iE(),this.oE.delete(e)})),this.uE.clear()),this}cE(t){this.uE.add(t)}dE(t){this.uE.delete(t)}fE(t,e,i,s){const r=Tt.devicePixelRatio,n=`${s?"dark":"light"} - ${kr(e,r).id}`,o=this.lE.get(n),a=this.oE.get(o);let h=0,l=0,u=0;const c=t.split(""),d=e.size,f=.45*e.size*r,g=Math.round(1*e.size);let m=!1;for(let t=0;t<c.length;t+=1){const e=c[t],i=a&&a.eE(e,d);if(i)""!==e.trim()&&(l=Math.max(l,i.baseline),h=Math.min(h,i.baseline-(i.size.y-1))),u+=i.advanceX;else{if(""!==e.trim()){const t=0;l=Math.max(l,t),h=Math.min(h,t-(g-1))}u+=f,m=!0}}const y=((t,e,i)=>{if(0===i||360===i||180===i||i%180==0)return{x:t,y:e};if(90===i||-90===i||(i+90)%180==0)return{x:e,y:t};const s=i*Math.PI/180,r=Math.cos(s),n=Math.sin(s);return{x:Math.abs(t*r)+Math.abs(e*n),y:Math.abs(t*n)+Math.abs(e*r)}})(u/r,(l-h+1)/r,i);return{x:y.x,y:y.y,isEstimate:m}}AE(t,e,i){const s=`${i?"dark":"light"} - ${e.id}`;let r=this.lE.get(s);r||(r=this.aE(),this.oE.set(r,new cg(this.KR)),this.lE.set(s,r));const n=this.oE.get(r);if(!n)throw new xt("Failed to get font texture!");let o=0,a=0,h=0;const l=t.split(""),c=new Map;let d=0;const f=e.properties.size;for(let t=0;t<l.length;t+=1){const s=l[t],r=Math.ceil(d);let h=n.eE(s,f);if(!h){const r=this.KR.gE(s,e.properties,e.dpr,i);if(!r)continue;const l=n.hE(r[1],f,r[0]);if(l===lg.Resize){this.uE.forEach((t=>{t.va.u=!0})),t=-1,d=0,a=0,o=0,c.clear(),this.KR.cs.Ms(!0);continue}if(l===lg.Fail)throw new xt("Failed to create glyph");if(h=n.eE(s,f),!h)throw new xt("Failed to get glyph after creation")}if(""!==s.trim()){let t=c.get(h.texture);t||(t={vertices:[],texCoords:[]},c.set(h.texture,t)),t.vertices.push(...h.vertices.map(yg(r))),t.texCoords.push(...h.texCoords),a=Math.max(a,h.baseline),o=Math.min(o,h.baseline-(h.size.y-1))}d+=h.advanceX}h=d;const g=m(u(0,o),u(h,a)),y=[];return c.forEach(((t,e)=>{y.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:e})})),[y,g]}}class xg{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const e=this.modifiers.filter((t=>Ag(t)));for(const i of e)t=i(t);return`${Se(this.modifiers.filter((t=>Sg(t)))).map((t=>t.pE)).join("\n")}\n${t}`}}const Ag=t=>"function"==typeof t,Sg=t=>t&&"object"==typeof t&&"yE"in t,vg=(...t)=>e=>{t=t.reverse();for(let i of t)"string"==typeof i&&(i=i.includes("{")||i.endsWith(";")?i:`${i};`,i=i.trim(),e=e.replace("void main(void)",`${i}\nvoid main(void)`));return e},bg=t=>e=>(t=t.endsWith(";")?t:`${t};`,e.replace(t,"")),Mg=(...t)=>e=>{const i=t.filter((t=>t));for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const s=i.join("\n");return e.replace("void main(void) {\n",`void main(void) {\n${s}\n`)},Tg=(t,...e)=>i=>{for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const s=e.join("\n"),r=new RegExp(`(.*${t}.*)`),n=i.replace(r,`${s}\n$1`);return e.forEach((e=>{if(!n.includes(e))throw new Error(`ShaderBefore misusage (not found: \n${e}\nmatch: \n${t}\nresult: \n${n}\n)`)})),n},wg=(t,...e)=>i=>{const s=e.filter((t=>"string"==typeof t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const r=s.join("\n"),n=i.lastIndexOf(t),o=i.substring(n),a=o.indexOf("\n"),h=o.substring(a),l=`${i.substring(0,n+a)}\n${r}${h}`;return s.forEach((e=>{if(!l.includes(e))throw new Error(`ShaderAfter misusage (not found: "${e}", match: "${t}", result: "${l}")`)})),l},Cg=(...t)=>e=>{for(let i of t)if("string"==typeof i){i=i.endsWith(";")?i:`${i};`,i=i.trim(),i=i.startsWith("\t")?i:`\t${i}`;const t=e.lastIndexOf("}");e=`${e.substring(0,t-1)}\n${i}\n}`}return e},kg=(t,e)=>i=>{let s,r;if(t.includes("uniform")||t.includes("attribute")){const e=t.endsWith(";")?t:`${t};`;i=vg(e)(i),s=t.split(" ")[2].replace(";","")}else s=t;if(e.includes(" ")){const t=e.endsWith(";")?e:`${e};`;i=vg(t)(i),r=e.split(" ")[2].replace(";","")}else r=e;return Cg(`\t${r} = ${s};`)(i)},Eg=(...t)=>e=>{t=t.reverse();for(const i of t)e=i+e;return e},Rg={roundUnsigned:{yE:"roundUnsigned",pE:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{yE:"linearStep",pE:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},decodeUbyteRGBAEncodedFloat:{yE:"decodeUbyteRGBAEncodedFloat",pE:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{yE:"texelFetchWithFallback",pE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{yE:"texelFetchWithFallback",pE:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{yE:"texelFetchUnsignedWithFallback",pE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{yE:"texelFetchUnsignedWithFallback",pE:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{yE:"modulus",pE:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{yE:"computeScreenSpaceWireframe",pE:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},Ig=(t,e)=>{const i=e.steps,s=i.length-1,r=[vg("uniform vec4 uFallbackColor")],n=[],o=[];for(let t=0;t<e.steps.length;t+=1)n.push(`uniform float uLUTValue${t}`),o.push(`uniform vec4 uLUTColor${t}`);return r.push(vg(...n,...o),e.percentageValues&&vg("uniform float uMinValue","uniform float uMaxValue")),e.interpolate?r.push(wg("colorFragment =","vec4 colorLookup = uLUTColor0","float value = "+(e.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),"if (value <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                }",`if (value >= uLUTValue${s}) {\n                    colorLookup = uLUTColor${s};\n                }`,...i.slice(0,-1).map(((t,e)=>`if (value >= uLUTValue${e} && value <= uLUTValue${e+1}) {\ncolorLookup = uLUTColor${e} + vec4(uLUTColor${e+1}.r -  uLUTColor${e}.r, uLUTColor${e+1}.g -  uLUTColor${e}.g, uLUTColor${e+1}.b -  uLUTColor${e}.b, uLUTColor${e+1}.a -  uLUTColor${e}.a) * (value - uLUTValue${e})/(uLUTValue${e+1} - uLUTValue${e});} `)),"colorFragment = colorLookup")):r.push(wg("colorFragment =","vec4 colorLookup = vec4(uLUTValue0)","float value = "+(e.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= -340282346638528859811704183484516925440.0) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${i.slice().reverse().map((t=>{const e=i.indexOf(t);return`else if (value >= uLUTValue${e}) { colorLookup = uLUTColor${e};} `})).join("")}`,"colorFragment = colorLookup")),r},_g=[vg("uniform sampler2D uMaskTexture"),vg("varying vec2 vMaskTextureCoord"),wg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],Fg=[vg("uniform sampler2D uMaskTexture"),vg("varying vec2 vMaskTextureCoord"),wg("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],Dg=[vg("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),wg("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class Bg extends Error{constructor(t,e,i){super(`Dynamic shader generation error\n(id: ${e})\n ${i?`when applying feature: ${i.idVertex?`vert: ${i.idVertex}`:""} ${i.idFragment?`frag: ${i.idFragment}`:""}`:""} | ${t}`)}}const Pg=(...t)=>{let e="";for(const i of t){if("object"!=typeof i){e+=`${String(i)},`;continue}const t=[{prefix:"",obj:i}];for(;t.length>0;){const{prefix:i,obj:s}=t.shift();e+=`${i}:`;const r=Object.keys(s).sort();for(const i of r){const r=s[i];"object"==typeof r&&r.__proto__===Object.prototype||Array.isArray(r)?t.push({prefix:i,obj:r}):e+=`${i}=${String(r)},`}}}return e},Lg=t=>void 0!==t.find((t=>{var e;return null===(e=t.mE)||void 0===e?void 0:e.vE})),Vg=t=>void 0!==t.find((t=>{var e;return null===(e=t.mE)||void 0===e?void 0:e.SE})),zg=(t,e,...i)=>{const s=[],r=e?"vec3":"vec2",{axisWorldTranslation:n,scaling:o,translation:a,offset:h,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=t,f=[];if("attribute"===d&&s.push(vg("attribute vec3 aNormal"),Mg("vec3 normal = aNormal")),"linear-highPrecision"!==n?i.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==c?s.push(Mg(`${r} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`)):s.push(Mg(`${r} ${t.variableNameAxisCoord} = ${e?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`)))})):i.forEach((e=>{!0!==t.splitPosAttribute?s.push(Mg(`${r} ${e.variableNameAxisCoord}_highpart = ${e.attributeNameAxisCoord}_highpart`),Mg(`${r} ${e.variableNameAxisCoord}_lowpart = ${e.attributeNameAxisCoord}_lowpart`)):s.push(Mg(`${r} ${e.variableNameAxisCoord}_highpart = vec2(${e.attributeNameAxisCoord}_highpartX, ${e.attributeNameAxisCoord}_highpartY)`),Mg(`${r} ${e.variableNameAxisCoord}_lowpart = vec2(${e.attributeNameAxisCoord}_lowpartX, ${e.attributeNameAxisCoord}_lowpartY)`))})),h&&h.rotation){const t=h.rotation.dataType,e="uniform"===t?"u":"a";if("attribute-deg"===t){s.push(vg("attribute float aRotDeg"),vg("uniform float uBaseRotDeg"));const t="cRot",e="aInstanceGeo";s.push(Mg(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${e}.x * ${t}.y + ${e}.y * ${t}.x, ${e}.y * ${t}.y - ${e}.x * ${t}.x)`))}else{const i=`${e}Rot`;s.push(vg(`${t} vec2 ${i}`));const r="aInstanceGeo";s.push(Mg(`vec2 rotatedGeo = vec2(${r}.x * ${i}.y + ${r}.y * ${i}.x, ${r}.y * ${i}.y - ${r}.x * ${i}.x)`))}}if(h&&s.push(vg(`attribute ${r} aInstanceGeo`)),!0===l){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");i.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${e?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===u){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");i.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(o){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===o.dataType?"a":"u")+"Scaling",r=e?"vec3":"vec2";s.push(vg(`${o.dataType} ${r} ${t}`)),i.forEach((e=>{f.push(`${e.variableNameAxisCoord} = ${e.variableNameAxisCoord} * ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===a.dataType?"a":"u")+"TranslationAxis",r=e?"vec3":"vec2";s.push(vg(`${a.dataType} ${r} ${t}`)),i.forEach((e=>{f.push(`${e.variableNameAxisCoord} = ${e.variableNameAxisCoord} + ${t}`)}))}if(h&&"axis"===h.sizeUnit){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===h.dataType?"a":"u")+"OffsetAxis",o=!0===h.symmetric?"float":r;s.push(vg(`${h.dataType} ${o} ${t}`));const a=h.halved?" * 0.5":"",l=h.rotation?"rotatedGeo":"aInstanceGeo",u="offsetGeometry";f.push(`${r} ${u} = ${t} * ${l}${a} * sign(uScale)`),e&&"gpu-calculate"===d&&f.push(`${r} normal = ${l}`),i.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${u}`)}))}if(void 0===n||"linear"===n)s.push(vg(`uniform ${r} uDisp`,`uniform ${r} uScale`)),i.forEach((t=>{f.push(`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===n)s.push(vg(`uniform ${r} uDisp`,`uniform ${r} uScale`,`uniform ${r} uScaleStart_highpart`,`uniform ${r} uScaleStart_lowpart`)),i.forEach((t=>{f.push(`${r} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${r} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===n)s.push(vg("uniform mat3 uMatrix")),i.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===n)s.push(vg("uniform mat4 uMatrix")),i.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===n[0]){s.push(vg(`uniform ${r} uScaleStart`,`uniform ${r} uScaleStartLog`,`uniform ${r} uScaleInterval`,`uniform ${r} uScaleIntervalLog`,`uniform ${r} uViewportStart`,`uniform ${r} uViewportSize`));const t=e?["x","y","z"]:["x","y"],o=[];t.forEach((t=>{const e=n[1][t];if(void 0!==e){const t=e.base;if("e"===t)return;const i=`float cLog${t} = 1.0 / log(${ki(t).toFixed(1)})`;o.includes(i)||o.push(i)}})),s.push(vg(...o)),i.forEach(((e,i)=>{const s=`${i}`,o=[];t.forEach((t=>{const i=t.toUpperCase(),r=n[1][t];if(void 0===r)f.push(`float posPercent${i}${s} = (${e.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const n=r.base,o="e"===n;f.push(`float posLog${i}${s} = log(${e.variableNameAxisCoord}.${t})${o?"":` * cLog${n}`}`,`float posPercent${i}${s} = (posLog${i}${s} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}o.push(`posPercent${i}${s}`)})),f.push(`${r} ${e.variableNameWorldCoord} = uViewportStart + ${r}(${o.join(", ")}) * uViewportSize`)}))}if(h&&"px"===h.sizeUnit){s.push(vg("uniform vec2 uRatioPxClip"));let t="vec2(0.0, 0.0)";h.useAlignment&&(s.push(vg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const e=("attribute"===h.dataType?"a":"u")+"OffsetPixels",n=!0===h.symmetric?"float":r;s.push(vg(`${h.dataType} ${n} ${e}`));const o=h.halved?" * 0.5":"",a=`(${h.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${e}${o} * uRatioPxClip`;i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${a}`)}))}if(h&&"scale"===h.sizeUnit){s.push(vg("uniform vec2 uRatioPxClip")),s.push(vg("uniform vec2 uSizePixels"));let t="vec2(0.0, 0.0)";h.useAlignment&&(s.push(vg("uniform vec2 uOffsetAlignment")),t="uOffsetAlignment");const e=("uniform"===h.dataType?"u":"a")+"OffsetScale";s.push(vg(`${h.dataType} float ${e}`));const r=`(${h.rotation?"rotatedGeo":"aInstanceGeo"} + ${t}) * ${e} * uSizePixels * uRatioPxClip`;i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${r}`)}))}if(h&&"wu"===h.sizeUnit){const t=("attribute"===h.dataType?"a":"u")+"OffsetWU",n=!0===h.symmetric?"float":r;s.push(vg(`${h.dataType} ${n} ${t}`));const o=h.halved?" * 0.5":"",a=h.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${r} ${l} = ${t} * ${a}${o}`),e&&"gpu-calculate"===d&&f.push(`${r} normal = normalize(${l})`),i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(h&&"nwu"===h.sizeUnit){s.push(vg("uniform float uRatioNwuWu"));const t=("attribute"===h.dataType?"a":"u")+"OffsetNWU",n=!0===h.symmetric?"float":r;s.push(vg(`${h.dataType} ${n} ${t}`));const o=h.halved?" * 0.5":"",a=h.rotation?"rotatedGeo":"aInstanceGeo",l="offsetGeometry";f.push(`${r} ${l} = ${t} * ${a}${o}`),e&&"gpu-calculate"===d&&f.push(`${r} normal = normalize(${l})`),i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * uRatioNwuWu`)}))}return t.snapToNearestPixel&&(s.push(vg("uniform vec2 uViewportSizePx")),i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),s.push(Tg("gl_Position =",...f)),s},Ng=(t,e,i,s)=>{const r=[],n=t.axisWorldTranslation,o=e?"vec3":"vec2";if("linear"===n)r.push(wg(i,`${o} ${s} = ${i} * uScale + uDisp`));else if("linear-highPrecision"===n)r.push(wg(i,`${o} ${s} = ${i} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==n[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${o} ${i}_percent = (${i} - uViewportStart) / uViewportSize`];(e?["x","y","z"]:["x","y"]).forEach((e=>{const s=e.toUpperCase(),r=n[1][e];if(void 0===r)t.push(`float pos${s}Back = ${i}_percent.${e} * uScaleInterval.${e} + uScaleStart.${e}`);else{const n=r.base,o="e"===n?"1.0":`cLog${n}`;t.push(`float pos${s}Back = pow(2.71828, (${i}_percent.${e} * uScaleIntervalLog.${e} + uScaleStartLog.${e}) / ${o})`)}})),t.push(`${o} ${s} = ${o}(posXBack, posYBack${e?", posZBack":""})`),r.push(wg(i,...t))}}return r},Og=t=>(t=>void 0!==t.find((t=>{var e;return null===(e=t.mE)||void 0===e?void 0:e.xE})))(t)?[bg("attribute vec4 aColor"),bg("vColor = aColor"),vg("attribute vec4 aColorA"),vg("attribute vec4 aColorB"),Cg("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Ug=t=>(t=>void 0!==t.find((t=>{var e;return null===(e=t.mE)||void 0===e?void 0:e.bE})))(t)?[bg("attribute float aLookupValue"),bg("vLookupValue = aLookupValue"),vg("attribute float aLookupValueA"),vg("attribute float aLookupValueB"),Cg("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Yg={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",mE:{vE:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:e=>{const i="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${Pg(t)}`,idFragment:void 0,vertexShaderModifiers:[vg(`${t} float ${i}PointSize`,"uniform float uDevicePixelRatio"),Cg(`gl_PointSize = ${i}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,r=t&&t.maskTexture,n=t&&t.overrideOpacity;return{idFeature:"Color",mE:{SE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,bE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,xE:"attribute"===t.dataType||void 0},apply:(o,a)=>{let h,l=`Color:${Pg(t)}`;const u=[];let c="FragmentShader";const d=[];if("uniform"===i)d.push(vg("uniform vec4 uColor"),wg("colorFragment =","colorFragment = uColor"),...s?_g:[],...r?Fg:[]);else if("attribute"===i)h="colorAttribute",u.push(kg("attribute vec4 aColor","varying vec4 vColor")),d.push(vg("varying vec4 vColor"),wg("colorFragment =","colorFragment = vColor"),...s?_g:[],...r?Fg:[]);else if("texture"===i)h="colorTexCoord",u.push(kg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),d.push(vg("varying vec2 vTextureCoord"),vg("uniform sampler2D uColorTexture"),vg("uniform vec4 uColor"),wg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord)","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        colorFragment = uColor;\n                    }"),...s?_g:[],...r?Fg:[]);else if("texture-coord-calc-gpu"===i)h="colorTexCoord",c="Empty",u.push(vg("attribute vec2 aTextureCoord"),vg("varying vec2 vTextureCoord"),Cg("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),d.push(vg("varying vec2 vTextureCoord"),vg("uniform sampler2D uColorTexture"),Mg("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(i)&&"image"===i[0])h="colorTexCoord",u.push(kg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===e.ImageFitMode.Tile?d.push(vg("uniform sampler2D uColorTexture"),vg("varying vec2 vTextureCoord"),wg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);")):d.push(vg("uniform sampler2D uColorTexture"),vg("varying vec2 vTextureCoord"),vg("uniform vec4 uColor"),wg("colorFragment =","colorFragment = texture2D(uColorTexture, vTextureCoord);","if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                colorFragment = uColor;\n                            }"));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)h="lookup:value",u.push(kg("attribute float aLookupValue","varying float vLookupValue"));else{const e=`posAxis.${t}`;h=`lookup:${t}`,u.push(kg(e,"varying float vLookupValue"))}d.push(vg("varying float vLookupValue"),...Ig("vLookupValue",i[2]),...s?_g:[],...r?Fg:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],e=t.getColorStops();tt(t)?(l=`rgradient${e.length},${r},${s}`,d.push(vg("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),vg(...Ft(e.map(((t,e)=>[`uniform vec4 color_${e}`,`uniform float stop_${e}`])))),Rg.linearStep,wg("colorFragment =","vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...e.map(((t,e)=>e<2?"":`color = mix(color, color_${e}, linearStep(stop_${e-1}, stop_${e}, mixVal));`)),"colorFragment = color"),...s?_g:[],...r?Fg:[])):st(t)&&(l=`lgradient${e.length},${r},${s}`,d.push(vg("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),vg(...Ft(e.map(((t,e)=>[`uniform vec4 color_${e}`,`uniform float stop_${e}`])))),Rg.linearStep,wg("colorFragment =","vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...e.map(((t,e)=>e<2?"":`color = mix(color, color_${e}, linearStep(stop_${e-1}, stop_${e}, magnitude))`)),"colorFragment = color"),...s?_g:[],...r?Fg:[]))}if(s||r){const t="maskTexture";h=h?`${h} ${t}`:`Color:${t}`,u.push(kg("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return n&&d.push(vg("uniform float uOpacity"),wg("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:u,fragmentShader:c,fragmentShaderModifiers:d,idVertex:h,idFragment:l}}}},ColorShaded3D:t=>{const{dataType:e,shadingStyle:i,wireframe:s}=t;let r;const n=`ColorShaded3D:${Pg(t)}`;return{idFeature:"ColorShaded3D",mE:{SE:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,bE:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,o)=>{const a=[],h=[];if(a.push("phong"===i&&kg("normal","varying vec3 vNormal"),kg("posWorld","varying vec3 vPosWorld")),"uniform"===e)h.push(vg("uniform vec4 uColorDiffuse"),wg("colorFragment =","colorFragment = uColorDiffuse"));else if("attribute"===e)r="per-vertex-color",a.push(kg("attribute vec4 aColor","varying vec4 vColor")),h.push(vg("varying vec4 vColor"),wg("colorFragment =","colorFragment = vColor"));else if(Array.isArray(e)){const t=e[1];if("value"===t)r="lookup:value",a.push(kg("attribute float aLookupValue","varying float vLookupValue"));else{const e=`posAxis.${t}`;r=`lookup:${t}`,a.push(kg(e,"varying float vLookupValue"))}h.push(vg("varying float vLookupValue"),...Ig("vLookupValue",e[2]))}if(s){const t="wireframe";r=r?`${r},${t}`:t,a.push(kg("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),h.push(vg("varying vec3 vTriangleBary"),vg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Rg.computeScreenSpaceWireframe,wg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return"phong"===i&&h.push(...Dg),{idVertex:r,idFragment:n,vertexShaderModifiers:a,fragmentShader:"FragmentShader",fragmentShaderModifiers:h}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:e=>{const i=[],s=Lg(e),r=t.coordType?t.coordType:s?"vec3":"vec2";return"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?i.push(vg(`attribute ${r} aPos`)):i.push(vg("attribute float aPosX"),vg("attribute float aPosY"),s&&vg("attribute float aPosZ")):!0===t.splitPosAttribute?i.push(vg("attribute float aPos_highpartX"),vg("attribute float aPos_lowpartX"),vg("attribute float aPos_highpartY"),vg("attribute float aPos_lowpartY")):i.push(vg(`attribute ${r} aPos_highpart`),vg(`attribute ${r} aPos_lowpart`)),i.push(...zg(t,s,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${Pg(t)}`,idFragment:void 0,vertexShaderModifiers:i}}}),Model3D:t=>({idFeature:"Model3D",apply:e=>{const i=[];return i.push(vg("attribute vec3 aGeoPos"),vg("uniform mat4 uModelRotation"),vg("uniform mat4 uModelRotationNormals"),vg("uniform vec3 uLocationAxis"),vg("uniform vec3 uModelAlignment"),vg("uniform vec3 uModelScale"),vg("uniform vec3 uModelSize"),...zg({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Tg("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&wg("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Vg(e)?Ng({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:i,idVertex:`Model3D:${Pg(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>({idFeature:"LineInstanced2D",apply:e=>({idVertex:`LineInstanced2D:${Pg(t)}`,idFragment:void 0,vertexShaderModifiers:[vg("uniform float uThicknessPixels"),vg("uniform vec2 uRatioPxClip"),..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[vg("attribute vec2 aLocationA"),vg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[vg("attribute vec2 aLocationA_highpart"),vg("attribute vec2 aLocationB_highpart"),vg("attribute vec2 aLocationA_lowpart"),vg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[vg("attribute float aLocationAX"),vg("attribute float aLocationAY"),vg("attribute float aLocationBX"),vg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[vg("attribute float aLocationA_highpartX"),vg("attribute float aLocationA_highpartY"),vg("attribute float aLocationB_highpartX"),vg("attribute float aLocationB_highpartY"),vg("attribute float aLocationA_lowpartX"),vg("attribute float aLocationA_lowpartY"),vg("attribute float aLocationB_lowpartX"),vg("attribute float aLocationB_lowpartY")]:[],vg("attribute vec2 aSegmentPosition"),vg("attribute float aSegmentSide"),...zg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),t.ensureMinimumSegmentLength&&vg("uniform vec2 uMinSegmentPixelVector"),wg("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                    }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Ug(e),...Og(e),...Vg(e)?Ng(t,!1,"posWorld","posAxis"):[]]})}),Area2D:t=>({idFeature:"Area2D",apply:e=>({idVertex:`Area2D:${Pg(t)}`,idFragment:void 0,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[vg("attribute vec2 aLocationA"),vg("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[vg("attribute vec2 aLocationA_highpart"),vg("attribute vec2 aLocationB_highpart"),vg("attribute vec2 aLocationA_lowpart"),vg("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[vg("attribute float aLocationAX"),vg("attribute float aLocationAY"),vg("attribute float aLocationBX"),vg("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[vg("attribute float aLocationA_highpartX"),vg("attribute float aLocationA_highpartY"),vg("attribute float aLocationB_highpartX"),vg("attribute float aLocationB_highpartY"),vg("attribute float aLocationA_lowpartX"),vg("attribute float aLocationA_lowpartY"),vg("attribute float aLocationB_lowpartX"),vg("attribute float aLocationB_lowpartY")]:[],vg("attribute float aCurveOrBaseline"),vg("attribute float aSegmentSide"),...zg(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),wg("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...Ug(e),...Og(e),...Vg(e)?Ng(t,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:e=>({idVertex:`LineInstanced3D:${Pg(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[vg("uniform float uOffsetWU"),vg("attribute vec3 aLocationA"),vg("attribute vec3 aLocationB"),vg("attribute float aSegmentPosition"),vg("attribute float aPerpendHorizontal"),vg("attribute float aPerpendVertical"),...zg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},Lg(e),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),wg("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Vg(e)?Ng({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[vg("attribute vec3 aEdge"),vg("uniform float uEdgeRoundness"),wg("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:t=>{const e=t.flipXY,i=t.intensityTextureType,s=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(r,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Pg(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[vg("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===i&&Rg.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?Mg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===i?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${s})`),"float intensity01 = "+("float"===i?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${s})`),"float intensity10 = "+("float"===i?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${s})`),"float intensity11 = "+("float"===i?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${s})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):Mg("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===i?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${s})`)),...Ig("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const e=t.flipXZ,i=t.vertexIdSource,s=t.normalTextureType,r=t.heightmapTextureType,n=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(o,a)=>{const h=[],l=[];return h.push(vg("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===s?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===i&&"attribute float aVertexID"),void 0!==i&&Rg.roundUnsigned,Rg.modulus,Rg.texelFetchWithFallback[a],"ubyte"===r&&Rg.decodeUbyteRGBAEncodedFloat,Mg(void 0===i?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===s?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(vg("uint"===s?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Mg("uint"===s?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Pg(t)}`,idFragment:`DrawToNormalTexture:${Pg(t)}`,vertexShaderModifiers:h,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===s&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const e=t.fillColor,i=t.interpolation,s=t.flipXZ,r=t.shadingStyle,n=t.wireframe,o=t.normalTextureType,a=t.heightmapTextureType,h=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",mE:{ME:!0},apply:(u,c)=>{const d=[],f=[];return d.push(vg("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),Rg.modulus,Rg.texelFetchWithFallback[c],"ubyte"===a&&Rg.decodeUbyteRGBAEncodedFloat,Mg("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===a?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(s?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...zg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),"phong"===r&&d.push(kg("posWorld","varying vec3 vPosWorld"),..."uint"===o?[Rg.texelFetchUnsignedWithFallback[c],Cg("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Cg("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Cg("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),vg("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(vg("varying vec3 vTriangleBary")),"uniform"===e?f.push(vg("uniform vec4 uColorDiffuse"),wg("colorFragment =","colorFragment = uColorDiffuse")):Array.isArray(e)&&"lookup"===e[0]&&("value"===e[1]?(d.push(kg("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),f.push(vg("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===h&&Rg.decodeUbyteRGBAEncodedFloat,"bilinear"===i?Mg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${s?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${s?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${s?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${s?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===h?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===h?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===h?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===h?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${s?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${s?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${s?"lerpFactors.y":"lerpFactors.x"})`):Mg("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${s?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Ig("intensityP",e[2]))):(d.push(kg(`posAxis.${e[1]}`,"varying float vLookupValue")),f.push(vg("varying float vLookupValue"),...Ig("vLookupValue",e[2])))),"phong"===r&&f.push(...Dg),n&&(d.push(vg("attribute vec3 aTriangleBary"),kg("aTriangleBary","varying vec3 vTriangleBary")),f.push(vg("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Rg.computeScreenSpaceWireframe,wg("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",e?"if (edge > 0.0) {\n                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));\n                                }":"if (edge > 0.0) {\n                                    colorFragment = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }"))),{idVertex:`SurfaceGrid:${Pg(t)}`,idFragment:`SurfaceGrid:${Pg(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(e,i)=>({idVertex:`DebugSurfaceGridNormals:${Pg(t)}`,idFragment:`DebugSurfaceGridNormals:${Pg(t)}`,vertexShaderModifiers:[vg("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),Rg.roundUnsigned,Rg.modulus,Rg.texelFetchWithFallback[i],"ubyte"===t.heightmapTextureType&&Rg.decodeUbyteRGBAEncodedFloat,Mg(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[Rg.texelFetchUnsignedWithFallback[i]]:[],...zg({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),wg("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Cg("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[vg("uniform vec3 uCameraLoc"),wg("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[vg("attribute float aSegmentInside"),vg("varying float vSegmentInside"),vg("varying float vSegmentSide"),wg("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[Eg("#extension GL_OES_standard_derivatives : enable"),vg("uniform float uAALimit"),vg("varying float vSegmentInside"),vg("varying float vSegmentSide"),wg("antiAliasFactor = ","\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                antiAliasFactor = aa;\n                ")]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const e=Math.round(t.spreadPx),i=Math.round(t.blurPx),s=e+i,r=t.firstPass,n=[];for(let t=-s;t<=s;t+=1){const e=Math.abs(t);n.push(r?{x:t.toFixed(1),y:"0.0",distPx:e.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:e.toFixed(1)})}return{idVertex:`Glow1D:${Pg(t)}`,idFragment:`Glow1D:${Pg(t)}`,vertexShaderModifiers:[kg("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[vg("uniform sampler2D uTexture"),vg("varying vec2 vTextureCoord"),vg("uniform vec2 uTextureSize"),r&&vg("uniform vec2 uOffsetPx"),!r&&vg("uniform sampler2D uTextureFirstGlowPass"),!r&&vg("uniform vec4 uGlowColor"),wg("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...r?[]:["float inverseIntensity =\n                        0.25 * texture2D(uTexture, vTextureCoord).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +\n                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +\n                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a","antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...r?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...n.map(((t,e)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),"colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map(((t,e)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                            horizontal_dist = sample_horizontal.r * 255.0;\n                                          }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${s.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${e.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${e.toFixed(1)}) / ${(i+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,"colorFragment = pixelGlowColor"])]}}}),MousePicking:t=>{const e=!!(null==t?void 0:t.customMousePickingIdInput),i=!e&&!!(null==t?void 0:t.useVertexId),s=!e&&!!(null==t?void 0:t.useAttribute),r=!e&&!i&&!s;return{idFeature:"MousePicking",mE:{ME:r,_E:i},apply:(n,o)=>{const a="webgl2"===o?"flat":"",h="webgl2"===o?"int":"float";return{idVertex:`MousePicking:${Pg(t)}`,idFragment:`MousePicking:${Pg(t)}`,vertexShaderModifiers:[...r?[vg(`${a} varying ${h} vPickingIdOffset`),Cg(`vPickingIdOffset = ${h}(iInstance)`)]:[],...i?[vg(`${a} varying ${h} vPickingIdOffset`),Cg(`vPickingIdOffset = ${h}(iVertex)`)]:[],...s?[vg("attribute float aPickingIdOffset",`${a} varying ${h} vPickingIdOffset`),Cg(`vPickingIdOffset = ${h}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[vg("uniform int uFirstId"),...e?[]:[vg(`${a} varying ${h} vPickingIdOffset`),Mg("int mousePickingIdOffset = "+("int"===h?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"))],wg("colorFragment =","int remainder = mousePickingIdOffset + uFirstId","int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder","colorFragment = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)","if (antiAliasFactor <= 0.0) { discard; }\ngl_FragColor = fragColorEnd").replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[kg("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,e)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[vg("attribute vec2 aLengthSoFar"),vg("varying float vLengthSoFar"),vg("uniform vec2 uStippleCount"),Cg("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[vg("uniform sampler2D uStippleTexture"),vg("uniform float uStippleScale"),vg("varying float vLengthSoFar"),"webgl1"===e&&vg("uniform float uStippleTextureWidthLimiter"),wg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===e?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,e)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[vg("attribute vec2 aLengthSoFarA"),vg("attribute vec2 aLengthSoFarB"),vg("varying float vLengthSoFar"),vg("uniform vec2 uStippleCount"),Cg("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[vg("uniform sampler2D uStippleTexture"),vg("uniform float uStippleScale"),vg("varying float vLengthSoFar"),"webgl1"===e&&vg("uniform float uStippleTextureWidthLimiter"),wg("antiAliasFactor = ",`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===e?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    antiAliasFactor *= stippleAA;\n                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(e,i)=>{const s="dataType"in t,r="interpolation"in t?t:void 0,n=r?r.flipXY:void 0,o="bilinear"===(null==r?void 0:r.interpolation),a=null==r?void 0:r.intensityTextureType,h=null==r?void 0:r.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Pg(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[vg("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",r&&"uniform sampler2D uTileIntensityValues",s&&"uniform vec4 uColor"),Rg.texelFetchWithFallback[i],"ubyte"===a&&Rg.decodeUbyteRGBAEncodedFloat,Mg("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),r&&wg("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",n&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",n&&"cellStart = ivec2(cellStart.y, cellStart.x)",n&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),s&&wg("colorFragment =","colorFragment = uColor"),r&&wg("cellEnd","vec2 tileDimensions = "+(n?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),o&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",o&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",o&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",o&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",o&&"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${h})`),o&&"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${h})`),o&&"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${h})`),o&&"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${h})`),o&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",o&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",o&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",o&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!o&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!o&&"float intensityP = "+("float"===a?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${h})`)),...r?Ig("intensityP",r.lut):[]]}}})},Gg={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Hg={FragmentShader:"\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0);\n    float antiAliasFactor = 1.0;\n    vec4 fragColorEnd = colorFragment;\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);\n}\n",Empty:"\nvoid main(void) {\n}\n"};class Wg{constructor(t,e,i,s,r){if(this.id=t,this.shader=i,this.gl=s,this.info=r,!e||!i)throw new At(`Could not find ${this.wE()} ${this.CE()} shader source code.`);this.gl.shaderSource(i,e),this.gl.compileShader(i)}get src(){return""}wE(){return this.id.toString()}CE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Kg extends Wg{constructor(t,e,i,s){super(t,e,i.createShader(i.VERTEX_SHADER),i,s)}}class Xg extends Wg{constructor(t,e,i,s){super(t,e,i.createShader(i.FRAGMENT_SHADER),i,s)}}class jg{constructor(t,e,i,s){this.kE=new Map,this.TE=new Map,this.FE=i,this.IE=i.createProgram(),this.PE=`${t.wE()} vertex`,this.DE=`${e.wE()} fragment`,i.attachShader(this.IE,t.shader),i.attachShader(this.IE,e.shader),i.bindAttribLocation(this.IE,0,"aPos"),i.linkProgram(this.IE),i.deleteShader(t.shader),i.deleteShader(e.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(e.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=e.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}BE(t){return pe(0,(()=>xe()))}LE(t){const e=this.RE(t);if(void 0===e)throw this.BE(`Could not get ${t} uniform from ${this.PE} and ${this.DE} shaders.`);return e}RE(t){const e=this.kE.get(t);if(e)return e;const i=this.FE.getUniformLocation(this.IE,t);return i?(this.kE.set(t,i),i):void 0}EE(t){const e=this.zE(t);if(void 0===e)throw this.BE(`Could not get ${t} attribute from ${this.PE} and ${this.DE} shaders.`);return e}zE(t){const e=this.TE.get(t);if(e||0===e)return e;const i=this.FE.getAttribLocation(this.IE,t);return i>=0?(this.TE.set(t,i),i):void 0}Y(){this.FE.deleteProgram(this.IE)}}const $g=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Zg=t=>{let e;try{e=Tt.getComputedStyle(t)}catch(t){return null}return e};function Qg(t){const e=Zg(t);return!!e&&("fixed"===e.position||!!("auto"!==e.zIndex&&"static"!==e.position||function(t){const e=Zg(em(t)),i=e?e.display:"auto";return"flex"===i||"inline-flex"===i}(t))||+e.opacity<1||"transform"in e&&"none"!==e.transform||"webkitTransform"in e&&"none"!==e.webkitTransform||"mixBlendMode"in e&&"normal"!==e.mixBlendMode||"filter"in e&&"none"!==e.filter||"webkitFilter"in e&&"none"!==e.webkitFilter||"isolation"in e&&"isolate"===e.isolation||!!$g.test(e.willChange)||"touch"===e.webkitOverflowScrolling)}function qg(t){let e=t.length;for(;e--;)if(Qg(t[e]))return t[e];return null}function Jg(t){var e;return t&&Number((null===(e=Zg(t))||void 0===e?void 0:e.zIndex)||0)||0}function tm(t){const e=[];for(;t;)e.push(t),t=em(t);return e}function em(t){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.host)||t.parentNode}const im=t=>t&&"resize"in t;class sm extends ng{constructor(t){if(super(),this.VE=new Map,this.OE=new Map,this.NE=new Map,this.GE=!0,this.WE=null,this.UE=null,this.YE=null,this.HE=null,this.$E=0,this.XE=0,this.jE=0,this.ZE=!1,this.QE=!0,this.ji=!1,this.JE=fe(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.Z={x:100,y:100},this.KE=()=>{this.qE&&clearTimeout(this.qE),this.qE=setTimeout((()=>this.rn()),12)},this.tz=t=>{const e=t.intersectionRatio>0,i=t.target.getAttribute("data-lcjs-engine-id");if(i){const t=this.VE.get(i);if(t){const s=t.iz();t.sz(e),e?this.OE.set(i,t):this.OE.delete(i),s!==e&&t.Ms()}}},this.ez=(t,e,i,s,r)=>{const n=r[0],o=this.gl;if(o.bindFramebuffer(null==o?void 0:o.FRAMEBUFFER,null),o.useProgram(this.UE.IE),o.clear(o.COLOR_BUFFER_BIT),n.Jr.getBoundingClientRect()){const t=n.hz();o.viewport(0,0,t.x,t.y),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n.rz),o.uniform1i(this.$E,0),o.uniformMatrix4fv(this.XE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o.bindBuffer(o.ARRAY_BUFFER,this.YE),o.enableVertexAttribArray(0),o.vertexAttribPointer(this.jE,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),n.nz&&(n.nz.clearRect(0,0,n.nz.canvas.width,n.nz.canvas.height),n.nz.drawImage(this.oz,0,this.oz.height-t.y,t.x,t.y,0,0,n.nz.canvas.width,n.nz.canvas.height))}},this.az=(t,e,i,s,r)=>{const n=this.gl;n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.UE.IE),n.clear(n.COLOR_BUFFER_BIT),r.forEach((i=>{const r=i.Jr.getBoundingClientRect();if(r){const i=r.right-r.left,o=r.bottom-r.top,a=r.left,h=s-r.bottom;n.viewport(a*this.lz-t*this.lz,h*this.lz+e*this.lz,i*this.lz,o*this.lz)}n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.rz),n.uniform1i(this.$E,0),n.uniformMatrix4fv(this.XE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.YE),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.jE,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6)})),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.uz=(t,e,i,s,r)=>{const n=r[0],o=this.gl2.ctx;o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.clear(o.COLOR_BUFFER_BIT);const a=n.hz();o.bindFramebuffer(o.READ_FRAMEBUFFER,n.cz[1]),o.blitFramebuffer(0,0,a.x,a.y,0,this.oz.height-a.y,a.x,this.oz.height,o.COLOR_BUFFER_BIT,o.LINEAR),n.nz&&(n.nz.clearRect(0,0,n.nz.canvas.width,n.nz.canvas.height),n.nz.drawImage(this.oz,0,0)),o.bindFramebuffer(o.FRAMEBUFFER,null)},this.dz=(t,e,i,s,r)=>{const n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT),r.forEach((i=>{const r=i.Jr.getBoundingClientRect();if(r){const o=r.right-r.left,a=r.bottom-r.top,h=r.left,l=s-r.bottom,u=i.hz();n.bindFramebuffer(n.READ_FRAMEBUFFER,i.cz[1]),n.blitFramebuffer(0,0,u.x,u.y,h*this.lz-t*this.lz,l*this.lz+e*this.lz,(h-t+o)*this.lz,(l+e+a)*this.lz,n.COLOR_BUFFER_BIT,n.LINEAR)}})),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.qE=void 0,this.Kn=t,!Tt.requestAnimationFrame||!Tt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let e=1;if(t&&t.fz)e=!0===t.fz?Tt.devicePixelRatio||1:t.fz||1;else{const t=Tt.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(e=Tt.devicePixelRatio||1)}this.lz=e,t.io=!0===t.io,this.QE=!1!==t.Az,this.gz=!1!==t.pz,this.yz=t.yz||!1;let i=!1;if(t.oz)if("string"==typeof t.oz){const e=Tt.document.getElementById(t.oz);if(!e)throw new Error(`Canvas "${t.oz}" doesn't exist.`);this.oz=e,i=!0}else this.oz=t.oz,i=!0;else this.oz=Tt.document.createElement("canvas");const s={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.mz&&t.mz){const e=this.oz.getContext("webgl",{...s,antialias:!!t.Az})||this.oz.getContext("experimental-webgl",{...s,antialias:!!t.Az});this.gl=e,this.vz=!1}else{const t=this.oz.getContext("webgl2",s);this.gl2={ctx:t},this.gl=t,this.vz=!0}if(!this.gl)throw new xt("No WebGL context available."+((null==t?void 0:t.mz)?`\nSelected explicit target: WebGL ${t.mz}`:""));const r=[];if(this.Sz={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.Sz).forEach((t=>{null===this.Sz[t]&&r.push(t)})),this.vz)this.xz=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.GE=!1),Object.keys(t).forEach((e=>{null===t[e]&&r.push(e)}));const e={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.xz=!!e.OES_texture_float,this.gl1={ctx:this.gl,Sz:t,optional:e}}const n=r;if(n.length>0&&!1!==t.io){const t=Tt.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const e=Tt.document.createElement("button");e.innerText="X",e.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),Tt.document.body.appendChild(t),t.appendChild(e),Tt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",n.join(", "))}if(this.bz=this.yz?this.Mz(this.vz?this.uz.bind(this):this.ez.bind(this)).bind(this):this._z(this.vz?this.dz.bind(this):this.az.bind(this)).bind(this),Tt.ResizeObserver){const t=t=>{for(const e of t)e.target===this.oz&&this.wz()};this.ro=new Tt.ResizeObserver(t.bind(this)),this.ro.observe(this.oz)}if(this.Cz=((t,e)=>{const i=t,s=new Map,r=new Map,n=new Map,o={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},a=(t,i,s=[])=>{const r=[],n=[],o={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(e){const e=t.match(/#extension.*/g);e&&n.push(...e),t=t.replace(/#extension.*/g,"")}else if(r.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&r.push("precision highp usampler2D;"),"vertex"===i)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const e=s.find((t=>"fragOutput"===t.type));t=(t=e?`out ${e.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return n&&r.push(...n),r.push("precision highp float;"),r.push("precision highp int;"),{source:t=`${r.join("\n")}\n${t}`,info:o}};return(...t)=>{const h=e?"webgl1":"webgl2";let l,u,c,d,f,g,m,y,p;try{const e=Tt.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),u=((t,e)=>{const i=t.map((i=>i.apply(t,e))),s=i.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),r=i.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),n=`vert: ${s} frag: ${r}`;let o,a=!1,h=!1;const l=[];let u;const c=[],d=[];if(i.forEach((t=>{if(t.defaultVertexShader&&(a||(o=t.defaultVertexShader)),t.vertexShader){if(o&&a&&o!==t.vertexShader)throw new Bg(`Conflicting vertex shader templates ${o} vs ${t.vertexShader}`,n,t);o=t.vertexShader,a=!0}if(t.vertexShaderModifiers)for(const e of t.vertexShaderModifiers)void 0!==e&&!1!==e&&l.push(e);if(t.defaultFragmentShader&&(h||(u=t.defaultFragmentShader)),t.fragmentShader){if(u&&h&&u!==t.fragmentShader)throw new Bg(`Conflicting fragment shader templates ${u} vs ${t.fragmentShader}`,n,t);u=t.fragmentShader,h=!0}if(t.fragmentShaderModifiers)for(const e of t.fragmentShaderModifiers)void 0!==e&&!1!==e&&c.push(e);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!!t.find((t=>{var e;return null===(e=t.mE)||void 0===e?void 0:e.ME}))&&("webgl1"===e?l.push(vg("attribute float aInstanceID"),Mg("int iInstance = int(aInstanceID)")):l.push(Mg("int iInstance = gl_InstanceID"))),!!t.find((t=>{var e;return null===(e=t.mE)||void 0===e?void 0:e._E}))&&("webgl1"===e?l.push(vg("attribute float aVertexID"),Mg("int iVertex = int(aVertexID)")):l.push(Mg("int iVertex = gl_VertexID"))),!o)throw new Bg("No vertex shader template defined",n);if(!u)throw new Bg("Fragment shader not defined",n);return{id:n,vertexShader:{id:s,template:o,modifiers:l},fragmentShader:{id:r,template:u,modifiers:c},hints:d}})(l,h);const x=n.get(u.id);if(c="new",x)return c="existing",g=x.vertexShaderSrc,m=x.fragmentShaderSrc,x;const A=u.vertexShader.id;let S=s.get(A);if(S)g=S.src,d="existing";else{d="new";const t=new xg(u.vertexShader.modifiers).build(Gg[u.vertexShader.template]),{source:e,info:r}=a(t,"vertex");g=e,y=r,S=new Kg(A,e,i,r),s.set(A,S),o.vertexShaders+=1}const v=u.fragmentShader;let b;const M=v.id;if(b=r.get(M),b)m=b.src,f="existing";else{f="new";const t=Hg[v.template],e=new xg([...v.modifiers]).build(t),{source:s,info:n}=a(e,"fragment",u.hints);m=s,p=n,b=new Xg(M,s,i,n),r.set(M,b),o.fragmentShaders+=1}const T=new jg(S,b,i,u);return n.set(u.id,T),o.programs+=1,o.totalMs+=Tt.performance.now()-e,T}catch(t){throw pe(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Tt.alert(t),new Error(t)}))}}})(this.gl,!this.vz),this.gE=(()=>{const t=Tt.document.createElement("canvas"),e=t.getContext("2d",{willReadFrequently:!0});if(!e)throw new xt("Failed to get Text canvas rendering context");return e.fillStyle="#fff",(i,s,r,n)=>{const o=`${s.style} ${s.weight} ${s.size*r}px ${s.family}`;e.font=o,e.textBaseline="alphabetic",e.textAlign="left";const a=e.measureText(i);if(0===a.width)return;const h=void 0!==a.actualBoundingBoxLeft&&void 0!==a.actualBoundingBoxRight?Math.ceil(a.actualBoundingBoxLeft+a.actualBoundingBoxRight):Math.ceil(a.width),l=a.width,c=Math.round(s.size*r),d=void 0!==a.actualBoundingBoxLeft?a.actualBoundingBoxLeft:0;t.width=h>0?h:l,t.height=2*c,e.font=o,e.textBaseline="alphabetic",e.textAlign="left",n?(e.clearRect(0,0,t.width,t.height),e.fillStyle="#fff"):(e.fillStyle="rgba(255,255,255,0)",e.fillRect(0,0,t.width,t.height),e.fillStyle="#000"),e.fillText(i,d,c);const f=e.getImageData(0,0,t.width,t.height);let g=0,m=0;const y=f.width;for(let t=0;t<f.height;t+=1){for(let e=0;e<y;e+=1)if(0!==f.data[t*y*4+4*e+3]){g=t;break}if(0!==g)break}for(let t=f.height-1;t>=0;t-=1){for(let e=0;e<y;e+=1)if(0!==f.data[t*y*4+4*e+3]){m=t;break}if(0!==m)break}const p=e.canvas.height/2-g,x=m-g+1,A=y,S=new Uint8ClampedArray(A*x*1);for(let t=0;t<x;t+=1)for(let e=0;e<A;e+=1)S[1*t*A+1*e+0]=f.data[(t+g)*A*4+4*e+3];return[S,{advance:l,offsetX:d,baseline:p,glyph:i,size:u(A,x)}]}})(),t.kz||(this.yz?this.oz.style.display="none":(this.oz.style.position="absolute",this.oz.style.top="0",this.oz.style.left="0",this.oz.style.right="0",this.oz.style.bottom="0",this.oz.style.width="100%",this.oz.style.height="100%",this.oz.style.boxSizing="content-box",this.oz.style.display="block",this.oz.style.pointerEvents="none")),this.oz.classList.add("lcjs-canvas"),t.Tz&&this.oz.setAttribute("data-lcjs-id",t.Tz),i||Tt.document.body.appendChild(this.oz),Tt.IntersectionObserver&&(this.Fz=new Tt.IntersectionObserver((t=>{for(let e=0;e<t.length;e+=1){const i=t[e];this.tz(i)}}),{threshold:Array.from(Array(100)).map(((t,e)=>e/100))})),Tt.addEventListener("resize",this.KE,{passive:!0}),!this.vz){if(this.UE=this.Cz(Yg["2DCompose"],Yg.Color({dataType:"texture-coord-calc-gpu"}),Yg.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.UE.IE)throw new xt("Unable to setup composition shader!");const t=this.gl,e=t.getUniformLocation(this.UE.IE,"uColorTexture");if(!e)throw new xt("Unable to setup composition shader! Failed to find uColorTexture");const i=t.getUniformLocation(this.UE.IE,"uMatrix");if(!i)throw new xt("Unable to setup composition shader! Failed to find uMatrix");this.$E=e,this.XE=i,this.jE=t.getAttribLocation(this.UE.IE,"aPos"),this.YE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.YE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.HE=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.HE),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}Mz(t){return e=>{this.WE=null;const i=this.gl.canvas,s=Array.from(this.OE.values());this.ZE=!1,s.forEach((s=>{const r=s.hz();(this.Z.x<r.x||this.Z.y<r.y)&&(this.Z.x=Math.max(this.Z.x,r.x),this.Z.y=Math.max(this.Z.y,r.y),i instanceof HTMLCanvasElement&&(i.width=this.Z.x,i.height=this.Z.y)),s.An&&s.Iz(e),t(0,0,0,0,[s])})),this.ZE&&this.wz()}}_z(t){return e=>{this.WE=null,"style"in this.gl.canvas&&!this.Kn.Pz&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const i=this.gl.canvas,s=this.oz.clientHeight,r=this.oz.clientWidth;let n=0,o=0;if(i instanceof HTMLCanvasElement){i.width===r*this.lz&&i.height===s*this.lz||(i.width=r*this.lz,i.height=s*this.lz);const t=i.getBoundingClientRect();n=t.x,o=t.y}const a=Array.from(this.OE.values());this.ZE=!1,a.sort(((t,e)=>t.Dz()-e.Dz())).forEach((t=>{t.An&&t.Iz(e)})),t(n,o,r,s,a),this.ZE&&this.wz()}}wz(t){return im(this.gl)||(!this.ZE&&t&&(this.ZE=!0),this.WE||this.ji||(this.WE=Tt.requestAnimationFrame(this.bz))),this}Bz(t){const e=this.JE();return t.Jr.setAttribute("data-lcjs-engine-id",e),this.VE.set(e,t),t.Lz(this.VE.size-1),t.sz(!0),this.OE.set(e,t),this.Fz&&this.Fz.observe(t.Jr),this.qE&&clearTimeout(this.qE),this.qE=setTimeout((()=>this.rn()),0),this}Rz(t){const e=t.Jr.getAttribute("data-lcjs-engine-id");return e?(this.VE.delete(e),this.OE.delete(e),this.Fz&&this.Fz.unobserve(t.Jr),t.Jr.removeAttribute("data-lcjs-engine-id"),this):this}rn(){if(this.Fz){const t=this.Fz.takeRecords();for(let e=0;e<t.length;e+=1){const i=t[e];this.tz(i)}}return!this.yz&&this.gz&&Array.from(this.VE.values()).sort(((t,e)=>function(t,e){if(t===e)return 0;const i={a:tm(t),b:tm(e)};let s;for(;i.a[i.a.length-1]===i.b[i.b.length-1];)t=i.a.pop(),e=i.b.pop(),s=t;const r=Jg(qg(i.a)),n=Jg(qg(i.b));if(r===n&&s){const t=s.childNodes,e={a:i.a[i.a.length-1],b:i.b[i.b.length-1]};let r=t.length;for(;r--;){const i=t[r];if(i===e.a)return 1;if(i===e.b)return-1}}return Math.sign(r-n)}(t.Jr,e.Jr))).forEach(((t,e)=>t.Lz(e))),this.wz(!0),this}BI(){return this.wz(),this}Ez(){this.ji||this.VE.forEach((t=>t.fp.layout()))}Y(){var t;if(this.ji)return;this.ji=!0,super.Y(),this.WE&&(Tt.cancelAnimationFrame(this.WE),this.WE=null),this.ZE=!1,this.ro&&(this.ro.disconnect(),this.ro=void 0),this.Fz&&(this.Fz.disconnect(),this.Fz=void 0),Tt.removeEventListener("resize",this.KE),this.KE=void 0,this.VE.forEach((t=>{t.Y()})),this.VE.clear(),Array.from(this.NE.values()).forEach((t=>{t.iE(!0)})),this.NE.clear();const e=this.gl;e.deleteBuffer(this.YE),e.deleteBuffer(this.HE),this.oz&&!this.Kn.oz?(this.oz.width=1,this.oz.height=1,null===(t=this.oz.parentElement)||void 0===t||t.removeChild(this.oz),this.oz=void 0):this.oz=void 0,this.Cz=void 0,this.gE=void 0,this.bz=()=>{},this.Sz.WEBGL_lose_context&&this.Sz.WEBGL_lose_context.loseContext()}}const rm=(t,e,i,s)=>r=>{const n={theme:ig,...i,...r},o=t(n),a=e||s?sg(o,s):void 0,h=new bf(o.Kn,r,o,o.Y.bind(o),a);return o.So((t=>h.qL(t))).vo((()=>h.J())).Ms(),h},nm=(t,e)=>{t.So((t=>{e.Re(t)})).vo((()=>e.J())).Ms()},om=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new rh(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a);return nm(o,h),h},am=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new wc(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,r);return nm(o,h),h},hm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new Cd(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,r);return nm(o,h),h},lm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new Nc(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,r);return nm(o,h),h},um=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new(r&&r.type?r.type:Gh)(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0,r);return nm(o,h),h},cm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new mf(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0,r);return nm(o,h),h},dm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new(r&&r.type?r.type:Qc)(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0,r);return nm(o,h),h},fm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new(r&&r.type?r.type:ud)(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0,r);return nm(o,h),h},gm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new Ll(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,r,void 0);return nm(o,h),h},mm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new wl(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0,r);return nm(o,h),h},ym=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new qd(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0);return nm(o,h),h},pm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new uf(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,void 0,r);return nm(o,h),h},xm=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new _c(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,r);return nm(o,h),h},Am=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||ig},o=t(n),a=e||s?sg(o,s):void 0,h=new Uf(o.Kn,Ed(o,1).HF(0),lt,o.Y.bind(o),a,r);return nm(o,h),h},Sm={translation:(t,e,i)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1],xRotation(t){const e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},yRotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},zRotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},scaling:(t,e,i)=>[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1],translate:(t,e,i,s)=>Sm.multiply(t,Sm.translation(e,i,s)),xRotate:(t,e)=>Sm.multiply(t,Sm.xRotation(e)),yRotate:(t,e)=>Sm.multiply(t,Sm.yRotation(e)),zRotate:(t,e)=>Sm.multiply(t,Sm.zRotation(e)),rotateXYZ(t,e){let i=Sm.xRotate(t,e.x);return i=Sm.yRotate(i,e.y),i=Sm.zRotate(i,e.z),i},scale:(t,e,i,s)=>Sm.multiply(t,Sm.scaling(e,i,s)),multiply(t,e){const i=e[0],s=e[1],r=e[2],n=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],g=e[12],m=e[13],y=e[14],p=e[15],x=t[0],A=t[1],S=t[2],v=t[3],b=t[4],M=t[5],T=t[6],w=t[7],C=t[8],k=t[9],E=t[10],R=t[11],I=t[12],_=t[13],F=t[14],D=t[15],B=[];return B[0]=i*x+s*b+r*C+n*I,B[1]=i*A+s*M+r*k+n*_,B[2]=i*S+s*T+r*E+n*F,B[3]=i*v+s*w+r*R+n*D,B[4]=o*x+a*b+h*C+l*I,B[5]=o*A+a*M+h*k+l*_,B[6]=o*S+a*T+h*E+l*F,B[7]=o*v+a*w+h*R+l*D,B[8]=u*x+c*b+d*C+f*I,B[9]=u*A+c*M+d*k+f*_,B[10]=u*S+c*T+d*E+f*F,B[11]=u*v+c*w+d*R+f*D,B[12]=g*x+m*b+y*C+p*I,B[13]=g*A+m*M+y*k+p*_,B[14]=g*S+m*T+y*E+p*F,B[15]=g*v+m*w+y*R+p*D,B},inverse(t){const e=[],i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],a=t[5],h=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],g=t[12],m=t[13],y=t[14],p=t[15],x=d*p,A=y*f,S=h*p,v=y*l,b=h*f,M=d*l,T=r*p,w=y*n,C=r*f,k=d*n,E=r*l,R=h*n,I=u*m,_=g*c,F=o*m,D=g*a,B=o*c,P=u*a,L=i*m,V=g*s,z=i*c,N=u*s,O=i*a,U=o*s,Y=x*a+v*c+b*m-(A*a+S*c+M*m),G=A*s+T*c+k*m-(x*s+w*c+C*m),H=S*s+w*a+E*m-(v*s+T*a+R*m),W=M*s+C*a+R*c-(b*s+k*a+E*c),K=1/(i*Y+o*G+u*H+g*W);return e[0]=K*Y,e[1]=K*G,e[2]=K*H,e[3]=K*W,e[4]=K*(A*o+S*u+M*g-(x*o+v*u+b*g)),e[5]=K*(x*i+w*u+C*g-(A*i+T*u+k*g)),e[6]=K*(v*i+T*o+R*g-(S*i+w*o+E*g)),e[7]=K*(b*i+k*o+E*u-(M*i+C*o+R*u)),e[8]=K*(I*l+D*f+B*p-(_*l+F*f+P*p)),e[9]=K*(_*n+L*f+N*p-(I*n+V*f+z*p)),e[10]=K*(F*n+V*l+O*p-(D*n+L*l+U*p)),e[11]=K*(P*n+z*l+U*f-(B*n+N*l+O*f)),e[12]=K*(F*d+P*y+_*h-(B*y+I*h+D*d)),e[13]=K*(z*y+I*r+V*d-(L*d+N*y+_*r)),e[14]=K*(L*h+U*y+D*r-(O*y+F*r+V*h)),e[15]=K*(O*d+B*r+N*h-(z*h+U*d+P*r)),e},projectionPerspective(t,e,i,s){const r=1/Math.tan(t*Math.PI/180/2),n=1/(i-s);return[r/e,0,0,0,0,r,0,0,0,0,(i+s)*n,-1,0,0,i*s*n*2,0]},projectionOrthographic:(t,e,i,s,r,n)=>[2/(e-t),0,0,-(e+t)/(e-t),0,2/(s-i),0,-(s+i)/(s-i),0,0,-2/(n-r),-(n+r)/(n-r),0,0,0,1]};function vm(t,i,s,r,n,o){let a=i.x.ft(t.max.x),h=i.x.ft(t.min.x),l=i.y.ft(t.max.y),u=i.y.ft(t.min.y),c=a-h,d=l-u;if(c<1){const t=(h+a)/2;h=t-.5,a=t+.5,c=1}if(d<1){const t=(u+l)/2;u=t-.5,l=t+.5,d=1}const f=c/d,g=c*s.x,m=d*s.y,y=c-g,p=d-m,x=g>y?[y,g]:[g,y],A=m>p?[p,m]:[m,p];let S,v,b=1,M=1;switch(r){default:case e.GradientExtent.closestSide:if(S=x[0]/c,v=A[0]/d,n===e.GradientShape.circle){const t=Math.min(S*f,v);b=t,M=t}else b=S*f,M=v;break;case e.GradientExtent.farthestSide:if(S=x[1]/c,v=A[1]/d,n===e.GradientShape.circle){const t=Math.max(S*f,v);b=t,M=t}else b=S*f,M=v;break;case e.GradientExtent.closestCorner:if(v=A[0]/d,n===e.GradientShape.circle){S=x[0]/c*f;const t=Math.sqrt(S*S+v*v);b=t,M=t}else{S=x[0]/c;const t=Math.sqrt(S*S+v*v);b=t*f,M=t}break;case e.GradientExtent.farthestCorner:if(v=A[1]/d,n===e.GradientShape.circle){S=x[1]/c*f;const t=Math.sqrt(S*S+v*v);b=t,M=t}else{S=x[1]/c;const t=Math.sqrt(S*S+v*v);b=t*f,M=t}}return{bounds:[h*o,u*o,c*o,d*o],center:[s.x*f,s.y],distance:[Math.max(b,1e-4),Math.max(M,1e-4)],aspectRatio:f}}function bm(t,e,i,s){const r=e.x.ft(t.max.x),n=e.x.ft(t.min.x),o=e.y.ft(t.max.y),a=e.y.ft(t.min.y),h=r-n,l=o-a,c=Math.abs(h*Math.sin(i))+Math.abs(l*Math.cos(i)),d=u(h/2-Math.sin(i)*(c/2),l/2-Math.cos(i)*(c/2)),f=u(h/2+Math.sin(i)*(c/2),l/2+Math.cos(i)*(c/2));return{bounds:[n*s,a*s,h*s,l*s],startPoint:[d.x*s,d.y*s],endPoint:[f.x*s,f.y*s]}}class Mm{constructor(t){this.KR=t}}class Tm{constructor(){this.zz=new Array,this.Vz=t=>(this.zz.push(t),t),this.Oz=this.Vz(new Map),this.Nz=this.Vz(new Map),this.Gz=this.Vz(new Map),this.Wz=this.Vz(new Map),this.Uz=this.Vz(new Map),this.Yz=this.Vz(new Map),this.$z=this.Vz(new Map),this.Xz=this.Vz(new Map)}jz(){this.zz.forEach((t=>{t.forEach((t=>t.jz())),t.clear()}))}}const wm=(t,e,i)=>()=>{t.Zz=e,i&&i()},Cm=(t,i,s,r,n)=>{const o=Math.min(s/t,r/i),a=t*o,h=i*o,l=s/a,u=r/h,c=a/s,d=h/r;let f=0,g=1,m=0,y=1;switch(n){case e.ImageFitMode.Fill:u<l?(f=0,g=1,m=.5+-c/2,y=.5+c/2):(m=0,y=1,f=.5+-d/2,g=.5+d/2);break;case e.ImageFitMode.Fit:u<l?(m=0,y=1,f=.5+-l/2,g=.5+l/2):(f=0,g=1,m=.5+-u/2,y=.5+u/2);break;case e.ImageFitMode.Center:{const e=s/t,n=r/i;f=.5+-e/2,g=.5+e/2,m=.5+-n/2,y=.5+n/2}break;case e.ImageFitMode.Tile:f=0,g=s/t,m=0,y=r/i;break;case e.ImageFitMode.Stretch:default:f=0,g=1,m=0,y=1}return new Float32Array([f,y,g,y,g,m,f,m])};class km{constructor(t,e){if(this.Qz=0,this.Jz=0,this.Kz=!1,this.Zz=!1,this.qz=!1,this.tV=!1,this.iV=!1,this.sV=new Set,this.eV=new Set,this.dc=e,this.FE=t,this.hV=null,this.Kz=e instanceof Tt.HTMLVideoElement,this.dc instanceof Tt.HTMLImageElement)this.dc.addEventListener("load",(()=>{this.tV=!0,this.rV()})),this.dc.addEventListener("error",(()=>{this.iV=!0})),this.dc.complete&&(this.tV=!0,this.rV());else if(this.dc instanceof Tt.HTMLVideoElement){const t=this;this.dc.addEventListener("canplay",(function(){t.Jz=this.videoHeight,t.Qz=this.videoWidth,t.tV=!0,t.rV()}),!0),this.dc.addEventListener("play",wm(this,!0,(()=>this.rV()))),this.dc.addEventListener("playing",wm(this,!0,(()=>this.rV()))),this.dc.addEventListener("pause",wm(this,!1)),this.dc.addEventListener("ended",wm(this,!1)),this.dc.readyState>=1&&(this.Qz=this.dc.videoWidth,this.Jz=this.dc.videoHeight,this.Zz=!this.dc.paused,this.tV=!0,this.rV())}else this.tV=!0,this.rV()}cE(t){0===this.eV.size&&this.tV&&this.rV(),this.eV.add(t)}dE(t){this.eV.delete(t),0===this.eV.size&&this.unbindResources()}nV(t){this.sV.add(t),this.qz&&(t(),this.oV(t))}oV(t){this.sV.delete(t)}rV(){if(this.iV||this.qz||!this.tV)return;const t=this.FE.gl;if(!this.hV&&this.dc&&t){this.hV=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.hV),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const e=0,i=t.RGBA,s=t.RGBA,r=t.UNSIGNED_BYTE,n=this.dc,o=this.Qz>0?this.Qz:n.width,a=this.Jz>0?this.Jz:n.height;t.texImage2D(t.TEXTURE_2D,e,i,s,r,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Qz=o,this.Jz=a,t.bindTexture(t.TEXTURE_2D,null)}this.qz=!0,this.sV&&this.sV.forEach((t=>{t(),this.oV(t)}))}zs(){const t=this.FE.gl;if(!this.iV&&this.qz&&this.hV){const e=0,i=t.RGBA,s=t.RGBA,r=t.UNSIGNED_BYTE,n=this.dc;n&&(t.bindTexture(t.TEXTURE_2D,this.hV),t.texImage2D(t.TEXTURE_2D,e,i,s,r,n))}}aV(){return this.hV}unbindResources(){return this.qz&&(this.hV&&(this.FE.sE(this.hV),this.hV=null),this.qz=!1),this}}class Em extends Qr{constructor(t,e,i){super(t.cs,e,i),this.cv=!0,this.ev={},this.av=p(Qn),this.Bs=t,this.At=t.At}lV(){var t;return this.av.u&&this.av.C().type!==(null===(t=this.uV)||void 0===t?void 0:t.type)}mv(t){return this.cv=t,this}cV(t){return this.ev=t,this}}class Rm{constructor(t){this.VV=[],this.KR=t}OV(t,e){((t,e,i,s)=>{const r=t.dV(),n=Math.round(Math.min(i.spread,10)*r),o=Math.round(Math.min(i.blur,10)*r),a={x:Math.round(i.offset.x*r),y:Math.round(i.offset.y*r)},h=t.fV(),l=t.AV(),u=t.gV(),c=t.pV(),d=t.yV();t.mV("disabled"),t.mv(!1),t.vV(!1);const f=e.SV(),g=n+o/2;((t,e,i,s)=>{const r=t.gl,n=t.dV(),o=t.xV();t.bV(r.FRAMEBUFFER,s.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,s.depthBuffer),r.bindTexture(r.TEXTURE_2D,s.texture),r.clearDepth(1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);const a=s.sizeDpr;t.MV(0,0,a.x,a.y),e.forEach((e=>{let s;if(e instanceof Jr?s=e.Yi||e.Bs.Bp():e instanceof Em&&(s=e.Bs.Ax()),s){const e=s.x+i.left,r=s.y+i.bottom,o=Math.max(s.width-(i.left+i.right),0),a=Math.max(s.height-(i.bottom+i.top),0);t._V(e*n,r*n,o*n,a*n)}else t.vV(!1);e.qL(2,0)})),t.bV(r.FRAMEBUFFER,o),r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindTexture(r.TEXTURE_2D,null),t.vV(!1)})(t,s,{left:g+(a.x<0?-a.x:0),top:g+(a.y>0?a.y:0),right:g+(a.x>0?a.x:0),bottom:g+(a.y<0?-a.y:0)},f);let m=f;const y=n+o+5,p=((t,e,i,s)=>{const r=(t=>{const e=[];for(let i=0;i<t.length;i+=1){let s,r=t[i];do{const t=e.findIndex((t=>Ye(r,t)));s=t>=0?e[t]:void 0,s&&(e.splice(t,1),r=ei(r,s))}while(s);e.push(r)}return e})(e.map((t=>{const e=t instanceof Jr||t instanceof Em?t.Bs.wV(t):Ne;if(Ae(e))return Ne;const r={min:{x:Math.max(e.min.x-i.left,0),y:Math.max(e.min.y-i.bottom,0)},max:{x:Math.min(e.max.x+i.right,s.x),y:Math.min(e.max.y+i.top,s.y)}};return r.max.x<=r.min.x||r.max.y<=r.min.y?Ne:r})).filter((t=>!Ae(t)))),n=6*r.length,o=new Float32Array(4*n);let a=0;return r.forEach((t=>{const e=fi(t.min,s),i=fi(t.max,s),r=e,n=i;o[a+0]=e.x,o[a+1]=e.y,o[a+2]=r.x,o[a+3]=r.y,o[a+4]=i.x,o[a+5]=e.y,o[a+6]=n.x,o[a+7]=r.y,o[a+8]=i.x,o[a+9]=i.y,o[a+10]=n.x,o[a+11]=n.y,o[a+12]=i.x,o[a+13]=i.y,o[a+14]=n.x,o[a+15]=n.y,o[a+16]=e.x,o[a+17]=i.y,o[a+18]=r.x,o[a+19]=n.y,o[a+20]=e.x,o[a+21]=e.y,o[a+22]=r.x,o[a+23]=r.y,a+=24})),{vertexBuffer:t.CV(o),vertexCount:n}})(t,s,{left:y+(a.x<0?-a.x:0),top:y+(a.y>0?a.y:0),right:y+(a.x>0?a.x:0),bottom:y+(a.y<0?-a.y:0)},e.kV()),x=e.SV(f,m),A=t.Cz(Yg["2D"],Yg.Glow1D({spreadPx:n,blurPx:o,firstPass:!0}),Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,e,i,s,r,n)=>{const o=t.gl,a=t.xV();t.bV(o.FRAMEBUFFER,i.frameBuffer),o.bindRenderbuffer(o.RENDERBUFFER,i.depthBuffer),o.bindTexture(o.TEXTURE_2D,i.texture),o.clearDepth(1),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),t.MV(0,0,i.sizeDpr.x,i.sizeDpr.y),t.TV(s,((a,h,l,u)=>(t.cE(s),n&&n(a),t.DV(a("uIsHighlighted"),0).PR(a("uHighlightColorOffset"),E).DV(a("uRenderEffectMask"),0).PV(a("uTexture"),e.texture,0).IV(u("uTextureSize"),[e.sizeDpr.x,e.sizeDpr.y]).IV(a("uScale"),i.uniforms.BV()).IV(a("uDisp"),i.uniforms.LV()).IV(a("uScaling"),[i.size.x,i.size.y]).IV(a("uTranslationAxis"),[0,0]).FV(r.vertexBuffer,void 0,{location:h("aPos"),size:2},{location:h("aTextureCoord"),size:2}).qy(o.TRIANGLES,r.vertexCount,0),!0))),t.bV(o.FRAMEBUFFER,a),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)})(t,m,x,A,p,((e,i,s,r)=>(t.IV(e("uOffsetPx"),[a.x,a.y]),!0))),m=x,t.vV(l),t.RV(d);const S=t.Cz(Yg["2D"],Yg.Glow1D({spreadPx:n,blurPx:o,firstPass:!1}),Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,e,i,s,r)=>{const n=t.gl,o={x:t.cs.oi().x,y:t.cs.oi().y};t.MV(0,0,o.x*t.dV(),o.y*t.dV());const a=lt.d2({scaleXYConstructor:Vi}).it(o).Vi(0,o.x).Oi(0,o.y),h=new Fm;h.EV(a),t.TV(i,((a,l,u,c)=>(t.cE(i),r&&r(a),t.DV(a("uIsHighlighted"),0).PR(a("uHighlightColorOffset"),E).DV(a("uRenderEffectMask"),0).PV(a("uTexture"),e.texture,0).IV(c("uTextureSize"),[e.sizeDpr.x,e.sizeDpr.y]).IV(a("uScale"),h.BV()).IV(a("uDisp"),h.LV()).IV(a("uScaling"),[o.x,o.y]).IV(a("uTranslationAxis"),[0,0]).FV(s.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).qy(n.TRIANGLES,s.vertexCount,0),!0)))})(t,f,S,p,((e,s,r,n)=>(t.PV(e("uTextureFirstGlowPass"),x.texture,1).PR(e("uGlowColor"),i.color),!0))),t.MV(h.x,h.y,h.width,h.height),t.mV(u),t.mv(c),t.zV(p.vertexBuffer)})(this.KR,this,e,t)}kV(){const t=this.KR.cs.oi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}SV(...t){const e=this.VV,i=this.kV(),s={x:Math.ceil(i.x*this.KR.dV()),y:Math.ceil(i.y*this.KR.dV())},r=this.KR.gl,n=e.find((e=>!t.includes(e)));if(n)return n.sizeDpr.x===s.x&&n.sizeDpr.y===s.y||(n.size=i,n.sizeDpr=s,r.bindTexture(r.TEXTURE_2D,n.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,s.x,s.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,n.depthBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,s.x,s.y),r.bindTexture(r.TEXTURE_2D,null),r.bindRenderbuffer(r.RENDERBUFFER,null),n.scale.it(i).Vi(0,i.x).Oi(0,i.y),n.uniforms.EV(n.scale)),n;const o=r.createTexture(),a=this.KR.NV(),h=this.KR.GV();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,s.x,s.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.KR.xV();this.KR.bV(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0),r.bindRenderbuffer(r.RENDERBUFFER,h),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,s.x,s.y),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,h),r.bindTexture(r.TEXTURE_2D,null),this.KR.bV(r.FRAMEBUFFER,l),r.bindRenderbuffer(r.RENDERBUFFER,null);const u=lt.d2({scaleXYConstructor:Vi}).it(i).Vi(0,i.x).Oi(0,i.y),c=new Fm;c.EV(u);const d={size:i,sizeDpr:s,texture:o,frameBuffer:a,depthBuffer:h,scale:u,uniforms:c};return e.push(d),d}Y(){[this.VV].forEach((t=>{t.forEach((t=>{this.KR.WV(t.depthBuffer),this.KR.UV(t.frameBuffer),this.KR.sE(t.texture)})),t.length=0}))}}class Im{constructor(t,i,s,r,n=!0){this.YV=new Tm,this.HV=new Map,this.$V=new Map,this.XV=[],this.fz=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),e=new Uint8Array(t.buffer);return 68===e[0]||17!==e[0]&&(Tt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.cv=!1,this.IV=(t,[e,i])=>(void 0===t||this.gl.uniform2f(t,e,i),this),this.jV=(t,[e,i])=>(void 0===t||this.gl.uniform2i(t,e,i),this),this.ZV=(t,[e,i,s,r])=>(void 0===t||this.gl.uniform4f(t,e,i,s,r),this),this.QV=(t,[e,i,s])=>(void 0===t||this.gl.uniform3f(t,e,i,s),this),this.JV=(t,e)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,e),this),this.KV=(t,e)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,e),this),this.PR=(t,e)=>(void 0===t||this.gl.uniform4f(t,e.r,e.g,e.b,e.a),this),this.DV=(t,e)=>(void 0===t||this.gl.uniform1f(t,e),this),this.qV=(t,e)=>(this.gl.uniform1i(t,e),this),this.PV=(t,e,i)=>{if(void 0===t)return this;if(e){const s=this.gl.TEXTURE0+i;return this.gl.activeTexture(s),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(t,i),this}throw new xt("Could not bind a texture.")},this.tO=t=>(((t,i)=>{i===e.ImageFitMode.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.CV=(t,e=!1,i,s=Float32Array)=>{const r=t.length,n=this.iO(r,i);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof s?t:new s(t),e?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),n)return n;throw new xt("Could not create vertex buffer")},this.sO=(t,e,i,s=Float32Array)=>{const r=i||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),e&&e.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,e instanceof s?e:new s(e),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new s(t),this.gl.STATIC_DRAW),e&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,e instanceof s?e:new s(e))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new xt("Could not create vertex buffer")},this.eO=(t,e,i,s=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,e*s.BYTES_PER_ELEMENT,i instanceof s?i:new s(i)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.hO=(t,e,i=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.rO=(t,e)=>{const i=t.length,s=this.iO(i,e);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),s)return s;throw new xt("Could not create index buffer")},this.nO=t=>{const e=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new xt("Could not create float buffer")},this.oO=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.aO=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.FV=(t,e,...i)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const s=i.length;let r=0;for(let t=0;t<s;t+=1)r+=i[t].size;for(let t=0;t<s;t+=1){const e=i[t].location;void 0!==e&&e>-1&&this.gl.enableVertexAttribArray(e)}let n=0;for(let t=0;t<s;t+=1){const e=i[t];void 0!==e.location&&e.location>-1&&this.gl.vertexAttribPointer(e.location,e.size,this.gl.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),n+=e.size}if(void 0!==e)for(let t=0;t<s;t+=1){const s=i[t].location;void 0!==s&&s>-1&&this.lO(s,e)}return this},this.uO=(...t)=>{const e=t.length;for(let i=0;i<e;i+=1){const e=t[i];0!==e&&e>-1&&this.gl.disableVertexAttribArray(e)}return this},this.cO=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.dO=(t,e,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t),void 0!==i&&this.lO(t,i)),this),this.fO=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.AO=null,this.qy=(t,e,i=0)=>(e>0&&this.gl.drawArrays(t,i,e),this),this.gO=(t,e=this.gl.TRIANGLES,i=0,s=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(e,t,s,i),this),this.pO=(t,e,i,s)=>{if(s>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,e,i,s),this.gl1)){if(!this.gl1.Sz.ANGLE_instanced_arrays)return Tt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.Sz.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,e,i,s)}return this},this.yO=(t,e,i,s,r=this.gl.UNSIGNED_SHORT)=>{if(s>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,e,r,i,s),this.gl1)){if(!this.gl1.Sz.ANGLE_instanced_arrays)return Tt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.Sz.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,e,r,i,s)}return this},this.lO=(t,e)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,e),this.gl1)){if(!this.gl1.Sz.ANGLE_instanced_arrays)return Tt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.Sz.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,e)}return this},this.mO=(t,e,i,s=0)=>{const r=this.gl.TEXTURE0+s;this.gl.activeTexture(r);const n=this.xV();this.bV(this.gl.FRAMEBUFFER,e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,i,0);const o=this.AV();o&&this.vV(!1),t(),o&&this.vV(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.bV(this.gl.FRAMEBUFFER,n)},this.Ot=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.vO=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.cE=t=>(this.gl.useProgram(t.IE),this),this.SO=!1,this.xO=[],this.cs=t,this.SA=i,this.cs=t,this.gl=s.ctx,this.bO=s.antialias,this.MO=!!this.cs.nn.GE&&s.lineAntialias,this.xz=this.cs.nn.xz,this._O=new Map,this.gl1=this.cs.nn.gl1,this.gl2=this.cs.nn.gl2,n&&(this.RV(!0),this.wO()),this.Sz=this.cs.nn.Sz,this.tE=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.nE=this.CO(),this.Cz=this.cs.nn.Cz,this.kO=new Bm(this),this.gE=this.cs.nn.gE,this.TO=new Rm(this),this.NE=this.cs.nn.NE,this.FO=this.CV([0,0,1,0,1,1,0,1]),this.IO=this.CV([0,0,1,0,0,1,0,1,1,0,1,1])}mV(t){return t!==this.PO&&(this.PO=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}gV(){return this.PO||"disabled"}mv(t){return t!==this.cv&&(this.cv=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}pV(){return this.cv}DO(t){return this.fz=t,this}dV(){return this.fz}iO(t,e){let i;if(e){const s=this._O.get(e);s&&s.size>=t&&s.size-t<1e6?i=e:this.zV(e)}return i||(i=this.gl.createBuffer(),this._O.set(i,{size:t})),i}BO(t,e=this.gl.RGBA,i=!1,s,r,n=!1,o=this.gl.UNSIGNED_BYTE,a=e){const h=this.gl.createTexture();if(!h)throw new xt("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),t&&null===r?this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,e,o,t):r&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,r.x,r.y,0,e,o,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),i?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),h}sE(t){this.gl.deleteTexture(t)}NV(){const t=this.gl.createFramebuffer();if(!t)throw new xt("Couldn't reserve Framebuffer.");return t}bV(t,e){this.AO=e,this.gl.bindFramebuffer(t,e)}xV(){return this.AO}UV(t){this.gl.deleteFramebuffer(t)}GV(){const t=this.gl.createRenderbuffer();if(!t)throw new xt("Couldn't reserve Render buffer.");return t}WV(t){this.gl.deleteRenderbuffer(t)}MV(t,e,i,s){return this.gl.viewport(t,e,i,s),this.LO&&t===this.LO.x&&e===this.LO.y&&i===this.LO.width&&s===this.LO.height||(this.LO={x:t,y:e,width:i,height:s}),this}fV(){return this.LO||{x:0,y:0,width:0,height:0}}_V(t,e,i,s){return this.vV(!0),this.gl.scissor(Math.max(t,0),Math.max(e,0),Math.max(i,0),Math.max(s,0)),this}vV(t){return t===this.RO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.RO=t),this}RV(t){return t!==this.SO&&(this.SO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}yV(){return this.SO}wO(t,e,i,s){return t?(void 0!==t&&void 0!==e&&(void 0!==i&&void 0!==s?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}AV(){return void 0!==this.RO&&this.RO}TV(t,e){const i=new Pm(this,t),s=e(i.uniform,i.attribute,i,i.uniformOptional);i.finish(s)}zV(t){t&&(this.gl.deleteBuffer(t),this._O.delete(t))}EO(t,e,i){this.IV(t.uniform("uCenter"),e.center).IV(t.uniform("uDistance"),e.distance).ZV(t.uniform("uBounds"),e.bounds).DV(t.uniform("uAspect"),e.aspectRatio);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let e=0;e<s.length;e+=1)this.PR(t.uniform(`color_${e}`),s[e].color).DV(t.uniform(`stop_${e}`),s[e].offset);return this}zO(t,e,i){this.IV(t.uniform("uStartPoint"),e.startPoint).IV(t.uniform("uEndPoint"),e.endPoint).ZV(t.uniform("uBounds"),e.bounds);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let e=0;e<s.length;e+=1)this.PR(t.uniform(`color_${e}`),s[e].color).DV(t.uniform(`stop_${e}`),s[e].offset);return this}Zh(t){const e=this.NE.get(t);if(!e){const e=new pg(this);return this.NE.set(t,e),e}return e}VO(t){const e=this.HV.get(t);if(!e){const e=new km(this,t);return this.OO(t,e),e}return e}OO(t,e){this.HV.set(t,e)}CO(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const i=0===t.getError();return i||!1!==this.SA.io&&Tt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(e),i}NO(t,e,i,s){if(i)this.FV(e,s,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const i=t.attribute("aPos");this.oO(i,e),void 0!==s&&this.lO(i,s)}return this}GO(){this.Sz.WEBGL_lose_context&&this.Sz.WEBGL_lose_context.loseContext()}WO(t){if(this.UO&&this.UO.bufferIdsCount>=t)return this.UO.buffer;this.UO&&(this.zV(this.UO.buffer),this.UO=void 0);const e=t,i=new Float32Array(e);for(let t=0;t<e;t+=1)i[t]=t;const s=this.CV(i);return this.UO={buffer:s,bufferIdsCount:e},s}YO(){return this.gl2?void 0:"attribute"}HO(t,e){if("attribute"===this.YO()){const i=this.WO(e);this.FV(i,void 0,{location:t.attribute("aVertexID"),size:1})}return this}$O(){return this.gl2?void 0:"attribute"}XO(t,e){if("attribute"===this.$O()){const i=this.WO(e);this.FV(i,1,{location:t.attribute("aInstanceID"),size:1})}return this}jO(t,e,i,s,r,n,o,a,h){const l=t.createBuffer();return this.xO.push(l),t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,h.byteLength,t.STREAM_READ),t.readPixels(i,s,r,n,o,a,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),_m(t,t.PIXEL_PACK_BUFFER,l,0,h).then((()=>h)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.xO.splice(this.xO.indexOf(l),1)}))}ZO(t,e,i,s,r,n,o,a){const h=this.gl,l=this.xV();this.bV(h.FRAMEBUFFER,t),h.readPixels(e,i,s,r,n,o,a),this.bV(this.gl.FRAMEBUFFER,l)}QO(t){const e=this.$V.get(t);if(!e){const e=this.gl.createTexture();if(!e)throw new xt("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,e);const s=[];let r=255;for(let e=0;e<t.length;e+=1){for(let i=0;i<t[e];i+=1)s.push(r);r=255===r?0:255}const n=s.length;if(!this.gl2&&(i=s.length)&i-1){const t=(t=>{t-=1;for(let e=1;e<32;e<<=1)t|=t>>1;return t+1})(s.length);for(let e=s.length;e<t;e+=1)s[e]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,s.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(s)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const o={JO:e,KO:n,qO:s.length};return this.$V.set(t,o),o}var i;return e}tN(t,e,i){const{uniform:s}=t;this.PR(s("uFallbackColor"),e.getFallbackColor());for(let t=0;t<e.steps.length;t+=1)this.DV(s(`uLUTValue${t}`),e.steps[t].value),this.PR(s(`uLUTColor${t}`),e.steps[t].color);if(e.percentageValues){if(!i)return pe(0,(()=>{})),this;this.DV(s("uMinValue"),i.min),this.DV(s("uMaxValue"),i.max)}return this}iN(t,i,s,r,n,o){const a=s&&s.getSource()||r&&r.dc,h=s?s.getFitMode():e.ImageFitMode.Stretch,l=t=>{t.texCoordsBuffer=this.CV(o(t.texture.Qz,t.texture.Jz,h),!1,t.texCoordsBuffer)};if(a){let e=i;if((!i||a!==i.source)&&a){i&&(i.texture.dE(t),this.zV(i.texCoordsBuffer));const r=this.VO(a);r.cE(t);const n=s?s.getSourceMissingColor():Bs.color;e={texture:r,source:a,texCoordsBuffer:this.CV([]),sourceMissingTexture:this.BO(new Uint8Array([n.getR(),n.getG(),n.getB(),n.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{e&&a&&(l(e),this.cs.Ms())}},r.nV(e.textureReadyCallback),l(e)}return e&&e.texture.qz&&e.texture.Kz&&e.texture.Zz&&(e.texture.zs(),this.cs.Ms()),n&&e&&e.texture.qz&&l(e),e}i&&this.sN(t,i)}sN(t,e){e&&(e.texture.dE(t),e.texture.oV(e.textureReadyCallback),this.sE(e.sourceMissingTexture),this.zV(e.texCoordsBuffer))}eN(t,e,i,s){const{uniform:r,uniformOptional:n,attribute:o}=t,a=i.At,h=this.dV();this.DV(r("uIsHighlighted"),1===e||2===e?0:i.$o).PR(r("uHighlightColorOffset"),1===e||2===e?R:i.Qo).DV(r("uRenderEffectMask"),2===e?1:0).IV(n("uRatioPxClip"),[2/this.cs.oi().x,2/this.cs.oi().y]).DV(n("uDevicePixelRatio"),h),a instanceof Vi||a instanceof zc?this.IV(r("uScale"),s.uniforms.BV()).IV(r("uDisp"),s.uniforms.LV()).IV(n("uScaleStart_highpart"),s.uniforms.hN()).IV(n("uScaleStart_lowpart"),s.uniforms.rN()):a instanceof zi&&this.IV(n("uScaleStart"),s.uniforms.MixedScaleXY.uScaleStart).IV(n("uScaleStartLog"),s.uniforms.MixedScaleXY.uScaleStartLog).IV(n("uScaleInterval"),s.uniforms.MixedScaleXY.uScaleInterval).IV(n("uScaleIntervalLog"),s.uniforms.MixedScaleXY.uScaleIntervalLog).IV(r("uViewportStart"),s.uniforms.MixedScaleXY.uViewportStart).IV(r("uViewportSize"),s.uniforms.MixedScaleXY.uViewportSize);const l=!0===s.coordsHighPrecision;if(s.coordsX)if(l){const t=o("aPos_highpartX"),e=o("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(e,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(e)}else this.dO(o("aPosX"),s.coordsX);if(s.coordsY)if(l){const t=o("aPos_highpartY"),e=o("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(e,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(e)}else this.dO(o("aPosY"),s.coordsY);if(1===e)this.qV(r("uFirstId"),s.idFirst);else{if(s.fillStyleSolid&&this.PR(r("uColor"),s.fillStyleSolid.getColor()),s.fillStylePaletted){if("value"===s.fillStylePaletted.getLookUpProperty()&&null!==s.lookupValueBuffer){if(!s.lookupValueBuffer)return!1;const t=o("aLookupValue");this.dO(t,s.lookupValueBuffer),void 0!==s.lookupValueAttribDivisor&&this.lO(t,s.lookupValueAttribDivisor)}this.tN(t,s.fillStylePaletted.lut,s.lookupValueRange)}if(s.fillStyleLinearGradient){if(!s.linearGradientInfo)return!1;this.zO(t,s.linearGradientInfo,s.fillStyleLinearGradient)}if(s.fillStyleRadialGradient){if(!s.radialGradientInfo)return!1;this.EO(t,s.radialGradientInfo,s.fillStyleRadialGradient)}if(s.fillStyleIndividual&&null!==s.colorBuffer){if(!s.colorBuffer)return!1;const t=o("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(t),void 0!==s.colorAttribDivisor&&this.lO(t,s.colorAttribDivisor)}if(s.fillStyleImage){if(!s.texturedFillGLInfo)return!1;const t=s.texturedFillGLInfo&&s.texturedFillGLInfo.texture.aV();this.PR(n("uColor"),s.fillStyleImage.getSurroundingColor()).PV(r("uColorTexture"),t||s.texturedFillGLInfo.sourceMissingTexture,0).FV(s.texturedFillGLInfo.texCoordsBuffer,s.texCoordAttribDivisor,{location:o("aTextureCoord"),size:2}).tO(s.fillStyleImage.fitMode)}if(s.maskTexture){const t=s.maskTexture&&s.maskTexture.texture.aV();this.PV(r("uMaskTexture"),t||s.maskTexture.sourceMissingTexture,0).FV(s.maskTexture.texCoordsBuffer,s.maskTextureCoordsAttribDivisor,{location:o("aMaskTextureCoord"),size:2})}}return void 0!==s.useInstanceID&&this.XO(t,s.useInstanceID),void 0!==s.useVertexID&&this.HO(t,s.useVertexID),!0}nN(t,e,i){if(t)return bm(i||e.ia(),e.At,t.getAngle(!0),this.dV())}oN(t,e,i){if(t)return vm(i||e.ia(),e.At,t.getPosition(),t.getExtent(),t.getShape(),this.dV())}}const _m=async(t,e,i,s,r,n,o)=>{const a=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,e,i)=>{const s=void 0!==i.flags?i.flags:0,r=void 0!==i.retryTimeout?i.retryTimeout:10;return new Promise(((i,n)=>{const o=()=>{const a=t.clientWaitSync(e,s,0);return a===t.WAIT_FAILED?n(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):a!==t.TIMEOUT_EXPIRED?i(void 0):void Tt.setTimeout(o,r)};Tt.setTimeout(o,0)}))})(t,a,{retryTimeout:10}).then((()=>(t.deleteSync(a),t.bindBuffer(e,i),t.getBufferSubData(e,s,r,n,o),t.bindBuffer(e,null),r))).catch((t=>{throw t}))};class Fm{EV(t){if(t instanceof Vi||t instanceof zc){const e=t.mi();this.aN=e.x.scaling,this.lN=-e.x.displacement,this.uN=e.y.scaling,this.cN=-e.y.displacement,this.dN=e.x.highPrecisionOffset,this.fN=e.x.highPrecisionOffset-Math.fround(e.x.highPrecisionOffset),this.AN=e.y.highPrecisionOffset,this.gN=e.y.highPrecisionOffset-Math.fround(e.y.highPrecisionOffset)}else t instanceof zi&&(this.MixedScaleXY=t.mi());return this}LV(){return[this.lN,this.cN]}BV(){return[this.aN,this.uN]}hN(){return[this.dN,this.AN]}rN(){return[this.fN,this.gN]}}class Dm{constructor(){this.aN=0,this.uN=0,this.pN=0,this.lN=0,this.cN=0,this.yN=0}mN(t){return this.aN=t.rt(),this.lN=t.getInnerStart()+.5*this.aN*t.nt(),this}vN(t){return this.uN=t.rt(),this.cN=t.getInnerStart()+.5*this.uN*t.nt(),this}SN(t){return this.pN=t.rt(),this.yN=t.getInnerStart()+.5*this.pN*t.nt(),this}BV(){return[this.aN,this.uN,this.pN]}LV(){return[this.lN,this.cN,this.yN]}xN(t,e,i,s,r){const n=u(2*(t-i.x)/(i.width-i.x)-1,2*(e-i.y)/(i.height-i.y)-1),o=Sm.multiply(s,[n.x,n.y,r,1]);return f(o[0],o[1],o[2])}}class Bm{constructor(t){this.KR=t}qL(t,e,i,s,r,n=0){const o=this.KR,a=void 0===s;if(!(s=s||o.NV()))throw new xt("Could not bind a framebuffer.");const h=o.fV(),l=o.yV();o.RV(!1),o.mO((()=>{o.MV(0,0,i.x,i.y),t()}),s,e,n),a&&o.UV(s),this.KR.vO(r),this.KR.MV(h.x,h.y,h.width,h.height),o.RV(l)}}class Pm{constructor(t,e){this.bN=[],this.MN=[],this.uniform=t=>{const e=this.shader.LE(t);return this.MN.push({name:t,optional:!1}),e},this.uniformOptional=t=>{const e=this.shader.RE(t);return this.MN.push({name:t,optional:!0}),e},this.attribute=t=>{const e=this.shader.EE(t);return this.bN.push({name:t,location:e}),e},this.glUtils=t,this.shader=e}finish(t){for(const t of this.bN)this.glUtils.uO(t.location),this.glUtils.lO(t.location,0)}}class Lm extends Jr{constructor(t,e,i,s,r){super(t,e,i,s),this._N=new Map,this.wN=t,this.CN=e,this.KR=t.kN(),this.TN=r,this.CN=e}iE(){return this}qL(t,e){if(!this.TN||0!==t||0===this._N.size)return{};const i=Array.from(this._N.values()).map((t=>t.FN.filter((t=>t.IN)).map((t=>t.ss)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(0===i.length)return{};const s=this.TN;return this.KR.TO.OV(i,s),{}}PN(t,e,i,s,r){return{}}zs(){return this}St(){return 0}vt(){return 0}bt(){return 0}xt(){return 0}Tl(){return 0}Fl(){return 0}rs(t,e){const i={FN:[]},s=(t,e)=>{const s={ss:t||[],IN:void 0===e||e};i.FN.push(s);const r={gs:t=>(s.ss=t,r),bs:t=>(s.IN=t,r),_s:()=>s.IN};return r},r={};Object.keys(e).forEach((t=>{const i=e[t],n=i.shapes||[],o=void 0===i.themeEffectEnabled||i.themeEffectEnabled,a=s(n,o);r[t]=a}));const n={kg:s,...r};this._N.set(t,i);const o=t.onDispose((()=>{this._N.delete(t),t.offDispose(o)}));return n}}function Vm(t,e,i,s,r,n=Math.floor(Math.sqrt(s>r?25*s:25*r))){const o=Array(n+2),a=Math.PI;let h=0,l=0;const c=e*a/180,d=(i*a/180-c)/n;for(o[h]=u(t.x,t.y),h+=1;h<=n+1;)o[h]=u(t.x+s*Math.cos(c+l*d),t.y+r*Math.sin(c+l*d)),h+=1,l+=1;return[o,n]}const zm=(t,e,i)=>((t,e,i)=>{const s=[];let r=0;const n=li(e,i/2);let o,a,h,l,c=t[t.length-1],d=0;for(let i=0;i<t.length;i+=1){o=t[i],a=i===t.length-1?t[0]:t[i+1],i>0&&(c=t[i-1]),wt(o,c)&&(c=ui(o,oi(li(ci(a,o),-1)))),wt(o,a)&&(a=ui(o,oi(li(ci(c,o),-1))));const f=fi(c,e),g=fi(o,e),m=fi(a,e),y=oi(ci(g,f)),p=oi(ci(m,g)),x=ui(y,p),A=u(-x.y,x.x),S=u(-y.y,y.x),v=1/mi(A,S),b=hi(A),M=oi(ci(y,p)),T=Math.sign(mi(A,M))||1,w=di(A,li(n,v)),C=di(A,li(n,-v));if(b<1||v===1/0){let t={x:0,y:0},e={x:0,y:0},i={x:0,y:0},h={x:0,y:0};const l=u(-p.y,p.x),f=Math.sign(mi(y,A))||T,g=di(S,li(n,f)),m=di(l,li(n,f));1===T?(t=g,e=C,i=m,h=C):(t=w,e=g,i=w,h=m);const x=4*$e(c,o),b=4*$e(o,a);(v>x||v>b)&&(1===T?(t=g,e=m,i=m,h=g):(t=m,e=g,i=g,h=m));const M=ui(o,t),k=ui(o,e),E=ui(o,i),R=ui(o,h);s[r]=M,r+=1,s[r]=k,r+=1,s[r]=E,r+=1,s[r]=R,r+=1,d=4}else{const t=ui(o,w),e=ui(o,C);s[r]=t,r+=1,s[r]=e,r+=1,d=2}l=h,h=t[i]}return s[r]=s[0],r+=1,s[r]=s[1],r+=1,[s,d,[l,h]]})(t,e,i)[0];class Nm extends mn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kE=new Fm,this.DN=Ne,this.LN=Ne,this.RN=fg({arcStyleSolid:()=>Y(this.Te)&&this.Te,arcStyleRadialGradient:()=>tt(this.Te)&&this.Te,arcStyleLinearGradient:()=>st(this.Te)&&this.Te}),this.wN=t,this.CN=e,this.KR=t.kN()}EN(t,e){let i=0,s=Array(0),r=0;if(void 0!==e){const r=t.length,n=Array(r+e.length);let o=0,a=0;for(;o<r;)n[a]=t[o],n[a+1]=e[o],a+=2,o+=1;s=n,i=this.KR.gl.TRIANGLE_STRIP}else s=t,i=this.KR.gl.TRIANGLE_FAN;const n=Jt(s,this.At._i());return r=s.length,[s,this.KR.CV(n),r,i]}zN(t,e,i,s){let r=Array(0);if(void 0===e)r=t;else{let i=0,s=0;const n=t.length;for(i=0,s=n,r=Array(n+e.length-2),e.reverse();i<n;)r[i]=t[i],r[s]=e[i],s+=1,i+=1}if(1===i||-1===i)return[Jt(r,this.At._i()),r.length];const n=zm(r,s,i);return[Jt(n,this.At._i()),n.length]}zs(){const t=this.da(),e=this.Wo.C();if(this.fa()){const i=Math.abs(this.Fi.C()-this.Zl.C());this.kE.EV(this.At);const s=this.At.Ni()||t,r=this.At.Wi(),n=this.Ql.C(),o=this.Jl.C(),[a,h]=Vm(this.Sa.C(),this.Zl.C(),this.Fi.C(),this.Ql.C(),this.Jl.C(),this.ql.C()),l=this.Kl.C(),c=l>0?Vm(this.Sa.C(),this.Zl.C(),this.Fi.C(),this.Ql.C()*l/100,this.Jl.C()*l/100,h)[0]:[this.Sa.C()],d=a.length-1;if(2===d){const t=(a[d-1].x+a[1].x)/2,e=(a[d-1].y+a[1].y)/2;this.tu=u(t,e)}else{const t=Math.floor(d/2);this.tu=u(a[t].x,a[t].y)}this.iu=a[1];const f=a.length-1;this.su=a[f],this.Kl.C()&&(a.shift(),c.shift());let g=!1;(this.Sa.u||this.Zl.u||this.Fi.u||this.Ql.u||this.Jl.u||this.Kl.u||this.ql.u||s)&&(this.LN=m(u(this.Oa().x-n,this.Oa().y-o),u(this.Oa().x+n,this.Oa().y+o)),g=!0,this.Sa.u=!1,this.Zl.u=!1,this.Fi.u=!1,this.Ql.u=!1,this.Jl.u=!1,this.Kl.u=!1,this.ql.u=!1);const y=this.ua();(g||y)&&this.Te!==V&&(this.Kl.C()?(this.VN&&this.KR.zV(this.VN),[this.ON,this.VN,this.NN,this.GN]=this.EN(a,c)):(this.VN&&this.KR.zV(this.VN),[this.ON,this.VN,this.NN,this.GN]=this.EN(a,void 0)),tt(this.Te)?this.WN=vm(this.LN,this.At,this.Te.getPosition(),this.Te.getExtent(),this.Te.getShape(),this.KR.dV()):st(this.Te)?this.UN=bm(this.LN,this.At,this.Te.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0));const p=this.RN.arcStyleSolid(y),x=this.RN.arcStyleLinearGradient(y),A=this.RN.arcStyleRadialGradient(y),S=p||x||A;y&&(this.YN=S?this.KR.Cz(Yg["2D"],Yg.Color({dataType:tt(this.Te)||st(this.Te)?["gradient",this.Te]:"uniform"}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.Aa(this.Te));const v=this.Fe;if(ns(v)&&(g||this.ya(v.getThickness())||s)){this.Kl.C()?360===i?(a.pop(),c.pop(),[this.HN,this.$N]=this.zN(a,void 0,v.getThickness(),r),this.XN&&this.HN?this.KR.hO(this.XN,this.HN,!0):!this.XN&&this.HN?this.XN=this.KR.CV(this.HN,!0):this.XN&&!this.HN&&(this.KR.zV(this.XN),this.XN=void 0),[this.jN,this.ZN]=this.zN(c,void 0,v.getThickness(),r),this.QN&&this.jN?this.KR.hO(this.QN,this.jN,!0):!this.QN&&this.jN?this.QN=this.KR.CV(this.jN,!0):this.QN&&!this.jN&&(this.KR.zV(this.QN),this.QN=void 0)):([this.HN,this.$N]=this.zN(a,c,v.getThickness(),r),this.XN&&this.HN?this.KR.hO(this.XN,this.HN,!0):!this.XN&&this.HN?this.XN=this.KR.CV(this.HN,!0):this.XN&&!this.HN&&(this.KR.zV(this.XN),this.XN=void 0),this.jN&&(this.QN&&this.KR.zV(this.QN),this.QN=void 0,this.ZN=0)):(360===i&&(a.shift(),a.pop()),[this.HN,this.$N]=this.zN(a,void 0,v.getThickness(),r),this.XN&&this.HN?this.KR.hO(this.XN,this.HN,!0):!this.XN&&this.HN?this.XN=this.KR.CV(this.HN,!0):this.XN&&!this.HN&&(this.KR.zV(this.XN),this.XN=void 0));const t=v.getFillStyle();tt(t)?this.JN=vm(this.LN,this.At,t.getPosition(),t.getExtent(),t.getShape(),this.KR.dV()):st(t)?this.KN=bm(this.LN,this.At,t.getAngle(!0),this.KR.dV()):(this.JN=void 0,this.KN=void 0),this.qN=t===V?void 0:this.KR.Cz(Yg["2D"],Yg.Color({dataType:tt(t)||st(t)?["gradient",t]:"uniform"}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})),this.ma(v)}if(g){let t=1,e=1;ns(v)&&(t=v.getThickness()*r.x,e=v.getThickness()*r.y),this.DN=m(u(this.LN.min.x-t,this.LN.min.y-e),u(this.LN.max.x+t,this.LN.max.y+e))}this.tG=e&&S?this.tG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.iG=e&&this.Fe!==nt?this.iG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0}return this}qL(t,e){if(this.fa()){const i=1===t?this.tG:this.YN,s=this.Te,r=this.VN;i&&r&&this.KR.cE(i).TV(i,((i,n,o,a)=>{if(this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(a("uScaleStart_highpart"),this.kE.hN()).IV(a("uScaleStart_lowpart"),this.kE.rN()).NO(o,r,this.At._i(),void 0).DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),1===t)this.KR.qV(i("uFirstId"),e).XO(o,1);else if(Y(s))this.KR.PR(i("uColor"),s.getColor());else if(tt(s)){if(!this.WN)return!1;this.KR.EO(o,this.WN,s)}else if(st(s)){if(!this.UN)return!1;this.KR.zO(o,this.UN,s)}return this.KR.qy(this.GN,this.NN),!0}));const n=this.Fe;ns(n)&&(void 0!==this.XN&&this.sG(t,this.XN,this.$N,n,e),void 0!==this.QN&&this.sG(t,this.QN,this.ZN,n,e))}return{idCount:1}}PN(t,e,i,s,r){return{}}sG(t,e,i,s,r){const n=1===t?this.iG:this.qN,o=s.getFillStyle();n&&this.KR.cE(n).TV(n,((n,a,h,l)=>{if(this.KR.IV(n("uScale"),this.kE.BV()).IV(n("uDisp"),this.kE.LV()).NO(h,e,this.At._i(),void 0).DV(n("uIsHighlighted"),1===t||2===t?0:this.$o).PR(n("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(n("uRenderEffectMask"),2===t?1:0),1===t)this.KR.qV(n("uFirstId"),r).XO(h,1);else if(Y(o))this.KR.PR(n("uColor"),o.getColor());else if(tt(o)){if(!this.JN)return!1;this.KR.EO(h,this.JN,o)}else if(st(o)){if(!this.KN)return!1;this.KR.zO(h,this.KN,o)}const u=s.getThickness(),c=-1===u||1===u;return this.KR.qy(c?this.KR.gl.LINE_LOOP:this.KR.gl.TRIANGLE_STRIP,i),!0}))}iE(){return this.eG&&(this.KR.zV(this.eG),this.eG=void 0),this.hG&&(this.KR.zV(this.hG),this.hG=void 0),this.VN&&(this.KR.zV(this.VN),this.VN=void 0),this.XN&&(this.KR.zV(this.XN),this.XN=void 0),this.QN&&(this.KR.zV(this.QN),this.QN=void 0),this.YN=void 0,this.qN=void 0,this.tG=void 0,this.iG=void 0,this}St(){return this.LN.max.x}vt(){return this.LN.min.x}bt(){return this.LN.max.y}xt(){return this.LN.min.y}Tl(){return Ce(this.Fe)}Fl(){return Ce(this.Fe)}}class Om{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}rG(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}nG(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}oG(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}aG(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.second,e[i+2]=this.third,i+=3,t.position=i,t.next&&this.nG(),this}lG(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.third,e[i+2]=this.second,e[i+3]=this.third,e[i+4]=this.fourth,e[i+5]=this.second,i+=6,t.position=i,t.next&&this.oG(),this}uG(t,e){e.next=!0,6*t>=e.buffer.length&&(e.buffer=Array(6*t));for(let i=0;i<t;i+=1)this.lG(e);return this}cG(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const Um=((t=0)=>(new Om).rG(t))(),Ym=(t,e,i,s,r,n,o,a,h,l)=>(void 0===a&&void 0===o||Um.nG(),n.push(t,e),r.push(Um.first,Um.second,Um.third),a=void 0,o=void 0,r.push(Um.third,Um.fourth,Um.second),h=Um.third,Um.oG(),l&&n.push(i,s),[o,a,h]),Gm=(t,e,i,s,r,n,o,a,h,l,u)=>{void 0===h&&void 0===a||Um.nG(),o.push(t,e),r.push(Um.first,Um.second,Um.third);const c=vi(t,i,e,s);return h=void 0,void 0!==c&&(void 0===h&&(h=c),o.push(h),n.push(Um.third,Um.fourth,Um.fifth),l=Um.fourth),Um.oG(),u&&o.push(i,s),[a,h,l]},Hm=(t,e,i,s,r,n,o,a,h,l)=>(void 0===o&&void 0===n||Um.nG(),r.push(t,e),s.push(Um.first,Um.second,Um.third),n=i,o=void 0,a=Um.third,l?r.push(i):h=!0,[n,o,a,h]),Wm=(t,e,i,s,r,n,o,a,h,l,u)=>(0!==n.length?(void 0===a&&void 0===o||Um.nG(),Um.nG()):h>0&&(Um.nG(),u>0&&(u-=1)),n.push(t),r.push(Um.first,Um.second,Um.third),h=Um.second,o=t,a=void 0,l&&n.push(i,s),[o,a,h,u]),Km=(t,e=0)=>{Um.rG(e);const[i,s]=t,r=i.length,n=[],o=[],a=[];let h,l,u=e,c=0,d=i[c],f=s[c],g=i[c],m=s[c],y=!1,p=u>0?g.y!==m.y?2:1:0;if(r>1)for(;c<r-1;){g=d,m=f,c+=1,d=i[c],f=s[c];const t=c===r-1;g.y>m.y?d.y>f.y?[h,l,u]=Ym(g,m,d,f,n,a,h,l,u,t):d.y<f.y?[h,l,u]=Gm(g,m,d,f,n,o,a,h,l,u,t):[h,l,u,y]=Hm(g,m,d,n,a,h,l,u,y,t):g.y<m.y?d.y<f.y?[h,l,u]=Ym(g,m,d,f,o,a,h,l,u,t):d.y>f.y?[h,l,u]=Gm(g,m,d,f,o,n,a,h,l,u,t):[h,l,u,y]=Hm(g,m,d,o,a,h,l,u,y,t):d.y===f.y?(h=g,y&&(a.push(g),y=!1,Um.nG()),0===a.length&&u>0&&p>0&&(p-=1)):d.y>f.y?[h,l,u,p]=Wm(g,0,d,f,n,a,h,l,u,t,p):[h,l,u,p]=Wm(g,0,d,f,o,a,h,l,u,t,p)}return[a,new Uint16Array(n),new Uint16Array(o),u,p]};class Xm extends gn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kE=new Fm,this.dG=0,this.Za=Array(),this.fG=0,this.AG=new Uint16Array(0),this.gG=new Uint16Array(0),this.RN=fg({hightFillSolid:()=>Y(this.Te)&&this.Te,hightFillRadialGradient:()=>tt(this.Te)&&this.Te,hightFillLinearGradient:()=>st(this.Te)&&this.Te,hightFillPaletted:()=>K(this.Te)&&this.Te,lowFillSolid:()=>Y(this.El)&&this.El,lowFillRadialGradient:()=>tt(this.El)&&this.El,lowFillLinearGradient:()=>st(this.El)&&this.El,lowFillPaletted:()=>K(this.El)&&this.El}),this.wN=t,this.CN=e,this.KR=t.kN()}zs(){const t=this.da(),e=this.Wo.C(),i=this.rl;if(this.fa()){this.kE.EV(this.At);const s=this.At instanceof zi==0,r=s?this.At.Wi():void 0,n=this.Nl(),o=this.At.Ni()||t,a=i||this.Dl.u||o&&"disabled"!==n.type;if(a){if(this.dG=0,this.AG=new Uint16Array(0),this.gG=new Uint16Array(0),this.Za.length=0,this.fG=0,this.Bl>1){const[t,e,i,o]=Km([s?n.packager(this.Il,r,.5):this.Il,s?n.packager(this.Pl,r,.5):this.Pl]);this.dG=o,this.AG=e,this.gG=i,this.Za=t,this.fG=t.length}this.Dl.u=!1}if(this.Rl&&this.sl[0].length>1){const[t,e]=this.sl,i=t.length,[o,a,h,l,u]=Km([s?n.packager(t,r,.5):t,s?n.packager(e,r,.5):e],this.dG);this.dG=l;const c=o.length;for(let t=u;t<c;t+=1)this.Za[this.fG]=o[t],this.fG+=1;this.AG=bi(this.AG,a),this.gG=bi(this.gG,h);for(let s=u>0||this.Bl>0?1:u;s<i;s+=1)this.Il[this.Bl]=t[s],this.Pl[this.Bl]=e[s],this.Bl+=1;this.Ll=!0,this.Rl=!1,this.sl=[]}const h=this.Te,l=this.ca!==h,u=this.RN.hightFillSolid(l),c=this.RN.hightFillRadialGradient(l),d=this.RN.hightFillLinearGradient(l),f=this.RN.hightFillPaletted(l),g=u||c||d||f&&["x","y"].includes(f.getLookUpProperty())&&f,m=this.El,y=this.Xl!==m,p=this.RN.lowFillSolid(y),x=this.RN.lowFillRadialGradient(y),A=this.RN.lowFillLinearGradient(y),S=this.RN.lowFillPaletted(y),v=p||x||A||S&&["x","y"].includes(S.getLookUpProperty())&&S;if((l||t)&&(this.pG=g?this.KR.Cz(Yg["2D"],Yg.Color({dataType:d?["gradient",d]:c?["gradient",c]:f?["lookup",f.getLookUpProperty(),f.lut]:"uniform"}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0),c?this.WN=vm(this.Ho||this.tl,this.At,c.getPosition(),c.getExtent(),c.getShape(),this.KR.dV()):d?this.UN=bm(this.Ho||this.tl,this.At,d.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0),(y||t)&&(this.yG=v?this.KR.Cz(Yg["2D"],Yg.Color({dataType:A?["gradient",A]:x?["gradient",x]:S?["lookup",S.getLookUpProperty(),S.lut]:"uniform"}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0),x?this.mG=vm(this.Ho||this.tl,this.At,x.getPosition(),x.getExtent(),x.getShape(),this.KR.dV()):A?this.vG=bm(this.Ho||this.tl,this.At,A.getAngle(!0),this.KR.dV()):(this.mG=void 0,this.vG=void 0),(t||this.Ll||a)&&this.Ll||a){const t=this.Za,e=Jt(t,this.At._i());this.SG=this.KR.CV(e,!1,this.SG),g&&(this.xG=this.KR.rO(this.AG,this.xG),this.bG=this.AG.length),v&&(this.MG=this.KR.rO(this.gG,this.MG),this._G=this.gG.length),this.Ll=!1}this.tG=e&&(v||g)?this.tG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.Aa(this.Te),this.jl(this.El),this.rl=!1}return this}qL(t,e){const i=this.Te,s=this.El,r=1===t?this.tG:this.yG;if(r&&this.SG&&this.MG){const i=this.SG,n=this.MG;this.KR.cE(r).TV(r,((r,o,a,h)=>{if(this.KR.NO(a,i,this.At._i(),void 0).fO(n).DV(r("uIsHighlighted"),1===t||2===t?0:this.$o).PR(r("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(r("uRenderEffectMask"),2===t?1:0),this.At instanceof Vi||this.At instanceof zc?this.KR.IV(r("uScale"),this.kE.BV()).IV(r("uDisp"),this.kE.LV()).IV(h("uScaleStart_highpart"),this.kE.hN()).IV(h("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(h("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(h("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(h("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(h("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(r("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(r("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),1===t)this.KR.qV(r("uFirstId"),e).XO(a,1);else if(Y(s))this.KR.PR(r("uColor"),s.getColor());else if(tt(s)){if(!this.mG)return!1;this.KR.EO(a,this.mG,s)}else if(st(s)){if(!this.vG)return!1;this.KR.zO(a,this.vG,s)}else if(K(s)){const t=gg(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.KR.tN(a,s.lut,t)}return this.KR.gO(this._G),!0}))}const n=1===t?this.tG:this.pG;if(n&&this.SG&&this.xG){const s=this.SG,r=this.xG;this.KR.cE(n).TV(n,((n,o,a,h)=>{if(this.KR.NO(a,s,this.At._i(),void 0).fO(r).DV(n("uIsHighlighted"),1===t||2===t?0:this.$o).PR(n("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(n("uRenderEffectMask"),2===t?1:0),this.At instanceof Vi||this.At instanceof zc?this.KR.IV(n("uScale"),this.kE.BV()).IV(n("uDisp"),this.kE.LV()).IV(h("uScaleStart_highpart"),this.kE.hN()).IV(h("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(h("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(h("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(h("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(h("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(n("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(n("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),1===t)this.KR.qV(n("uFirstId"),e).XO(a,1);else if(Y(i))this.KR.PR(n("uColor"),i.getColor());else if(tt(i)){if(!this.WN)return!1;this.KR.EO(a,this.WN,i)}else if(st(i)){if(!this.UN)return!1;this.KR.zO(a,this.UN,i)}else if(K(i)){const t=gg(i,this,void 0);if(!t&&i.lut.percentageValues)return!1;this.KR.tN(a,i.lut,t)}return this.KR.gO(this.bG),!0}))}return{idCount:1}}PN(t,e,i,s,r){return{}}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return 0}Fl(){return 0}Kb(t){this.yl()>0&&this.zs();const[e,i]=this.al(),s=e.length>2&&e[1].x<e[0].x,r=Hr(e,t,Gr.NearestX,this.zl,this.Vl,this.At,this.cs.At,this.tl,"x",s);if(void 0===r)return;const n=[e[r],i[r]];return Number.isNaN(n[0].y)||Number.isNaN(n[1].y)?void 0:n}x_(t){this.yl()>0&&this.zs();const[e,i]=this.al(),s=e.length;if(0===s)return;const r=this.zl?1:0,n=s-(this.Vl?2:1),o=e.length>2&&e[1].x<e[0].x,a=$r(e,ct(t,this.cs.At,this.At),"x",o,r,n);if(!a)return;const h=[Qe(e[a.a],e[a.b],a.lerpAmount),Qe(i[a.a],i[a.b],a.lerpAmount)];return Number.isNaN(h[0].y)||Number.isNaN(h[1].y)?void 0:h}dispose(){return super.dispose(),this.MG&&(this.KR.zV(this.MG),this.MG=void 0),this.xG&&(this.KR.zV(this.xG),this.xG=void 0),this.SG&&(this.KR.zV(this.SG),this.SG=void 0),this}iE(){return this.dispose(),this}}class jm extends Mm{constructor(t,e){super(t),this.wG=e;const{vertices:i,indices:s,indicesCount:r,drawMode:n}=this.CG();this.kG=t.CV(i),this.TG=t.rO(s),this.FG=r,this.IG=n}cE(t,e){return this.KR.FV(this.kG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:e?t.attribute("aSegmentInside"):void 0,size:1}),this.KR.fO(this.TG),this}qy(t,e,i){return this.KR.yO(void 0!==e?e:this.IG,this.FG,i||0,t,this.KR.gl.UNSIGNED_BYTE),this}CG(){const t=[];[1,0].forEach((e=>{const i=1===e?.5*Math.PI:1.5*Math.PI;for(let s=0;s<=this.wG;s+=1){const r=i-s*Math.PI/this.wG;t.push(.5*Math.cos(r),.5*Math.sin(r),e,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const e=t.length/4,i=[];for(let t=0;t<this.wG;t+=1)i.push(t,t+1,e-2),i.push(t+e/2-1,t+e/2,e-1);return i.push(0,e-2,e-1),i.push(e-1,e-2,e/2-1),i.push(0,e-3,e-1),i.push(e/2-2,e-2,e/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(i),indicesCount:i.length,verticesCount:e,drawMode:this.KR.gl.TRIANGLES}}jz(){this.KR.zV(this.kG),this.KR.zV(this.TG)}}const $m=(t,e,i=!0)=>((t,e)=>{let i=t.YV.Wz.get(e);return i||(i=new jm(t,e),t.YV.Wz.set(e,i),i)})(t,i?e>=50?8:e>=20?6:e>=7?4:e>=4?3:1===e?1:2:1),Zm={PG:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aLocationA_highpart"),i=o("aLocationA_lowpart"),s=o("aLocationB_highpart"),h=o("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.lO(t,1),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),e.lO(i,1),a.enableVertexAttribArray(i),a.vertexAttribPointer(s,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.lO(s,1),a.enableVertexAttribArray(s),a.vertexAttribPointer(h,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),e.lO(h,1),a.enableVertexAttribArray(h)}else{const t=o("aLocationA"),i=o("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.lO(t,1),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.lO(i,1),a.enableVertexAttribArray(i)}},DG:(t,e,i,s,r,n,o)=>{const a=t.gl;a.bindBuffer(a.ARRAY_BUFFER,i),a.vertexAttribPointer(s,n,a.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),t.lO(s,1),a.enableVertexAttribArray(s),a.vertexAttribPointer(r,n,a.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,(o+n)*Float32Array.BYTES_PER_ELEMENT),t.lO(r,1),a.enableVertexAttribArray(r)},BG:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aLocationA_highpart"),i=o("aLocationA_lowpart"),s=o("aLocationB_highpart"),h=o("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.lO(t,1),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),e.lO(i,1),a.enableVertexAttribArray(i),a.vertexAttribPointer(s,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.lO(s,1),a.enableVertexAttribArray(s),a.vertexAttribPointer(h,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),e.lO(h,1),a.enableVertexAttribArray(h)}else{const t=o("aLocationA"),i=o("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.lO(t,1),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.lO(i,1),a.enableVertexAttribArray(i)}},LG:(t,e,i,s,r,n,o)=>{const a=t.gl;a.bindBuffer(a.ARRAY_BUFFER,i),a.vertexAttribPointer(s,n,a.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),t.lO(s,1),a.enableVertexAttribArray(s),a.vertexAttribPointer(r,n,a.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,(o+n)*Float32Array.BYTES_PER_ELEMENT),t.lO(r,1),a.enableVertexAttribArray(r)},qL:(t,e,i,s,r,n,o)=>{const a=t.kN(),{uniform:h,uniformOptional:l}=i,u=1/t.Kn.so,c=(r?Math.max(n,u):Math.max(n,0))+1;a.DV(h("uThicknessPixels"),c).DV(l("uAALimit"),1-(c-1)/c).IV(h("uRatioPxClip"),[2/t.oi().x,2/t.oi().y]),e.cE(i,s).qy(o)}},Qm={PG:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aPos_highpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t);const e=o("aPos_lowpart");a.vertexAttribPointer(e,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(e)}else{const t=o("aPos");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t)}},DG:(t,e,i,s,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,i),o.vertexAttribPointer(s,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(s)},BG:(t,e,i,s,r,n)=>{const{attribute:o}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=o("aPos_highpart"),e=o("aPos_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t),a.vertexAttribPointer(e,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(e)}else{const t=o("aPos");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(t)}},EG:(t,e)=>{const i=t.kN();i.qy(i.gl.LINE_STRIP,e,0)},zG:(t,e)=>{const i=t.kN();i.qy(i.gl.LINES,2*e,0)}};class qm extends xn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kE=new Fm,this.tl=Ne,this.RN=fg({lineStyleSolid:()=>ns(this.yu)&&this.yu,lineStyleDashed:()=>ho(this.yu)&&this.yu,strokeFillSolid:()=>{const t=this.yu.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.yu.getFillStyle();return st(t)&&t},strokeFillRadialGradient:()=>{const t=this.yu.getFillStyle();return tt(t)&&t},strokeFillPaletted:()=>{const t=this.yu.getFillStyle();return K(t)&&t}}),this.wN=t,this.CN=e,this.KR=t.kN(),this.VG=this.KR.MO}zs(){const t=this.ga(),e=this.yu,i=this.RN.lineStyleSolid(t),s=this.RN.lineStyleDashed(t),r=i||s,n=this.RN.strokeFillSolid(t),o=this.RN.strokeFillLinearGradient(t),a=this.RN.strokeFillRadialGradient(t),h=this.RN.strokeFillPaletted(t),l=n||o||a||h&&["x","y"].includes(h.getLookUpProperty())&&h,c=this.Ii(),d=this.Ti(),f=this.Wo.C(),g=this.Wo.u,y=e.N();if(s&&this.At instanceof zi)return Tt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.kE.EV(this.At),this.bu&&(this.OG=this.KR.CV(Jt([c,d],this.At._i()),!1,this.OG),this.tl=m(u(c.x,c.y),u(d.x,d.y))),t||g){const t=this.fa()&&r&&l&&y>0,e=o?["gradient",o]:a?["gradient",a]:h?["lookup",h.getLookUpProperty(),h.lut]:"uniform";this.NG=t?{type:"triangulated",shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0}),this.VG?Yg.AliasedEdge:void 0,s&&Yg.StippleTextureInstanced),mousePickingShader:f?this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0}),s&&Yg.StippleTextureInstanced):void 0,geometry:$m(this.KR,y),thickness:y,lineStyleSolid:i,lineStyleDashed:s,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:a,fillStylePaletted:h}:void 0}if(a?this.JN=vm(en(this.tl,{x:this.Tl(),y:this.Fl()},this.At),this.At,a.getPosition(),a.getExtent(),a.getShape(),this.KR.dV()):o?this.KN=bm(en(this.tl,{x:this.Tl(),y:this.Fl()},this.At),this.At,o.getAngle(!0),this.KR.dV()):(this.JN=void 0,this.KN=void 0),s){if(t||this.bu){const t=[0,0,Math.abs(d.x-c.x),Math.abs(d.y-c.y)];this.GG=this.KR.CV(t,!1,this.GG)}this.WG=this.KR.QO(s.getPattern())}else this.GG&&(this.KR.zV(this.GG),this.GG=void 0),this.WG=void 0;return this.xu(e),this.bu=!1,this.Wo.u=!1,this}qL(t,e){var i,s;const r=this.OG;if(!r)return{};const n=this.NG;if(!n)return{};const{fillStyleSolid:o,fillStyleLinearGradient:a,fillStyleRadialGradient:h,fillStylePaletted:l,lineStyleDashed:u,thickness:c}=n,d=1===t?null===(i=this.NG)||void 0===i?void 0:i.mousePickingShader:null===(s=this.NG)||void 0===s?void 0:s.shader;return d?(this.KR.cE(d).TV(d,((i,s,d,f)=>{if(this.KR.DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),this.At instanceof Vi||this.At instanceof zc?this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(f("uScaleStart_highpart"),this.kE.hN()).IV(f("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(f("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(f("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(f("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(f("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(i("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(i("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),1===t)this.KR.qV(i("uFirstId"),e).XO(d,1);else if(o)this.KR.PR(i("uColor"),o.getColor());else if(h){if(!this.JN)return!1;this.KR.EO(d,this.JN,h)}else if(a){if(!this.KN)return!1;this.KR.zO(d,this.KN,a)}else if(l){const t=gg(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.KR.tN(d,l.lut,t)}if(u){if(!this.GG||!this.WG)return!1;Zm.DG(this.KR,d,this.GG,s("aLengthSoFarA"),s("aLengthSoFarB"),2,0),this.KR.IV(i("uStippleCount"),[this.cs.oi().x/this.WG.qO,this.cs.oi().y/this.WG.qO]).DV(f("uStippleTextureWidthLimiter"),this.WG.KO/this.WG.qO).DV(i("uStippleScale"),u.getPatternScale()).PV(i("uStippleTexture"),this.WG.JO,1)}return Zm.PG(this.At._i(),this.KR,r,d,this.At._i()?4:2,0),Zm.qL(this.wN,n.geometry,d,this.VG&&1!==t,1===t,c,1),!0})),{idCount:1}):{}}PN(t,e,i,s,r){return{}}dispose(){return super.dispose(),this.NG=void 0,this.OG&&(this.KR.zV(this.OG),this.OG=void 0),this.GG&&(this.KR.zV(this.GG),this.GG=void 0),this.WG=void 0,this}iE(){return this}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return Ce(this.yu)}Fl(){return Ce(this.yu)}}class Jm extends An{constructor(t,e,i,s,r){super(t,e,i,s,r),this.UG=[],this.YG=!1,this.HG=!1,this.$G=!1,this.XG=!1,this.kE=new Fm,this.tl=Ne,this.RN=fg({lineStyleSolid:()=>ns(this.yu)&&this.yu,lineStyleDashed:()=>ho(this.yu)&&this.yu,lineFillSolid:()=>{const t=this.yu.getFillStyle();return Y(t)&&t},lineFillRadialGradient:()=>{const t=this.yu.getFillStyle();return tt(t)&&t},lineFillLinearGradient:()=>{const t=this.yu.getFillStyle();return st(t)&&t},lineIndividualPointFill:()=>{const t=this.yu.getFillStyle();return H(t)&&t}}),this.wN=t,this.CN=e,this.KR=t.kN(),this.VG=this.KR.MO,this.jG=t.Kn.ho}Xr(){const t={vs:e=>this.ZG(t,e),ds:e=>this.QG(t,e),$g:(e,i)=>this.JG(t,e,i),PR:e=>this.KG(t,e),Pi:{x:0,y:0},Fi:{x:0,y:0},$o:0,qG:void 0,tW:this.UG.length};return this.UG.push(t),t}Ot(){var t;return this.UG.length=0,this.YG=!0,this.Is&&this.Vn&&(null===(t=this.cs.zn)||void 0===t?void 0:t.entity)===this&&this.Vn(this,void 0,this.cs.zn.collectionMember),this}iW(){return this.UG.length}C(t){const e=this.UG[t];return[e.Pi,e.Fi]}Cm(){return this.UG}Fd(t){var e;const i=this.UG.indexOf(t);i>=0&&(this.UG.splice(i,1),this.YG=!0,this.Is&&this.Vn&&(null===(e=this.cs.zn)||void 0===e?void 0:e.entity)===this&&this.Vn(this,void 0,this.cs.zn.collectionMember))}ZG(t,e){if(e&&!this.UG.includes(t))t.tW=this.UG.length,this.UG.push(t);else if(!e){const e=this.UG.indexOf(t);this.UG.splice(e,1)}return this.$G=!0,t}QG(t,e){return t.$o=e,this.HG=!0,t}JG(t,e,i){return t.Pi=e,t.Fi=i,this.YG=!0,t}KG(t,e){return t.qG=e,this.XG=!0,t}zs(){const t=this.Wo.C(),e=this.Wo.u,i=this.ga(),s=this.yu,r=this.UG,n=this.HG,o=this.YG,a=this.$G,h=this.XG,l=this.RN.lineStyleSolid(i),u=this.RN.lineStyleDashed(i),c=l||u,d=this.RN.lineFillSolid(i),f=this.RN.lineIndividualPointFill(i),g=this.RN.lineFillRadialGradient(i),m=this.RN.lineFillLinearGradient(i),y=d||f||m||g,p=s.N(),x=u?"triangulated":s.getThickness()<0?"primitive":"triangulated";if(u&&this.At instanceof zi)return Tt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.kE.EV(this.At);const A=o||a;if(A){const t=[];for(let e=0;e<r.length;e+=1){const i=r[e];t.push(i.Pi),t.push(i.Fi)}this.OG=this.KR.CV(Jt(t,this.At._i()),!1,this.OG),this.tl=Je(t)}if(i||e){const e=d?"uniform":f?"attribute":m?["gradient",m]:g?["gradient",g]:void 0,i=c&&y&&p>0&&e;this.NG=i?"triangulated"===x?{type:"triangulated",shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0,snapToNearestPixel:this.jG,ensureMinimumSegmentLength:void 0!==this.Mu}),this.VG?Yg.AliasedEdge:void 0,u&&Yg.StippleTextureInstanced,Yg.AttributeHighlight),mousePicking:t?{shader:this.KR.Cz(Yg["2D"],Yg.MousePicking({useAttribute:!0}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0,snapToNearestPixel:this.jG,ensureMinimumSegmentLength:void 0!==this.Mu}),u&&Yg.StippleTextureInstanced,Yg.AttributeHighlight)}:void 0,geometry:$m(this.KR,p,!1),thickness:p,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:m,fillStyleRadialGradient:g}:{type:"primitive",shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0,snapToNearestPixel:this.jG}),Yg.AttributeHighlight),mousePicking:t?{shader:this.KR.Cz(Yg["2D"],Yg.MousePicking({useAttribute:!0}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0,snapToNearestPixel:this.jG}),Yg.AttributeHighlight)}:void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:d,fillStyleIndividual:f,fillStyleLinearGradient:m,fillStyleRadialGradient:g}:void 0}if(u){if(i||A){const t=new Float32Array(4*r.length);let e=0;for(let i=0;i<r.length;i+=1){const s=r[i].Pi,n=r[i].Fi;t[e]=0,t[e+1]=0,t[e+2]=Math.abs(n.x-s.x),t[e+3]=Math.abs(n.y-s.y),e+=4}this.GG=this.KR.CV(t,!1,this.GG)}this.WG=this.KR.QO(u.getPattern())}else this.GG&&(this.KR.zV(this.GG),this.GG=void 0),this.WG=void 0;if(A||n)if("triangulated"===x){const t=new Float32Array(r.length);let e=0;r.forEach((i=>{t[e]=i.$o,e+=1})),this.sW=this.KR.CV(t,!0,this.sW)}else{const t=new Float32Array(2*r.length);let e=0;r.forEach((i=>{for(let s=e;s<e+2;s+=2)t[s]=i.$o,t[s+1]=i.$o;e+=2})),this.sW=this.KR.CV(t,!1,this.sW)}if(f)if(h||A||i)if("triangulated"===x){const t=new Float32Array(4*r.length);let e=0;r.forEach((i=>{const s=i.qG||f.color;t[e]=s.r,t[e+1]=s.g,t[e+2]=s.b,t[e+3]=s.a,e+=4})),this.eW=this.KR.CV(t,!1,this.eW)}else{const t=new Float32Array(8*r.length);let e=0;r.forEach((i=>{const s=i.qG||f.color;for(let i=e;i<e+8;i+=4)t[i]=s.r,t[i+1]=s.g,t[i+2]=s.b,t[i+3]=s.a;e+=8})),this.eW=this.KR.CV(t,!1,this.eW)}else this.eW&&(this.KR.zV(this.eW),this.eW=void 0);if(t){if(A)if("triangulated"===x){const t=new Float32Array(r.length);let e=0;r.forEach((i=>{t[e+0]=i.tW||0,e+=1})),this.hW=this.KR.CV(t,!0,this.hW)}else{const t=new Float32Array(2*r.length);let e=0;r.forEach((i=>{for(let s=e;s<e+1;s+=1)t[e+0]=i.tW||0;e+=2})),this.hW=this.KR.CV(t,!1,this.hW)}}else this.hW&&(this.KR.zV(this.hW),this.hW=void 0);return g?this.WN=vm(this.Ho||this.tl,this.At,g.getPosition(),g.getExtent(),g.getShape(),this.KR.dV()):m?this.UN=bm(this.Ho||this.tl,this.At,m.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0),this.xu(s),this.HG=!1,this.$G=!1,this.YG=!1,this.XG=!1,this.Wo.u=!1,this}qL(t,e){var i;const s=this.OG,r=this.sW,n=this.hW;if(!s||!r)return{};const o=this.NG;if(!o)return{};const{type:a,fillStyleSolid:h,fillStyleIndividual:l,fillStyleLinearGradient:u,fillStyleRadialGradient:c,lineStyleDashed:d}=o,f=1===t?null===(i=o.mousePicking)||void 0===i?void 0:i.shader:o.shader;return f?(this.KR.cE(f).TV(f,((i,f,g,m)=>{if(this.At instanceof Vi||this.At instanceof zc?this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(m("uScaleStart_highpart"),this.kE.hN()).IV(m("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(m("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(m("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(m("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(m("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(i("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(i("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),this.jG&&this.KR.IV(m("uViewportSizePx"),[this.cs.oi().x*this.KR.dV(),this.cs.oi().y*this.KR.dV()]),void 0!==this.Mu&&this.KR.IV(i("uMinSegmentPixelVector"),[this.Mu.x,this.Mu.y]),this.KR.PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),1===t){if(this.KR.qV(i("uFirstId"),e),!n)return!1;"triangulated"===a?this.KR.FV(n,1,{location:f("aPickingIdOffset"),size:1}):this.KR.dO(f("aPickingIdOffset"),n)}else if(h)this.KR.PR(i("uColor"),h.getColor());else if(l){if(!this.eW)return!1;this.KR.FV(this.eW,"triangulated"===a?1:void 0,{location:f("aColor"),size:4})}else if(c){if(!this.WN)return!1;this.KR.EO(g,this.WN,c)}else if(u){if(!this.UN)return!1;this.KR.zO(g,this.UN,u)}if(d){if(!this.GG||!this.WG)return!1;Zm.LG(this.KR,g,this.GG,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0),this.KR.IV(i("uStippleCount"),[this.cs.oi().x/this.WG.qO,this.cs.oi().y/this.WG.qO]).DV(m("uStippleTextureWidthLimiter"),this.WG.KO/this.WG.qO).DV(i("uStippleScale"),d.getPatternScale()).PV(i("uStippleTexture"),this.WG.JO,0)}if("triangulated"===a){const{geometry:e,thickness:i}=o;Zm.BG(this.At._i(),this.KR,s,g,this.At._i()?4:2,0),this.KR.FV(r,1,{location:f("aIsHighlighted"),size:1}),Zm.qL(this.wN,e,g,this.VG&&1!==t,1===t,i,this.UG.length)}else Qm.BG(this.At._i(),this.KR,s,g,this.At._i()?4:2,0),this.KR.dO(f("aIsHighlighted"),r),Qm.zG(this.wN,this.UG.length);return!0})),{idCount:this.UG.length}):{}}dispose(){return super.dispose(),this.NG=void 0,this.OG&&(this.KR.zV(this.OG),this.OG=void 0),this.GG&&(this.KR.zV(this.GG),this.GG=void 0),this.sW&&(this.KR.zV(this.sW),this.sW=void 0),this.hW&&(this.KR.zV(this.hW),this.hW=void 0),this.eW&&(this.KR.zV(this.eW),this.eW=void 0),this.WG=void 0,this}PN(t,e,i,s,r){return{collectionMember:this.UG.find((i=>e+i.tW===t))}}iE(){return this}ds(t){super.ds(t);for(const e of this.UG)e.ds(t);return this}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return Ce(this.yu)}Fl(){return Ce(this.yu)}}class ty{constructor(t,e){this.rW=!1,this.nW=!1,this.oW=!1,this.At=t,this.aW=e,this.aW.Ko("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.rW="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.rW="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.nW=!0),!0===t.regularProgressiveStep&&(this.oW=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.rW?t[0].x:t[0].y,end:"x"===this.rW?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.rW?"x"===this.rW?function(t){const e=t.length;if(e>0){const i=Math.max(t[e-1].x,t[0].x),s=Math.min(t[e-1].x,t[0].x);let r=t[0].y,n=t[0].y;for(let i=0;i<e;i+=1){const e=t[i];e.y>r&&(r=e.y),e.y<n&&(n=e.y)}return m(u(s,n),u(i,r))}return Ne}(t):function(t){const e=t.length;if(e>0){const i=Math.max(t[e-1].y,t[0].y),s=Math.min(t[e-1].y,t[0].y);let r=t[0].x,n=t[0].x;for(let i=0;i<e;i+=1){const e=t[i];e.x>r&&(r=e.x),e.x<n&&(n=e.x)}return m(u(n,s),u(r,i))}return Ne}(t):Je(t)}calculateAvgStepBetweenDataPoints(t,e,i){return Math.abs(t-e)/(i-1)}}const ey=Math.min(1,1.5);class iy extends ty{constructor(t,e,i){super(t,e),this.lW=!1,this.uW={enabled:!1,totalDataPointsAtTime:0},this.cW=[],this.Ms=i,this.dW=t instanceof Vi?{type:"linear",scale:t}:t instanceof zi?{type:"mixed",scale:t}:{type:"unknown"},this.aW.Ko("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.lW=!0)}))}fW(t,e=!1){if(this.lW||!this.rW||"linear"!==this.dW.type)return!1;!1===e&&this.AW&&(clearTimeout(this.AW),this.AW=void 0);const i="x"===this.rW?this.dW.scale.x.ug:this.dW.scale.y.ug;if(!i)throw new Error("CP helper has no information about Axis state.");const s=t.length;if(s<2)return!1;const r=t[0],n=t[s-1],o=this.calculateAvgStepBetweenDataPoints("x"===this.rW?r.x:r.y,"x"===this.rW?n.x:n.y,s),a=this.dW.scale,h=Math.abs("x"===this.rW?a.Wi().x:a.Wi().y),l=h/o,u=Math.floor(l*ey),c=u*o,d=Tt.performance.now(),f=!(d-i.Sh<500)&&(i.fh?d-i.mh<1e3:d-i.Ah<2e3||i.ph),g=s>2*this.uW.totalDataPointsAtTime;if(f&&!g)return this.AW=setTimeout((()=>this.gW(t)),1e3),!1;const m=u>=10,y=this.uW.enabled?this.uW.columnWidthAxis/h<1.5:void 0,p=this.uW.enabled&&u>this.uW.dataPointsPerColumn?u/this.uW.dataPointsPerColumn>=2:void 0;let x;!0===this.uW.enabled?y?p&&(x={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:s}):x=m?{enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:s}:{enabled:!1,totalDataPointsAtTime:s}:m&&(x={enabled:!0,columnWidthAxis:c,dataPointsPerColumn:u,totalDataPointsAtTime:s});const A=!1===e;return x?(A&&(this.uW=x),!0):(A&&(this.uW={...this.uW,totalDataPointsAtTime:s}),!1)}pW(){this.yW=void 0,this.cW.length=0,this.AW&&(clearTimeout(this.AW),this.AW=void 0)}mW(t){if(0===t.length)return t;if(this.lW||!this.rW||"linear"!==this.dW.type||!this.uW.enabled)return t;let e;e=this.cW.length>0?ae(this.cW,t,{canReturnB:!0}):t;const i=e.length,s=[];let r,n,o=void 0===this.yW,a=-1,h=-1,l=0,u=0;if("x"!==this.rW||this.nW)if("x"===this.rW&&this.nW){const t=this.uW.columnWidthAxis;let c=this.yW?this.yW.x:e[0].x,d=c-t;for(let f=0;f<i;f+=1){const i=e[f];i.x>=d?((!r||i.y>r.y)&&(r=i,a=f),(!n||i.y<n.y)&&(n=i,h=f),u=f):(r&&n&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,c=i.x,d=c-t,r=i,a=f,n=i,h=f,l=f,u=f)}}else if("y"!==this.rW||this.nW){if("y"===this.rW&&this.nW){const t=this.uW.columnWidthAxis;let c=this.yW?this.yW.y:e[0].y,d=c-t;for(let f=0;f<i;f+=1){const i=e[f];i.y>=d?((!r||i.x>r.x)&&(r=i,a=f),(!n||i.x<n.x)&&(n=i,h=f),u=f):(n&&r&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,c=i.y,d=c-t,r=i,a=f,n=i,h=f,l=f,u=f)}}}else{const t=this.uW.columnWidthAxis;let c=this.yW?this.yW.y:e[0].y,d=c+t;for(let f=0;f<i;f+=1){const i=e[f];i.y<=d?((!r||i.x>r.x)&&(r=i,a=f),(!n||i.x<n.x)&&(n=i,h=f),u=f):(n&&r&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,c=i.y,d=c+t,r=i,a=f,n=i,h=f,l=f,u=f)}}else{const t=this.uW.columnWidthAxis;let c=this.yW?this.yW.x:e[0].x,d=c+t;for(let f=0;f<i;f+=1){const i=e[f];i.x<=d?((!r||i.y>r.y)&&(r=i,a=f),(!n||i.y<n.y)&&(n=i,h=f),u=f):(r&&n&&(o&&s.push(e[0]),a<h?s.push(r,n):s.push(n,r)),o=!1,c=i.x,d=c+t,r=i,a=f,n=i,h=f,l=f,u=f)}}if(r||n){const t=e.slice(l,u+1);this.cW=t}else this.cW.length=0;const c=s.length;return c>0&&(this.yW=s[c-1]),s}vW(t){if(this.rW&&"linear"===this.dW.type){const e="x"===this.rW?this.dW.scale.x.ug:this.dW.scale.y.ug;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.ah===Ws.progressive||e.ah===Ws.regressive){const e=Math.abs("x"===this.rW?this.dW.scale.x.getInnerInterval():this.dW.scale.y.getInnerInterval());if(this.uW.enabled)return 2*e/this.uW.columnWidthAxis;const i=t.length,s=t[0],r=t[i-1];return e/this.calculateAvgStepBetweenDataPoints("x"===this.rW?s.x:s.y,"x"===this.rW?r.x:r.y,i)}}}SW(t,e,i){if(!this.rW)return e;const s=i.length;let r=jr(i,t.min,this.rW,this.nW,0,s-1);void 0===r&&(r=this.nW?s-1:0);let n=jr(i,t.max,this.rW,this.nW,0,s-1);return void 0===n&&(n=this.nW?0:s-1),1+Math.abs(n-r)}xW(){this.AW&&(clearTimeout(this.AW),this.AW=void 0)}gW(t){this.fW(t,!0)&&this.Ms()}}class sy extends ty{renderVisibleOnly(t,e,i=!1){const s=this.At.x.getInnerStart(),r=this.At.x.getInnerEnd(),n=Math.min(s,r),o=Math.max(s,r),a=this.At.y.getInnerStart(),h=this.At.y.getInnerEnd(),l=Math.min(a,h),u=Math.max(a,h);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||!1===i&&(t.boundaries.max.x<n||t.boundaries.min.x>o||t.boundaries.max.y<l||t.boundaries.min.y>u)||e(t)}))}}class ry{constructor(t,e,i){this.bW=e,this.MW=i,this._W=t,this.wW=[]}kW(t,e,i,s){const r=t.length;if(0===r)return;let n=t,o=r,a=this._W[this._W.length-1];do{const t=this._W.length;let r;a||(a=this.TW(e,o)),a&&0==a.allocatedCoordinatesCount-a.existingCoordinatesCount&&(a=void 0);let h=0;if(this.MW&&t>0&&(void 0===a||0===a.existingCoordinatesCount)){const e=this._W[t-1].lastDataPoint;e?(n.splice(0,0,e),h=1,o+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(a)r=Math.min(o,a.allocatedCoordinatesCount-a.existingCoordinatesCount),s(a,n.slice(0,r),r,h);else{const t=Math.ceil(e)+h;r=Math.min(t,o);const s={...i(t,n.slice(0,r),r,h),isDropped:!1};this._W.push(s)}r>0&&(o>r?(n=n.slice(r),o=n.length):(n=[],o=0))}while(o>0);this.FW()}IW(t){const e=t,i=this._W.indexOf(e);i>=0&&this._W.splice(i,1),e.droppedTimestamp=Tt.performance.now(),this.wW.push(e)}PW(){this._W.slice().forEach((t=>this.IW(t)))}DW(){this._W.forEach((t=>this.bW(t))),this.wW.forEach((t=>this.bW(t))),this._W.length=0,this.wW.length=0}TW(t,e){const i=2*t/3,s=4*t/3,r=this.wW.findIndex((t=>t.allocatedCoordinatesCount>=i&&t.allocatedCoordinatesCount<=s));if(r>=0){const t=this.wW[r];return this.wW.splice(r,1),this._W.push(t),t}}FW(){if(this.wW.length>5){const t=Tt.performance.now();for(let e=0;e<this.wW.length-5;e+=1){const i=this.wW[e];(void 0===i.droppedTimestamp||t-i.droppedTimestamp>=1e4)&&(this.bW(i),this.wW.splice(e,1),e-=1)}}}}class ny extends ty{BW(t,e){if(!e||"object"!=typeof e)return 0;const i=this.At.x.getInnerStart(),s=this.At.x.getInnerEnd(),r=Math.min(i,s),n=Math.max(i,s),o=this.At.y.getInnerStart(),a=this.At.y.getInnerEnd(),h=Math.min(o,a),l=Math.max(o,a);if("maxDataPointCount"in e)return this.LW(t,e.maxDataPointCount,r,n,h,l);if("minDataPointCount"in e)return this.RW(t,e.minDataPointCount,r,n,h,l);if("progressiveDataCleaningThreshold"in e)return this.EW(t,e.progressiveDataCleaningThreshold,r,n,h,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(e)}`)}LW(t,e,i,s,r,n){if(void 0===e||e<=0)return 0;const o=t.reduce(((t,e)=>t+e.existingDataPointsCount),0);if(o<=e)return 0;let a=0,h=o;for(let i=0;i<t.length;i+=1){const s=t[i];h>e&&(a+=1,h-=s.existingDataPointsCount)}return a}EW(t,e,i,s,r,n){if(void 0===e||!this.rW)return 0;let o=0;for(let a=0;a<t.length;a+=1){const h=t[a],l=this.nW?"x"===this.rW?h.boundaries.min.x>s:h.boundaries.min.y>n:"x"===this.rW?h.boundaries.max.x<i:h.boundaries.max.y<r;if(!((this.nW?"x"===this.rW?h.boundaries.min.x>e:h.boundaries.min.y>e:"x"===this.rW?h.boundaries.max.x<e:h.boundaries.max.y<e)&&l&&h.existingCoordinatesCount>2))break;o+=1}return o}RW(t,e,i,s,r,n){if(void 0===e||0===e)return 0;let o=0,a=0;for(let h=t.length-1;h>=0;h-=1){const l=t[h];if(a>e)if(this.rW){if(this.nW?"x"===this.rW?l.boundaries.min.x>s:l.boundaries.min.y>n:"x"===this.rW?l.boundaries.max.x<i:l.boundaries.max.y<r){o=1+h;break}}else l.boundaries.max.x<i||l.boundaries.min.x>s||l.boundaries.max.y<r||l.boundaries.min.y>n?o+=1:o=0;a+=l.existingDataPointsCount}return o}zW(t,e){const i=t.reduce(((t,e)=>ei(t,e.boundaries)),Ne);if(e&&"progressiveDataCleaningThreshold"in e&&e.progressiveDataCleaningThreshold){const t=e.progressiveDataCleaningThreshold;"x"!==this.rW||this.nW?"x"===this.rW&&this.nW?i.max.x=Math.min(i.max.x,t):"y"!==this.rW||this.nW?"y"===this.rW&&this.nW&&(i.max.y=Math.min(i.max.y,t)):i.min.y=Math.max(i.min.y,t):i.min.x=Math.max(i.min.x,t)}return i}}class oy extends Sn{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.kE=new Fm,this.LM=[],this.VW=new sy(this.At,this),this.OW=new iy(this.At,this,(()=>this.cs.Ms())),this.NW=new ry(this.LM,(t=>{t.coordsBuffer&&this.KR.zV(t.coordsBuffer),t.GG&&this.KR.zV(t.GG)}),!0),this.GW=new ny(this.At,this),this.WW=0,this.UW=0,this.YW=!1,this.RN=fg({lineStyleSolid:()=>ns(this.yu)&&this.yu,lineStyleDashed:()=>ho(this.yu)&&this.yu,strokeFillSolid:()=>{const t=this.yu.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.yu.getFillStyle();return st(t)&&t},strokeFillRadialGradient:()=>{const t=this.yu.getFillStyle();return tt(t)&&t},strokeFillPaletted:()=>{const t=this.yu.getFillStyle();return K(t)&&t}}),this.CN=e,this.Kn=n,this.NG={type:"none"},this.KR=t.kN(),this.wN=t,this.VG=this.KR.MO;const o=this.At._i(),a=!0===(null==n?void 0:n.individualLookupValuesEnabled);let h,l,u,c=0;o||(h=c,c+=2),o&&(l=c,c+=4),a&&(u=c,c+=1);const d=((t,e)=>e?(e,i)=>((t,e)=>{if(!e){const e=t.length,i=new Float32Array(3*e);for(let s=0,r=0;s<e;s+=1){const e=t[s];i[r+0]=e.x,i[r+1]=e.y,i[r+2]=void 0!==e.value?e.value:0,r+=3}return i}const i=t.length,s=new Float32Array(5*i);let r=0;for(let e=0;e<i;e+=1){const i=t[e],n=Math.fround(i.x),o=Math.fround(i.y);s[r+0]=n,s[r+1]=o,s[r+2]=i.x-n,s[r+3]=i.y-o,s[r+4]=void 0!==i.value?i.value:0,r+=5}return s})(e,t):(e,i)=>Jt(e,t,Float32Array))(o,a);this.HW={individualLookupValuesEnabled:a,attributesPerVertex:c,attributeOffsetCoordinateLowPrecision:h,attributeOffsetCoordinateHighPrecision:l,attributeOffsetLookUpValue:u,prepareRenderData:(t,e)=>d(t,this.yu.getFillStyle())}}$W(t,e,i){const s=new Float32Array(2*e);let r=0,n=i||t[0];for(let i=0;i<e;i+=1){const e=t[i];this.WW+=Math.abs(n.x-e.x),this.UW+=Math.abs(n.y-e.y),s[r]=this.WW,s[r+1]=this.UW,r+=2,n=e}return s}zs(){const t=this.rl,e=this.yu,i=this.ga(),s=this.sl,r=s.length,n=r>0,o=this.Wo.C(),a=this.Wo.u,h=this.RN.lineStyleSolid(i),l=this.RN.lineStyleDashed(i),u=h||l,c=u&&u.getThickness(),d=this.RN.strokeFillSolid(i),f=this.RN.strokeFillLinearGradient(i),g=this.RN.strokeFillRadialGradient(i),m=this.RN.strokeFillPaletted(i),y=d||f||g||m,p=this.HW.individualLookupValuesEnabled;if(l&&this.At instanceof zi)return Tt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;n&&(this._u=ae(this._u,s,{canReturnB:!0}),this.il+=r);let x=this.wu.u;const A=this.GW.BW(this.LM,this.wu.C());if(A>0){let t=0;for(let e=0;e<A;e+=1){const e=this.LM[0];t+=e.existingDataPointsCount,e.existingDataPointsCount=0,e.existingCoordinatesCount=0,e.jointPointsCount=0,e.boundaries=Ne,e.lastDataPoint=void 0,this.NW.IW(e)}this._u=this._u.slice(t),this.il=this._u.length,x=!0}let S=s,v=!1;(this.OW.fW(this._u)||t)&&(v=!0),l&&!this.YW?(v=!0,this.YW=!0,this.NW.DW()):!l&&this.YW&&(this.LM.forEach((t=>{t.GG&&(this.KR.zV(t.GG),t.GG=void 0)})),this.YW=!1),v&&(this.OW.pW(),this.LM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=Ne,t.lastDataPoint=void 0})),this.NW.PW(),S=this._u,this.WW=0,this.UW=0);const b=this.OW.mW(S),M=b.length;if(M>0){let t=this.OW.vW(this._u)||(this.Ko("ApplicationType",(t=>"InternalUI"===t.type))?this.il:1e5);M/t>10&&(t=M/10),this.NW.kW(b,t,((t,e,i,s)=>{const r=this.VW.calculateUserDataPointsBoundaries(e),n=this.OW.SW(r,i,this._u)-s;return this.XW=e[i-1],{allocatedCoordinatesCount:t,existingDataPointsCount:n,existingCoordinatesCount:i,jointPointsCount:s,boundaries:r,coordsBuffer:this.KR.sO(t*this.HW.attributesPerVertex,this.HW.prepareRenderData(e,i)),lastDataPoint:e[i-1],GG:this.YW?this.KR.sO(2*t,this.$W(e,i,this.XW)):void 0}}),((t,e,i,s)=>{const r=ei(t.boundaries,this.VW.calculateUserDataPointsBoundaries(e)),n=this.OW.SW(r,t.existingCoordinatesCount+i,this._u)-(t.jointPointsCount+s);this.KR.eO(t.coordsBuffer,t.existingCoordinatesCount*this.HW.attributesPerVertex,this.HW.prepareRenderData(e,i)),this.YW&&t.GG&&this.KR.eO(t.GG,2*t.existingCoordinatesCount,this.$W(e,i,this.XW)),this.XW=e[i-1],t.jointPointsCount+=s,t.lastDataPoint=e[i-1],t.existingDataPointsCount=n,t.existingCoordinatesCount+=i,t.boundaries=r}))}if(x&&(this.tl=this.GW.zW(this.LM,this.wu.C())),this.kE.EV(this.At),g?this.JN=vm(this.Ho||this.tl,this.At,g.getPosition(),g.getExtent(),g.getShape(),this.KR.dV()):f?this.KN=bm(this.Ho||this.tl,this.At,f.getAngle(!0),this.KR.dV()):(this.JN=void 0,this.KN=void 0),i||a){if(m&&"value"===m.getLookUpProperty()&&!p){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Tt.alert(t),new Error(t)}if(y&&u&&!1!==c){const t=-1===c?"primitive":"triangulated",e=f?["gradient",f]:g?["gradient",g]:m?["lookup",m.getLookUpProperty(),m.lut]:"uniform";this.NG="primitive"===t?{type:t,shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}),l&&Yg.StippleTexture),mousePickingShader:o?this.KR.Cz(Yg["2D"],Yg.MousePicking({useVertexId:!0}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}),l&&Yg.StippleTexture):void 0,lineStyleSolid:h,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:g,fillStylePaletted:m}:"triangulated"===t?{type:t,shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0}),this.VG?Yg.AliasedEdge:void 0,l&&Yg.StippleTextureInstanced),mousePickingShader:o?this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0}),l&&Yg.StippleTextureInstanced):void 0,geometry:$m(this.KR,c),thickness:c,lineStyleSolid:h,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:g,fillStylePaletted:m}:{type:"none"}}else this.NG={type:"none"}}return this.WG=l?this.KR.QO(l.getPattern()):void 0,this.xu(e),this.rl=!1,this.sl=[],this.Wo.u=!1,this.wu.u=!1,this}qL(t,e){const i=this.KR.gl,s=this.NG;if(!s||"none"===s.type)return{};const r=1===t?s.mousePickingShader:s.shader;if(!r)return{};const{lineStyleDashed:n,fillStyleSolid:o,fillStyleLinearGradient:a,fillStyleRadialGradient:h,fillStylePaletted:l}=s;return this.KR.cE(r).TV(r,((r,u,c,d)=>{let f=!1;if(this.KR.DV(r("uIsHighlighted"),1===t||2===t?0:this.$o).PR(r("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(r("uRenderEffectMask"),2===t?1:0),this.At instanceof Vi||this.At instanceof zc?this.KR.IV(r("uScale"),this.kE.BV()).IV(r("uDisp"),this.kE.LV()).IV(d("uScaleStart_highpart"),this.kE.hN()).IV(d("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(d("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(d("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(d("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(d("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(r("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(r("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),1===t);else if(o)this.KR.PR(r("uColor"),o.getColor());else if(h){if(!this.JN)return!1;this.KR.EO(c,this.JN,h)}else if(a){if(!this.KN)return!1;this.KR.zO(c,this.KN,a)}else if(l){const t=gg(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.KR.tN(c,l.lut,t)}const g=Pe(e);return this.VW.renderVisibleOnly(this.LM,(e=>{const{coordsBuffer:o}=e;if(!o)return;if(1===t){const[t,i]=g.Ut(e.existingDataPointsCount);this.KR.qV(r("uFirstId"),t),"triangulated"===s.type?this.KR.XO(c,i):this.KR.HO(c,i)}i.bindBuffer(i.ARRAY_BUFFER,o);const a="triangulated"===s.type?Zm.PG:Qm.PG;if(this.At._i()||void 0===this.HW.attributeOffsetCoordinateLowPrecision?this.At._i()&&void 0!==this.HW.attributeOffsetCoordinateHighPrecision&&a(!0,this.KR,o,c,this.HW.attributesPerVertex,this.HW.attributeOffsetCoordinateHighPrecision):a(!1,this.KR,o,c,this.HW.attributesPerVertex,this.HW.attributeOffsetCoordinateLowPrecision),n){if(!e.GG||!this.WG)return;"triangulated"===s.type?Zm.DG(this.KR,c,e.GG,u("aLengthSoFarA"),u("aLengthSoFarB"),2,0):Qm.DG(this.KR,c,e.GG,u("aLengthSoFar"),2,0),this.KR.IV(r("uStippleCount"),[this.cs.oi().x/this.WG.qO,this.cs.oi().y/this.WG.qO]).DV(d("uStippleTextureWidthLimiter"),this.WG.KO/this.WG.qO).DV(r("uStippleScale"),n.getPatternScale()).PV(r("uStippleTexture"),this.WG.JO,1)}if(l&&"value"===l.lookUpProperty&&void 0!==this.HW.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=u("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.KR.lO(t,1),i.enableVertexAttribArray(t);const e=u("aLookupValueB");i.vertexAttribPointer(e,1,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.HW.attributeOffsetLookUpValue+this.HW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.KR.lO(e,1),i.enableVertexAttribArray(e)}else{const t=u("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;Zm.qL(this.wN,s.geometry,c,this.VG&&1!==t,1===t,i,e.existingCoordinatesCount-1)}else Qm.EG(this.wN,e.existingCoordinatesCount);f=!0}),void 0===this.Yi),i.bindBuffer(i.ARRAY_BUFFER,null),f})),{idCount:this.il}}PN(t,e,i,s,r){return{}}Al(t,e){return Array.isArray(t)||(t=[t]),this.sl=ae(this.sl,t,{canReturnB:!0}),this.tl=ei(this.tl,e||e||this.VW.calculateUserDataPointsBoundaries(t)),this}Ot(){return super.Ot(),this.WW=0,this.UW=0,this.XW=void 0,this}dispose(){return super.dispose(),this.NW.DW(),this.OW.xW(),this.NG={type:"none"},this.WG=void 0,this}iE(){return this}Kb(t){this.yl()>0&&this.zs();const e=this.al(),i=Hr(e,t,this.Jo(),this.zl,this.Vl,this.At,this.engine.At,this.tl,this.VW.rW,this.VW.nW);return void 0!==i?e[i]:void 0}x_(t){this.yl()>0&&this.zs();const e=this.al(),i=e.length;if(0===i)return;const s=this.zl?1:0,r=i-(this.Vl?2:1),n=this.Jo();if(n===Gr.Nearest){let s,r,n=Ve;for(let o=0;o<i;o+=1){const i=ct(e[o],this.At,this.cs.At);if(void 0!==r){const e=Xe(r,i,t),o=(e.x-t.x)**2+(e.y-t.y)**2;o<n&&(n=o,s=e)}r=i}return void 0!==s?ct(s,this.cs.At,this.At):void 0}if("x"===this.VW.rW&&n===Gr.NearestX||"y"===this.VW.rW&&n===Gr.NearestY){const i=$r(e,ct(t,this.cs.At,this.At),this.VW.rW,this.VW.nW,s,r);return i?Qe(e[i.a],e[i.b],i.lerpAmount):void 0}return this.Kb(t)}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return Ce(this.yu)}Fl(){return Ce(this.yu)}}class ay extends Mm{constructor(t,e,i,s){super(t),this.IG=i,this.jW=e,this.ZW=Jt(e,!1),this.QW=e.length,this.WR=t.CV(this.ZW);const r=Je(this.jW);this.Z=u(r.max.x-r.min.x,r.max.y-r.min.y),this.JW=s}KW(t){return t>1}qy(t,e,i,s,r){return"object"==typeof s?e?this.KR.dO(t.attribute("aOffsetScale"),e,1).IV(t.uniform("uSizePixels"),[s.width,s.height]):this.KR.DV(t.uniform("uOffsetScale"),s.scale).IV(t.uniform("uSizePixels"),[s.width,s.height]):r?e?this.KR.dO(t.attribute("aOffsetPixels"),e,1):this.KR.DV(t.uniform("uOffsetPixels"),s):this.KR.DV(t.uniform("uPointSize"),s),r?this.KR.FV(this.WR,0,{location:t.attribute("aInstanceGeo"),size:2}).pO(this.IG,0,this.QW,i):this.KR.qy(this.KR.gl.POINTS,i),this}jz(){this.KR.zV(this.WR)}}const hy=(t,e=0)=>{const i=[u(-.5,-.5),u(.5,-.5),u(.5,.5),u(-.5,.5)];return new ay(t,i,t.gl.TRIANGLE_FAN,e)},ly=(t,e=0)=>{const i=.05,s=[u(-.5,-.05),u(.5,-.05),u(.5,i),u(.5,i),u(-.5,i),u(-.5,-.05),u(-.05,-.5),u(i,-.5),u(i,.5),u(i,.5),u(-.05,.5),u(-.05,-.5)];return new ay(t,s,t.gl.TRIANGLES,e)},uy=(t,i,s)=>{if(co(t))return uy(e.PointShape.Square,i,s);let r=i.YV.Oz.get(t);if(t===e.PointShape.Circle||t===e.PointShape.HollowCircle){const n=s<=3?4:s<=5?8:s<=10?16:24;return t===e.PointShape.Circle?(r=i.YV.Nz.get(n)||((t,e,i=0)=>{const s=function(t=25){return Vm(u(0,0),0,360,.5,.5,t)[0]}(e);return new ay(t,s,t.gl.TRIANGLE_FAN,i)})(i,n),i.YV.Nz.set(n,r),r):(r=i.YV.Gz.get(n)||((t,e,i=0)=>{const s=[],r=2*Math.PI/e;for(let t=0;t<=e;t+=1){const e=t*r,i=Math.cos(e),n=Math.sin(e);s.push({x:.5*i,y:.5*n}),s.push({x:.3*i,y:.3*n})}return new ay(t,s,t.gl.TRIANGLE_STRIP,i)})(i,n),i.YV.Gz.set(n,r),r)}if(!r){switch(t){case e.PointShape.Triangle:r=((t,e=0)=>{const i=function(){const t=[],e=2/1.73205080757;return t.push(u(-e/2,.3333333333333333)),t.push(u(0,-.6666666666666666)),t.push(u(e/2,.3333333333333333)),t}();return new ay(t,i,t.gl.TRIANGLES,e)})(i);break;case e.PointShape.Square:r=hy(i);break;case e.PointShape.Plus:r=ly(i);break;case e.PointShape.Cross:r=ly(i,45);break;case e.PointShape.Diamond:r=hy(i,45);break;case e.PointShape.Arrow:r=((t,e=0)=>{const i=.05,s=[u(-.05,-.5),u(i,-.5),u(i,.45),u(i,.45),u(-.05,.45),u(-.05,-.5),u(-.5,0),u(-.4,0),u(0,.4),u(0,.4),u(0,.5),u(-.5,0),u(.5,0),u(.4,0),u(0,.4),u(0,.4),u(0,.5),u(.5,0)];return new ay(t,s,t.gl.TRIANGLES,e)})(i);break;case e.PointShape.Star:r=((t,e=0)=>new ay(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,e))(i);break;case e.PointShape.Minus:r=((t,e=0)=>{const i=.05,s=[u(-.5,-.05),u(.5,-.05),u(.5,i),u(.5,i),u(-.5,i),u(-.5,-.05)];return new ay(t,s,t.gl.TRIANGLES,e)})(i);break;default:return Te(0,"LightningChart JS unidentified point shape")}i.YV.Oz.set(t,r)}return r};class cy extends un{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kE=new Fm,this.DN=m(c(ze,ze),c(Ve,Ve)),this.RN=fg({pointStyleSolid:()=>Y(this.Te)&&this.Te,pointStyleRadialGradient:()=>tt(this.Te)&&this.Te,pointStyleLinearGradient:()=>st(this.Te)&&this.Te,pointStylePaletted:()=>K(this.Te)&&this.Te,pointStyleIndividual:()=>H(this.Te)&&this.Te}),this.wN=t,this.CN=e,this.KR=t.kN()}zs(){var t;const e=this.Wo.C(),i=this.Wo.u,s=this.sl,r=s.length,n=r>0,o=this.Qa.C(),a=this.Te,h=this.size.C(),l=this.Qa.u||this._a.u,u=this.At.Ni(),c=this.size.u||this.Qa.u,d=this.rl||s&&s.length>0,f=u||c,g=this.ua(),m=this.RN.pointStyleSolid(g),y=this.RN.pointStyleRadialGradient(g),p=this.RN.pointStyleLinearGradient(g),x=this.RN.pointStylePaletted(g),A=this.RN.pointStyleIndividual(g),S=m||y||p||x||A;if(n&&(this.Za=ae(this.Za,s,{canReturnB:!0}),this.il+=r),n||this.rl){this.tl=this.hl?ei(this.tl,this.hl):ei(this.tl,Je(this.Za));const t=Jt(this.Za,this.At._i());this.qW=this.il,this.tU=this.KR.CV(t,!1,this.tU)}this.kE.EV(this.At),a!==V?f&&(this.iU&&(this.iU=void 0),h>1||this.Ja.C()?h<=1&&!this.Ja.C()?this.IG=this.KR.gl.POINTS:(this.iU=uy(o,this.KR,this.Ja.C()?25:h),this.IG=this.iU.IG):this.IG=this.KR.gl.POINTS):this.iU&&(this.iU=void 0);const v=(null===(t=this.iU)||void 0===t?void 0:t.JW)||0,b=this._a.C()+v;if(c||g||i||l){const t=this.Ja.C()?"attribute":"uniform",i=h<=1&&Yg.PointSize(t),s=Yg.VertexLocation({offset:h>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.Ka.C()||b%360!=0)&&{dataType:this.Ka.C()?"attribute":"uniform"}}:void 0,axisWorldTranslation:dg(this.At),normalSource:void 0});this.IE=S?this.KR.Cz(Yg["2D"],i,s,m?Yg.Color({dataType:"uniform"}):A?Yg.Color({dataType:"attribute"}):x?Yg.Color({dataType:["lookup",x.getLookUpProperty(),x.lut]}):y?Yg.Color({dataType:["gradient",y]}):p?Yg.Color({dataType:["gradient",p]}):void 0):void 0,this.tG=e&&S?this.KR.Cz(Yg["2D"],i,s,Yg.MousePicking()):void 0}if(d||g){const t=this.Za.length;if(H(a)&&this.qW&&this.qW>0){const e=a.getFallbackColor(),i=new Float32Array(4*t);for(let s=0;s<t;s+=1){const t=this.Za[s];t.color?(i[4*s+0]=t.color.r,i[4*s+1]=t.color.g,i[4*s+2]=t.color.b,i[4*s+3]=t.color.a):(i[4*s+0]=e.r,i[4*s+1]=e.g,i[4*s+2]=e.b,i[4*s+3]=e.a)}this.sU=this.KR.CV(i,!0,this.sU)}else this.sU&&this.KR.zV(this.sU),this.sU=void 0;if(this.Ja.C()&&this.qW&&this.qW>0&&h>1){const e=new Float32Array(t);for(let i=0;i<t;i+=1){const t=this.Za[i];t.size?e[i]=t.size:e[i]=h}this.eU=this.KR.CV(e,!0,this.eU)}else this.eU&&(this.KR.zV(this.eU),this.eU=void 0);if(this.Ka.C()&&this.qW&&this.qW>0&&h>1){const e=new Float32Array(2*t),i=xi(b),s=Math.sin(i),r=Math.cos(i);for(let i=0;i<t;i+=1){const t=this.Za[i];if(t.rotation){const s=xi(t.rotation+v);e[2*i+0]=Math.sin(s),e[2*i+1]=Math.cos(s)}else e[2*i+0]=s,e[2*i+1]=r}this.hU=this.KR.CV(e,!0,this.hU)}else this.hU&&(this.KR.zV(this.hU),this.hU=void 0);if(this.qa.C()&&this.qW&&this.qW>0){const e=new Float32Array(t);for(let i=0;i<t;i+=1){const t=this.Za[i];"value"in t&&void 0!==t.value&&null!==t.value?e[i]=t.value:e[i]=-34028234663852886e22}this.rU=this.KR.CV(e,!0,this.rU)}else this.rU&&(this.KR.zV(this.rU),this.rU=void 0);this.Aa(this.Te)}if(tt(a)?this.WN=vm(en(this.Ho||this.tl,{x:this.Tl(),y:this.Fl()},this.At),this.At,a.getPosition(),a.getExtent(),a.getShape(),this.KR.dV()):st(a)?this.UN=bm(en(this.Ho||this.tl,{x:this.Tl(),y:this.Fl()},this.At),this.At,a.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0),d&&(this.tl&&d&&(this.DN=en(this.tl,{x:h,y:h},this.At)),this.sl=[],this.el=0,this.hl=Ne),void 0===this.nl&&x&&"value"===x.lookUpProperty&&x.lut.percentageValues){let t=ze,e=Ve;for(let i=0;i<this.Za.length;i+=1){const s=this.Za[i];void 0!==s.value&&s.value<e&&(e=s.value),void 0!==s.value&&s.value>t&&(t=s.value)}this.nl={min:e,max:t}}return this.ca=a,this.Qa.u=!1,this.size.u=!1,this._a.u=!1,this.Wo.u=!1,this.rl=!1,this}qL(t,e){const i=1===t?this.tG:this.IE,s=this.tU,r=this.qW,n=this.il;return i&&s&&r&&(this.KR.cE(i),this.KR.TV(i,((i,o,a,h)=>{var l;if(this.At instanceof Vi||this.At instanceof zc?this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(h("uScaleStart_highpart"),this.kE.hN()).IV(h("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(h("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(h("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(h("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(h("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(i("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(i("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),this.KR.NO(a,s,this.At._i(),this.iU?1:void 0).DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).DV(h("uDevicePixelRatio"),this.KR.dV()),this.iU){const t=o("aInstanceGeo");this.KR.oO(t,this.iU.WR).lO(t,0)}if(1===t)this.KR.qV(i("uFirstId"),e).XO(a,n);else if(Y(this.Te))this.KR.PR(i("uColor"),this.Te.getColor());else if(H(this.Te)&&this.sU){const t=o("aColor");this.KR.cO(t,this.sU),this.IG!==this.KR.gl.POINTS&&this.KR.lO(t,1)}else if(K(this.Te)){if("value"===this.Te.getLookUpProperty()&&this.rU){const t=o("aLookupValue");this.KR.dO(t,this.rU),this.IG!==this.KR.gl.POINTS&&this.KR.lO(t,1)}const t=gg(this.Te,this,this.nl);if(!t&&this.Te.lut.percentageValues)return!1;this.KR.tN(a,this.Te.lut,t)}else if(tt(this.Te)){if(!this.WN)return!1;this.KR.EO(a,this.WN,this.Te)}else if(st(this.Te)){if(!this.UN)return!1;this.KR.zO(a,this.UN,this.Te)}if(this.eU&&this.IG!==this.KR.gl.POINTS){const t=o("aOffsetPixels");this.KR.dO(t,this.eU),this.IG!==this.KR.gl.POINTS&&this.KR.lO(t,1)}else if(this.IG!==this.KR.gl.POINTS){const t=i("uOffsetPixels");this.KR.DV(t,this.size.C())}const u=((null===(l=this.iU)||void 0===l?void 0:l.JW)||0)+this._a.C();if(this.hU&&this.IG!==this.KR.gl.POINTS){const t=o("aRot");this.KR.oO(t,this.hU),this.IG!==this.KR.gl.POINTS&&this.KR.lO(t,1)}else if(this.IG!==this.KR.gl.POINTS&&u%360!=0){const t=xi(u),e=Math.sin(t),s=Math.cos(t);this.KR.IV(i("uRot"),[e,s])}if(this.IG===this.KR.gl.POINTS)this.KR.DV(i("uPointSize"),this.size.C());else{const t={x:2/this.cs.oi().x,y:2/this.cs.oi().y};this.KR.IV(i("uRatioPxClip"),[t.x,t.y])}let c=!1;return this.IG===this.KR.gl.POINTS?(this.KR.qy(this.IG,r),c=!0):this.iU&&(this.KR.pO(this.IG,0,this.iU.QW,r),c=!0),c}))),{idCount:n}}PN(t,e,i,s,r){return{}}qc(t){this.yl()>0&&this.zs();const e=this.al(),i=Hr(e,t,this.Jo(),!1,!1,this.At,this.cs.At,this.tl,void 0,void 0);return void 0!==i?e[i]:void 0}Be(t){return super.Be(t)}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return this.Ja.C()?25:this.size.C()}Fl(){return this.Ja.C()?25:this.size.C()}iE(){return this.tU&&(this.KR.zV(this.tU),this.tU=void 0),this.iU&&(this.iU=void 0),this.sU&&(this.KR.zV(this.sU),this.sU=void 0),this.hU&&(this.KR.zV(this.hU),this.hU=void 0),this.rU&&(this.KR.zV(this.rU),this.rU=void 0),this}}class dy extends an{constructor(t,e,i,s,r){super(t,e,i,s,r),this.NG={fill:void 0,border:void 0},this.kE=new Fm,this.tl=Ne,this.nU=!1,this.oU=!1,this.aU=!1,this.lU=!1,this.uU=!1,this.kd=[],this.RN=fg({polygonStyleSolid:()=>Y(this.Te)&&this.Te,polygonStyleImage:()=>ro(this.Te)&&this.Te,polygonStyleRadialGradient:()=>tt(this.Te)&&this.Te,polygonStyleLinearGradient:()=>st(this.Te)&&this.Te,polygonStylePaletted:()=>K(this.Te)&&this.Te,polygonStyleIndividual:()=>H(this.Te)&&this.Te,lineStyleSolid:()=>ns(this.Fe)&&this.Fe,lineStyleFilled:()=>{const t=this.Fe&&this.Fe.getFillStyle();return Y(t)&&t}}),this.wN=t,this.CN=e,this.KR=t.kN(),this.VG=this.KR.MO}Xr(){const t={vs:e=>this.ZG(t,e),ds:e=>this.QG(t,e),Cl:e=>this.cU(t,e),ob:e=>this.dU(t,e),PR:e=>this.KG(t,e),Za:[],M:void 0,fU:void 0,$o:0,AU:!0,gU:this.kd.length};return this.kd.push(t),t}Ot(){var t;return this.kd.length=0,this.nU=!0,this.Is&&this.Vn&&(null===(t=this.cs.zn)||void 0===t?void 0:t.entity)===this&&this.Vn(this,void 0,this.cs.zn.collectionMember),this}Cm(){return this.kd}Fd(t){var e;const i=this.kd.indexOf(t);i>=0&&(this.kd.splice(i,1),this.uU=!0,this.Is&&this.Vn&&(null===(e=this.cs.zn)||void 0===e?void 0:e.entity)===this&&this.cs.zn.collectionMember===t&&this.Vn(this,void 0,this.cs.zn.collectionMember))}ZG(t,e){var i;return t.AU=e,this.uU=!0,this.Is&&this.Vn&&(null===(i=this.cs.zn)||void 0===i?void 0:i.entity)===this&&this.cs.zn.collectionMember===t&&!t.AU&&this.Vn(this,void 0,this.cs.zn.collectionMember),t}QG(t,e){return t.$o=e,this.lU=!0,t}cU(t,e){return t.Za=e,this.nU=!0,t}dU(t,e){return t.M=e,this.oU=!0,t}KG(t,e){return t.fU=null==e?void 0:e.toUint32(),this.aU=!0,t}zs(){const t=this.Wo.C(),e=this.Wo.u,i=this.ua(),s=this.lU,r=this.nU,n=this.oU,o=this.aU,h=this.uU,l=this.Fe,u=this.ga(),c=this.kd.filter((t=>t.AU&&t.Za.length>0));if(this.kE.EV(this.At),(r||h)&&(this.tl=ei(...c.map((t=>Je(t.Za))))),r||h){const t=c.map((t=>[...t.Za,t.Za[0],{x:Number.NaN,y:Number.NaN}])).flat(),e=Jt(t,!1,Float64Array),i=this.At._i()?Jt(t,!0):e;this.OG=this.KR.CV(i,!1,this.OG);let s=[];c.reduce(((t,i)=>{const r=t,n=2*(i.Za.length+1),o=new Float64Array(e.buffer,r,n),h=a.default(o,void 0,2),l=t/(2*Float64Array.BYTES_PER_ELEMENT);for(let t=0;t<h.length;t+=1)h[t]+=l;return s=ae(s,h,{canReturnB:!0}),r+(n+2)*Float64Array.BYTES_PER_ELEMENT}),0);const r=new Uint32Array(s);this.pU=this.KR.rO(r,this.pU),this.yU=r.length,this.mU=e.length/2-1}const d=this.RN.polygonStyleSolid(i),f=this.RN.polygonStylePaletted(i),g=this.RN.polygonStyleIndividual(i),m=this.RN.polygonStyleRadialGradient(i),y=this.RN.polygonStyleLinearGradient(i),p=this.RN.polygonStyleImage(i),x=d||f||y||m||p||g,A=this.RN.lineStyleSolid(u),S=this.RN.lineStyleFilled(u),v=S,b=A&&Math.max(A.getThickness(),0);if((i||u||e)&&(this.NG.fill=x?{shader:this.KR.Cz(Yg["2D"],d&&Yg.Color({dataType:"uniform"}),y&&Yg.Color({dataType:["gradient",y]}),m&&Yg.Color({dataType:["gradient",m]}),f&&Yg.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),g&&Yg.Color({dataType:"attribute"}),p&&Yg.Color({dataType:["image",p]}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}),Yg.AttributeHighlight),mousePicking:t?{shader:this.KR.Cz(Yg["2D"],Yg.MousePicking({useAttribute:!0}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}),Yg.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:y,fillStyleRadialGradient:m,fillStylePaletted:f,fillStyleImage:p,fillStyleIndividual:g}:void 0,this.NG.border=A&&v&&"number"==typeof b&&0!==b?{shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:"uniform"}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0}),this.VG?Yg.AliasedEdge:void 0,Yg.AttributeHighlight),geometry:$m(this.KR,b),mousePicking:t?{shader:this.KR.Cz(Yg["2D"],Yg.MousePicking({useAttribute:!0}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0}),Yg.AttributeHighlight)}:void 0,fillStyleSolid:S,thickness:b}:void 0),s||r){const t=c.reduce(((t,e)=>t+e.Za.length+2),0),e=new Float32Array(t);let i=0;c.forEach((t=>{const s=t.Za.length+2;for(let r=i;r<i+s;r+=1)e[r]=t.$o;i+=s})),this.vU=this.KR.CV(e,!0,this.vU)}if(t){if(r){const t=c.reduce(((t,e)=>t+e.Za.length+2),0),e=new Float32Array(t);let i=0;c.forEach((t=>{const s=t.Za.length+2;for(let r=i;r<i+s;r+=1)e[r]=t.gU;i+=s})),this.SU=this.KR.CV(e,!1,this.SU)}}else this.SU&&(this.KR.zV(this.SU),this.SU=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=c.reduce(((t,e)=>t+e.Za.length+2),0),e=new Float32Array(t);let i=0;const s={min:Ve,max:ze};c.forEach((t=>{const r=void 0!==t.M?t.M:-34028234663852886e22,n=t.Za.length+2;for(let t=i;t<i+n;t+=1)e[t]=r;i+=n,void 0!==t.M&&(s.min=Math.min(s.min,r),s.max=Math.max(s.max,r))})),this.xU=s,this.bU=this.KR.CV(e,!1,this.bU)}if(o||r&&g){const t=c.reduce(((t,e)=>t+e.Za.length+2),0),e=new Uint32Array(t);let i=0;const s=g?g.getFallbackColor().toUint32():E.toUint32();c.forEach((t=>{const r=void 0!==t.fU?t.fU:s,n=t.Za.length+2;for(let t=i;t<i+n;t+=1)e[t]=r;i+=n})),this.MU=this.KR.CV(e,!1,this.MU,Uint32Array)}return m?this.WN=vm(this.Ho||this.tl,this.At,m.getPosition(),m.getExtent(),m.getShape(),this.KR.dV()):y?this.UN=bm(this.Ho||this.tl,this.At,y.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0),this._U=this.KR.iN(this,this._U,p,void 0,r||h||this.At.Ni(),((t,e,i)=>this.wU(t,e,i,c))),this.lU=!1,this.uU=!1,this.nU=!1,this.oU=!1,this.aU=!1,this.Wo.u=!1,this.Aa(this.Te),this.ma(l),this}qL(t,e){var i,s;const{fill:r,border:n}=this.NG,o=this.OG,a=this.vU,h=this.SU;if(!o||!a)return{};if(r){const{fillStyleSolid:s,fillStyleLinearGradient:n,fillStyleRadialGradient:l,fillStylePaletted:u,fillStyleImage:c,fillStyleIndividual:d}=r,f=this.pU,g=this.yU,m=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;m&&o&&f&&void 0!==g&&this.KR.cE(m).TV(m,((i,r,m,y)=>{if(this.At instanceof Vi||this.At instanceof zc?this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(y("uScaleStart_highpart"),this.kE.hN()).IV(y("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(y("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(y("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(y("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(y("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(i("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(i("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),this.KR.NO(m,o,this.At._i(),void 0).fO(f).dO(r("aIsHighlighted"),a).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),1===t){if(this.KR.qV(i("uFirstId"),e),!h)return!1;this.KR.dO(r("aPickingIdOffset"),h)}else if(s)this.KR.PR(i("uColor"),s.getColor());else if(l){if(!this.WN)return!1;this.KR.EO(m,this.WN,l)}else if(n){if(!this.UN)return!1;this.KR.zO(m,this.UN,n)}else if(u){const t=gg(u,this,this.xU);if(!t&&u.lut.percentageValues)return!1;if(this.KR.tN(m,u.lut,t),"value"===u.getLookUpProperty()){if(!this.bU)return!1;this.KR.dO(r("aLookupValue"),this.bU)}}else if(c){if(!this._U)return!1;this.KR.PR(y("uColor"),c.getSurroundingColor()).PV(i("uColorTexture"),this._U.texture.aV()||this._U.sourceMissingTexture,0).FV(this._U.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).tO(c.fitMode)}else if(d){if(!this.MU)return!1;const t=r("aColor");this.KR.gl.bindBuffer(this.KR.gl.ARRAY_BUFFER,this.MU),this.KR.gl.vertexAttribPointer(t,4,this.KR.gl.UNSIGNED_BYTE,!0,0,0),this.KR.gl.enableVertexAttribArray(t)}return this.KR.gO(g,void 0,void 0,this.KR.gl.UNSIGNED_INT),!0}))}if(n){const{geometry:i,fillStyleSolid:r,thickness:l}=n,u=this.mU,c=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;c&&o&&u&&this.KR.cE(c).TV(c,((s,n,c,d)=>{if(this.At instanceof Vi||this.At instanceof zc?this.KR.IV(s("uScale"),this.kE.BV()).IV(s("uDisp"),this.kE.LV()).IV(d("uScaleStart_highpart"),this.kE.hN()).IV(d("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(d("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(d("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(d("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(d("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(s("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(s("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),this.KR.FV(a,1,{location:n("aIsHighlighted"),size:1}).PR(s("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.KR.qV(s("uFirstId"),e),!h)return!1;this.KR.dO(n("aPickingIdOffset"),h,1)}else r&&this.KR.PR(s("uColor"),r.getColor());return Zm.PG(this.At._i(),this.KR,o,c,this.At._i()?4:2,0),Zm.qL(this.wN,i,c,this.VG&&1!==t,1===t,l,u),!0}))}return{idCount:this.kd.length}}wU(t,e,i,s){const r=ct({x:this.tl.min.x,y:this.tl.min.y},this.At,this.cs.At),n=ct({x:this.tl.max.x,y:this.tl.max.y},this.At,this.cs.At),o={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},a=Cm(t,e,o.x,o.y,i),h=a[1],l=a[4],u=a[6],c=a[7],d=s.reduce(((t,e)=>t+e.Za.length+2),0),f=new Float32Array(2*d),g=this.tl.max.x-this.tl.min.x,m=this.tl.max.y-this.tl.min.y,y=l-u,p=c-h;let x=0;for(const t of s){for(const e of t.Za){const t=u+y*((e.x-this.tl.min.x)/g),i=h+p*((e.y-this.tl.min.y)/m);f[x]=t,f[x+1]=i,x+=2}const e=u+y*((t.Za[0].x-this.tl.min.x)/g),i=h+p*((t.Za[0].y-this.tl.min.y)/m);f[x]=e,f[x+1]=i,x+=2,f[x]=Number.NaN,f[x+1]=Number.NaN,x+=2}return f}PN(t,e,i,s,r){return{collectionMember:this.kd.find((i=>e+i.gU===t))}}iE(){return this.pU&&(this.KR.zV(this.pU),this.pU=void 0),this.OG&&(this.KR.zV(this.OG),this.OG=void 0),this.vU&&(this.KR.zV(this.vU),this.vU=void 0),this.SU&&(this.KR.zV(this.SU),this.SU=void 0),this.bU&&(this.KR.zV(this.bU),this.bU=void 0),this.MU&&(this.KR.zV(this.MU),this.MU=void 0),this.NG={fill:void 0,border:void 0},this._U=this.KR.sN(this,this._U),this}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return Ce(this.Fe)}Fl(){return Ce(this.Fe)}}class fy extends cn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kE=new Fm,this.CU=Ne,this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStyleRadialGradient:()=>tt(this.Te)&&this.Te,fillStyleLinearGradient:()=>st(this.Te)&&this.Te,fillStyleImage:()=>ro(this.Te)&&this.Te,strokeStyleSolid:()=>ns(this.Fe)&&this.Fe,strokeFillSolid:()=>{const t=this.Fe.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.Fe.getFillStyle();return st(t)&&t},strokeFillRadialGradient:()=>{const t=this.Fe.getFillStyle();return tt(t)&&t}}),this.wU=(t,e,i)=>{const s=ct(this.Oa(),this.At,this.cs.At),r=ci(ct(ui(this.Oa(),this.oi()),this.At,this.cs.At),s);return Cm(t,e,r.x,r.y,i)},this.wN=t,this.CN=e,this.KR=t.kN(),this.CN=e}zs(){super.zs();const t=this.Wo.C(),e=this.ua(),i=this.Sa.u||this.Z.u||this._a.u||this.Ca.u,s=this.Fe,r=this.ga(),n=s.getThickness(),o=this._a.C();this.kE.EV(this.At);const a=this.At.Ni();if(i){const t=this.Z.C();this.Za=function(t,e,i,s,r){const n=((t,e,i)=>[t,u(t.x+e,t.y),u(t.x+e,t.y+i),u(t.x,t.y+i)])(t,e,i);if(0!==s||s%360!=0){const t=s*Math.PI/180;n[0]=ri(n[0],r,t),n[1]=ri(n[1],r,t),n[2]=ri(n[2],r,t),n[3]=ri(n[3],r,t)}return n}(this.Sa.C(),t.x,t.y,o,this.Ca.C());const e=Jt(this.Za,this.At._i());this.VN=this.KR.CV(e,!1,this.VN),this.NN=this.Za.length,this.CU=Je(this.Za)}const h=this.RN.fillStyleSolid(e),l=this.RN.fillStyleRadialGradient(e),c=this.RN.fillStyleLinearGradient(e),d=this.RN.fillStyleImage(e),f=h||l||c||d;e&&(this.YN=f?this.KR.Cz(Yg["2D"],h&&Yg.Color({dataType:"uniform"}),c&&Yg.Color({dataType:["gradient",c]}),l&&Yg.Color({dataType:["gradient",l]}),d&&Yg.Color({dataType:["image",d]}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0),l?this.WN=vm(this.Ho||this.CU,this.At,l.getPosition(),l.getExtent(),l.getShape(),this.KR.dV()):c?this.UN=bm(this.Ho||this.CU,this.At,c.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0),this._U=this.KR.iN(this,this._U,d,void 0,a||i,this.wU);const g=this.RN.strokeStyleSolid(r),m=this.RN.strokeFillSolid(r),y=this.RN.strokeFillLinearGradient(r),p=this.RN.strokeFillRadialGradient(r),x=g,A=m||y||p;if(x&&(i||r||a&&1!==n)){if(1===n||-1===n)[this.HN,this.kU]=[this.Za,void 0];else{const t=this.At;[this.HN,this.kU]=t instanceof zi?((t,e,i)=>{const s=t[0],r=t[1],n=t[2],o=t[3],a=e/2;return[[i.Ui(s,r,a,-a),i.Ui(r,s,-a,-a),i.Ui(o,n,-a,-a),i.Ui(n,o,a,-a),i.Ui(s,r,-a,a),i.Ui(r,s,a,a),i.Ui(o,n,a,a),i.Ui(n,o,-a,a)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Za,n,t):((t,e,i)=>{const s=t[0],r=t[1],n=t[2],o=t[3],a=u(e.x*i*.5,e.y*i*.5),h=oi(ni(r,s)),l=oi(ni(o,s)),c=gi(h),d=gi(l);return[[ui(s,ui(li(c,a.x),li(d,a.y))),ui(r,ui(li(h,a.x),li(d,a.y))),ui(o,ui(li(c,a.x),li(l,a.y))),ui(n,ui(li(h,a.x),li(l,a.y))),ui(s,ui(li(h,a.x),li(l,a.y))),ui(r,ui(li(c,a.x),li(l,a.y))),ui(o,ui(li(h,a.x),li(d,a.y))),ui(n,ui(li(c,a.x),li(d,a.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Za,t.Wi(),n)}this.XN=this.KR.CV(Jt(this.HN,this.At._i()),!1,this.XN),this.kU?(this.TG=this.KR.rO(new Uint16Array(this.kU),this.TG),this.$N=this.kU.length):(this.TG&&this.KR.zV(this.TG),this.TG=void 0,this.$N=this.HN.length)}return r&&(this.qN=x&&A?this.KR.Cz(Yg["2D"],Yg.Color({dataType:p?["gradient",p]:y?["gradient",y]:"uniform"}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0),p?this.JN=vm(this.CU,this.At,p.getPosition(),p.getExtent(),p.getShape(),this.KR.dV()):y?this.KN=bm(this.CU,this.At,y.getAngle(!0),this.KR.dV()):(this.JN=void 0,this.KN=void 0),this.tG=t&&f?this.tG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.iG=t&&this.Fe!==nt?this.iG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.Aa(this.Te),this.ma(s),this.Sa.u=!1,this._a.u=!1,this.Z.u=!1,this.Ca.u=!1,this}qL(t,e){const i=1===t?this.tG:this.YN,s=this.VN,r=this.NN,n=this.RN.fillStyleSolid(!1),o=this.RN.fillStyleRadialGradient(!1),a=this.RN.fillStyleLinearGradient(!1),h=this.RN.fillStyleImage(!1);i&&s&&r&&this.Te!==V&&(this.KR.cE(i),this.KR.TV(i,((i,l,u,c)=>{if(this.At instanceof Vi||this.At instanceof zc?this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(c("uScaleStart_highpart"),this.kE.hN()).IV(c("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(c("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(c("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(c("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(c("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(i("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(i("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),1===t)this.KR.qV(i("uFirstId"),e).XO(u,1);else if(n)this.KR.PR(i("uColor"),n.getColor());else if(o){if(!this.WN)return!1;this.KR.EO(u,this.WN,o)}else if(a){if(!this.UN)return!1;this.KR.zO(u,this.UN,a)}else if(h){if(!this._U)return!1;const t=this._U&&this._U.texture.aV();this.KR.PR(c("uColor"),h.getSurroundingColor()).PV(i("uColorTexture"),t||this._U.sourceMissingTexture,0).FV(this._U.texCoordsBuffer,void 0,{location:l("aTextureCoord"),size:2}).tO(h.fitMode)}return this.KR.DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).NO(u,s,this.At._i(),void 0).qy(this.KR.gl.TRIANGLE_FAN,r),!0})));const l=1===t?this.iG:this.qN,u=this.RN.strokeStyleSolid(!1),c=this.RN.strokeFillSolid(!1),d=this.RN.strokeFillLinearGradient(!1),f=this.RN.strokeFillRadialGradient(!1),g=this.XN;return l&&g&&u&&(this.KR.cE(l),this.KR.TV(l,((i,s,r,n)=>{if(this.At instanceof Vi||this.At instanceof zc?this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(n("uScaleStart_highpart"),this.kE.hN()).IV(n("uScaleStart_lowpart"),this.kE.rN()):this.At instanceof zi&&this.KR.IV(n("uScaleStart"),this.kE.MixedScaleXY.uScaleStart).IV(n("uScaleStartLog"),this.kE.MixedScaleXY.uScaleStartLog).IV(n("uScaleInterval"),this.kE.MixedScaleXY.uScaleInterval).IV(n("uScaleIntervalLog"),this.kE.MixedScaleXY.uScaleIntervalLog).IV(i("uViewportStart"),this.kE.MixedScaleXY.uViewportStart).IV(i("uViewportSize"),this.kE.MixedScaleXY.uViewportSize),1===t)this.KR.qV(i("uFirstId"),e).XO(r,1);else if(c)this.KR.PR(i("uColor"),c.getColor());else if(f){if(!this.JN)return!1;this.KR.EO(r,this.JN,f)}else if(d){if(!this.KN)return!1;this.KR.zO(r,this.KN,d)}return this.KR.DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).NO(r,g,this.At._i(),void 0),this.TG?this.KR.fO(this.TG).gO(this.$N):this.KR.qy(this.KR.gl.LINE_LOOP,this.$N),!0}))),{idCount:1}}PN(t,e,i,s,r){return{}}iE(){return this.TG&&(this.KR.zV(this.TG),this.TG=void 0),this.VN&&(this.KR.zV(this.VN),this.VN=void 0),this.XN&&(this.KR.zV(this.XN),this.XN=void 0),this._U=this.KR.sN(this,this._U),this.YN=void 0,this.qN=void 0,this.tG=void 0,this.iG=void 0,this}St(){return Math.max(this.Sa.C().x,this.Sa.C().x+this.Z.C().x)}vt(){return Math.min(this.Sa.C().x,this.Sa.C().x+this.Z.C().x)}bt(){return Math.max(this.Sa.C().y,this.Sa.C().y+this.Z.C().y)}xt(){return Math.min(this.Sa.C().y,this.Sa.C().y+this.Z.C().y)}Tl(){return Ce(this.Fe)}Fl(){return Ce(this.Fe)}}class gy extends fn{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kE=new Fm,this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStylePaletted:()=>K(this.Te)&&this.Te,fillStyleRadialGradient:()=>tt(this.Te)&&this.Te,fillStyleLinearGradient:()=>st(this.Te)&&this.Te,fillStyleImage:()=>ro(this.Te)&&this.Te,strokeLineStyleSolid:()=>ns(this.Fe)&&this.Fe,strokeLineSolidFill:()=>{const t=this.Fe.getFillStyle();return Y(t)&&t},strokeLinearGradientFill:()=>{const t=this.Fe.getFillStyle();return st(t)&&t},strokeRadialGradientFill:()=>{const t=this.Fe.getFillStyle();return tt(t)&&t}}),this.wU=(t,e,i)=>{const s=ct({x:this.tl.min.x,y:this.tl.min.y},this.At,this.cs.At),r=ct({x:this.tl.max.x,y:this.tl.max.y},this.At,this.cs.At),n={x:Math.abs(s.x-r.x),y:Math.abs(s.y-r.y)},o=Cm(t,e,n.x,n.y,i),a=o[1],h=o[4],l=o[6],u=o[7],c=new Float32Array(2*this.Za.length),d=this.tl.max.x-this.tl.min.x,f=this.tl.max.y-this.tl.min.y,g=h-l,m=u-a;let y=0;for(const t of this.Za){const e=l+g*((t.x-this.tl.min.x)/d),i=a+m*((t.y-this.tl.min.y)/f);c[y]=e,c[y+1]=i,y+=2}return c},this.wN=t,this.CN=e,this.KR=t.kN(),this.CN=e}qc(t){let e,i=Number.MAX_VALUE;for(const s of this.Za){const r=$e(ct(s,this.At,this.cs.At),t);r<i&&(i=r,e=s)}return e}zs(){const t=this.Wo.C(),e=this.ua(),i=this.wl,s=this.Za.length>=3,r=this.Fe,n=this.ga(),o=r.getThickness(),h=this.ya(o);this.kE.EV(this.At),this.bT=this.At.Wi();const l=this.At.Ni();if(i&&(this.tl=Je(this.Za)),i&&s){const t=Jt(this.Za,this.At._i());this.VN=this.KR.CV(t,!1,this.VN),this.TU=new Uint16Array(a.default(t)),this.FU=this.KR.rO(this.TU,this.FU),this.NN=this.TU.length}const u=this.RN.fillStyleSolid(e),c=this.RN.fillStylePaletted(e),d=this.RN.fillStyleRadialGradient(e),f=this.RN.fillStyleLinearGradient(e),g=this.RN.fillStyleImage(e),m=u||c&&"value"!==c.getLookUpProperty()&&c||f||d||g;if(e&&(this.YN=m?this.KR.Cz(Yg["2D"],u&&Yg.Color({dataType:"uniform"}),f&&Yg.Color({dataType:["gradient",f]}),d&&Yg.Color({dataType:["gradient",d]}),c&&Yg.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),g&&Yg.Color({dataType:["image",g]}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0),d?this.WN=vm(this.Ho||this.tl,this.At,d.getPosition(),d.getExtent(),d.getShape(),this.KR.dV()):f?this.UN=bm(this.Ho||this.tl,this.At,f.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0),this._U=this.KR.iN(this,this._U,g,void 0,l||i,this.wU),(i||h||l&&1!==o)&&s){const t=1===o||-1===o?this.Za:zm(this.Za,this.bT,o);this.HN=Jt(t,this.At._i()),this.XN=this.KR.CV(this.HN,!0,this.XN),this.$N=t.length}const y=this.RN.strokeLineStyleSolid(n),p=this.RN.strokeLineSolidFill(n),x=this.RN.strokeLinearGradientFill(n),A=this.RN.strokeRadialGradientFill(n),S=y,v=p||x||A;return n&&(this.qN=S&&v?this.KR.Cz(Yg["2D"],Yg.Color({dataType:A?["gradient",A]:x?["gradient",x]:"uniform"}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0),A?this.JN=vm(this.Ho||this.tl,this.At,A.getPosition(),A.getExtent(),A.getShape(),this.KR.dV()):x?this.KN=bm(this.Ho||this.tl,this.At,x.getAngle(!0),this.KR.dV()):(this.JN=void 0,this.KN=void 0),this.tG=t&&m?this.tG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.iG=t&&this.Fe!==nt?this.tG||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})):void 0,this.wl=!1,this.Aa(this.Te),this.ma(r),this}qL(t,e){const i=1===t?this.tG:this.YN,s=this.VN,r=this.NN,n=this.RN.fillStyleSolid(!1),o=this.RN.fillStyleRadialGradient(!1),a=this.RN.fillStyleLinearGradient(!1),h=this.RN.fillStylePaletted(!1),l=this.RN.fillStyleImage(!1);i&&s&&r&&this.KR.cE(i).TV(i,((i,r,u,c)=>{if(this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).IV(c("uScaleStart_highpart"),this.kE.hN()).IV(c("uScaleStart_lowpart"),this.kE.rN()).NO(u,s,this.At._i(),void 0).fO(this.FU).DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),1===t)this.KR.qV(i("uFirstId"),e).XO(u,1);else if(n)this.KR.PR(i("uColor"),n.getColor());else if(o){if(!this.WN)return!1;this.KR.EO(u,this.WN,o)}else if(a){if(!this.UN)return!1;this.KR.zO(u,this.UN,a)}else if(h){const t=gg(h,this,void 0);if(!t&&h.lut.percentageValues)return!1;this.KR.tN(u,h.lut,t)}else if(l){if(!this._U)return!1;this.KR.PR(c("uColor"),l.getSurroundingColor()).PV(i("uColorTexture"),this._U.texture.aV()||this._U.sourceMissingTexture,0).FV(this._U.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).tO(l.fitMode)}return this.KR.gO(this.NN),!0}));const u=1===t?this.iG:this.qN,c=this.Fe,d=this.XN,f=this.$N;return u&&d&&f&&this.KR.cE(u).TV(u,((i,s,r,n)=>{this.KR.DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).NO(r,d,this.At._i(),void 0);const o=c.getFillStyle();if(1===t)this.KR.qV(i("uFirstId"),e).XO(r,1);else if(Y(o))this.KR.PR(i("uColor"),o.getColor());else if(tt(o)){if(!this.JN)return!1;this.KR.EO(r,this.JN,o)}else if(st(o)){if(!this.KN)return!1;this.KR.zO(r,this.KN,o)}const a=c.getThickness(),h=-1===a||1===a;return this.KR.qy(h?this.KR.gl.LINE_LOOP:this.KR.gl.TRIANGLE_STRIP,this.$N),!0})),{idCount:1}}PN(t,e,i,s,r){return{}}iE(){return this.FU&&(this.KR.zV(this.FU),this.FU=void 0),this.VN&&(this.KR.zV(this.VN),this.VN=void 0),this.XN&&(this.KR.zV(this.XN),this.XN=void 0),this.YN=void 0,this.qN=void 0,this.tG=void 0,this.iG=void 0,this._U=this.KR.sN(this,this._U),this}}const my=(t,e)=>{let i=0;const s=[];for(;i<t;){const r=i;let n=e;const o=i>0;n-=o?1:0,n-=i+n<t?1:0;const a=Math.min(n,t-r),h=i-(o?1:0),l={start:h,startUnique:r,sizeData:Math.min(e,t-h),sizeUniqueData:a};s.push(l),i+=a}return s},yy=(t,e)=>{let i=0;const s=[];for(;i<t;){const r=i;let n=e;const o=i>0;n-=o?1:0,n-=0;const a=Math.min(n,t-r),h=i-(o?1:0),l={start:h,startUnique:r,sizeData:Math.min(e,t-h),sizeUniqueData:a};s.push(l),i+=a}return s},py=(t,e,i,s)=>{if(i){const t=new Map;return e.gridTiles.forEach((e=>{t.set(e,{type:i,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:e.sizeHeatmapDataVectors}]})})),t}const r=new Map;for(let i=0;i<t.length;i+=1){const n=t[i],o={x:n.startPrimary,y:n.startSecondary},a={x:o.x+n.lengthPrimary-1,y:o.y+n.lengthSecondary-1},h=[o,{x:a.x,y:o.y},a,{x:o.x,y:a.y}];e.gridTiles.forEach((t=>{const e=t.iFirstVector,i=s(t),o={x:e.primary+i.primary-1,y:e.secondary+i.secondary-1},a=[{x:e.primary,y:e.secondary},{x:o.x,y:e.secondary},o,{x:e.primary,y:o.y}];if(!Ge(h,a))return;let l=r.get(t);l||(l={type:n.type,dataInvalidationRanges:[]},r.set(t,l));const c=(d=h,f=a,m(u(Math.max(Math.min(d[0].x,d[2].x),Math.min(f[0].x,f[2].x)),Math.max(Math.min(d[0].y,d[2].y),Math.min(f[0].y,f[2].y))),u(Math.min(Math.max(d[0].x,d[2].x),Math.max(f[0].x,f[2].x)),Math.min(Math.max(d[0].y,d[2].y),Math.max(f[0].y,f[2].y)))));var d,f;const g={primary:c.min.x-e.primary,secondary:c.min.y-e.secondary},y={primary:1+c.max.x-c.min.x,secondary:1+c.max.y-c.min.y};let p=!1;const x=[{x:g.primary,y:g.secondary},{x:g.primary+y.primary,y:g.secondary},{x:g.primary+y.primary,y:g.secondary+y.secondary},{x:g.primary,y:g.secondary+y.secondary}];for(let t=0;t<l.dataInvalidationRanges.length;t+=1)if(!p){const e=l.dataInvalidationRanges[t],i=[{x:e.tileInvalidationOffset.primary,y:e.tileInvalidationOffset.secondary},{x:e.tileInvalidationOffset.primary+e.tileInvalidationLength.primary,y:e.tileInvalidationOffset.secondary},{x:e.tileInvalidationOffset.primary+e.tileInvalidationLength.primary,y:e.tileInvalidationOffset.secondary+e.tileInvalidationLength.secondary},{x:e.tileInvalidationOffset.primary,y:e.tileInvalidationOffset.secondary+e.tileInvalidationLength.secondary}];if(Ge(x,i)){const t=He(x,i);e.tileInvalidationOffset.primary=t.min.x,e.tileInvalidationOffset.secondary=t.min.y,e.tileInvalidationLength.primary=t.max.x-t.min.x,e.tileInvalidationLength.secondary=t.max.y-t.min.y,p=!0}}p||l.dataInvalidationRanges.push({tileInvalidationLength:y,tileInvalidationOffset:g})}))}return r},xy=(t,e,i)=>{if(1!==t.length||0!==e.startPrimary||0!==e.startSecondary||e.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||e.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const s=i(t),r=Math.max(e.startPrimary,t.iFirstVector.primary),n=Math.min(e.startPrimary+e.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),o=Math.max(e.startSecondary,t.iFirstVector.secondary),a=Math.min(e.startSecondary+e.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let i=r;i<=n;i+=1){const r=i-e.startPrimary,n=e.values[r],h=(i-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let i=o;i<=a;i+=1){const r=i-e.startSecondary,o=i-t.iFirstVector.secondary,a=n[r];s[h+o]=a}}}));else{const s=t[0],r=i(s);for(let t=0;t<e.lengthPrimary;t+=1){const i=t*s.sizeHeatmapDataVectors.secondary;r.set(e.values[t],i)}}},Ay=(t,e,i)=>{var s,r;const n=null===(s=t.gl2)||void 0===s?void 0:s.ctx;if(n)return t.BO(null,n.RED,!1,!0,{x:e,y:i},!1,n.FLOAT,n.R32F);const o=t.gl;return(null===(r=t.gl1)||void 0===r?void 0:r.optional.OES_texture_float)?t.BO(null,o.LUMINANCE,!1,!0,{x:e,y:i},!1,o.FLOAT):t.BO(null,o.RGBA,!1,!0,{x:e,y:i},!1,o.UNSIGNED_BYTE)},Sy=(t,e,i,s)=>{e.forEach(((e,r)=>{var n,o;const a=i(r),h=s(r),l=t.gl;l.bindTexture(l.TEXTURE_2D,h),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=null===(n=t.gl2)||void 0===n?void 0:n.ctx,c=e.dataInvalidationRanges.length,d=e.dataInvalidationRanges.reduce(((t,e)=>t+e.tileInvalidationLength.primary),0)/r.sizeHeatmapDataVectors.primary;1===c&&d<1||d<.5&&c<10?e.dataInvalidationRanges.forEach((e=>{var i;const s=e.tileInvalidationOffset.primary*r.sizeHeatmapDataVectors.secondary,n=s+e.tileInvalidationLength.primary*r.sizeHeatmapDataVectors.secondary;if(u)u.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,u.RED,u.FLOAT,a.subarray(s,n));else if(null===(i=t.gl1)||void 0===i?void 0:i.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,a.subarray(s,n));else{const t=new Uint8Array(a.buffer).subarray(4*s,4*n);l.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):u?u.texImage2D(l.TEXTURE_2D,0,u.R32F,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,u.RED,u.FLOAT,a):(null===(o=t.gl1)||void 0===o?void 0:o.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,a):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(a.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class vy extends on{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.IU=p("bilinear"),this.Pi={x:0,y:0},this.mw={x:1,y:1},this.bS=Pr.lineStyle,this.engine=t;const o="columns"===n.dataOrder?n.columns:n.rows,a="columns"===n.dataOrder?n.rows:n.columns;this.Kn={...n,primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:a}}FS(t){return this.IU._(t),this}IS(){return this.IU.C()}CS(t,e){return this.Pi=t,this.mw=e,this}kS(){return{start:this.Pi,step:this.mw,end:{x:this.Pi.x+this.mw.x*this.Kn.columns,y:this.Pi.y+this.mw.y*this.Kn.rows}}}MS(t){return this.bS="function"==typeof t?t(this.bS):t,this}TS(){return this.bS}}class by extends vy{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.kE=new Fm,this.NG={},this.PU=[],this.DU=!1,this.rl=!1,this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStylePaletted:()=>K(this.Te)&&this.Te,wireframeStyleLine:()=>ns(this.bS)&&this.bS,wireframeStyleFill:()=>{const t=this.bS&&this.bS.getFillStyle();return Y(t)&&t}}),this.BU=my,this.wN=t,this.CN=e,this.KR=t.kN(),this.CN=e;const o=Math.min(this.KR.tE,void 0!==n.LU?n.LU:2048),a={x:Math.min(o,this.Kn.primaryDimensionVectorsCount),y:Math.min(o,this.Kn.secondaryDimensionVectorsCount)},h=((t,e,i)=>{const s=[],r=i(t.primaryDimensionVectorsCount,e.x),n=i(t.secondaryDimensionVectorsCount,e.y);let o;return r.forEach((t=>n.forEach((e=>{const i={iFirstVector:{primary:t.start,secondary:e.start},iFirstUniqueVector:{primary:t.startUnique,secondary:e.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:e.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:e.sizeUniqueData}};s.push(i)})))),o=[],s.forEach((t=>{let e=o.find((e=>e.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&e.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));e||(e={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(e)),e.tiles.push(t)})),{gridTiles:s,gridTileSizes:o}})(this.Kn,a,this.BU),l=h.gridTiles.map((t=>{const e=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,intensityData:e,hasIntensityData:!1}})),u=h.gridTileSizes.map((t=>({...t,tiles:l.filter((e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.RU={gridTiles:l,gridTileSizes:u},this.CS(this.Pi,this.mw)}zs(){const t=this.PU,e=this.Te,i=this.ua(),s=this.bS,r=s!==this.EU,n=this.RN.fillStylePaletted(i),o=this.RN.fillStyleSolid(i),a=this.IU.u,h=this.IU.C(),l=this.rl,u=this.Wo.C();this.zU=this.zU||this.VU();const c=this.zU,d=py(t,c,l?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));d.size>0&&(Sy(this.KR,d,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.DU=!0),this.kE.EV(this.At);const f=this.NG;if((i||a)&&(f.tile=n?{renderMode:"paletted",fillStylePaletted:n,shader:this.KR.Cz(Yg["2D"],Yg.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===h&&"bilinear",flipXY:"rows"===this.Kn.dataOrder,intensityTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN,lut:n.lut}),Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dg(this.At),flipXY:"rows"===this.Kn.dataOrder,normalSource:void 0}))}:o?{renderMode:"solid",fillStyleSolid:o,shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:"uniform"}),Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dg(this.At),flipXY:"rows"===this.Kn.dataOrder,normalSource:void 0}))}:void 0),r){const t=this.RN.wireframeStyleLine(r),e=this.RN.wireframeStyleFill(r);f.wireframe=t&&e?-1===t.getThickness()?{renderMode:"primitive",shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:"uniform"}),Yg.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Kn.dataOrder,axisWorldTranslation:dg(this.At),normalSource:void 0})),fillStyleSolid:e}:{renderMode:"triangulated",shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:"uniform"}),Yg.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Kn.dataOrder,axisWorldTranslation:dg(this.At),normalSource:void 0})),geometry:$m(this.KR,1),solidLine:t,fillStyleSolid:e}:void 0,f.wireframe?this.OU=this.OU||this.NU():this.OU&&(this.KR.zV(this.OU.wireframeCoordinatesBuffer),this.OU=void 0)}if(f.mousePicking=u?this.NG.mousePicking||{shader:this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dg(this.At),flipXY:"rows"===this.Kn.dataOrder,normalSource:void 0}))}:void 0,this.NG=f,void 0===this.nl&&n&&"value"===n.lookUpProperty&&n.lut.percentageValues){let t=Ve,e=ze;this.zU.gridTiles.forEach((i=>{for(let s=0;s<i.intensityData.length;s+=1){const r=i.intensityData[s];r<t&&(t=r),r>e&&(e=r)}})),this.nl={min:t,max:e}}return this.rl=!1,this.PU.length=0,this.Aa(e),this.EU=s,this.IU.u=!1,this}VU(){const t=this.RU.gridTiles.map((t=>{const e=Ay(this.KR,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:e,tileData:t}})),e=this.RU.gridTileSizes.map((e=>({...e,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===e.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===e.sizeHeatmapData.secondary))}))),i=this.KR.CV([0,0,1,0,0,1,1,1]),s=this.KR.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:e,rectangleLocationsBuffer:i,rectangleLocationsDrawMode:s,rectangleLocationsDrawLength:4}}NU(){const t=this.Kn.primaryDimensionVectorsCount+1+this.Kn.secondaryDimensionVectorsCount+1,e=new Float32Array(4*t);let i=0;for(let t=0;t<this.Kn.primaryDimensionVectorsCount+1;t+=1)e[i+0]=t,e[i+1]=0,e[i+2]=t,e[i+3]=this.Kn.secondaryDimensionVectorsCount,i+=4;for(let t=0;t<this.Kn.secondaryDimensionVectorsCount+1;t+=1)e[i+0]=0,e[i+1]=t,e[i+2]=this.Kn.primaryDimensionVectorsCount,e[i+3]=t,i+=4;return{wireframeCoordinatesBuffer:this.KR.CV(e),wireframeSegmentsLength:t}}CS(t,e){super.CS(t,e);const i=this.Kn,s=m({x:Math.min(this.Pi.x,this.Pi.x+i.columns*this.mw.x),y:Math.min(this.Pi.y,this.Pi.y+i.rows*this.mw.y)},{x:Math.max(this.Pi.x,this.Pi.x+i.columns*this.mw.x),y:Math.max(this.Pi.y,this.Pi.y+i.rows*this.mw.y)}),r=new Map;return this.RU.gridTiles.forEach((t=>{const e="columns"===this.Kn.dataOrder?{x:this.Pi.x+this.mw.x*t.iFirstVector.primary,y:this.Pi.y+this.mw.y*t.iFirstVector.secondary}:{x:this.Pi.x+this.mw.x*t.iFirstVector.secondary,y:this.Pi.y+this.mw.y*t.iFirstVector.primary},i="columns"===this.Kn.dataOrder?{x:this.mw.x*t.sizeHeatmapDataVectors.primary,y:this.mw.y*t.sizeHeatmapDataVectors.secondary}:{x:this.mw.x*t.sizeHeatmapDataVectors.secondary,y:this.mw.y*t.sizeHeatmapDataVectors.primary},s="columns"===this.Kn.dataOrder?{x:this.Pi.x+this.mw.x*t.iFirstUniqueVector.primary,y:this.Pi.y+this.mw.y*t.iFirstUniqueVector.secondary}:{x:this.Pi.x+this.mw.x*t.iFirstUniqueVector.secondary,y:this.Pi.y+this.mw.y*t.iFirstUniqueVector.primary},n="columns"===this.Kn.dataOrder?{x:this.mw.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.mw.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.mw.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.mw.y*t.sizeUniqueHeatmapDataVectors.primary};r.set(t,{startLocationAxis:e,sizeAxis:i,startRenderLocationAxis:s,renderSizeAxis:n})})),this.GU={boundaries:s,tilesInfo:r},this}qL(t,e){var i,s;const r=this.zU,n=this.GU,o=1===t?null===(i=this.NG.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.NG.tile)||void 0===s?void 0:s.shader;if(this.NG.tile&&o&&r&&n){const i=o,s=this.NG.tile,a={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.mw.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.mw.y)},h={x:a.x/this.Kn.columns,y:a.y/this.Kn.rows},l=this.At.Wi(),u={x:h.x/l.x,y:h.y/l.y};if("solid"===s.renderMode||1===t)this.KR.cE(i).TV(i,((i,n,o)=>{if(1===t)this.KR.qV(i("uFirstId"),e).XO(o,1);else if("solid"===s.renderMode){const{fillStyleSolid:t}=s;this.KR.PR(i("uColor"),t.getColor())}return this.KR.DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).FV(r.rectangleLocationsBuffer,void 0,{location:n("aPos"),size:2}).IV(i("uScaling"),[this.mw.x*this.Kn.columns,this.mw.y*this.Kn.rows]).IV(i("uTranslationAxis"),[this.Pi.x,this.Pi.y]).qy(r.rectangleLocationsDrawMode,r.rectangleLocationsDrawLength),!0}));else if("paletted"===s.renderMode){const{fillStylePaletted:e}=s,o=this.nl;this.KR.TV(i,((s,a,h)=>{let l=!1;var c,d;return this.KR.cE(i).IV(s("uScale"),this.kE.BV()).IV(s("uDisp"),this.kE.LV()).tN(h,e.lut,o).FV(r.rectangleLocationsBuffer,void 0,{location:a("aPos"),size:2}).DV(s("uIsHighlighted"),this.$o).PR(s("uHighlightColorOffset"),2===t?R:this.Qo).DV(s("uRenderEffectMask"),2===t?1:0),c=t=>{this.KR.IV(s("uTileDimensions"),["columns"===this.Kn.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Kn.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},d=(t,e)=>{const i=n.tilesInfo.get(t.tileData);if(!i)return;let o;const a=this.KR.dV();if("bilinear"===this.IU.C()){const t=(this.At.x.ft(i.startLocationAxis.x)+u.x/2)*a,e=(this.At.y.ft(i.startLocationAxis.y)+u.y/2)*a;o=[t,e,(this.At.x.ft(i.startLocationAxis.x+i.sizeAxis.x)-u.x/2)*a-t,(this.At.y.ft(i.startLocationAxis.y+i.sizeAxis.y)-u.y/2)*a-e]}else{const t=this.At.x.ft(i.startLocationAxis.x)*a,e=this.At.y.ft(i.startLocationAxis.y)*a;o=[t,e,this.At.x.ft(i.startLocationAxis.x+i.sizeAxis.x)*a-t,this.At.y.ft(i.startLocationAxis.y+i.sizeAxis.y)*a-e]}this.KR.ZV(s("uTileBounds"),o).IV(s("uScaling"),[i.renderSizeAxis.x,i.renderSizeAxis.y]).IV(s("uTranslationAxis"),[i.startRenderLocationAxis.x,i.startRenderLocationAxis.y]).PV(s("uTileIntensityValues"),t.intensityDataTexture,1).qy(r.rectangleLocationsDrawMode,r.rectangleLocationsDrawLength),l=!0},r.gridTileSizes.forEach((t=>{c(t),t.tiles.forEach((t=>{d(t)}))})),l}))}}const a=this.OU,h=this.NG.wireframe,l=1===t||null==h?void 0:h.shader;if(a&&h&&l&&"primitive"===h.renderMode){const{fillStyleSolid:e}=h;this.KR.cE(l).TV(l,((i,s,r)=>((this.At instanceof Vi||this.At instanceof zc)&&this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()),this.KR.DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).PR(i("uColor"),e.getColor()).FV(a.wireframeCoordinatesBuffer,void 0,{location:s("aPos"),size:2}).IV(i("uScaling"),[this.mw.x,this.mw.y]).IV(i("uTranslationAxis"),[this.Pi.x,this.Pi.y]).qy(this.KR.gl.LINES,2*a.wireframeSegmentsLength),!0)))}else if(a&&h&&l&&"triangulated"===h.renderMode){const{geometry:e,solidLine:i,fillStyleSolid:s}=h;this.KR.cE(l).TV(l,((r,n,o)=>((this.At instanceof Vi||this.At instanceof zc)&&this.KR.IV(r("uScale"),this.kE.BV()).IV(r("uDisp"),this.kE.LV()),this.KR.DV(r("uIsHighlighted"),1===t||2===t?0:this.$o).PR(r("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(r("uRenderEffectMask"),2===t?1:0).PR(r("uColor"),s.getColor()).DV(r("uThicknessPixels"),i.getThickness()).IV(r("uRatioPxClip"),[2/this.cs.oi().x,2/this.cs.oi().y]).FV(a.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).IV(r("uScaling"),[this.mw.x,this.mw.y]).IV(r("uTranslationAxis"),[this.Pi.x,this.Pi.y]),e.cE(o,!1).qy(a.wireframeSegmentsLength),!0)))}return{idCount:1}}PN(t,e,i,s,r){return{}}PS(t){return this.PU.push(t),xy(this.RU.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this.nl=void 0,this}Ot(){return this.DU&&(this.RU.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.rl=!0,this.DU=!1,this.nl=void 0),this}dispose(){super.dispose();const t=this.zU;t&&(t.gridTiles.forEach((t=>{this.KR.sE(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.KR.zV(t.rectangleLocationsBuffer)),this.zU=void 0;const e=this.OU;return e&&this.KR.zV(e.wireframeCoordinatesBuffer),this.OU=void 0,this.NG={},this}iE(){return this.dispose(),this}qc(t){const e=t,i="columns"===this.Kn.dataOrder?e.x:e.y,s="columns"===this.Kn.dataOrder?e.y:e.x,r="columns"===this.Kn.dataOrder?this.Pi.x:this.Pi.y,n="columns"===this.Kn.dataOrder?this.Pi.y:this.Pi.x;let o=(i-r)/("columns"===this.Kn.dataOrder?this.mw.x:this.mw.y),a=(s-n)/("columns"===this.Kn.dataOrder?this.mw.y:this.mw.x);o=Math.floor(_t(o,0,this.Kn.primaryDimensionVectorsCount-1)),a=Math.floor(_t(a,0,this.Kn.secondaryDimensionVectorsCount-1));const h=this.WU(o,a),l="columns"===this.Kn.dataOrder?{x:this.Pi.x+(o+.5)*this.mw.x,y:this.Pi.y+(a+.5)*this.mw.y}:{x:this.Pi.x+(a+.5)*this.mw.x,y:this.Pi.y+(o+.5)*this.mw.y},u="columns"===this.Kn.dataOrder?o:a,c="columns"===this.Kn.dataOrder?a:o;return{x:l.x,y:l.y,column:u,row:c,cellValue:h}}Xb(t){const e=this.GU;if(!e||t.x<e.boundaries.min.x||t.x>e.boundaries.max.x||t.y<e.boundaries.min.y||t.y>e.boundaries.max.y)return;const i=t,s="columns"===this.Kn.dataOrder?i.x:i.y,r="columns"===this.Kn.dataOrder?i.y:i.x,n="columns"===this.Kn.dataOrder?this.Pi.x:this.Pi.y,o="columns"===this.Kn.dataOrder?this.Pi.y:this.Pi.x,a="columns"===this.Kn.dataOrder?this.mw.x:this.mw.y,h="columns"===this.Kn.dataOrder?this.mw.y:this.mw.x,l=_t((s-n)/a-.5,0,this.Kn.primaryDimensionVectorsCount-1),u=_t((r-o)/h-.5,0,this.Kn.secondaryDimensionVectorsCount-1),c=_t(Math.ceil(l)-1,0,this.Kn.primaryDimensionVectorsCount-1),d=_t(Math.ceil(u)-1,0,this.Kn.secondaryDimensionVectorsCount-1),f={point:{x:c,y:d},value:this.WU(c,d)},g={point:{x:c,y:d+1},value:this.WU(c,d+1)},m={point:{x:c+1,y:d},value:this.WU(c+1,d)},y={point:{x:c+1,y:d+1},value:this.WU(c+1,d+1)},p=Hn({x:l,y:u},f,g,m,y);if(void 0===p)return;const x=_t(Math.floor(l+.5),0,this.Kn.primaryDimensionVectorsCount-1),A=_t(Math.floor(u+.5),0,this.Kn.secondaryDimensionVectorsCount-1),S="columns"===this.Kn.dataOrder?x:A,v="columns"===this.Kn.dataOrder?A:x,b=t;return{x:b.x,y:b.y,column:S,row:v,cellValue:p}}WU(t,e){for(let i=0;i<this.RU.gridTiles.length;i+=1){const s=this.RU.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.intensityData[n]}}return 0}St(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.boundaries.max.x)||0}vt(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.boundaries.min.x)||0}bt(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.boundaries.max.y)||0}xt(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.boundaries.min.y)||0}Tl(){return 0}Fl(){return 0}n_(){const t=[];return this.RU.gridTiles.forEach((e=>{if(!e.hasIntensityData)return;const i=new Array(e.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(e.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<e.sizeUniqueHeatmapDataVectors.primary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary,r=i[t];for(let t=0;t<e.sizeUniqueHeatmapDataVectors.secondary;t+=1){const i=e.intensityData[s+t];r[t]=i}}t.push({type:"intensity",startPrimary:e.iFirstUniqueVector.primary,startSecondary:e.iFirstUniqueVector.secondary,lengthPrimary:e.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:e.sizeUniqueHeatmapDataVectors.secondary,values:i})})),t}}class My extends on{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.Pi={x:0,y:0},this.mw={x:1,y:1},this.bS=Pr.lineStyle,this.wu=p(void 0),this.IU=p("bilinear"),this.engine=t,this.Kn=n}CS(t,e){return this.Pi=t,this.mw=e,this}kS(){return{start:this.Pi,step:this.mw}}MS(t){return this.bS="function"==typeof t?t(this.bS):t,this}TS(){return this.bS}Cu(t){return this.wu._(t),this}ku(){return this.wu.C()}FS(t){return this.IU._(t),this}IS(){return this.IU.C()}}class Ty extends My{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.UU=0,this.LM=[],this.wN=t,this.CN=e,this.KR=t.kN(),this.CN=e,this.tl="columns"===n.scrollDimension?m({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+n.resolution*this.mw.y}):m({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+n.resolution*this.mw.x,y:this.Pi.y}),this.YU={dataPerSegment:2048}}zs(){this.GW||(this.jo.push({type:"DataPattern",args:{pattern:"columns"===this.Kn.scrollDimension?this.mw.x>0?"ProgressiveX":"RegressiveX":this.mw.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.GW=new ny(this.At,this));const t=this.GW.BW(this.LM,this.wu.C());if(t>0){for(let e=0;e<t;e+=1)this.LM[0].shape.dispose().iE(),this.LM.shift();"columns"===this.Kn.scrollDimension?this.tl.min.x=this.LM.length>0?this.LM[0].boundaries.min.x:Ve:this.tl.min.y=this.LM.length>0?this.LM[0].boundaries.min.y:Ve}this.LM.forEach((t=>t.shape.zs()));const e=this.LM.reduce(((t,e)=>{var i,s;return t.min=Math.min(t.min,Dt(null===(i=e.shape.nl)||void 0===i?void 0:i.min,Ve)),t.max=Math.max(t.max,Dt(null===(s=e.shape.nl)||void 0===s?void 0:s.max,ze)),t}),{min:Ve,max:ze});return this.LM.forEach((t=>{t.shape.nl=e})),this.wu.u=!1,this}qL(t,e){let i=0;return this.LM.forEach((s=>{const{idCount:r}=s.shape.qL(t,e+i);void 0!==r&&(i+=r)})),{idCount:i}}PN(t,e,i,s,r){return{}}ES(t){if(0===t.length)return this;let e=0;const i=this.YU.dataPerSegment,s=t.length;do{let r=this.LM[this.LM.length-1],n=r?i-(r.existingDataPointsCount+(r.hasJoint?1:0)):0,o=!1;if(!r||0===n){const t={columns:"columns"===this.Kn.scrollDimension?i:this.Kn.resolution,rows:"rows"===this.Kn.scrollDimension?i:this.Kn.resolution,heatmapDataType:this.Kn.heatmapDataType,dataOrder:this.Kn.scrollDimension};let e="columns"===this.Kn.scrollDimension?{x:this.Pi.x+this.mw.x*this.UU,y:this.Pi.y}:{x:this.Pi.x,y:this.Pi.y+this.mw.y*this.UU};this.LM.length>0&&(e="columns"===this.Kn.scrollDimension?{x:e.x-1*this.mw.x,y:e.y}:{x:e.x,y:e.y-1*this.mw.y},o=!0);const s=new by(this.wN,this.CN,this.At,Rt,[],t).FS(this.IU.C()).Be(this.Te).MS(this.bS).CS(e,this.mw);r={shape:s,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:i,dataStartIndex:this.UU,hasJoint:!1,boundaries:{min:{x:s.vt(),y:s.xt()},max:{x:s.St(),y:s.bt()}}},this.LM.push(r),n=i-(o?1:0)}const a=s-e,h=Math.min(n,a),l=t.slice(e,e+h),u={type:"intensity",values:l,startPrimary:r.existingDataPointsCount+(r.hasJoint?1:0),startSecondary:0,lengthPrimary:h,lengthSecondary:this.Kn.resolution};o&&(u.values.unshift(this.HU),u.lengthPrimary+=1,r.hasJoint=!0),r.shape.PS(u),r.existingDataPointsCount+=h,r.existingCoordinatesCount+=h+(o?1:0),this.HU=l[l.length-1],this.UU+=h,e+=h}while(e<s);return this.tl.max="columns"===this.Kn.scrollDimension?{...this.tl.max,x:this.Pi.x+this.UU*this.mw.x}:{...this.tl.max,y:this.Pi.y+this.UU*this.mw.y},this}PS(t,e){const i=t,s=t+e.length-1,r=e[0].length;this.LM.forEach((t=>{const n=t.dataStartIndex,o=t.dataStartIndex+t.existingDataPointsCount-1;if(s<n||i>o)return;const a=i-n,h=Math.min(s,o),l=h-a+1,u=e.slice(a-i,h-i+1),c={type:"intensity",startSecondary:0,lengthSecondary:r,startPrimary:a,lengthPrimary:l,values:u};t.shape.PS(c)}));const n=this.UU-1;if(s>n){const t=s-n,i=e.slice(-t);if(i.length<t){const e=this.HU||new Array(r).fill(0);for(let s=i.length;s<t;s+=1)i.unshift(e)}this.ES(i)}return this}f_(){return this.UU}Ot(){return this.LM.forEach((t=>{t.shape.dispose().iE()})),this.LM.length=0,this.tl="columns"===this.Kn.scrollDimension?m({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Kn.resolution*this.mw.y}):m({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Kn.resolution*this.mw.x,y:this.Pi.y}),this.UU=0,this.HU=void 0,this}CS(t,e){return super.CS(t,e),this.LM.forEach(((i,s)=>{const r={x:t.x+i.dataStartIndex*e.x,y:t.y+i.dataStartIndex*e.y};i.shape.CS(r,e),i.boundaries={min:{x:i.shape.vt(),y:i.shape.xt()},max:{x:i.shape.St(),y:i.shape.bt()}}})),this.LM.length>0?this.tl=ei(...this.LM.map((t=>t.boundaries))):this.tl="columns"===this.Kn.scrollDimension?m({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Kn.resolution*this.mw.y}):m({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Kn.resolution*this.mw.x,y:this.Pi.y}),this}Be(t){return super.Be(t),this.LM.forEach((t=>t.shape.Be(this.Te))),this}MS(t){return super.MS(t),this.LM.forEach((t=>t.shape.MS(this.bS))),this}FS(t){return super.FS(t),this.LM.forEach((e=>e.shape.FS(t))),this}dispose(){return super.dispose(),this.LM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.LM.forEach((e=>e.shape.setVisible(t))),this}iE(){return this.LM.forEach((t=>t.shape.iE())),this}qc(t){const e=ct(t,this.At,this.engine.At),i=this.LM.reduce(((i,s)=>{const r=s.shape.qc(t);if(r){const t=Ze(ct(r,this.At,this.engine.At),e);if(void 0===i||t<i.distance)return{result:r,distance:t,segment:s}}return i}),void 0);if(i&&i.result){const t="columns"===this.Kn.scrollDimension?i.result.column+i.segment.dataStartIndex:i.result.column,e="rows"===this.Kn.scrollDimension?i.result.row+i.segment.dataStartIndex:i.result.row;if("columns"===this.Kn.scrollDimension&&t>=this.UU||"rows"===this.Kn.scrollDimension&&e>=this.UU)return;return{x:i.result.x,y:i.result.y,column:t,row:e,cellValue:i.result.cellValue}}}Xb(t){const e=ct(t,this.At,this.engine.At),i=this.LM.reduce(((i,s)=>{const r=s.shape.Xb(t);if(r){const t=Ze(ct(r,this.At,this.engine.At),e);if(void 0===i||t<i.distance)return{result:r,distance:t,segment:s}}return i}),void 0);if(i&&i.result){const t="columns"===this.Kn.scrollDimension?i.result.column+i.segment.dataStartIndex:i.result.column,e="rows"===this.Kn.scrollDimension?i.result.row+i.segment.dataStartIndex:i.result.row;if("columns"===this.Kn.scrollDimension&&t>=this.UU||"rows"===this.Kn.scrollDimension&&e>=this.UU)return;return{x:i.result.x,y:i.result.y,column:t,row:e,cellValue:i.result.cellValue}}}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Tl(){return 0}Fl(){return 0}ds(t){return super.ds(t),this.LM.forEach((e=>e.shape.ds(t))),this}}class wy extends on{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.IU=p("bilinear"),this.bS=Pr.lineStyle,this.Kn=n}FS(t){return this.IU._(t),this}IS(){return this.IU.C()}MS(t){return this.bS="function"==typeof t?t(this.bS):t,this}TS(){return this.bS}}class Cy extends wy{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.kE=new Fm,this.NG={},this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStylePaletted:()=>K(this.Te)&&this.Te}),this.wN=t,this.CN=e,this.KR=t.kN(),this.CN=e,this.h_=new by(this.wN,t.$U,t.At,Rt,[],{columns:n.sectors,rows:n.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===n.dataOrder?"rows":"columns",LU:this.KR.tE}).MS(nt);const o=2*Math.PI/360,a=new Float32Array(724);let h=0;a[h+0]=0,a[h+1]=0,h+=2;for(let t=0;t<=360;t+=1){const e=t*o,i=Math.cos(e),s=Math.sin(e);a[h+0]=i,a[h+1]=s,h+=2}this.XU={vertexBuffer:this.KR.CV(a),drawMode:this.KR.gl.TRIANGLE_FAN,drawLength:362}}zs(){const t=this.ua(),e=this.Te,i=this.RN.fillStyleSolid(t),s=this.RN.fillStylePaletted(t),r=i||s,n=this.IU.C(),o=this.IU.u,a=this.Wo.C(),h=this.Wo.u;return this.kE.EV(this.At),this.h_.zs(),this.h_.zU?((t||o)&&(this.NG.fill=r?{shader:this.KR.Cz(Yg["2D"],Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dg(this.At),normalSource:void 0}),s&&Yg.PolarHeatmap({interpolation:"bilinear"===n&&"bilinear",intensityTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Kn.dataOrder,lut:s.lut}),i&&Yg.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0),h&&(this.NG.mousePicking=a?{shader:this.KR.Cz(Yg["2D"],Yg.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:dg(this.At),normalSource:void 0}),Yg.MousePicking())}:void 0),this.Aa(e),this.IU.u=!1,this.Wo.u=!1,this):this}qL(t,e){var i;const{vertexBuffer:s,drawLength:r,drawMode:n}=this.XU,o=this.h_.zU;if(!this.NG.fill||!o)return{};const{fillStylePaletted:a,fillStyleSolid:h}=this.NG.fill,l=1===t?null===(i=this.NG.mousePicking)||void 0===i?void 0:i.shader:this.NG.fill.shader;if(!l)return{};const u=this.At.Tb(),c=Math.min(u.start,u.end),d=Math.max(u.start,u.end),f=Math.min(this.Kn.amplitudeStart,this.Kn.amplitudeStart+(this.Kn.annuli-1)*this.Kn.amplitudeStep),g=Math.max(this.Kn.amplitudeStart,this.Kn.amplitudeStart+(this.Kn.annuli-1)*this.Kn.amplitudeStep);let m;return m=u.end>u.start?Math.min(g,d)-u.start:Math.max(f,c)-u.start,this.KR.cE(l).TV(l,((i,l,u,c)=>{if(this.KR.IV(i("uScale"),this.kE.BV()).IV(i("uDisp"),this.kE.LV()).DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0).IV(c("uViewportSize"),[this.wN.oi().x*this.KR.dV()/(1===t?this.cs.Kn.so:1),this.wN.oi().y*this.KR.dV()/(1===t?this.cs.Kn.so:1)]).IV(i("uScaling"),[m,m]).IV(i("uTranslationAxis"),[0,0]).FV(s,void 0,{location:l("aPos"),size:2}).DV(c("uAngleOffset"),this.At.Bb()%(2*Math.PI)).DV(c("uAngleDirection"),this.At.Vb()?1:-1).DV(c("uSectors"),this.Kn.sectors).DV(c("uAnnuli"),this.Kn.annuli),1===t)this.KR.qV(i("uFirstId"),e).XO(u,1);else{if(a){const t=this.h_.nl;this.KR.DV(i("uAmplitudeStart"),this.Kn.amplitudeStart).DV(i("uAmplitudeStep"),this.Kn.amplitudeStep).DV(i("uAmplitudeAxisStart"),this.At.Tb().start).DV(i("uAmplitudeAxisEnd"),this.At.Tb().end).tN(u,a.lut,t).PV(i("uTileIntensityValues"),o.gridTiles[0].intensityDataTexture,0)}h&&this.KR.PR(i("uColor"),h.getColor())}return this.KR.qy(n,r),!0})),{idCount:1}}PN(t,e,i,s,r){return{}}PS(t){return this.h_.PS(t),this}Ot(){return this.h_.Ot(),this}dispose(){return super.dispose(),this.h_.dispose(),this.NG={},this.KR.zV(this.XU.vertexBuffer),this}iE(){return this.dispose(),this}Be(t){return super.Be(t),this.h_.Be(this.Te),this}qc(t){const e=this.Kn.amplitudeStart,i=this.Kn.amplitudeStart+(this.Kn.annuli-1)*this.Kn.amplitudeStep,s=Math.min(e,i),r=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>r)return;let n=Math.round((t.angle-0)/360*this.Kn.sectors);n>=this.Kn.sectors&&(n=0);const o=Math.round((t.amplitude-e)/(i-e)*(this.Kn.annuli-1));return{iAnnulus:o,iSector:n,cellValue:this.WU(o,n),angle:n*(360/this.Kn.sectors),amplitude:e+o*(i-e)/(this.Kn.annuli-1)}}Xb(t){const e=this.Kn.amplitudeStart,i=this.Kn.amplitudeStart+(this.Kn.annuli-1)*this.Kn.amplitudeStep,s=Math.min(e,i),r=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>r)return;const n=(t.angle-0)/360*this.Kn.sectors,o=(t.amplitude-e)/(i-e)*(this.Kn.annuli-1),a=Math.floor(n),h=Math.floor(o),l={point:{x:h,y:a},value:this.WU(h,a)},u={point:{x:h,y:a+1},value:this.WU(h,a+1)},c={point:{x:h+1,y:a},value:this.WU(h+1,a)},d={point:{x:h+1,y:a+1},value:this.WU(h+1,a+1)},f=Hn({x:o,y:n},l,u,c,d);return void 0!==f?{iAnnulus:h,iSector:a,cellValue:f,angle:t.angle,amplitude:t.amplitude}:void 0}WU(t,e){const i="annuli"===this.Kn.dataOrder?t:e,s="annuli"===this.Kn.dataOrder?e:t;for(let t=0;t<this.h_.RU.gridTiles.length;t+=1){const e=this.h_.RU.gridTiles[t];if(i>=e.iFirstVector.primary&&i<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&s>=e.iFirstVector.secondary&&s<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const t=i-e.iFirstVector.primary,r=s-e.iFirstVector.secondary,n=t*e.sizeHeatmapDataVectors.secondary+r;return e.intensityData[n]}}return 0}St(){return 0}vt(){return 0}bt(){return 0}xt(){return 0}Tl(){return 0}Fl(){return 0}}class ky extends Mm{constructor(t){super(t);const{vertices:e,drawMode:i,drawSize:s}=this.CG();this.kG=t.CV(e),this.FG=s,this.IG=i}cE(t){return this.KR.FV(this.kG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}qy(t,e,i){return this.KR.pO(void 0!==e?e:this.IG,i||0,this.FG,t),this}CG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.KR.gl.TRIANGLES,drawSize:6}}jz(){this.KR.zV(this.kG)}}const Ey=t=>{let e=t.YV.Uz.get(void 0);return e||(e=new ky(t),t.YV.Uz.set(void 0,e),e)};class Ry extends pn{constructor(t,i,s,r){super(t,i,s,r,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.jU=Pr.fillStyle,this.ZU=Pr.fillStyle,this.QU=p(e.PointShape.Circle),this.JU=p(5),this.KU=p(0),this.qU=p(void 0),this.VC=!0,this.tY={x:0,y:0}}vd(t){return this.jU=sn(this.jU,t),this}NC(){return this.jU}iY(){return rn(this.sY,this.jU)}eY(){return rn(this.hY,this.ZU)}md(t){return this.ZU=sn(this.ZU,t),ro(this.ZU)&&(this.xd(e.PointShape.Square),this.Cd(1)),this}wd(){return this.ZU}xd(t){return this.QU._(t),co(this.QU.C())&&this.Cd(1),this}bd(){return this.QU.C()}Cd(t){return this.JU._(t),this}GC(){return this.JU.C()}Md(t){return this.KU._(t),this}_d(){return this.KU.C()}WC(t){return this.tY=t,this}UC(){return this.tY}zC(t){return this.qU._(t),this}YC(){return this.qU.C()}}class Iy extends ty{constructor(t,e){super(t,e),this.lW=!1,this.uW={enabled:!1,totalDataPointsAtTime:0},this.dW=t instanceof Vi?{type:"linear",scale:t}:{type:"unknown"},this.aW.Ko("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.lW=!0)}))}rY(t,e){var i,s;const r=null==t?void 0:t.Bc,n=null==t?void 0:t.Lc,o=null==t?void 0:t.yc,a=null==t?void 0:t.gc;if(!t||this.lW||!this.rW||"linear"!==this.dW.type||!r||!n||void 0===o||void 0===a||!e)return{cpStateChanged:!1,cpActive:!1};const h=null===(i=t.Dc())||void 0===i?void 0:i.x,l=null===(s=t.Jc())||void 0===s?void 0:s.x;if(o<2||void 0===h||void 0===l||l===h)return{cpStateChanged:!1,cpActive:!1};const u=this.calculateAvgStepBetweenDataPoints(l,h,o),c=this.dW.scale,d=Math.abs("x"===this.rW?c.Wi().x:c.Wi().y),f=d/u,g=Math.floor(.8*f),m=g*u,y=g>=4,p=this.uW.enabled?this.uW.columnWidthAxis/d<1.5:void 0,x=this.uW.enabled&&g>this.uW.dataPointsPerColumn?g/this.uW.dataPointsPerColumn>=2:void 0;let A;return!0===this.uW.enabled?p?x&&(A={enabled:!0,columnWidthAxis:m,dataPointsPerColumn:g,totalDataPointsAtTime:o}):A=y?{enabled:!0,columnWidthAxis:m,dataPointsPerColumn:g,totalDataPointsAtTime:o}:{enabled:!1,totalDataPointsAtTime:o}:y&&(A={enabled:!0,columnWidthAxis:m,dataPointsPerColumn:g,totalDataPointsAtTime:o}),this.uW=A||{...this.uW,totalDataPointsAtTime:o},!!A&&this.pW(),{cpStateChanged:!!A,cpActive:this.uW.enabled}}nY(t,e){var i,s,r;const n=t.Bc,o=t.Lc,a=t.mc,h=t.yc,l=t.gc;if(this.lW||!this.uW.enabled||!n||!o||void 0===e)return;const u=n.length,c=this.uW.columnWidthAxis,d=this.At.x.getInnerStart(),f=this.At.x.getInnerEnd(),g=po(d,f,n,a,h,l,e,1);if(!g)return;const m=n[g.iFirstSampleDataArray];if(this.oY){if(this.oY.iFirstPackedSample<g.iFirstSample){const t=Math.min(Math.floor((m-this.oY.origin)/c),this.oY.packedColumnsCount);if(t>0)if(this.oY.packedColumnsCount-=t,this.oY.packedColumnsCount>0){this.oY.packedDataX.splice(0,2*t),this.oY.packedDataY.splice(0,2*t),this.oY.packedDataColors&&this.oY.packedDataColors.splice(0,2*t),this.oY.packedDataLookupValues&&this.oY.packedDataLookupValues.splice(0,2*t),this.oY.origin+=t*c;const e=xo(this.oY.origin,Math.max(a-1-u+1,0),a-1,(t=>n[yo(t,a,u)])),i=yo(e,a,u);this.oY.iFirstPackedSample=n[i]>=this.oY.origin?e:e+1}else this.oY=void 0}if(void 0!==(null===(i=this.oY)||void 0===i?void 0:i.iLastPackedSample)&&this.oY.iLastPackedSample>g.iLastSample){const t=n[g.iLastSampleDataArray],e=Math.min(Math.floor((this.oY.origin+this.oY.packedColumnsCount*c-t)/c),this.oY.packedColumnsCount);if(e>0)if(this.oY.packedColumnsCount-=e,this.oY.packedColumnsCount>0){for(let t=0;t<2*e;t+=1)this.oY.packedDataX.pop(),this.oY.packedDataY.pop(),this.oY.packedDataColors&&this.oY.packedDataColors.pop(),this.oY.packedDataLookupValues&&this.oY.packedDataLookupValues.pop();const t=xo(this.oY.origin+this.oY.packedColumnsCount*c,Math.max(a-1-u+1,0),a-1,(t=>n[yo(t,a,u)])),i=yo(t,a,u);this.oY.iLastPackedSample=n[i]<=this.oY.origin+this.oY.packedColumnsCount*c?t:t-1}else this.oY=void 0}}const y=this.oY||{origin:m,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.Wc?[]:void 0,packedDataLookupValues:t.Gc?[]:void 0,packedDataSize:t.Uc?[]:void 0,packedDataRotation:t.Yc?[]:void 0,iFirstPackedSample:g.iFirstSample,iLastPackedSample:void 0},p=(t,e,i)=>{let s=Math.min(t,t+e*c),r=Math.max(t,t+e*c),h=i;const l=[];let m=ze,p=ze,x=-1,A=Ve,S=Ve,v=-1,b=0;for(;h<=g.iLastSample&&h>=g.iFirstSample;){const i=h%u,g=n[i],M=o[i];if(s<=g&&g<=r)b+=1,Number.isNaN(M)||(M>p&&(m=g,p=M,x=h),M<S&&(A=g,S=M,v=h)),h+=e;else{if(b>0)m=m===ze?Number.NaN:m,p=p===ze?Number.NaN:p,A=A===Ve?Number.NaN:A,S=S===Ve?Number.NaN:S,x<v?(l.push({iFirst:x,iSecond:v}),e>0?(y.packedDataX.push(m),y.packedDataY.push(p),y.packedDataX.push(A),y.packedDataY.push(S)):(y.packedDataX.unshift(A),y.packedDataY.unshift(S),y.packedDataX.unshift(m),y.packedDataY.unshift(p))):(l.push({iFirst:v,iSecond:x}),e>0?(y.packedDataX.push(A),y.packedDataY.push(S),y.packedDataX.push(m),y.packedDataY.push(p)):(y.packedDataX.unshift(m),y.packedDataY.unshift(p),y.packedDataX.unshift(A),y.packedDataY.unshift(S)));else{const t=e>0?y.iLastPackedSample:y.iFirstPackedSample;if(void 0===t)l.push({iFirst:0,iSecond:0}),e>0?(y.packedDataX.push(Number.NaN),y.packedDataY.push(Number.NaN),y.packedDataX.push(Number.NaN),y.packedDataY.push(Number.NaN)):(y.packedDataX.unshift(Number.NaN),y.packedDataY.unshift(Number.NaN),y.packedDataX.unshift(Number.NaN),y.packedDataY.unshift(Number.NaN));else{const i=yo(t,a,u),h=n[i],d=o[i],f=(s+r)/2,m=f-e*c/6,p=d+(m-h)/(g-h)*(M-d),x=f+e*c/6,A=d+(x-h)/(g-h)*(M-d);l.push({iFirst:t,iSecond:t}),e>0?(y.packedDataX.push(m),y.packedDataY.push(p),y.packedDataX.push(x),y.packedDataY.push(A)):(y.packedDataX.unshift(m),y.packedDataY.unshift(p),y.packedDataX.unshift(x),y.packedDataY.unshift(A))}}if(y.packedColumnsCount+=1,e>0?y.iLastPackedSample=h-1:(y.iFirstPackedSample=h+1,y.origin=s),s=Math.min(t+l.length*e*c,t+(l.length+1)*e*c),r=Math.max(t+l.length*e*c,t+(l.length+1)*e*c),b=0,m=ze,p=ze,x=-1,A=Ve,S=Ve,v=-1,s<d||r>f)break}}return l},x=p(y.origin+y.packedColumnsCount*c,1,void 0!==(null===(s=this.oY)||void 0===s?void 0:s.iLastPackedSample)?this.oY.iLastPackedSample+1:g.iFirstSample),A=p(y.origin,-1,void 0!==(null===(r=this.oY)||void 0===r?void 0:r.iFirstPackedSample)?this.oY.iFirstPackedSample-1:g.iFirstSample),S=t.Wc&&y.packedDataColors?[t.Wc,y.packedDataColors]:void 0,v=t.Gc&&y.packedDataLookupValues?[t.Gc,y.packedDataLookupValues]:void 0,b=t.Uc&&y.packedDataSize?[t.Uc,y.packedDataSize]:void 0,M=t.Yc&&y.packedDataRotation?[t.Yc,y.packedDataRotation]:void 0;if(S||v||b||M){for(const t of x){const e=yo(t.iFirst,a,u),i=yo(t.iSecond,a,u);S&&S[1].push(S[0][e],S[0][i]),v&&v[1].push(v[0][e],v[0][i]),b&&b[1].push(b[0][e],b[0][i]),M&&M[1].push(M[0][e],M[0][i])}for(const t of A){const e=yo(t.iFirst,a,u),i=yo(t.iSecond,a,u);S&&S[1].unshift(S[0][i],S[0][e]),v&&v[1].unshift(v[0][i],v[0][e]),b&&b[1].unshift(b[0][i],b[0][e]),M&&M[1].unshift(M[0][i],M[0][e])}}return this.oY=y.packedColumnsCount>0?y:void 0,{x:y.packedDataX,y:y.packedDataY,color:y.packedDataColors,lookup:y.packedDataLookupValues,size:y.packedDataSize,rotation:y.packedDataRotation}}pW(){this.oY=void 0}vW(t){if(this.rW&&"linear"===this.dW.type){const e="x"===this.rW?this.dW.scale.x.ug:this.dW.scale.y.ug;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.ah===Ws.progressive||e.ah===Ws.regressive){const e=Math.abs("x"===this.rW?this.dW.scale.x.getInnerInterval():this.dW.scale.y.getInnerInterval());if(this.uW.enabled)return 2*e/this.uW.columnWidthAxis;const i=t.length,s=t[0],r=t[i-1];return e/this.calculateAvgStepBetweenDataPoints("x"===this.rW?s.x:s.y,"x"===this.rW?r.x:r.y,i)}}}SW(t,e,i){if(!this.rW)return e;const s=i.length;let r=jr(i,t.min,this.rW,this.nW,0,s-1);void 0===r&&(r=this.nW?s-1:0);let n=jr(i,t.max,this.rW,this.nW,0,s-1);return void 0===n&&(n=this.nW?0:s-1),1+Math.abs(n-r)}xW(){}}class _y extends Ry{constructor(t,e,i,s){super(t,e,i,s),this.kE=new Fm,this.OW=new Iy(this.At,this),this.RN=fg({lineStyleSolid:()=>ns(this.yu)&&this.yu,lineStyleDashed:()=>ho(this.yu)&&this.yu,strokeFillSolid:()=>{const t=this.yu.getFillStyle();return Y(t)&&t},strokeFillLinearGradient:()=>{const t=this.yu.getFillStyle();return st(t)&&t},strokeFillRadialGradient:()=>{const t=this.yu.getFillStyle();return tt(t)&&t},strokeFillIndividual:()=>{const t=this.yu.getFillStyle();return H(t)&&t},strokeFillPaletted:()=>{const t=this.yu.getFillStyle();return K(t)&&t},areaFillSolid:()=>Y(this.jU)&&this.jU,areaFillLinearGradient:()=>st(this.jU)&&this.jU,areaFillRadialGradient:()=>tt(this.jU)&&this.jU,areaFillIndividual:()=>H(this.jU)&&this.jU,areaFillPaletted:()=>K(this.jU)&&this.jU,markerFillSolid:()=>Y(this.ZU)&&this.ZU,markerFillLinearGradient:()=>st(this.ZU)&&this.ZU,markerFillRadialGradient:()=>tt(this.ZU)&&this.ZU,markerFillPaletted:()=>K(this.ZU)&&this.ZU,markerFillIndividual:()=>H(this.ZU)&&this.ZU,markerFillImage:()=>ro(this.ZU)&&this.ZU,markerShapeIcon:()=>{const t=this.QU.C();return co(t)&&t}}),this.pd=p(void 0),this.aY=[],this.rl=!1,this.lY=[],this.uY=void 0,this.bM={Vk:"x",Ok:()=>this.cY()},this.wU=(t,e,i)=>{var s;const r=null===(s=this.dY)||void 0===s?void 0:s.shapeIcon;let n=t,o=e;return r&&(n=r.oi().x,o=r.oi().y),Cm(t,e,n*this.JU.C(),o*this.JU.C(),i)},this.CN=e,this.NG={type:"none"},this.KR=t.kN(),this.wN=t,this.VG=this.KR.MO}yd(t){return this.pd._(Fe(t,this.pd.C(),(()=>[t.td(((e,i)=>{this.aY.push({min:e,max:i}),void 0===t.jc()&&this.fY&&this.lY.push({min:e,max:i})})),t.sd((()=>{this.rl=!0,this.fY=void 0,this.uY=void 0,this.OW.pW()}))]))),this.uY=void 0,this}cY(){var t,i,s,r,n,o,a,h,l,c,d,f,g;const m=null===(t=this.pd.C())||void 0===t?void 0:t.Gt,y=this.pd.u,p=null==m?void 0:m.Bc,x=null==m?void 0:m.Lc;if(!m||!p||!x)return;const A=m.Gc,S=m.Wc,v=m.Uc,b=m.Yc,M=m.mc,T=m.yc,w=m.gc,C=y||this.ga()||this.iY()||this.eY(),k=this.RN.lineStyleSolid(C),E=this.RN.lineStyleDashed(C),R=k||E,I=R&&R.getThickness(),_=this.RN.strokeFillSolid(C),F=this.RN.strokeFillLinearGradient(C),D=this.RN.strokeFillRadialGradient(C),B=this.RN.strokeFillIndividual(C),P=this.RN.strokeFillPaletted(C),L=_||F||D||B||P,V=this.RN.areaFillSolid(C),z=this.RN.areaFillLinearGradient(C),N=this.RN.areaFillRadialGradient(C),O=this.RN.areaFillIndividual(C),U=this.RN.areaFillPaletted(C),Y=V||z||N||O||U,G=this.RN.markerFillSolid(C),H=this.RN.markerFillLinearGradient(C),W=this.RN.markerFillRadialGradient(C),K=this.RN.markerFillPaletted(C),X=this.RN.markerFillIndividual(C),j=this.RN.markerFillImage(C),$=G||H||W||K||X||j,Z=this.QU.C(),Q=this.QU.u,q=this.RN.markerShapeIcon(Q),J=this.JU.C(),tt=this.JU.u,et=this.qU.u,it=this.aY.length>0||et,st=this.rl,rt=st?[m.Zc()]:(t=>{const e=[];for(const i of t){let t=!1;for(const s of e)if(i.min>=s.min&&i.min<=s.max||i.max>=s.min&&i.max<=s.max){s.min=Math.min(s.min,i.min),s.max=Math.min(s.max,i.max),t=!0;break}t||e.push(i)}return e})(this.aY),nt=this.At.x.Yt,ot=this.At.x.getInnerStart(),at=this.At.x.getInnerEnd(),ht=m.jc(),lt=!!E,ut=this.Wo.C(),ct=this.Wo.u,{cpStateChanged:dt,cpActive:ft}=this.OW.rY(m,this.VC);if(ht&&ft&&(dt||st||it||nt||C)){const t=this.OW.nY(m,ht);if(t){const e=!dt&&!st&&!C;this.AY=Fy(this.KR,[t.x,t.y],t.color,t.lookup,t.size,t.rotation,lt,this.AY,e,ht,1e3,this.At._i(),(t=>qt(t,this.At._i()))),this.gY={min:Ve,max:ze};const i=t.y.length;for(let e=0;e<i;e+=1){const i=t.y[e];Number.isNaN(i)||(this.gY.min=Math.min(this.gY.min,i),this.gY.max=Math.max(this.gY.max,i))}}}if(ht&&!ft&&(dt||st||it||nt||et||C)){const t=po(ot,at,p,M,T,w,ht,1);if(!this.pY||(null==t?void 0:t.iFirstSample)!==this.pY.iFirstSample||t.iLastSample!==this.pY.iLastSample||st){this.gY={min:Ve,max:ze};for(const e of(null==t?void 0:t.dataRanges)||[])for(let t=e.offset;t<e.offset+e.count;t+=1){const e=x[t];Number.isNaN(e)||(this.gY.min=Math.min(this.gY.min,e),this.gY.max=Math.max(this.gY.max,e))}}if(this.pY=t,void 0===t)this.KR.zV(null===(i=this.AY)||void 0===i?void 0:i.bufferX),this.KR.zV(null===(s=this.AY)||void 0===s?void 0:s.bufferY),this.AY=void 0,this.KR.zV(null===(r=this.yY)||void 0===r?void 0:r.bufferX),this.KR.zV(null===(n=this.yY)||void 0===n?void 0:n.bufferY),this.yY=void 0,this.mY=t;else if(dt||st||!this.mY||t.iFirstSample<this.mY.iFirstSample||t.iLastSample>this.mY.iLastSample||C){let i,s,r,n,a,h;if(1===t.dataRanges.length){const e=t.dataRanges[0];i=p.subarray(e.offset,e.offset+e.count),s=x.subarray(e.offset,e.offset+e.count),r=S?S.subarray(e.offset,e.offset+e.count):void 0,n=A?A.subarray(e.offset,e.offset+e.count):void 0,a=v?v.subarray(e.offset,e.offset+e.count):void 0,h=b?b.subarray(e.offset,e.offset+e.count):void 0}else{const e=t.dataRanges[0],o=t.dataRanges[1],l=e.count+o.count;i=new Float32Array(l),i.set(p.subarray(e.offset),0),i.set(p.subarray(o.offset,o.offset+o.count),e.count),s=new Float32Array(l),s.set(x.subarray(e.offset),0),s.set(x.subarray(o.offset,o.offset+o.count),e.count),S&&(r=new Uint32Array(l),r.set(S.subarray(e.offset),0),r.set(S.subarray(o.offset,o.offset+o.count),e.count)),A&&(n=new Float32Array(l),n.set(A.subarray(e.offset),0),n.set(A.subarray(o.offset,o.offset+o.count),e.count)),v&&(a=new Float32Array(l),a.set(v.subarray(e.offset),0),a.set(v.subarray(o.offset,o.offset+o.count),e.count)),b&&(h=new Float32Array(l),h.set(b.subarray(e.offset),0),h.set(b.subarray(o.offset,o.offset+o.count),e.count))}const l=!dt&&!st&&!C;this.yY=Fy(this.KR,[i,s],r,n,a,h,lt,this.yY,l,ht,1e3,this.At._i(),(t=>qt(t,this.At._i())));let c=i,d=s,f=r,g=n;const m=this.qU.C();if(m){const t="spline"===m.type?((t,e)=>{const{xValues:i,yValues:s,lookupValues:r,colors:n}=t;if(i.length<=2)return{xValues:Array.from(i),yValues:Array.from(s),lookupValues:r?Array.from(r):void 0,colors:n?Array.from(n):void 0};const o=((t,e)=>{const i=1e-5,s=t.length-1,r=Array(s);if(s>1){let n=u(0,0),o=u(0,0),a=u(0,0),h=oi(ci({x:t[1],y:e[1]},{x:t[0],y:e[0]}));const l=3;let c=0,d=0;for(let f=0;f<s;f+=1){const g=Array(4);if(g[0]={x:t[f],y:e[f]},g[1]={x:t[f],y:e[f]},g[3]={x:t[f+1],y:e[f+1]},g[2]={x:t[f+1],y:e[f+1]},a=h,n=o,f+1<s?(h=t[f+2]===t[f+1]&&e[f+2]===e[f+1]?u(0,0):oi(ci({x:t[f+2],y:e[f+2]},{x:t[f+1],y:e[f+1]})),o=oi(ui(a,h))):o=u(0,0),e[f+1]===e[f])c=0,d=0;else{const e=t[f+1]-t[f];c=Math.abs(n.x)>i?Math.abs(e/(l*n.x)):1,d=Math.abs(o.x)>i?Math.abs(e/(l*o.x)):1}g[1]=ui(li(n,c),g[1]),g[2]=ci(g[2],li(o,d)),r[f]=g}}return r.length>0?r:[]})(i,s),a=o.length,h=[],l=[],c=[],d=[];for(let t=0;t<a;t+=1){const i=o[t];for(let t=0;t<e;t+=1){const s=t/(e-1),r=s*s,n=r*s,o=1-s,a=o*o,u=a*o;h.push(u*i[0].x+3*s*a*i[1].x+3*r*o*i[2].x+n*i[3].x),l.push(u*i[0].y+3*s*a*i[1].y+3*r*o*i[2].y+n*i[3].y)}}if(r)for(let t=0;t<h.length;t+=1){const i=r[Math.round(t/e)];d[t]=i}if(n)for(let t=0;t<h.length;t+=1){const i=n[Math.round(t/e)];c[t]=i}return{xValues:h,yValues:l,lookupValues:r?d:void 0,colors:n?c:void 0}})({xValues:i,yValues:s,lookupValues:n,colors:r},m.resolution||20):"step"===m.type?((t,i)=>{const{xValues:s,yValues:r,lookupValues:n,colors:o}=t,a=[],h=[],l=[],u=[],c=s.length,d=i;if(c>0){let t=0,e=s[0],i=r[0];a[t]=e,h[t]=i,t+=1;for(let n=1;n<c;n+=1){const o=s[n],l=r[n];if(d<=0)a[t]=e,h[t]=l,t+=1;else{const s=e*(1-d)+o*d;a[t]=s,h[t]=i,t+=1,a[t]=s,h[t]=l,t+=1}a[t]=o,h[t]=l,t+=1,e=o,i=l}}if(n)if(d===e.StepOptions.before){u[0]=n[0];for(let t=1;t<c;t+=1)u[2*t-1]=n[t],u[2*t]=n[t]}else if(d===e.StepOptions.middle||d===e.StepOptions.after){u[0]=n[0],u[1]=n[0];for(let t=1;t<c;t+=1)u[3*t-1]=n[t],u[3*t]=n[t],u[3*t+1]=n[t]}if(o)if(d===e.StepOptions.before){l[0]=o[0];for(let t=1;t<c;t+=1)l[2*t-1]=o[t],l[2*t]=o[t]}else if(d===e.StepOptions.middle||d===e.StepOptions.after){l[0]=o[0],l[1]=o[0];for(let t=1;t<c;t+=1)l[3*t-1]=o[t],l[3*t]=o[t],l[3*t+1]=o[t]}return{xValues:a,yValues:h,lookupValues:n?u:void 0,colors:o?l:void 0}})({xValues:i,yValues:s,lookupValues:n,colors:r},"before"===m.step?0:"after"===m.step?1:.5):void 0;c=t?t.xValues:c,d=t?t.yValues:d,f=(null==t?void 0:t.colors)?t.colors:f,g=(null==t?void 0:t.lookupValues)?t.lookupValues:g}this.AY=c===i&&d===s?this.yY:Fy(this.KR,[c,d],f,g,void 0,void 0,lt,(null===(o=this.AY)||void 0===o?void 0:o.bufferX)===this.yY.bufferX?void 0:this.AY,!(!l||et||m),ht,1e3,this.At._i(),(t=>qt(t,this.At._i()))),this.mY=t}}else this.pY=void 0;if(!ht&&(st||it||C)){if(!this.AY||this.AY.bufferSize<m.yc||lt){const t=void 0!==m.Hc?m.Hc:m.yc;let e,i=0,s=0;if(lt){const r=Dy(p,x,p[0],x[0],0,0);e=this.KR.sO(2*t,r[0],null===(a=this.AY)||void 0===a?void 0:a.bufferLengthSoFar,Float32Array),i=r[1],s=r[2]}this.AY={bufferX:this.KR.sO(t*(this.At._i()?2:1),qt(p,this.At._i()),null===(h=this.AY)||void 0===h?void 0:h.bufferX),bufferY:this.KR.sO(t*(this.At._i()?2:1),qt(x,this.At._i()),null===(l=this.AY)||void 0===l?void 0:l.bufferY),bufferColors:S?this.KR.sO(t,S,null===(c=this.AY)||void 0===c?void 0:c.bufferColors,Uint32Array):void 0,bufferLookupValues:A?this.KR.sO(t,A,null===(d=this.AY)||void 0===d?void 0:d.bufferLookupValues,Float32Array):void 0,bufferSizes:v?this.KR.sO(t,v,null===(f=this.AY)||void 0===f?void 0:f.bufferSizes,Float32Array):void 0,bufferRotations:b?this.KR.sO(t,b,null===(g=this.AY)||void 0===g?void 0:g.bufferRotations,Float32Array):void 0,bufferLengthSoFar:e,lengthSoFarX:i,lengthSoFarY:s,bufferSize:t,valueCount:m.yc}}else{const t=this.AY.bufferX,e=this.AY.bufferY;rt.forEach((i=>{var s,r,n,o;const a=p.subarray(i.min,i.max+1),h=x.subarray(i.min,i.max+1);if(this.KR.eO(t,i.min*(this.At._i()?2:1),qt(a,this.At._i())),this.KR.eO(e,i.min*(this.At._i()?2:1),qt(h,this.At._i())),S&&(null===(s=this.AY)||void 0===s?void 0:s.bufferColors)){const t=S.subarray(i.min,i.max+1);this.KR.eO(this.AY.bufferColors,i.min,t,Uint32Array)}if(A&&(null===(r=this.AY)||void 0===r?void 0:r.bufferLookupValues)){const t=A.subarray(i.min,i.max+1);this.KR.eO(this.AY.bufferLookupValues,i.min,t,Float32Array)}if(b&&(null===(n=this.AY)||void 0===n?void 0:n.bufferRotations)){const t=b.subarray(i.min,i.max+1);this.KR.eO(this.AY.bufferRotations,i.min,t,Float32Array)}if(v&&(null===(o=this.AY)||void 0===o?void 0:o.bufferSizes)){const t=v.subarray(i.min,i.max+1);this.KR.eO(this.AY.bufferSizes,i.min,t,Float32Array)}})),this.AY.valueCount=m.yc}this.yY=this.AY}if(C||tt||Q||ct){if(L&&R&&!1!==I){const t=-1===I?"primitive":"triangulated",e=P?["lookup",P.lookUpProperty,P.lut]:B?"attribute":F?["gradient",F]:D?["gradient",D]:"uniform";this.NG="primitive"===t?{type:t,shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0}),E&&Yg.StippleTexture),lineStyleSolid:k,lineStyleDashed:E,fillStyleSolid:_,fillStyleLinearGradient:F,fillStyleRadialGradient:D,fillStyleIndividual:B,fillStylePaletted:P,mousePickingShader:ut&&this.KR.Cz(Yg["2D"],Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0}),E&&Yg.StippleTexture,Yg.MousePicking({useVertexId:!0}))}:"triangulated"===t?{type:t,shader:this.KR.Cz(Yg["2D"],Yg.Color({dataType:e}),Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0}),this.VG?Yg.AliasedEdge:void 0,E&&Yg.StippleTextureInstanced),geometry:$m(this.KR,I),thickness:I,lineStyleSolid:k,lineStyleDashed:E,fillStyleSolid:_,fillStyleLinearGradient:F,fillStyleRadialGradient:D,fillStyleIndividual:B,fillStylePaletted:P,mousePickingShader:ut&&this.KR.Cz(Yg["2D"],Yg.LineInstanced2D({axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0}),E&&Yg.StippleTextureInstanced,Yg.MousePicking())}:{type:"none"}}else this.NG={type:"none"};if(this.vY=Y?{shader:this.KR.Cz(Yg["2D"],U&&Yg.Color({dataType:["lookup",U.lookUpProperty,U.lut]}),O&&Yg.Color({dataType:"attribute"}),V&&Yg.Color({dataType:"uniform"}),z&&Yg.Color({dataType:["gradient",z]}),N&&Yg.Color({dataType:["gradient",N]}),Yg.Area2D({axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0})),geometry:Ey(this.KR),fillStyleSolid:V,fillStyleLinearGradient:z,fillStyleRadialGradient:N,fillStyleIndividual:O,fillStylePaletted:U,mousePickingShader:ut&&this.KR.Cz(Yg["2D"],Yg.Area2D({axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0}),Yg.MousePicking())}:void 0,$){const t=!(!j&&!q),e=J>1||t,i=v?"attribute":"uniform",s=!e&&Yg.PointSize("uniform"),r=Yg.VertexLocation({offset:e&&!t?{dataType:i,sizeUnit:"px",symmetric:!0,rotation:{dataType:b?"attribute-deg":"uniform"},useAlignment:!0}:e&&t?{dataType:i,sizeUnit:"scale",rotation:{dataType:b?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:dg(this.At),normalSource:void 0,splitPosAttribute:!0});this.dY={shader:this.KR.Cz(Yg["2D"],s,r,G&&Yg.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!q}),H&&Yg.Color({dataType:["gradient",H],overrideOpacity:!0,maskTexture:!!q}),W&&Yg.Color({dataType:["gradient",W],overrideOpacity:!0,maskTexture:!!q}),K&&Yg.Color({dataType:["lookup",K.getLookUpProperty(),K.getPalette()],overrideOpacity:!0,maskTexture:!!q}),X&&Yg.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!q}),j&&Yg.Color({dataType:["image",j],overrideOpacity:!0,maskTexture:!!q})),geometry:uy(Z,this.KR,"uniform"===i?J:25),fillStyleSolid:G,fillStyleLinearGradient:H,fillStyleRadialGradient:W,fillStylePaletted:K,fillStyleIndividual:X,fillStyleImage:j,mousePickingShader:ut&&this.KR.Cz(Yg["2D"],s,r,Yg.MousePicking({useVertexId:!e})),shapeIcon:q,pointSizeAsScale:t,instancedRendering:e}}else this.dY=void 0}if((void 0===this.uY||it)&&A&&(mg(P)||mg(U)||mg(K))){const t=this.uY?rt:[m.Zc()];let e=this.uY?this.uY.max:ze,i=this.uY?this.uY.min:Ve;const s=A;t.forEach((t=>{for(let r=t.min;r<=t.max;r+=1){const t=s[r];i=t<i?t:i,e=t>e?t:e}})),this.uY={min:i,max:e}}this._U=this.KR.iN(this,this._U,j,q,tt,this.wU),this.WG=E?this.KR.QO(E.getPattern()):void 0,this.xu(this.yu),this.sY=this.jU,this.hY=this.ZU,this.QU.u=!1,this.JU.u=!1,this.aY.length=0,this.rl=!1,this.qU.u=!1,this.pd.u=!1,this.Wo.u=!1}zs(){this.cY();const t=this.RN.strokeFillLinearGradient(!1),e=this.RN.strokeFillRadialGradient(!1),i=this.RN.areaFillLinearGradient(!1),s=this.RN.areaFillRadialGradient(!1),r=this.RN.markerFillLinearGradient(!1),n=this.RN.markerFillRadialGradient(!1);this.kE.EV(this.At);const o=en({min:{x:this.vt(),y:this.At.y.getInnerStart()},max:{x:this.St(),y:this.bt()}},{x:this.Tl(),y:this.Fl()},this.At),a=en({min:{x:this.vt(),y:this.xt()},max:{x:this.St(),y:this.bt()}},{x:this.Tl(),y:this.Fl()},this.At);return this.SY=this.KR.nN(t,this,a),this.xY=this.KR.oN(e,this,a),this.bY=this.KR.nN(i,this,o),this.MY=this.KR.oN(s,this,o),this._Y=this.KR.nN(r,this,a),this.wY=this.KR.oN(n,this,a),this}qL(t,e){var i,s,r,n,o,a,h,l,u,c,d,f,g,m,y,p,x,A,S;const v=this.KR.gl,b=null===(i=this.AY)||void 0===i?void 0:i.bufferX,M=null===(s=this.AY)||void 0===s?void 0:s.bufferY,T=null===(r=this.AY)||void 0===r?void 0:r.bufferColors,w=null===(n=this.AY)||void 0===n?void 0:n.bufferLookupValues,C=null===(o=this.AY)||void 0===o?void 0:o.valueCount,k=null===(a=this.yY)||void 0===a?void 0:a.valueCount,E=null===(h=this.pd.C())||void 0===h?void 0:h.Gt,R=null==E?void 0:E.jc(),I=Math.max((null===(l=this.AY)||void 0===l?void 0:l.valueCount)||0,(null===(u=this.yY)||void 0===u?void 0:u.valueCount)||0);if(!b||!M||!E)return{};const _=(e,i,s)=>{if(By(this.KR,e,this.At._i(),b,"aLocation","X",1,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT),By(this.KR,e,this.At._i(),M,"aLocation","Y",1,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT),i&&1!==t){if(!T)return!1;By(this.KR,e,!1,T,"aColor","",4,!0,v.UNSIGNED_BYTE,1)}if(s&&"value"===s.lookUpProperty&&1!==t){if(!w)return!1;By(this.KR,e,!1,w,"aLookupValue","",1,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},F=1===t?null===(c=this.vY)||void 0===c?void 0:c.mousePickingShader:null===(d=this.vY)||void 0===d?void 0:d.shader;if(this.vY&&F&&void 0!==C&&C>0&&R&&2!==t){const i=this.vY;this.KR.cE(F).TV(F,((s,r,n,o)=>!!this.KR.eN(n,t,this,{uniforms:this.kE,idFirst:e,useInstanceID:1===t?I:void 0,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStylePaletted:i.fillStylePaletted,linearGradientInfo:this.bY,radialGradientInfo:this.MY,lookupValueRange:i.fillStylePaletted?gg(i.fillStylePaletted,this,this.uY):void 0,lookupValueBuffer:null})&&!!_(n,i.fillStyleIndividual,i.fillStylePaletted)&&(null==i||i.geometry.cE(n).qy(C-1),!0)))}const D="none"===this.NG.type?void 0:1===t?this.NG.mousePickingShader:this.NG.shader;if("none"!==this.NG.type&&D&&void 0!==C&&C>0){const i=this.NG;this.KR.cE(D).TV(D,((s,r,n,o)=>{var a,h;if(!this.KR.eN(n,t,this,{uniforms:this.kE,idFirst:e,useInstanceID:1===t&&"triangulated"===i.type?I:void 0,useVertexID:1===t&&"primitive"===i.type?I:void 0,fillStyleSolid:i.fillStyleSolid,fillStylePaletted:i.fillStylePaletted,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStyleIndividual:i.fillStyleIndividual,linearGradientInfo:this.SY,radialGradientInfo:this.xY,lookupValueRange:i.fillStylePaletted?gg(i.fillStylePaletted,this,this.uY):void 0,lookupValueBuffer:"primitive"===i.type?w:null,colorBuffer:"primitive"===i.type?T:null,coordsX:"primitive"===i.type?b:void 0,coordsY:"primitive"===i.type?M:void 0,coordsHighPrecision:this.At._i()}))return!1;if(i.lineStyleDashed){if(!this.WG)return!1;this.KR.IV(s("uStippleCount"),[this.cs.oi().x/this.WG.qO,this.cs.oi().y/this.WG.qO]).DV(o("uStippleTextureWidthLimiter"),this.WG.KO/this.WG.qO).DV(s("uStippleScale"),i.lineStyleDashed.getPatternScale()).PV(s("uStippleTexture"),this.WG.JO,1)}if("primitive"===i.type){if(i.lineStyleDashed){if(!(null===(a=this.AY)||void 0===a?void 0:a.bufferLengthSoFar))return!1;this.KR.oO(r("aLengthSoFar"),this.AY.bufferLengthSoFar)}Qm.EG(this.wN,C)}else{if(!_(n,i.fillStyleIndividual,i.fillStylePaletted))return!1;if(i.lineStyleDashed){if(!(null===(h=this.AY)||void 0===h?void 0:h.bufferLengthSoFar))return!1;By(this.KR,n,!1,this.AY.bufferLengthSoFar,"aLengthSoFar","",2,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT)}Zm.qL(this.wN,i.geometry,n,this.VG&&1!==t,1===t,i.thickness,C-1)}return!0}))}const B=null===(f=this.yY)||void 0===f?void 0:f.bufferX,P=null===(g=this.yY)||void 0===g?void 0:g.bufferY,L=null===(m=this.yY)||void 0===m?void 0:m.bufferColors,V=null===(y=this.yY)||void 0===y?void 0:y.bufferLookupValues,z=null===(p=this.yY)||void 0===p?void 0:p.bufferSizes,N=null===(x=this.yY)||void 0===x?void 0:x.bufferRotations,O=1===t?null===(A=this.dY)||void 0===A?void 0:A.mousePickingShader:null===(S=this.dY)||void 0===S?void 0:S.shader,U=this.dY;let Y=1;if(R&&(F||D)){const t=this.pd?Math.abs((this.St()-this.vt())/E.getSampleCount()):0,e=this.At.x.getInnerInterval()/t,i=this.JU.C(),s=this.At.x.ri()/i/1,r=2*s;Y=e<=s?1:Math.max(1-(e-s)/(r-s),0)}if(O&&U&&B&&P&&Y>0&&void 0!==k&&k>0){const i=U,s=i.instancedRendering?1:0;this.KR.cE(O).TV(O,((r,n,o,a)=>{if(!this.KR.eN(o,t,this,{uniforms:this.kE,idFirst:e,useInstanceID:i.instancedRendering&&1===t?I:void 0,useVertexID:i.instancedRendering||1!==t?void 0:I,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,linearGradientInfo:this._Y,radialGradientInfo:this.wY,fillStylePaletted:i.fillStylePaletted,fillStyleIndividual:i.fillStyleIndividual,lookupValueRange:i.fillStylePaletted?gg(i.fillStylePaletted,this,this.uY):void 0,lookupValueBuffer:V,lookupValueAttribDivisor:s,colorBuffer:L,colorAttribDivisor:s,fillStyleImage:i.fillStyleImage,texturedFillGLInfo:this._U,texCoordAttribDivisor:0,maskTexture:i.shapeIcon&&this._U,maskTextureCoordsAttribDivisor:0}))return!1;if(this.At._i()?this.KR.FV(B,s,{location:n("aPos_highpartX"),size:1},{location:n("aPos_lowpartX"),size:1}).FV(P,s,{location:n("aPos_highpartY"),size:1},{location:n("aPos_lowpartY"),size:1}):this.KR.dO(n("aPosX"),B,s).dO(n("aPosY"),P,s),1!==t&&this.KR.DV(r("uOpacity"),Y),i.instancedRendering)if(N)this.KR.dO(n("aRotDeg"),N,s).DV(r("uBaseRotDeg"),i.geometry.JW);else{const t=xi(this.KU.C()+i.geometry.JW),e=Math.sin(t),s=Math.cos(t);this.KR.IV(r("uRot"),[e,s])}return this.KR.IV(a("uOffsetAlignment"),[-this.tY.x/2,-this.tY.y/2]),i.geometry.qy(o,z,k,i.pointSizeAsScale&&this._U?{scale:this.JU.C(),width:i.shapeIcon?i.shapeIcon.oi().x:this._U.texture.Qz,height:i.shapeIcon?i.shapeIcon.oi().y:this._U.texture.Jz}:this.JU.C(),i.instancedRendering),!0}))}return{idCount:I}}PN(t,e,i,s,r){var n;const o=null===(n=this.pd.C())||void 0===n?void 0:n.Gt;if(null==o?void 0:o.jc())return{};const a=t-e;return{info:{dataPoint:null==o?void 0:o.Kc(a)}}}dispose(){var t,e,i,s,r,n,o,a,h,l,u,c,d;return super.dispose(),this.KR.zV(null===(t=this.AY)||void 0===t?void 0:t.bufferX),this.KR.zV(null===(e=this.AY)||void 0===e?void 0:e.bufferY),this.KR.zV(null===(i=this.AY)||void 0===i?void 0:i.bufferColors),this.KR.zV(null===(s=this.AY)||void 0===s?void 0:s.bufferLookupValues),this.KR.zV(null===(r=this.AY)||void 0===r?void 0:r.bufferRotations),this.KR.zV(null===(n=this.AY)||void 0===n?void 0:n.bufferSizes),this.KR.zV(null===(o=this.yY)||void 0===o?void 0:o.bufferX),this.KR.zV(null===(a=this.yY)||void 0===a?void 0:a.bufferY),this.KR.zV(null===(h=this.yY)||void 0===h?void 0:h.bufferColors),this.KR.zV(null===(l=this.yY)||void 0===l?void 0:l.bufferLookupValues),this.KR.zV(null===(u=this.yY)||void 0===u?void 0:u.bufferRotations),this.KR.zV(null===(c=this.yY)||void 0===c?void 0:c.bufferSizes),this.NG={type:"none"},this.vY=void 0,this.dY=void 0,this.OW.pW(),null===(d=this.pd.C())||void 0===d||d.Nt(),this.AY=void 0,this.yY=void 0,this.SY=void 0,this.xY=void 0,this.bY=void 0,this.MY=void 0,this._Y=void 0,this.wY=void 0,this.KR.sN(this,this._U),this}iE(){return this.dispose(),this}CY(t){if(!this.fY){const{xValues:e,yValues:i}=t.readBack();this.fY={min:{x:Ve,y:Ve},max:{x:ze,y:ze}};const s=e.length;for(let t=0;t<s;t+=1){const s=e[t],r=i[t];this.fY.min.x=s<this.fY.min.x?s:this.fY.min.x,this.fY.min.y=r<this.fY.min.y?r:this.fY.min.y,this.fY.max.x=s>this.fY.max.x?s:this.fY.max.x,this.fY.max.y=r>this.fY.max.y?r:this.fY.max.y}return this.lY.length=0,this.fY}const e=t.Bc,i=t.Lc;if(this.lY.length>0&&e&&i){for(const t of this.lY){for(let s=t.min;s<=t.max;s+=1){const t=e[s],r=i[s];this.fY.min.x=t<this.fY.min.x?t:this.fY.min.x,this.fY.min.y=r<this.fY.min.y?r:this.fY.min.y,this.fY.max.x=t>this.fY.max.x?t:this.fY.max.x,this.fY.max.y=r>this.fY.max.y?r:this.fY.max.y}this.lY.length=0}return this.fY}return this.fY}St(){var t,e,i,s,r;const n=null===(t=this.pd.C())||void 0===t?void 0:t.Gt;if(!n)return 0;const o=n.jc();return"ProgressiveX"===o?(null===(e=n.Dc())||void 0===e?void 0:e.x)||0:"RegressiveX"===o?(null===(i=n.Jc())||void 0===i?void 0:i.x)||0:"ProgressiveY"===o?(null===(s=this.gY)||void 0===s?void 0:s.max)||0:"RegressiveY"===o?(null===(r=this.gY)||void 0===r?void 0:r.max)||0:this.CY(n).max.x}vt(){var t,e,i,s,r;const n=null===(t=this.pd.C())||void 0===t?void 0:t.Gt;if(!n)return 0;const o=n.jc();return"ProgressiveX"===o?(null===(e=n.Jc())||void 0===e?void 0:e.x)||0:"RegressiveX"===o?(null===(i=n.Dc())||void 0===i?void 0:i.x)||0:"ProgressiveY"===o?(null===(s=this.gY)||void 0===s?void 0:s.min)||0:"RegressiveY"===o?(null===(r=this.gY)||void 0===r?void 0:r.min)||0:this.CY(n).min.x}bt(){var t,e,i,s,r;const n=null===(t=this.pd.C())||void 0===t?void 0:t.Gt;if(!n)return 0;const o=n.jc();return"ProgressiveX"===o?Dt(null===(e=this.gY)||void 0===e?void 0:e.max,0):"RegressiveX"===o?Dt(null===(i=this.gY)||void 0===i?void 0:i.max,0):"ProgressiveY"===o?Dt(null===(s=n.Dc())||void 0===s?void 0:s.y,0):"RegressiveY"===o?Dt(null===(r=n.Jc())||void 0===r?void 0:r.y,0):this.CY(n).max.y}xt(){var t,e,i,s,r;const n=null===(t=this.pd.C())||void 0===t?void 0:t.Gt;if(!n)return 0;const o=n.jc();return"ProgressiveX"===o?Dt(null===(e=this.gY)||void 0===e?void 0:e.min,0):"RegressiveX"===o?Dt(null===(i=this.gY)||void 0===i?void 0:i.min,0):"ProgressiveY"===o?Dt(null===(s=n.Jc())||void 0===s?void 0:s.y,0):"RegressiveY"===o?Dt(null===(r=n.Dc())||void 0===r?void 0:r.y,0):this.CY(n).min.y}Tl(){var t,e;let i=this.JU.C();this._U&&(i=Math.max(this._U.texture.Qz,this._U.texture.Jz)*this.JU.C());const s=Math.max(Ce(this.yu),(null===(t=this.pd.C())||void 0===t?void 0:t.Gt.kc)?25:i),r=null===(e=this.pd.C())||void 0===e?void 0:e.Gt.jc();return!r||"ProgressiveX"!==r&&"RegressiveX"!==r?s:0}Fl(){var t,e;let i=this.JU.C();this._U&&(i=Math.max(this._U.texture.Qz,this._U.texture.Jz)*this.JU.C());const s=Math.max(Ce(this.yu),(null===(t=this.pd.C())||void 0===t?void 0:t.Gt.kc)?25:i),r=null===(e=this.pd.C())||void 0===e?void 0:e.Gt.jc();return!r||"ProgressiveY"!==r&&"RegressiveY"!==r?s:0}}const Fy=(t,e,i,s,r,n,o,a,h,l,u,c,d)=>{if("ProgressiveX"!==l)throw new Error("Unimplemented data pattern");const f=e[0],g=e[1],m=f.length,y=f[0],p=f[m-1],x=g[0],A=g[m-1],S=c?2:1;if(a&&h&&a.firstX&&a.lastX&&y>=a.firstX){const e=xo(a.lastX,0,m-1,(t=>f[t]));if(f[e]===a.lastX){const h=a.bufferSize-a.valueCount,l=e+1,u=m-l;if(0===u)return a;if(h>=u){const e=vo(f,l,void 0),h=vo(g,l,void 0);if(t.eO(a.bufferX,a.valueCount*S,d(e)),t.eO(a.bufferY,a.valueCount*S,d(h)),i&&a.bufferColors){const e=i.slice(l);t.eO(a.bufferColors,a.valueCount,e,Uint32Array)}if(s&&a.bufferLookupValues){const e=s.slice(l);t.eO(a.bufferLookupValues,a.valueCount,e,Float32Array)}if(r&&a.bufferSizes){const e=r.slice(l);t.eO(a.bufferSizes,a.valueCount,e,Float32Array)}if(n&&a.bufferRotations){const e=n.slice(l);t.eO(a.bufferRotations,a.valueCount,e,Float32Array)}if(o&&a.bufferLengthSoFar){const[i,s,r]=Dy(e,h,a.lastX||0,a.lastY||0,a.lengthSoFarX,a.lengthSoFarY);t.eO(a.bufferLengthSoFar,2*a.valueCount,i,Float32Array),a.lengthSoFarX=s,a.lengthSoFarY=r}return a.valueCount+=u,a.lastX=p,a.lastY=A,a}}}const v=m+u,b=t.sO(v*S,d(f),null==a?void 0:a.bufferX),M=t.sO(v*S,d(g),null==a?void 0:a.bufferY),T=i?t.sO(v,i,null==a?void 0:a.bufferColors,Uint32Array):void 0,w=s?t.sO(v,s,null==a?void 0:a.bufferLookupValues,Float32Array):void 0,C=r?t.sO(v,r,null==a?void 0:a.bufferSizes,Float32Array):void 0,k=n?t.sO(v,n,null==a?void 0:a.bufferRotations,Float32Array):void 0;let E,R=0,I=0;if(o){const e=Dy(f,g,f[0],g[0],0,0);E=t.sO(2*v,e[0],null==a?void 0:a.bufferLengthSoFar,Float32Array),R=e[1],I=e[2]}return{bufferX:b,bufferY:M,bufferColors:T,bufferLookupValues:w,bufferSizes:C,bufferRotations:k,bufferSize:v,bufferLengthSoFar:E,valueCount:m,firstX:y,lastX:p,firstY:x,lastY:A,lengthSoFarX:R,lengthSoFarY:I}},Dy=(t,e,i,s,r,n)=>{const o=t.length,a=new Float32Array(2*o);if(0===o)return[a,0,0];let h=0,l=i,u=s,c=r,d=n;for(let i=0;i<o;i+=1){const s=t[i],r=e[i];c+=Math.abs(l-s),d+=Math.abs(u-r),a[h]=c,a[h+1]=d,h+=2,l=s,u=r}return[a,c,d]},By=(t,e,i,s,r,n,o,a,h,l)=>{const u=t.gl;if(i){const i=e.attribute(`${r}A_highpart${n}`),c=e.attribute(`${r}A_lowpart${n}`),d=e.attribute(`${r}B_highpart${n}`),f=e.attribute(`${r}B_lowpart${n}`);u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(i,o,h,a,2*o*l,0*l),u.vertexAttribPointer(c,o,h,a,2*o*l,o*l),t.lO(i,1),t.lO(c,1),u.enableVertexAttribArray(i),u.enableVertexAttribArray(c),u.vertexAttribPointer(d,o,h,a,2*o*l,2*o*l),u.vertexAttribPointer(f,o,h,a,2*o*l,3*o*l),t.lO(d,1),t.lO(f,1),u.enableVertexAttribArray(d),u.enableVertexAttribArray(f),u.bindBuffer(u.ARRAY_BUFFER,null)}else{const i=e.attribute(`${r}A${n}`),c=e.attribute(`${r}B${n}`);u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(i,o,h,a,o*l,0*l),u.vertexAttribPointer(c,o,h,a,o*l,o*l),t.lO(i,1),t.lO(c,1),u.enableVertexAttribArray(i),u.enableVertexAttribArray(c),u.bindBuffer(u.ARRAY_BUFFER,null)}},Py={translation:(t,e)=>[1,0,0,0,1,0,t,e,1],rotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]},scaling:(t,e)=>[t,0,0,0,e,0,0,0,1],translate:(t,e,i)=>Py.multiply(t,Py.translation(e,i)),rotate:(t,e)=>Py.multiply(t,Py.rotation(e)),scale:(t,e,i)=>Py.multiply(t,Py.scaling(e,i)),multiply(t,e){const i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],a=t[5],h=t[6],l=t[7],u=t[8],c=e[0],d=e[1],f=e[2],g=e[3],m=e[4],y=e[5],p=e[6],x=e[7],A=e[8];return[c*i+d*n+f*h,c*s+d*o+f*l,c*r+d*a+f*u,g*i+m*n+y*h,g*s+m*o+y*l,g*r+m*a+y*u,p*i+x*n+A*h,p*s+x*o+A*l,p*r+x*a+A*u]},projection:(t,e,i)=>[2/t,0,0,0,-2*i/e,0,-1,1*i,1]};class Ly extends ln{constructor(t,e,i,s,r){super(t,e,i,s,r),this.kY=[],this.kE=new Fm,this.TY=[u(0,0),u(0,0),u(0,0),u(0,0)],this.FY=m(u(0,0),u(0,0)),this.IY=m(u(0,0),u(0,0)),this.PY=u(0,0),this.DY=u(0,0),this.bT=u(0,0),this.BY=u(0,0),this.LY=0,this.RY=0,this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStyleRadialGradient:()=>tt(this.Te)&&this.Te,fillStyleLinearGradient:()=>st(this.Te)&&this.Te}),this.wN=t,this.CN=e,this.KR=t.kN(),this.CN=e,this.jG=t.Kn.ho}zs(){const t=this.fa(),e=this.da(),i=this.Wo.C();if(t){const t=this.ua(),s=this.RN.fillStyleSolid(t),r=this.RN.fillStyleRadialGradient(t),n=this.RN.fillStyleLinearGradient(t),o=s||r||n,a=this.KR,h=this.KR.dV(),l=h!==this.RY;if(this.RY=h,this.kE.EV(this.At),this.wa.u||l){this.EY&&this.EY.dE(this),this.font._(kr(this.wa.C(),h));const t=this.font.C();this.EY=this.KR.Zh(t.properties.family),this.EY.cE(this)}const c=this.font.u,d=c||this.va.u;if(d&&this.EY){const t=this.font.C();[this.zY,this.IY]=this.EY.AE(this.va.C(),t,this.wN.ts.isDark),this.kY.forEach((t=>{t.texCoordBuff&&a.zV(t.texCoordBuff),t.vertexBuff&&a.zV(t.vertexBuff)})),this.kY=this.zY.map((t=>({texCoordBuff:a.CV(t.texCoords,!1),texture:t.texture,info:t}))),this.wa.u=!1,this.font.u=!1,this.va.u=!1}const f=this.At.Ni()||e,g=this.Sa.u||this.ba.u||this.xa.u||this.Ma.u||this.ka.u||this.Xt.u||d||f,m=this.ka.C(),y=li(u(this.ba.C()+1,this.xa.C()+1),.5);if(g&&this.zY&&(this.PY=u(-(m.left*h+this.IY.max.x-this.IY.min.x+m.right*h)*y.x-this.IY.min.x+m.right*h,-(m.bottom*h+this.IY.max.y-this.IY.min.y+m.top*h)*y.y-this.IY.min.y+m.top*h)),(g||f||this._a.u||this.ua())&&this.Te!==V){if(this.zY){const t=ui(this.Sa.C(),this.Ma.C()),e=ct(t,this.At,this.cs.At),i=li(e,h);this.BY=i;const s=xi(this._a.C());this.LY=s,d&&this.kY.forEach((t=>{const e=t.info;e&&(t.vertexBuffLen=e.vertices.length/2,t.vertexBuff=a.CV(e.vertices,!0,t.vertexBuff))}));const r=this.Xt.C(),n=[ui(ri(u((this.IY.min.x+(-r.left-m.left)*h+this.PY.x)/h,(this.IY.max.y+(r.top+m.top)*h+this.PY.y)/h),this.Ca,s),e),ui(ri(u((this.IY.max.x+(r.right+m.right)*h+this.PY.x)/h,(this.IY.max.y+(r.top+m.top)*h+this.PY.y)/h),this.Ca,s),e),ui(ri(u((this.IY.max.x+(r.right+m.right)*h+this.PY.x)/h,(this.IY.min.y+(-r.bottom-m.bottom)*h+this.PY.y)/h),this.Ca,s),e),ui(ri(u((this.IY.min.x+(-r.left-m.left)*h+this.PY.x)/h,(this.IY.min.y+(-r.bottom-m.bottom)*h+this.PY.y)/h),this.Ca,s),e)];this.TY=[ct(n[0],this.cs.At,this.At),ct(n[1],this.cs.At,this.At),ct(n[2],this.cs.At,this.At),ct(n[3],this.cs.At,this.At)];const o=Je(n);this.DY=u(-(o.max.x-o.min.x)*h*y.x-o.min.x*h+this.BY.x,-(o.max.y-o.min.y)*h*y.y-o.min.y*h+this.BY.y),this.Og=ci(o.max,o.min);const l=Je(this.TY),c=this.At.pi(l.min,this.DY),f=this.At.pi(l.max,this.DY);this.FY=Je([c,f])}r?this.WN=vm(this.FY,this.At,r.getPosition(),r.getExtent(),r.getShape(),this.KR.dV()):n?this.UN=bm(this.FY,this.At,n.getAngle(!0),this.KR.dV()):(this.WN=void 0,this.UN=void 0)}(this.ua()||c)&&(this.IE=o?this.KR.Cz(Yg["2D"],Yg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.jG}),Yg.Color({dataType:r?["gradient",r]:n?["gradient",n]:"uniform",maskTextureText:!0})):void 0),this.VY=i&&o?this.VY||this.KR.Cz(Yg["2D"],Yg.MousePicking(),Yg.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.jG})):void 0,this.Sa.u=!1,this.ba.u=!1,this.xa.u=!1,this.Ma.u=!1,this._a.u=!1,this.Aa(this.Te)}return this.Ta=t,this}qL(t,e){if(this.fa()){const i=1===t?this.VY:this.IE;if(!i||0===this.kY.length)return{};const s=this.RN.fillStyleSolid(!1),r=this.RN.fillStyleRadialGradient(!1),n=this.RN.fillStyleLinearGradient(!1),o=this.cs.hz(),a=o.x,h=o.y;let l=Py.projection(a,h,-1);const u=Py.translation(this.PY.x,this.PY.y),c=Py.translation(this.DY.x,this.DY.y);l=Py.translate(l,this.BY.x,this.BY.y),l=Py.multiply(l,c),l=Py.rotate(l,this.LY),l=Py.multiply(l,u),1===t&&(l=Py.scale(l,this.IY.max.x,this.IY.max.y)),this.KR.cE(i).TV(i,((i,a,h,u)=>{if(this.KR.JV(i("uMatrix"),l).DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),this.jG&&this.KR.IV(u("uViewportSizePx"),[o.x*this.KR.dV(),o.y*this.KR.dV()]),1===t)this.KR.qV(i("uFirstId"),e).XO(h,1);else if(s)this.KR.PR(i("uColor"),s.getColor());else if(r&&this.WN){this.KR.IV(i("uCenter"),this.WN.center).IV(i("uDistance"),this.WN.distance).ZV(i("uBounds"),this.WN.bounds).DV(i("uAspect"),this.WN.aspectRatio);const t=r.getColorStops();for(let e=0;e<t.length;e+=1)this.KR.PR(i(`color_${e}`),t[e].color).DV(i(`stop_${e}`),t[e].offset)}else if(n&&this.UN){this.KR.IV(i("uStartPoint"),this.UN.startPoint).IV(i("uEndPoint"),this.UN.endPoint).ZV(i("uBounds"),this.UN.bounds);const t=n.getColorStops();for(let e=0;e<t.length;e+=1)this.KR.PR(i(`color_${e}`),t[e].color).DV(i(`stop_${e}`),t[e].offset)}return 1===t&&this.KR.oO(a("aPos"),this.KR.IO).qy(this.KR.gl.TRIANGLES,6),1!==t&&this.kY.forEach((t=>{this.KR.oO(a("aPos"),t.vertexBuff).oO(a("aMaskTextureCoord"),t.texCoordBuff).PV(i("uMaskTexture"),t.texture,0).qy(this.KR.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return{idCount:1}}PN(t,e,i,s,r){return{}}th(){return this.fa()?this.TY:[]}ed(){return this.fa()&&this.Og?this.Og:u(0,0)}oi(){if(this.fa()&&this.FY){const t=this.FY;return u(t.max.x-t.min.x,t.max.y-t.min.y)}return u(0,0)}iE(){return this.kY.forEach((t=>{t.texCoordBuff&&this.KR.zV(t.texCoordBuff),t.vertexBuff&&this.KR.zV(t.vertexBuff)})),this.kY=[],this.EY&&this.EY.dE(this),this}St(){return this.FY.max.x}vt(){return this.FY.min.x}bt(){return this.FY.max.y}xt(){return this.FY.min.y}Tl(){return 0}Fl(){return 0}}class Vy{constructor(t,e,i){this.OY=new Set,this.NY=t=>(this.OY.add(t),t),this.GY=t=>(this.OY.delete(t),t.iE(),this),this.cs=t,this.ra=e,this.WY=i}KL(t){this.OY.delete(t)&&this.OY.add(t)}Y(){for(const t of this.OY)t.iE().dispose();this.cs.Ln(this.ra)}Ms(){return this.cs.Ms(),this}Bn(){return this.ra}}class zy extends Vy{constructor(){super(...arguments),this.UY=p(void 0),this.na=!1}gx(t){return this.UY._(t),this}Bp(){return this.UY.C()}}class Ny extends zy{constructor(t,e,i){super(t,e,i),this.wN=t,this.gl=t.kN(),this.YY=this.OY}wV(t){const e=t instanceof tn&&t;if(!e)return Ne;const i=e.vt(),s=e.St(),r=e.xt(),n=e.bt();if(i===Ve||s===ze||r===Ve||n===ze)return Ne;const o=e.Tl(),a=e.Fl(),h=en({min:{x:i,y:r},max:{x:s,y:n}},{x:o,y:a},e.At),l={min:ct(h.min,e.At,t.cs.At),max:ct(h.max,e.At,t.cs.At)},u=this.UY.C();let c;if(u){if(c={min:{x:Math.max(l.min.x,u.x),y:Math.max(l.min.y,u.y)},max:{x:Math.min(l.max.x,u.x+u.width),y:Math.min(l.max.y,u.y+u.height)}},c.max.x<c.min.x||c.max.y<c.min.y)return Ne}else c=l;return c}Ue(t){return this.NY(new qm(this.wN,this,t,this.GY,[]))}Yg(t){return this.NY(new Jm(this.wN,this,t,this.GY,[]))}om(t,e,i){return this.NY(new oy(this.wN,this,t,this.GY,i,e))}Sd(t){return this.NY(new _y(this.wN,this,t,this.GY))}Gr(t){return this.NY(new Ly(this.wN,this,t,this.GY,[]))}Bv(t){return this.NY(new cy(this.wN,this,t,this.GY,[]))}lc(t,e=yn.Simple){if(e===yn.Simple)return this.NY(new gy(this.wN,this,t,this.GY,[]));throw new Error("GlEngine.addPolygon | No such polygon type!")}Hm(t){return this.NY(new dy(this.wN,this,t,this.GY,[]))}Le(t){return this.NY(new fy(this.wN,this,t,this.GY,[]))}E_(t){return this.NY(new Xm(this.wN,this,t,this.GY,[]))}nd(t){return this.NY(new Nm(this.wN,this,t,this.GY,[]))}d_(t,e,i){if("intensity"===i.heatmapDataType)return this.NY(new Ty(this.wN,this,t,this.GY,e,i));throw new xt("Unimplemented Heatmap Grid Static type")}r_(t,e,i){return this.NY(new by(this.wN,this,t,this.GY,e,i))}$b(t,e,i){return this.NY(new Cy(this.wN,this,t,this.GY,e,i))}HY(t){return this.NY(new Lm(this.wN,this,this.GY,[],t))}zs(){if(this.na){this.na=!1;const t=Array.from(this.OY).sort(((t,e)=>t.aa()-e.aa()));this.OY.clear();for(const e of t)this.OY.add(e)}for(const t of this.OY)t.zs();return this}qL(t,e,i){var s;const r=this.UY.C();let n;if(r){const t=r.x*this.gl.dV()*e,i=r.y*this.gl.dV()*e,s=Math.ceil(t),o=Math.ceil(i);n=[s,o,Math.floor(t+r.width*this.gl.dV()*e)-s,Math.floor(i+r.height*this.gl.dV()*e)-o],this.gl._V(n[0],n[1],n[2],n[3])}if(1!==t){for(const i of this.OY)if(i.getVisible()){if(i.Yi){const t=i.Yi.x*this.gl.dV()*e,s=i.Yi.y*this.gl.dV()*e,r=Math.ceil(t),n=Math.ceil(s),o=Math.floor(t+i.Yi.width*this.gl.dV()*e)-r,a=Math.floor(s+i.Yi.height*this.gl.dV()*e)-n;this.gl._V(r,n,o,a)}i.qL(t,0),i.Yi&&n&&this.gl._V(n[0],n[1],n[2],n[3])}}else{let r=((null===(s=i[i.length-1])||void 0===s?void 0:s.idLast)||0)+1;const o=Array.from(this.YY.values());for(let s=0;s<o.length;s+=1){const a=o[s];if(a.getMouseInteractions()&&a.getVisible()){if(a.Yi){const t=a.Yi.x*this.gl.dV()*e,i=a.Yi.y*this.gl.dV()*e,s=Math.ceil(t),r=Math.ceil(i),n=Math.floor(t+a.Yi.width*this.gl.dV()*e)-s,o=Math.floor(i+a.Yi.height*this.gl.dV()*e)-r;this.gl._V(s,r,n,o)}const{idCount:o}=a.qL(t,r);a.Yi&&n&&this.gl._V(n[0],n[1],n[2],n[3]),void 0!==o&&(i.push({entity:a,layer:this,entityIndex:s,idFirst:r,idCount:o,idLast:r+o-1}),r+=o)}}}return this.gl.vV(!1),this}}class Oy extends Mm{constructor(t){super(t)}}class Uy extends Oy{constructor(t){super(t),this.$Y="attribute";const{vertices:e,drawSize:i,drawMode:s}=Yy(t.gl);this.WR=t.CV(e),this.FG=i,this.IG=s}qy(t,e,i,s){return this.KR.FV(this.WR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).pO(this.IG,0,this.FG,e),this}jz(){this.KR.zV(this.WR)}}const Yy=t=>{const e=new Float32Array(324);let i=0;return e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,{vertices:e,drawSize:i/9,drawMode:t.TRIANGLES}};class Gy extends Oy{constructor(t,e){super(t),this.$Y="attribute",this.jY=e;const{vertices:i,indices:s}=Hy();this.WR=t.CV(i),this.TG=t.rO(s),this.FG=s.length,this.IG=t.gl.TRIANGLES}qy(t,e,i,s){return this.KR.FV(this.WR,0,{location:t.attribute("aEdge"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).fO(this.TG).DV(t.uniform("uEdgeRoundness"),this.jY/2).yO(this.IG,this.FG,0,e),this}jz(){this.KR.zV(this.WR),this.KR.zV(this.TG)}ZY(t){return this.jY=t,this}QY(){return this.jY}}const Hy=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],e=[];let i=0;const s=[];let r=0;for(const n of t){const{normal:t,perpendA:o,perpendB:a}=n,h=Le.multiply(o,-1),l=Le.multiply(a,-1),u=i;e[i]={thicknessDirection:Le.addVec(t,o,a),edge:Le.addVec(h,l),normal:t},i+=1;const c=i;e[i]={thicknessDirection:Le.addVec(t,h,a),edge:Le.addVec(o,l),normal:t},i+=1;const d=i;e[i]={thicknessDirection:Le.addVec(t,h,l),edge:Le.addVec(o,a),normal:t},i+=1;const f=i;e[i]={thicknessDirection:Le.addVec(t,o,l),edge:Le.addVec(h,a),normal:t},i+=1,s[r+0]=d,s[r+1]=u,s[r+2]=f,s[r+3]=d,s[r+4]=c,s[r+5]=u,r+=6;const g=[{A:o,B:a},{A:h,B:a},{A:h,B:l},{A:o,B:l}];for(const s of g){s.thicknessDirection=Le.addVec(t,s.A,s.B),s.stripVerticesA=[],s.stripVerticesB=[];const r=[{direction:s.A,other:s.B,vertices:s.stripVerticesA},{direction:s.B,other:s.A,vertices:s.stripVerticesB}];for(const n of r)for(let r=0;r<8;r+=1){const o=.5*r/7,a=Le.normalize(Le.lerp(t,n.direction,o)),h=Math.PI/2-Le.angle(a,t),l=Le.addVec(Le.multiply(Le.multiply(n.direction,-1),1-Math.cos(h)),Le.multiply(Le.multiply(t,-1),1-Math.sin(h)),Le.multiply(n.other,-1)),u=i;e[i]={thicknessDirection:s.thicknessDirection,normal:a,edge:l};const c=e[i];i+=1,n.vertices.push({index:u,vertex:c})}}for(let t=0;t<g.length;t+=1){const e=g[t],i=g[t<g.length-1?t+1:0],n=t%2==0?e.stripVerticesB:e.stripVerticesA,o=t%2==0?i.stripVerticesB:i.stripVerticesA;for(let t=1;t<n.length;t+=1){const e=n[t-1],i=o[t-1],a=n[t],h=o[t];s[r+0]=e.index,s[r+1]=i.index,s[r+2]=h.index,s[r+3]=a.index,s[r+4]=e.index,s[r+5]=h.index,r+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],o=Math.PI/15,a=2*Math.PI/15;let h=i;for(const t of n){let r=0;e[i]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},i+=1,r+=1;for(let s=1;s<8.5;s+=1){const n=15===s?Math.PI:s*o,h=1*Math.cos(n)*t.y,l=Math.sin(n);for(let s=0;s<Math.ceil(3.75)+1;s+=1){const n=15===s?0:s*a,o=l*Math.cos(n)*1*t.x,u=l*Math.sin(n)*1*t.z,c={x:o,y:h,z:u},d=Le.normalize({x:o,y:h,z:u});e[i]={thicknessDirection:t,normal:d,edge:{x:c.x-t.x,y:c.y-t.y,z:c.z-t.z}},i+=1,r+=1}}const n=[];for(let t=1;t<=Math.ceil(3.75);t+=1)n.push(h),15===t?n.push(h+1):n.push(h+t+1),n.push(h+t);const l=h+1,u=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let e=0;e<Math.ceil(3.75);e+=1){let i=0;const s=l+(t+1)*u+e;let r=0;14===e?(i=l+t*u,r=l+(t+1)*u):(i=l+t*u+e+1,r=l+(t+1)*u+e+1),n.push(l+t*u+e),n.push(i),n.push(s),n.push(s),n.push(i),n.push(r)}s.push.apply(s,t.flipVertexOrder?n.reverse():n),h+=r}const l=new Float32Array(9*e.length);let u=0;for(const t of e)l[u+0]=t.edge.x,l[u+1]=t.edge.y,l[u+2]=t.edge.z,l[u+3]=t.normal.x,l[u+4]=t.normal.y,l[u+5]=t.normal.z,l[u+6]=t.thicknessDirection.x,l[u+7]=t.thicknessDirection.y,l[u+8]=t.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(s)}},Wy=(t,e)=>{let i=t.YV.Xz.get(e);return i||(i=void 0!==e&&e>0?new Gy(t,_t(e,0,1)):new Uy(t),t.YV.Xz.set(e,i),i)};class Ky extends Em{yv(t){return this.uV=this.av.C(),this.av._(t),this}BS(t){return this.JY=t,this}LS(){return this.JY}}class Xy extends Ky{constructor(t,e,i){super(t,e,i),this.KY=t,this.wN=t.wN,this.KR=this.wN.kN()}}class jy extends Xy{constructor(t,e,i){super(t,e,i),this.JY="cull-back",this.tl=Oe,this.qY={},this.tH=[],this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStyleIndividual:()=>H(this.Te)&&this.Te,fillStylePaletted:()=>K(this.Te)&&this.Te}),this.Te=Pr.fillStyle,this.av._(Jn)}zs(t){const e=this.tH,i=this.Te,s=i!==V,r=this.iH,n=this.ua()||this.sH!==r,o=this.lV(),a=this.Wo.C(),h=this.Wo.u;if(s){for(const t of e)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=this.eH||0;let s=t;for(const t of e){const e=t.id;void 0!==e&&void 0!==this.qY[e]||(s+=1)}let r,l=!1,u=!1;if(l=s!==t,u=l,r=!u&&(e.length<100?"chunks":"all"),l){const e=11*s,i=new Float32Array(e);this.ZW&&i.set(this.ZW),this.ZW=i,this.hH=e,this.rH=11*t}const c=H(i)?i.getFallbackColor():void 0;for(const t of e){const e=t.id,i=void 0!==e&&this.qY[e],s=[t.xCenter,t.yCenter,t.zCenter,t.xSize,t.ySize,t.zSize,t.color?t.color.r:c?c.r:void 0,t.color?t.color.g:c?c.g:void 0,t.color?t.color.b:c?c.b:void 0,t.color?t.color.a:c?c.a:void 0,t.value];if(i){for(let t=0;t<11;t+=1)s[t]=void 0!==s[t]?s[t]:i.buffer[t];i.buffer.set(s)}else{const t=this.rH,i=new Float32Array(this.ZW.buffer,t*Float32Array.BYTES_PER_ELEMENT,11);i.set(s),void 0!==e&&(this.qY[e]={location:t,buffer:i}),this.rH+=11}}if(u&&(this.kG=this.KR.CV(this.ZW,!0)),"all"===r)this.KR.eO(this.kG,0,this.ZW);else if("chunks"===r)for(const t of e){const e=t.id;if(void 0!==e){const t=this.qY[e];this.KR.eO(this.kG,t.location,t.buffer)}}if(n||o||h){const t=this.RN.fillStyleSolid(n),e=this.RN.fillStyleIndividual(n),i=this.RN.fillStylePaletted(n);t||e||i?(this.nH=Wy(this.KR,this.oH()),this.IE=this.KR.Cz(Yg["3D"],Yg.ColorShaded3D({dataType:e?"attribute":i?["lookup",i.getLookUpProperty(),i.lut]:"uniform",shadingStyle:this.av.C().type}),Yg.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:dg(this.At),normalSource:this.nH.$Y}),void 0!==this.iH&&Yg.RoundedEdges3D),this.VY=a?this.KR.Cz(Yg["3D"],Yg.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:dg(this.At),normalSource:void 0}),Yg.MousePicking(),void 0!==this.iH&&Yg.RoundedEdges3D):void 0):(this.nH=void 0,this.IE=void 0,this.VY=void 0)}if(e.length>0){const t=m({x:Ve,y:Ve,z:Ve},{x:ze,y:ze,z:ze});for(let e=0;e<this.rH;e+=11){const i=this.ZW[e+0],s=this.ZW[e+3]/2,r=i-s,n=i+s,o=this.ZW[e+1],a=this.ZW[e+4]/2,h=o-a,l=o+a,u=this.ZW[e+2],c=this.ZW[e+5]/2,d=u-c,f=u+c;t.min.x=t.min.x<r?t.min.x:r,t.min.y=t.min.y<h?t.min.y:h,t.min.z=t.min.z<d?t.min.z:d,t.max.x=t.max.x>n?t.max.x:n,t.max.y=t.max.y>l?t.max.y:l,t.max.z=t.max.z>f?t.max.z:f}this.tl=t}this.eH=s,this.tH.length=0}return this.Aa(i),this.sH=r,this.av.u=!1,this.Wo.u=!1,this}qL(t,e){const i=1===t?this.VY:this.IE,s=this.nH,r=this.kG,n=this.Te,o=this.eH,a=this.av.C(),h=o||0;return i&&r&&void 0!==o&&this.KR.TV(i,((l,u,c)=>{let d=!1;const f=u("aPos"),g=u("aOffsetAxis");this.KR.cE(i).QV(l("uScale"),this.KY.kE.BV()).QV(l("uDisp"),this.KY.kE.LV()).KV(l("uViewProjectionMatrix"),this.aH).DV(l("uIsHighlighted"),1===t||2===t?0:this.$o).PR(l("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(l("uRenderEffectMask"),2===t?1:0);const m={location:f,size:3},y={location:g,size:3},p={location:void 0,size:4};if(1!==t&&"phong"===a.type&&this.KR.QV(l("uCameraLoc"),this.lH).QV(l("uLightLoc"),this.uH).DV(l("uAmbientReflection"),a.ambientReflection).DV(l("uSpecularReflection"),a.specularReflection).DV(l("uDiffuseReflection"),a.diffuseReflection).DV(l("uShininess"),a.shininess).PR(l("uLightColor"),a.specularColor).PR(l("uAmbientColor"),a.ambientColor),1===t)this.KR.qV(l("uFirstId"),e).XO(c,h);else if(Y(n))this.KR.PR(l("uColorDiffuse"),n.getColor());else if(H(n)){const t=u("aColor");p.location=t}else if(K(n)){const t=gg(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.KR.tN(c,n.lut,t)}return r&&(this.KR.FV(r,1,m,y,p,{location:void 0,size:1}),s.qy(c,o,"phong"===a.type&&1!==t,!1),d=!0),d})),{idCount:h}}PN(t,e,i,s,r){const n=11*(t-e);if(!this.ZW)return{};const o=this.ZW[n+0],a=this.ZW[n+1],h=this.ZW[n+2],l=this.ZW[n+3],u=this.ZW[n+4],c=this.ZW[n+5],d=Dt(this.ZW[n+6],void 0),f=Dt(this.ZW[n+7],void 0),g=Dt(this.ZW[n+8],void 0),m=Dt(this.ZW[n+9],void 0),y=Dt(this.ZW[n+10],void 0);let p;for(const t of Object.keys(this.qY))if(this.qY[t].location===n){p=t;break}return{info:{dataPoint:{x:o,y:a,z:h,xSize:l,ySize:u,zSize:c,r:d,g:f,b:g,a:m,intensity:y,id:p}}}}dispose(){return super.dispose(),this.kG&&(this.KR.zV(this.kG),this.kG=void 0),this.IE=void 0,this}iE(){return this.dispose(),this}kv(t){this.tH=ae(this.tH,t,{canReturnB:!0})}Be(t){return this.Te=sn(this.Te,t),this}Xh(){return this.Te}wv(t){return this.iH=void 0!==t&&t>0?_t(t,0,1):void 0,this}oH(){return this.iH}St(){return this.tl.max.x}vt(){return this.tl.min.x}bt(){return this.tl.max.y}xt(){return this.tl.min.y}Sv(){return this.tl.max.z}xv(){return this.tl.min.z}Tl(){return 0}Fl(){return 0}bv(){return 0}ua(){return rn(this.ca,this.Te)}Aa(t){this.ca=t}}class $y extends Mm{constructor(t,e){super(t),this.$Y="custom",this.wG=e;const{vertices:i,drawSize:s}=this.CG();this.kG=t.CV(i),this.FG=s}cE(t){return this.KR.FV(this.kG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}qy(t){return this.KR.pO(this.KR.gl.TRIANGLE_STRIP,0,this.FG,t),this}CG(){const t=this.wG,e=new Float32Array(2*(t+1)*3);let i=0;for(let s=0;s<=t;s+=1){const r=2*Math.PI*s/t,n=Math.cos(r),o=Math.sin(r);for(const t of[0,1])e[i+0]=t,e[i+1]=n,e[i+2]=o,i+=3}return{vertices:e,drawSize:i/3}}jz(){this.KR.zV(this.kG)}}const Zy=(t,e=16)=>{let i=t.YV.Yz.get(e);return i||(i=new $y(t,e),t.YV.Yz.set(e,i),i)};class Qy extends Xy{constructor(t,e,i){super(t,e,i),this.JY="cull-back",this.cH=Oe,this.dH=[],this.fH=!1,this.yu=Pr.lineStyle,this.av._(Qn)}zs(t){const e=this.fH,i=this.yu,s=this.vu!==i,r=this.lV(),n=e;if(e){const t=te(this.dH);this.AH=this.KR.CV(t,!1,this.AH)}if(n&&(this.cH=ti(this.dH)),s||r){const t=8,e=ns(i)&&i.getFillStyle(),s=1===i.getThickness()?"primitive":"instanced";this.NG=void 0,Y(e)&&("primitive"===s?this.NG={type:s,shader:this.KR.Cz(Yg["3D"],Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}),Yg.Color({dataType:"uniform"})),fillStyle:e}:"instanced"===s&&(this.NG={type:s,shader:this.KR.Cz(Yg["3D"],Yg.ColorShaded3D({dataType:"uniform",shadingStyle:this.av.C().type}),Yg.LineInstanced3D({axisWorldTranslation:dg(this.At)})),geometry:Zy(this.KR,t),fillStyle:e}))}return this.fH=!1,this.vu=i,this.av.u=!1,this}qL(t,e){if(1===t)return{};const i=this.KR.gl,s=this.NG,r=this.AH,n=this.yu,o=this.av.C();if(s&&r&&ns(n))switch(s.type){case"instanced":{const e=.5*this.Bs.jm(n.thickness),a=s.fillStyle.getColor(),h=s.shader,l=s.geometry;this.KR.TV(h,((s,n,u)=>{this.KR.cE(h).QV(s("uScale"),this.KY.kE.BV()).QV(s("uDisp"),this.KY.kE.LV()).KV(s("uViewProjectionMatrix"),this.aH).PR(s("uColorDiffuse"),a).DV(s("uOffsetWU"),e).DV(s("uIsHighlighted"),this.$o).PR(s("uHighlightColorOffset"),2===t?R:this.Qo).DV(s("uRenderEffectMask"),2===t?1:0),"phong"===o.type&&this.KR.QV(s("uCameraLoc"),this.lH).QV(s("uLightLoc"),this.uH).DV(s("uAmbientReflection"),o.ambientReflection).DV(s("uSpecularReflection"),o.specularReflection).DV(s("uDiffuseReflection"),o.diffuseReflection).DV(s("uShininess"),o.shininess).PR(s("uLightColor"),o.specularColor).PR(s("uAmbientColor"),o.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,r);const c=n("aLocationA"),d=n("aLocationB");return i.vertexAttribPointer(c,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.KR.lO(c,1),i.enableVertexAttribArray(c),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.KR.lO(d,1),i.enableVertexAttribArray(d),l.cE(u).qy(this.dH.length/2),!0}));break}case"primitive":{const e=ns(n)?n.getFillStyle():void 0,o=e&&Y(e)?e.getColor():void 0;if(o){const e=s.shader;this.KR.TV(e,((s,n)=>(this.KR.cE(e).QV(s("uScale"),this.KY.kE.BV()).QV(s("uDisp"),this.KY.kE.LV()).KV(s("uViewProjectionMatrix"),this.aH).PR(s("uColor"),o).DV(s("uIsHighlighted"),this.$o).PR(s("uHighlightColorOffset"),2===t?R:this.Qo).DV(s("uRenderEffectMask"),2===t?1:0).FV(r,void 0,{location:n("aPos"),size:3}).qy(i.LINES,this.dH.length),!0)))}break}}return{idCount:this.dH.length}}PN(t,e,i,s,r){return{}}Al(t){for(let e=0;e<t.length-1;e+=1){const i=t[e],s=t[e+1];this.dH.push(i),this.dH.push(s)}return this.fH=!0,{ds(){return this},vs(){return this}}}Ot(){return this.dH.length=0,this.fH=!0,this}Cm(){return[]}Fd(t){}We(t){return this.yu="function"==typeof t?t(this.yu):t,this}mu(){return this.yu}iE(){return this.AH&&(this.KR.zV(this.AH),this.AH=void 0),this}St(){return this.cH.max.x}vt(){return this.cH.min.x}bt(){return this.cH.max.y}xt(){return this.cH.min.y}Sv(){return this.cH.max.z}xv(){return this.cH.min.z}Tl(){const t=this.yu;return t===nt?0:t.getThickness()}Fl(){const t=this.yu;return t===nt?0:t.getThickness()}bv(){const t=this.yu;return t===nt?0:t.getThickness()}}class qy extends Mm{constructor(t,e,i){super(t),this.$Y="gpu-calculate",this.gH=e,this.pH=i;const{vertices:s,drawSize:r}=this.CG();this.kG=t.CV(s),this.FG=r}qy(t,e,i,s){return this.KR.FV(this.kG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).pO(this.KR.gl.TRIANGLES,0,this.FG,e),this}CG(){const t=this.pH,e=this.gH,i=new Float32Array(6*(6*e+6*(t-2)*e));let s=0;const r=2*Math.PI/e,n=Math.PI/t,o=(t,e,o,a,h)=>{const l=e*r,u=Math.PI/2-t*n,c=Math.cos(u),d=c*Math.cos(l),f=c*Math.sin(l),g=Math.sin(u);i[s]=d,i[s+1]=g,i[s+2]=f,i[s+3]=o,i[s+4]=a,i[s+5]=h,s+=6};for(let i=0;i<t;i+=1)for(let s=0;s<e;s+=1)i>0&&(o(i,s,1,0,0),o(i,s+1,1,1,0),o(i+1,s,0,0,1)),i<t-1&&(o(i,s+1,1,1,0),o(i+1,s+1,0,1,0),o(i+1,s,0,0,1));return s!==i.length&&pe(0,(()=>{this.KR.SA.io&&s>i.length&&Tt.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:i,drawSize:s/6}}jz(){this.KR.zV(this.kG)}}const Jy=(t,e)=>{const i=Math.round(e);i<3&&pe(0,Rt);const s=i;let r=t.YV.$z.get(Array.from(t.YV.$z.keys()).find((t=>t.sectors===i&&t.stacks===s)));return r||(r=new qy(t,i,s),t.YV.$z.set({sectors:i,stacks:s},r),r)};class tp extends Xy{constructor(t,e,i){super(t,e,i),this.JY="cull-back",this.LM=[],this.NG={},this.NW=new ry(this.LM,(t=>t.vertexBuffer&&this.KR.zV(t.vertexBuffer)),!0),this._u=[],this.il=0,this.sl=[],this.el=0,this.tl=Oe,this.hl=Oe,this.RN=fg({lineStyleSolid:()=>{const t=this.yu;return ns(t)&&t},lineFillSolid:()=>{const t=this.yu.getFillStyle();return Y(t)&&t},lineFillPaletted:()=>{const t=this.yu.getFillStyle();return K(t)&&t},jointStyleTriangulatedPoints:()=>Sr(this.Tv)&&this.Tv,jointSizeTriangulated:()=>{const t=this.Tv;return Sr(t)&&t.getSize()},jointFillSolid:()=>{const t=this.Tv.getFillStyle();return Y(t)&&t},jointFillPaletted:()=>{const t=this.Tv.getFillStyle();return K(t)&&t},wireframeLineStyleSolid:()=>{const t=Sr(this.Tv)&&this.Tv.getWireframeStyle();return ns(t)&&t},wireframeFillSolid:()=>{const t=Sr(this.Tv)&&this.Tv.getWireframeStyle(),e=t&&t.getFillStyle();return Y(e)&&e}}),this.rl=!1,this.yu=Pr.lineStyle,this.Tv=Pr.pointStyle3D,this.av._(Jn),this.HW={attributesPerVertex:3,prepareRenderData:(t,e)=>te(t)}}PN(t,e,i,s,r){return{info:{dataPoint:this._u[t-e]}}}zs(t){const e=this.rl,i=this.sl,s=this.el,r=s>0,n=this.yu,o=n!==this.vu,a=this.Tv,h=a!==this.yH,l=this.lV(),u=this.Wo.u,c=this.Wo.C();this.hl&&(this.tl=ii(this.tl,this.hl),this.hl=void 0),r&&(this._u=ae(this._u,i,{canReturnB:!0}),this.il+=s);let d=i,f=s;if(e&&(this.LM.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=Oe})),this.NW.PW(),d=this._u,f=this.il),f>0){const t=1e5,e=Math.floor(this.wN.mH/(this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=this.Ko("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,s=_t(i,t,e);this.NW.kW(d,s,((t,e,i,s)=>({existingDataPointsCount:i-s,existingCoordinatesCount:i,allocatedCoordinatesCount:t,jointPointsCount:s,lastDataPoint:e[i-1],boundaries:Oe,vertexBuffer:this.KR.sO(t*this.HW.attributesPerVertex,this.HW.prepareRenderData(e,i))})),((t,e,i,s)=>{this.KR.eO(t.vertexBuffer,t.existingCoordinatesCount*this.HW.attributesPerVertex,this.HW.prepareRenderData(e,i)),t.existingDataPointsCount+=i-s,t.existingCoordinatesCount+=i,t.jointPointsCount+=s,t.lastDataPoint=e[i-1]}))}if(o||h||l||u){const t={},e=this.RN.lineStyleSolid(o),i=this.RN.lineFillSolid(o),s=this.RN.lineFillPaletted(o),r=i||s,a=this.RN.jointStyleTriangulatedPoints(h),l=this.RN.jointSizeTriangulated(h),u=this.RN.jointFillSolid(h),d=this.RN.jointFillPaletted(h),f=u||d,g=this.RN.wireframeLineStyleSolid(h),m=this.RN.wireframeFillSolid(h),y=n.getThickness()<0||1===n.getThickness()&&this.Ko("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",p=s?["lookup",s.getLookUpProperty(),s.lut]:"uniform";if("primitive"===y&&r?t.lines={type:"primitive",fillStyleSolid:i,fillStylePaletted:s,shader:this.KR.Cz(Yg["3D"],Yg.Color({dataType:p}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})),mousePicking:c?{shader:this.KR.Cz(Yg["3D"],Yg.MousePicking({useVertexId:!0}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}))}:void 0}:"instanced"===y&&e&&r&&(t.lines={type:"instanced",lineStyleSolid:e,fillStyleSolid:i,fillStylePaletted:s,shader:this.KR.Cz(Yg["3D"],Yg.ColorShaded3D({dataType:p,shadingStyle:this.av.C().type}),Yg.LineInstanced3D({axisWorldTranslation:dg(this.At)})),geometry:ep(this.KR,e.getThickness()),mousePicking:c?{shader:this.KR.Cz(Yg["3D"],Yg.MousePicking(),Yg.LineInstanced3D({axisWorldTranslation:dg(this.At)}))}:void 0}),t.markers=void 0,f&&a){const e=ne(a.getShape(),{cube:()=>Wy(this.KR),sphere:()=>ip(this.KR,a)});t.markers={geometry:e,pointStyle:a,pointSizeNWU:"number"==typeof l&&l,pointSizeAxis:"object"==typeof l&&l,fillStyleSolid:u,fillStylePaletted:d,shader:this.KR.Cz(Yg["3D"],Yg.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty(),d.lut]:"uniform",shadingStyle:this.av.C().type,wireframe:!1!==m}),Yg.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:dg(this.At),normalSource:e.$Y})),mousePicking:c?{shader:this.KR.Cz(Yg["3D"],Yg.MousePicking(),Yg.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:dg(this.At),normalSource:void 0}))}:void 0,wireframe:g&&m&&{thickness:g.getThickness(),fillStyleSolid:m}}}this.NG=t}return this.rl=!1,this.sl=[],this.el=0,this.vu=n,this.yH=a,this.av.u=!1,this.Wo.u=!1,this}qL(t,e){var i,s;const r=this.KR.gl,{lines:n,markers:o}=this.NG,a=this.av.C(),h=this.il,l=1===t?null===(i=null==n?void 0:n.mousePicking)||void 0===i?void 0:i.shader:null==n?void 0:n.shader;if(n&&l&&"instanced"===n.type){const i=l,{geometry:s,lineStyleSolid:o,fillStyleSolid:h,fillStylePaletted:u}=n;this.KR.TV(i,((n,l,c)=>{let d=!1;if(this.KR.cE(i).QV(n("uScale"),this.KY.kE.BV()).QV(n("uDisp"),this.KY.kE.LV()).KV(n("uViewProjectionMatrix"),this.aH).DV(n("uOffsetWU"),this.Bs.jm(o.getThickness())).DV(n("uIsHighlighted"),1===t||2===t?0:this.$o).PR(n("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(n("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===a.type&&this.KR.QV(n("uCameraLoc"),this.lH).QV(n("uLightLoc"),this.uH).DV(n("uAmbientReflection"),a.ambientReflection).DV(n("uSpecularReflection"),a.specularReflection).DV(n("uDiffuseReflection"),a.diffuseReflection).DV(n("uShininess"),a.shininess).PR(n("uLightColor"),a.specularColor).PR(n("uAmbientColor"),a.ambientColor),1===t);else if(h)this.KR.PR(n("uColorDiffuse"),h.getColor());else if(u){const t=gg(u,this,void 0);if(!t&&u.lut.percentageValues)return!1;this.KR.tN(c,u.lut,t)}const f=Pe(e);return this.LM.forEach((e=>{if(1===t){const[t,i]=f.Ut(e.existingDataPointsCount);this.KR.qV(n("uFirstId"),t).XO(c,i)}r.bindBuffer(r.ARRAY_BUFFER,e.vertexBuffer);const i=l("aLocationA"),o=l("aLocationB");r.vertexAttribPointer(i,3,r.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.KR.lO(i,1),r.enableVertexAttribArray(i),r.vertexAttribPointer(o,3,r.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.KR.lO(o,1),r.enableVertexAttribArray(o),s.cE(c).qy(e.existingCoordinatesCount-1),d=!0})),d}))}if(n&&l&&"primitive"===n.type){const i=l,{fillStyleSolid:s,fillStylePaletted:o}=n;this.KR.TV(i,((n,a,h)=>{let l=!1;if(this.KR.cE(i).QV(n("uScale"),this.KY.kE.BV()).QV(n("uDisp"),this.KY.kE.LV()).KV(n("uViewProjectionMatrix"),this.aH).DV(n("uIsHighlighted"),1===t||2===t?0:this.$o).PR(n("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(n("uRenderEffectMask"),2===t?1:0),1===t);else if(s)this.KR.PR(n("uColor"),s.getColor());else if(o){const t=gg(o,this,void 0);if(!t&&o.lut.percentageValues)return!1;this.KR.tN(h,o.lut,t)}const u=Pe(e);return this.LM.forEach((e=>{if(1===t){const[t,i]=u.Ut(e.existingDataPointsCount);this.KR.qV(n("uFirstId"),t).HO(h,i)}this.KR.FV(e.vertexBuffer,void 0,{location:a("aPos"),size:3}).qy(r.LINE_STRIP,e.existingCoordinatesCount),l=!0})),l}))}const u=1===t?null===(s=null==o?void 0:o.mousePicking)||void 0===s?void 0:s.shader:null==o?void 0:o.shader;if(o&&u){const i=u,{geometry:s,fillStyleSolid:r,fillStylePaletted:n,pointSizeAxis:h,pointSizeNWU:l,wireframe:c}=o;this.KR.TV(i,((o,u,d,f)=>{let g=!1;if(this.KR.cE(i).QV(o("uScale"),this.KY.kE.BV()).QV(o("uDisp"),this.KY.kE.LV()).KV(o("uViewProjectionMatrix"),this.aH).DV(f("uRatioNwuWu"),this.KY.vH()).DV(o("uIsHighlighted"),1===t||2===t?0:this.$o).PR(o("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(o("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===a.type&&this.KR.QV(o("uCameraLoc"),this.lH).QV(o("uLightLoc"),this.uH).DV(o("uAmbientReflection"),a.ambientReflection).DV(o("uSpecularReflection"),a.specularReflection).DV(o("uDiffuseReflection"),a.diffuseReflection).DV(o("uShininess"),a.shininess).PR(o("uLightColor"),a.specularColor).PR(o("uAmbientColor"),a.ambientColor),1===t);else if(r)this.KR.PR(o("uColorDiffuse"),r.getColor());else if(n){const t=gg(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.KR.tN(d,n.lut,t)}c&&1!==t&&this.KR.DV(o("uWireframeThickness"),c.thickness).PR(o("uWireframeColor"),c.fillStyleSolid.getColor()),!1!==h&&this.KR.QV(o("uOffsetAxis"),[h.x,h.y,h.z]),!1!==l&&this.KR.DV(o("uOffsetNWU"),l);const m=Pe(e);return this.LM.forEach((e=>{if(1===t){const[t,i]=m.Ut(e.existingDataPointsCount);this.KR.qV(o("uFirstId"),t).XO(d,i)}this.KR.FV(e.vertexBuffer,1,{location:u("aPos"),size:3}),s.qy(d,e.existingCoordinatesCount,"phong"===a.type&&1!==t,Boolean(c)&&1!==t),g=!0})),g}))}return{idCount:h}}Al(t,e){Array.isArray(t)||(t=[t]),this.sl=ae(this.sl,t,{canReturnB:!0}),this.el+=t.length;const i=e||ti(t);return this.hl=this.hl?ii(this.hl,i):i,this}We(t){return this.yu="function"==typeof t?t(this.yu):t,this}mu(){return this.yu}Wm(t){return this.Tv="function"==typeof t?t(this.Tv):t,this}SH(){return this.Tv}St(){return this.hl?Math.max(this.hl.max.x,this.tl.max.x):this.tl.max.x}vt(){return this.hl?Math.min(this.hl.min.x,this.tl.min.x):this.tl.min.x}bt(){return this.hl?Math.max(this.hl.max.y,this.tl.max.y):this.tl.max.y}xt(){return this.hl?Math.min(this.hl.min.y,this.tl.min.y):this.tl.min.y}Sv(){return this.hl?Math.max(this.hl.max.z,this.tl.max.z):this.tl.max.z}xv(){return this.hl?Math.min(this.hl.min.z,this.tl.min.z):this.tl.min.z}Tl(){return Ce(this.yu)}Fl(){return Ce(this.yu)}bv(){return Ce(this.yu)}al(){return this._u}ol(){return this.sl}pl(){return this.il}yl(){return this.el}Ot(){return this.rl=!0,this._u.length=0,this.il=0,this.sl=[],this.el=0,this.tl=Oe,this.hl=void 0,this}dispose(){return super.dispose(),this.NW.DW(),this.NG={},this}iE(){return this.dispose(),this}}const ep=(t,e)=>Zy(t,e>50?20:e>20?16:e>10?12:e>5?8:6),ip=(t,e)=>{const i=e.getSize();return Jy(t,"number"==typeof i?i>50?20:i>20?16:i>10?12:i>5?8:6:20)};class sp extends Xy{constructor(t,e,i){super(t,e,i),this.JY="disabled",this.xH=!1,this.bH=!1,this.MH={x:1,y:1,z:1},this.OS={x:0,y:0,z:0},this.VS={x:0,y:0,z:0},this.NS={x:0,y:0,z:0},this.GS={x:1,y:1,z:1},this._H=Sm.projectionOrthographic(-1,1,-1,1,1,-1),this.wH=Sm.projectionOrthographic(-1,1,-1,1,1,-1),this.CH=!1,this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStyleValuePalette:()=>K(this.Te)&&"value"===this.Te.lookUpProperty&&this.Te}),this.Te=Pr.fillStyle,this.av._(Jn)}zs(t){var e;const i=this.lV(),s=this.Wo.C(),r=this.Wo.u,n=this.ua();this.RN.fillStyleSolid(n);const o=this.RN.fillStyleValuePalette(n),a=this.NS,h=this.GS;if(this.xH&&this.kH&&(this.kG=this.KR.CV(this.kH.vertices,void 0,this.kG),this.TG=this.KR.rO(this.kH.indices,this.TG),this.TH=this.kH.indices.length),"phong"===this.av.C().type&&(i||this.xH)&&(null===(e=this.kH)||void 0===e?void 0:e.normals)&&(this.FH=this.KR.CV(this.kH.normals,void 0,this.FH)),!this.IH&&o&&"value"===o.lookUpProperty&&this.kH&&(this.IH=new Float32Array(this.kH.vertices.length/3),this.bH=!0),this.IH&&this.bH&&(this.PH=this.KR.CV(this.IH,void 0,this.PH)),i||n||r){if(o&&"value"!==o.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.IE=this.KR.Cz(Yg["3D"],Yg.ColorShaded3D({dataType:o?["lookup","value",o.lut]:"uniform",shadingStyle:this.av.C().type,wireframe:!1}),Yg.Model3D({normalSource:"phong"===this.av.C().type?"attribute":void 0})),this.VY=s?this.KR.Cz(Yg["3D"],Yg.MousePicking({useVertexId:!0}),Yg.Model3D({normalSource:void 0})):void 0}if(this.CH){const t=Sm.projectionOrthographic(-1,1,-1,1,1,-1);this.wH=Sm.rotateXYZ(t,a),this._H=Sm.translate(t,h.x/2,h.y/2,h.z/2),this._H=Sm.rotateXYZ(this._H,a),this._H=Sm.translate(this._H,-h.x/2,-h.y/2,-h.z/2),this.CH=!1}return this.av.u=!1,this.Aa(this.Te),this.Wo.u=!1,this.xH=!1,this.bH=!1,this}qL(t,e){const i=1===t?this.VY:this.IE,s=1===t,r=this.TG,n=this.TH,o=this.kG,a=this.FH,h=this.PH,l=this.OS,u=this.VS,c=this.MH,d=this.GS,f=this._H,g=this.wH,m=this.RN.fillStyleValuePalette(!1),y=this.RN.fillStyleSolid(!1),p=this.av.C(),x={location:void 0,size:1};if(!(i&&o&&r&&n&&this.kH))return{};const A=this.kH.vertices.length;return this.KR.TV(i,((S,v,b,M)=>{if(this.KR.cE(i).QV(S("uScale"),this.KY.kE.BV()).QV(S("uDisp"),this.KY.kE.LV()).KV(S("uViewProjectionMatrix"),this.aH).DV(S("uIsHighlighted"),1===t||2===t?0:this.$o).PR(S("uHighlightColorOffset"),this.Qo).DV(S("uRenderEffectMask"),2===t?1:0),s)this.KR.qV(S("uFirstId"),e).HO(b,A);else{if(this.Te===V)return!1;if(y)this.KR.PR(S("uColorDiffuse"),y.getColor());else if(m){if(!h)return!1;const t=m.getPalette();x.location=v("aLookupValue"),this.KR.tN(b,t,void 0).FV(h,void 0,x)}}return"phong"!==p.type||s||(this.KR.QV(S("uCameraLoc"),this.lH).QV(S("uLightLoc"),this.uH).DV(S("uAmbientReflection"),p.ambientReflection).DV(S("uSpecularReflection"),p.specularReflection).DV(S("uDiffuseReflection"),p.diffuseReflection).DV(S("uShininess"),p.shininess).PR(S("uLightColor"),p.specularColor).PR(S("uAmbientColor"),p.ambientColor).KV(S("uModelRotationNormals"),g),a&&this.KR.FV(a,void 0,{location:b.attribute("aNormal"),size:3})),this.KR.KV(S("uModelRotation"),f).QV(S("uModelScale"),[c.x,c.y,c.z]).QV(S("uLocationAxis"),[l.x,l.y,l.z]).QV(S("uModelAlignment"),[u.x,u.y,u.z]).QV(S("uModelSize"),[d.x,d.y,d.z]),this.KR.FV(o,0,{location:b.attribute("aGeoPos"),size:3}).fO(r).gO(n,this.KR.gl.TRIANGLES),!0})),{idCount:A}}DH(t){if(this.BH)return this.BH;const e=this.OS,i=this.VS,s=this.MH,r=this.GS,n=this.NS,o=this.KY.Lx(e),a=[],h=Sm.projectionOrthographic(-1,1,-1,1,1,-1);let l=Sm.translate(h,r.x/2,r.y/2,r.z/2);l=Sm.rotateXYZ(l,n),l=Sm.translate(l,-r.x/2,-r.y/2,-r.z/2);const u=(i.x+1)*(r.x/2),c=(i.y+1)*(r.y/2),d=(i.z+1)*(r.z/2);for(let e=0;e<t.vertices.length;e+=3){const i=Sm.multiply(l,[t.vertices[e],t.vertices[e+1],t.vertices[e+2],1]),r={x:o.x+(i[0]-u)*s.x,y:o.y+(i[1]-c)*s.y,z:o.z+(i[2]-d)*s.z};a.push(r)}return this.BH=a,this.BH}HS(t){const e=this.kH;if(!e)return;const i=this.DH(e),s=t(i);0!==s.length&&(s.length!==i.length&&!0===this.cs.Kn.io&&Tt.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.IH=s instanceof Float32Array?s:new Float32Array(s),this.bH=!0)}PN(t,e,i,s,r){return{info:{iVertex:t-e}}}US(t,e){const i=this.kH;if(!i||void 0===(null==t?void 0:t.iVertex))return;const s=[];for(let e=0;e<i.indices.length;e+=3){const r=i.indices[e],n=i.indices[e+1],o=i.indices[e+2];r!==t.iVertex&&n!==t.iVertex&&o!==t.iVertex||s.push([r,n,o])}const r=this.DH(i),n=this.cs.Ve(e.clientX,e.clientY),o=s.map((t=>t.map((t=>{const e={x:i.vertices[3*t],y:i.vertices[3*t+1],z:i.vertices[3*t+2]},s=r[t],o=this.KY.Rx(s),a=this.KY.Qm(o);return{index:t,vertex:e,world:s,axis:o,dist:a?Ze(a,n):Ve}})))).flat();o.sort(((t,e)=>t.dist-e.dist));const a=o[0];if(!a)return;const h=this.IH?this.IH[a.index]:void 0;return{coordModel:a.vertex,coordAxis:a.axis,index:a.index,value:h}}dispose(){return super.dispose(),this.kG&&(this.KR.zV(this.kG),this.kG=void 0),this.TG&&(this.KR.zV(this.TG),this.TG=void 0),this.FH&&(this.KR.zV(this.FH),this.FH=void 0),this.PH&&(this.KR.zV(this.PH),this.PH=void 0),this.IE=void 0,this.VY=void 0,this.kH=void 0,this.IH=void 0,this}iE(){return this.dispose(),this}YS(t){return this.kH=t,this.xH=!0,this.GS=t.modelSize,this}Be(t){return this.Te=sn(this.Te,t),this}Xh(){return this.Te}$S(t){return this.MH=t,this.BH=void 0,this}BV(){return this.MH}XS(t){return this.OS=t,this.BH=void 0,this}jS(t){return this.VS=t,this.BH=void 0,this}ZS(t){return this.NS=t,this.CH=!0,this.BH=void 0,this}QS(t){return this.JY=t,this}JS(){return this.JY}St(){return ze}vt(){return Ve}bt(){return ze}xt(){return Ve}Sv(){return ze}xv(){return Ve}Tl(){return 0}Fl(){return 0}bv(){return 0}ua(){return rn(this.ca,this.Te)}Aa(t){this.ca=t}}class rp extends Xy{constructor(t,e,i,s){super(t,e,i),this.JY="cull-back",this.LM=[],this.NW=new ry(this.LM,(t=>t.vertexBuffer&&this.KR.zV(t.vertexBuffer)),!1),this._u=[],this.il=0,this.sl=[],this.el=0,this.tl=Oe,this.hl=Oe,this.rl=!1,this.RN=fg({fillStyleSolid:()=>{const t=this.Pv.getFillStyle();return Y(t)&&t},fillStyleIndividual:()=>{const t=this.Pv.getFillStyle();return H(t)&&t},fillStylePalette:()=>{const t=this.Pv.getFillStyle();return K(t)&&t},triangulatedPointStyle:()=>{const t=this.Pv;return Sr(t)&&t},wireframeLineStyleSolid:()=>{const t=Sr(this.Pv)&&this.Pv,e=t&&t.getWireframeStyle();return ns(e)&&e},wireframeFillStyleSolid:()=>{const t=Sr(this.Pv)&&this.Pv,e=t&&t.getWireframeStyle(),i=e&&e.getFillStyle();return Y(i)&&i}}),this.nl=void 0,this.Kn=s,this.Pv=Pr.pointStyle3D,this.av._(Jn);const r=!0===(null==s?void 0:s.individualPointColorEnabled),n=!0===(null==s?void 0:s.individualPointSizeEnabled),o=!0===(null==s?void 0:s.individualLookupValuesEnabled),a=!0===(null==s?void 0:s.individualPointSizeAxisEnabled);let h,l,u,c,d=0;d+=3,r&&(h=d,d+=4),n&&(l=d,d+=1),o&&(u=d,d+=1),a&&(c=d,d+=3);const f=((t,e,i,s)=>t||e||i||s?!t||e||i||s?t||!e||i||s?t||e||!i||s?t||e||i||!s?(r,n,o)=>{const a=3+(t?4:0)+(e?1:0)+(i?1:0)+(s?3:0),h=r.length,l=new Float32Array(h*a);let u=0,c=u;for(let t=0;t<h;t+=1){const e=r[t];l[c+0]=e.x,l[c+1]=e.y,l[c+2]=e.z,c+=a}if(u+=3,t){const t=o&&H(o)&&o.getFallbackColor()||E;c=u;for(let e=0;e<h;e+=1){const i=r[e].color||t;l[c+0]=i.r,l[c+1]=i.g,l[c+2]=i.b,l[c+3]=i.a,c+=a}u+=4}if(e){const t=n&&n.getSize();let e=1;"number"==typeof t&&(e=t),c=u;for(let t=0;t<h;t+=1){const i=r[t],s=void 0!==i.size?i.size:e;l[c+0]=s,c+=a}u+=1}if(i){c=u;for(let t=0;t<h;t+=1){const e=r[t];l[c+0]=void 0!==e.value?e.value:-34028234663852886e22,c+=a}u+=1}if(s){const t=n&&n.getSize();let e={x:1,y:1,z:1};"object"==typeof t&&(e=t),c=u;for(let t=0;t<h;t+=1){const i=r[t],s=void 0!==i.sizeAxisX?i.sizeAxisX:e.x,n=void 0!==i.sizeAxisY?i.sizeAxisY:e.y,o=void 0!==i.sizeAxisZ?i.sizeAxisZ:e.z;l[c+0]=s,l[c+1]=n,l[c+2]=o,c+=a}u+=3}return l}:(t,e,i)=>((t,e)=>{const i=e&&e.getSize();let s={x:1,y:1,z:1};"object"==typeof i&&(s=i);const r=t.length,n=new Float32Array(6*r);let o=0;for(let e=0;e<r;e+=1){const i=t[e];n[o+0]=i.x,n[o+1]=i.y,n[o+2]=i.z;const r=void 0!==i.sizeAxisX?i.sizeAxisX:s.x,a=void 0!==i.sizeAxisY?i.sizeAxisY:s.y,h=void 0!==i.sizeAxisZ?i.sizeAxisZ:s.z;n[o+3]=r,n[o+4]=a,n[o+5]=h,o+=6}return n})(t,e):(t,e,i)=>(t=>{const e=t.length,i=new Float32Array(4*e);for(let s=0,r=0;s<e;s+=1){const e=t[s];i[r+0]=e.x,i[r+1]=e.y,i[r+2]=e.z,i[r+3]=void 0!==e.value?e.value:-34028234663852886e22,r+=4}return i})(t):(t,e,i)=>((t,e)=>{const i=e&&e.getSize();let s=1;"number"==typeof i&&(s=i);const r=t.length,n=new Float32Array(4*r);for(let e=0,i=0;e<r;e+=1){const r=t[e];n[i+0]=r.x,n[i+1]=r.y,n[i+2]=r.z;const o=void 0!==r.size?r.size:s;n[i+3]=o,i+=4}return n})(t,e):(t,e,i)=>((t,e)=>{const i=e&&H(e)&&e.getFallbackColor()||E,s=t.length,r=new Float32Array(7*s);for(let e=0,n=0;e<s;e+=1){const s=t[e];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const o=s.color||i;r[n+3]=o.r,r[n+4]=o.g,r[n+5]=o.b,r[n+6]=o.a,n+=7}return r})(t,i):(t,e,i)=>te(t))(r,n,o,a);this.HW={individualPointColorEnabled:r,individualPointSizeEnabled:n,individualLookupValuesEnabled:o,individualPointSizeAxisEnabled:a,attributesPerVertex:d,attributeOffsetCoordinate:0,attributeOffsetColor:h,attributeOffsetSize:l,attributeOffsetLookUpValue:u,attributeOffsetPointSize3D:c,prepareRenderData:(t,e)=>f(t,this.Pv,this.Pv.fillStyle)}}PN(t,e,i,s,r){return{info:{dataPoint:this._u[t-e]}}}zs(t){const e=this.rl,i=this.sl,s=this.el,r=s>0,n=this.Pv,o=this.Pv!==this.LH,a=this.Wo.C(),h=this.Wo.u,l=this.lV();this.hl&&(this.tl=ii(this.tl,this.hl),this.hl=void 0),r&&(this._u=ae(this._u,i,{canReturnB:!0}),this.il+=s);let u=i,c=s;if(e&&(this.LM.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=Oe})),this.NW.PW(),u=this._u,c=this.il),c>0){const t=Math.floor(this.wN.mH/(this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),e=_t(c,1e5,t);this.NW.kW(u,e,((t,e,i)=>({existingDataPointsCount:i,existingCoordinatesCount:i,allocatedCoordinatesCount:t,boundaries:Oe,vertexBuffer:this.KR.sO(t*this.HW.attributesPerVertex,this.HW.prepareRenderData(e,i))})),((t,e,i)=>{this.KR.eO(t.vertexBuffer,t.existingCoordinatesCount*this.HW.attributesPerVertex,this.HW.prepareRenderData(e,i)),t.existingDataPointsCount+=i,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=n.getFillStyle(),f=this.RN.fillStyleSolid(o),g=this.RN.fillStyleIndividual(o),m=this.RN.fillStylePalette(o),y=d===V&&V;if(o||l||h){let t;const e=n.getSize(),i=this.HW.individualPointColorEnabled,s=this.HW.individualPointSizeEnabled,r=this.HW.individualPointSizeAxisEnabled,h=this.HW.individualLookupValuesEnabled;if(g&&!i){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Tt.alert(t),new Error(t)}if(m&&"value"===m.getLookUpProperty()&&!h){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Tt.alert(t),new Error(t)}const l=this.RN.wireframeLineStyleSolid(o),u=this.RN.wireframeFillStyleSolid(o);if(f||g||m||u){const i=g?"attribute":m?["lookup",m.getLookUpProperty(),m.lut]:"uniform",o=s&&"number"==typeof e,h=r&&"object"==typeof e,c=o||h?"attribute":"uniform";if(Sr(n)){const r=ne(n.getShape(),{cube:()=>Wy(this.KR),sphere:()=>np(this.KR,n,s)});t={type:"instanced",shader:this.KR.Cz(Yg["3D"],Yg.ColorShaded3D({dataType:i,shadingStyle:this.av.C().type,wireframe:!1!==u}),Yg.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof e?"nwu":"axis",halved:!0,symmetric:"number"==typeof e},axisWorldTranslation:dg(this.At),normalSource:r.$Y})),pointStyle:n,useIndividualPointSize:o,useIndividualPointSize3D:h,pointSizeNWU:"number"==typeof e&&e,pointSizeAxis:"object"==typeof e&&e,fillStyleSolid:f,fillStyleIndividual:g,fillStylePaletted:m,fillStyleEmpty:y,mousePickingShader:a&&this.KR.Cz(Yg["3D"],Yg.MousePicking(),Yg.VertexLocation({offset:{dataType:c,sizeUnit:"number"==typeof e?"nwu":"axis",halved:!0,symmetric:"number"==typeof e},axisWorldTranslation:dg(this.At),normalSource:void 0})),geometry:r,wireframe:l&&u&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:u}}}else Mr(n)&&"number"==typeof e&&(t={type:"primitive",shader:this.KR.Cz(Yg["3D"],Yg.PointSize(c),Yg.Color({dataType:i}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0})),pointStyle:n,pointSizePixels:e,useIndividualPointSize:o,fillStyleSolid:f,fillStyleIndividual:g,fillStylePaletted:m,mousePickingShader:a&&this.KR.Cz(Yg["3D"],Yg.PointSize(c),Yg.MousePicking({useVertexId:!0}),Yg.VertexLocation({axisWorldTranslation:dg(this.At),normalSource:void 0}))})}this.NG=t}if(void 0===this.nl&&m&&"value"===m.lookUpProperty&&m.lut.percentageValues){let t=ze,e=Ve;for(let i=0;i<this._u.length;i+=1){const s=this._u[i];void 0!==s.value&&s.value<e&&(e=s.value),void 0!==s.value&&s.value>t&&(t=s.value)}this.nl={min:e,max:t}}return this.rl=!1,this.sl=[],this.el=0,this.LH=n,this.av.u=!1,this}qL(t,e){const i=this.KR.gl,s=this.NG,r=this.il;if(!s)return{};const n=1===t?s.mousePickingShader:s.shader;if(!n)return{};const o=this.av.C(),{fillStyleSolid:a,fillStylePaletted:h,useIndividualPointSize:l}=s,u="instanced"===s.type&&s.useIndividualPointSize3D,c="instanced"===s.type&&s.wireframe;return this.KR.TV(n,((r,d,f,g)=>{let m=!1;if(this.KR.cE(n).QV(r("uScale"),this.KY.kE.BV()).QV(r("uDisp"),this.KY.kE.LV()).KV(r("uViewProjectionMatrix"),this.aH).DV(r("uIsHighlighted"),1===t||2===t?0:this.$o).PR(r("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(r("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:e}=s;!1!==t&&!1===u&&this.KR.QV(r("uOffsetAxis"),[t.x,t.y,t.z]),!1!==e&&!1===l&&this.KR.DV(r("uOffsetNWU"),e).DV(g("uRatioNwuWu"),this.KY.vH())}else if("primitive"===s.type){const{pointSizePixels:t}=s;l||this.KR.DV(r("uPointSize"),t).DV(r("uDevicePixelRatio"),this.KR.dV())}if(1===t);else if("instanced"===s.type?("phong"===o.type&&this.KR.QV(r("uCameraLoc"),this.lH).QV(r("uLightLoc"),this.uH).DV(r("uAmbientReflection"),o.ambientReflection).DV(r("uSpecularReflection"),o.specularReflection).DV(r("uDiffuseReflection"),o.diffuseReflection).DV(r("uShininess"),o.shininess).PR(r("uLightColor"),o.specularColor).PR(r("uAmbientColor"),o.ambientColor),c&&this.KR.DV(r("uWireframeThickness"),c.thickness).PR(r("uWireframeColor"),c.fillStyleSolid.getColor()),a&&this.KR.PR(r("uColorDiffuse"),a.getColor()),s.fillStyleEmpty&&this.KR.PR(r("uColorDiffuse"),R)):"primitive"===s.type&&a&&this.KR.PR(r("uColor"),a.getColor()),h){const t=gg(h,this,this.nl);if(!t&&h.lut.percentageValues)return!1;this.KR.tN(f,h.lut,t)}const y=Pe(e);return this.LM.forEach((e=>{if(1===t){const[t,i]=y.Ut(e.existingDataPointsCount);this.KR.qV(r("uFirstId"),t),"instanced"===s.type?this.KR.XO(f,i):this.KR.HO(f,i)}i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=d("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.KR.lO(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.HW.attributeOffsetColor&&1!==t){const t=d("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.KR.lO(t,1),i.enableVertexAttribArray(t)}if(l&&void 0!==this.HW.attributeOffsetSize){"instanced"===s.type?this.KR.DV(g("uRatioNwuWu"),this.KY.vH()):"primitive"===s.type&&this.KR.DV(r("uDevicePixelRatio"),this.KR.dV());const t=d("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.KR.lO(t,1),i.enableVertexAttribArray(t)}if(u&&void 0!==this.HW.attributeOffsetPointSize3D&&"instanced"===s.type){const t=d("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.KR.lO(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePaletted&&"value"===s.fillStylePaletted.getLookUpProperty()&&void 0!==this.HW.attributeOffsetLookUpValue&&1!==t){const t=d("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.HW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.HW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.KR.lO(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.qy(f,e.existingCoordinatesCount,"phong"===o.type&&1!==t,Boolean(c)&&1!==t),m=!0):"primitive"===s.type&&(this.KR.qy(i.POINTS,e.existingCoordinatesCount),m=!0)})),m})),{idCount:r}}Al(t,e){Array.isArray(t)||(t=[t]),this.sl=ae(this.sl,t,{canReturnB:!0}),this.el+=t.length;const i=e||ti(t);return this.hl=this.hl?ii(this.hl,i):i,this.nl=void 0,this}Dv(t){return this.Pv="function"==typeof t?t(this.Pv):t,this}RH(){return this.Pv}St(){return this.hl?Math.max(this.hl.max.x,this.tl.max.x):this.tl.max.x}vt(){return this.hl?Math.min(this.hl.min.x,this.tl.min.x):this.tl.min.x}bt(){return this.hl?Math.max(this.hl.max.y,this.tl.max.y):this.tl.max.y}xt(){return this.hl?Math.min(this.hl.min.y,this.tl.min.y):this.tl.min.y}Sv(){return this.hl?Math.max(this.hl.max.z,this.tl.max.z):this.tl.max.z}xv(){return this.hl?Math.min(this.hl.min.z,this.tl.min.z):this.tl.min.z}Tl(){const t=this.Pv,e=t.getSize();return"number"==typeof e?Sr(t)?e/2:Mr(t)?5:0:0}Fl(){return this.Tl()}bv(){return this.Tl()}al(){return this._u}ol(){return this.sl}pl(){return this.il}yl(){return this.el}Ot(){return this.rl=!0,this._u.length=0,this.il=0,this.sl=[],this.el=0,this.tl=Oe,this.hl=void 0,this.nl=void 0,this}dispose(){return super.dispose(),this.NW.DW(),this.NG=void 0,this}iE(){return this.dispose(),this}}const np=(t,e,i)=>{const s=e.getSize();return Jy(t,"number"==typeof s?i||s>=50?20:s>=10?10:s>=3?5:3:32)};class op extends Xy{constructor(t,e,i,s){super(t,e,i),this.JY="disabled",this.Te=Pr.fillStyle,this.bS=Pr.lineStyle,this.IU=p("bilinear"),this.EH=[],this.zH=void 0,this.NG={},this.VH=!1,this.RN=fg({fillStyleSolid:()=>Y(this.Te)&&this.Te,fillStylePaletted:()=>K(this.Te)&&this.Te,wireframeStyleLine:()=>ns(this.bS)&&this.bS,wireframeStyleFill:()=>{const t=this.bS&&this.bS.getFillStyle();return Y(t)&&t}}),this.Pi={x:0,z:0},this.mw={x:1,z:1},this.av._(Qn);const r="columns"===s.dataOrder?s.columns:s.rows,n="columns"===s.dataOrder?s.rows:s.columns;this.Kn={...s,primaryDimensionVectorsCount:r,secondaryDimensionVectorsCount:n},this.OH=new Array(this.Kn.primaryDimensionVectorsCount).fill(void 0),this.h_=new by(this.wN,t.wN.$U,t.cs.At,Rt,[],this.Kn).MS(nt),this.h_.BU=yy;const o=this.h_.RU.gridTiles.map((t=>{const e=t.sizeHeatmapDataVectors,i=t.sizeUniqueHeatmapDataVectors,s=t.iFirstVector,r=t.iFirstUniqueVector,n=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),o={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:s,iFirstGeometryUniqueVector:r,sizeGeometryDataVectors:e,sizeUniqueGeometryDataVectors:i,heightmapData:n,normalmapSize:o}})),a=this.h_.RU.gridTileSizes.map((t=>{const e=o.filter((e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),i=e[0].sizeGeometryDataVectors;return{...t,tiles:e,sizeGeometryData:i}})),h=o.reduce(((t,e)=>{const i=e.sizeHeatmapDataVectors.primary,s=e.sizeHeatmapDataVectors.secondary,r=i*s;return r>t.cells?{primary:i,secondary:s,cells:r}:t}),{primary:0,secondary:0,cells:0});this.NH={gridTiles:o,gridTileSizes:a,largestGridTileSize:h},this.CS(this.Pi,this.mw)}PN(t,e,i,s,r){const n=t-e,o=n%(this.Kn.secondaryDimensionVectorsCount-1),a=Math.floor(n/(this.Kn.secondaryDimensionVectorsCount-1)),h="columns"===this.Kn.dataOrder?a:o,l="rows"===this.Kn.dataOrder?a:o,u=[{x:this.Pi.x+h*this.mw.x,z:this.Pi.z+l*this.mw.z,y:this.GH(a,o),intensity:this.WH(a,o),column:"columns"===this.Kn.dataOrder?a:o,row:"columns"===this.Kn.dataOrder?o:a},{x:this.Pi.x+(h+("columns"===this.Kn.dataOrder?1:0))*this.mw.x,z:this.Pi.z+(l+("rows"===this.Kn.dataOrder?1:0))*this.mw.z,y:this.GH(a+1,o),intensity:this.WH(a+1,o),column:"columns"===this.Kn.dataOrder?a+1:o,row:"columns"===this.Kn.dataOrder?o:a+1},{x:this.Pi.x+(h+1)*this.mw.x,z:this.Pi.z+(l+1)*this.mw.z,y:this.GH(a+1,o+1),intensity:this.WH(a+1,o+1),column:"columns"===this.Kn.dataOrder?a+1:o+1,row:"columns"===this.Kn.dataOrder?o+1:a+1},{x:this.Pi.x+(h+("columns"===this.Kn.dataOrder?0:1))*this.mw.x,z:this.Pi.z+(l+("rows"===this.Kn.dataOrder?0:1))*this.mw.z,y:this.GH(a,o+1),intensity:this.WH(a,o+1),column:"columns"===this.Kn.dataOrder?a:o+1,row:"columns"===this.Kn.dataOrder?o+1:a}],c=u.map((t=>this.KY.Qm(t))).map((t=>void 0===t?Ve:Ze(t,{x:s,y:r}))).map(((t,e)=>({i:e,dist:t})));return c.sort(((t,e)=>t.dist-e.dist)),{info:{dataPoint:{...u[c[0].i]}}}}GH(t,e){for(let i=0;i<this.NH.gridTiles.length;i+=1){const s=this.NH.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.heightmapData[n]}}return 0}WH(t,e){if(this.h_.DU)for(let i=0;i<this.h_.RU.gridTiles.length;i+=1){const s=this.h_.RU.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.intensityData[n]}}}UH(t){this.YH=t,this.zH=void 0}CS(t,e){this.Pi=t,this.mw=e;const i=this.Kn,s={min:{x:Math.min(this.Pi.x,this.Pi.x+(i.columns-1)*this.mw.x),z:Math.min(this.Pi.z,this.Pi.z+(i.rows-1)*this.mw.z)},max:{x:Math.max(this.Pi.x,this.Pi.x+(i.columns-1)*this.mw.x),z:Math.max(this.Pi.z,this.Pi.z+(i.rows-1)*this.mw.z)}},r=new Map;return this.NH.gridTiles.forEach((t=>{const e="columns"===this.Kn.dataOrder?{x:this.mw.x*(t.sizeHeatmapDataVectors.primary-1),z:this.mw.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.mw.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.mw.z*(t.sizeHeatmapDataVectors.primary-1)},i="columns"===this.Kn.dataOrder?{x:this.Pi.x+this.mw.x*t.iFirstVector.primary,z:this.Pi.z+this.mw.z*t.iFirstVector.secondary}:{x:this.Pi.x+this.mw.x*t.iFirstVector.secondary,z:this.Pi.z+this.mw.z*t.iFirstVector.primary};r.set(t,{sizeAxis:e,startLocationAxis:i})})),this.GU={HH:s,tilesInfo:r},this}kS(){return{start:this.Pi,step:this.mw,end:{x:this.Pi.x+this.mw.x*this.Kn.columns,z:this.Pi.z+this.mw.z*this.Kn.rows}}}zs(t){const e=this.EH,i=rn(this.ca,this.Te),s=this.RN.fillStyleSolid(i),r=this.RN.fillStylePaletted(i),n=this.bS,o=this.bS!==this.EU,a=this.RN.wireframeStyleLine(o),h=this.RN.wireframeStyleFill(o),l=!1!==h,u=this.IU.u,c=this.IU.C(),d=this.av.C(),f=this.lV(),g=this.Wo.C();this.h_.zs();const m=this.h_.zU;if(!m)return this;this.$H=this.$H||this.XH(m);const y=this.$H;this.jH(y);const p=py(e,y,void 0,(t=>t.sizeGeometryDataVectors));if(p.size>0&&(Sy(this.KR,p,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.VH=!0),"phong"===d.type&&(p.size>0||f)){const t=this.KR.gl,e=this.KR.Cz(Yg["2D"],Yg.DrawToNormalTexture({flipXZ:"rows"===this.Kn.dataOrder,vertexIdSource:this.KR.YO(),normalTextureType:this.KR.gl2?"uint":"ubyte",heightmapTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN}));y.gridTileSizes.forEach((i=>{i.tiles.forEach((s=>{var r;const n=s.normalmapTexture,o=null===(r=this.GU)||void 0===r?void 0:r.tilesInfo.get(s.tileData);if(!n||!o)return;const a={x:s.normalmapSize.secondary,y:s.normalmapSize.primary},h=a.x*a.y;this.KR.kO.qL((()=>{this.KR.TV(e,((r,n,a,l)=>(this.KR.cE(e).HO(a,h).IV(r("uTileDimensionsXZ"),["columns"===this.Kn.dataOrder?i.sizeHeatmapData.primary:i.sizeHeatmapData.secondary,"columns"===this.Kn.dataOrder?i.sizeHeatmapData.secondary:i.sizeHeatmapData.primary]).jV(r("uTileDimensions"),[i.sizeHeatmapData.primary,i.sizeHeatmapData.secondary]).IV(r("uTileStartLocationAxisXZ"),[o.startLocationAxis.x,o.startLocationAxis.z]).IV(r("uTileSizeAxisXZ"),[o.sizeAxis.x,o.sizeAxis.z]).PV(r("uHeightmapTexture"),s.heightmapDataTexture,1).qy(t.POINTS,h),!0)))}),n,a,void 0,this.cs.Tn(),0)}))}))}const x=this.NG;if(i||o||u){const t=a&&h?{wireframeSolid:a,wireframeFillSolid:h}:void 0;s?x.surface={shader:this.KR.Cz(Yg["3D"],Yg.SurfaceGrid({axisWorldTranslation:dg(this.At),fillColor:"uniform",interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Kn.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.KR.gl2?"uint":"ubyte",intensityTextureType:this.KR.xz?"float":"ubyte",heightmapTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:s},wireframe:t}:r&&"value"===r.getLookUpProperty()?x.surface={shader:this.KR.Cz(Yg["3D"],Yg.SurfaceGrid({axisWorldTranslation:dg(this.At),fillColor:["lookup","value",r.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Kn.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.KR.gl2?"uint":"ubyte",intensityTextureType:this.KR.xz?"float":"ubyte",heightmapTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:r},wireframe:t}:r?x.surface={shader:this.KR.Cz(Yg["3D"],Yg.SurfaceGrid({axisWorldTranslation:dg(this.At),fillColor:["lookup",r.getLookUpProperty(),r.lut],interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Kn.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.KR.gl2?"uint":"ubyte",intensityTextureType:this.KR.xz?"float":"ubyte",heightmapTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:r},wireframe:t}:l&&(x.surface={shader:this.KR.Cz(Yg["3D"],Yg.SurfaceGrid({axisWorldTranslation:dg(this.At),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Kn.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.KR.gl2?"uint":"ubyte",intensityTextureType:this.KR.xz?"float":"ubyte",heightmapTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return x.mousePicking=g?this.NG.mousePicking||{shader:this.KR.Cz(Yg["3D"],Yg.MousePicking(),Yg.SurfaceGrid({axisWorldTranslation:dg(this.At),fillColor:void 0,interpolation:"bilinear"===c&&"bilinear",flipXZ:"rows"===this.Kn.dataOrder,shadingStyle:"simple",wireframe:!1,normalTextureType:this.KR.gl2?"uint":"ubyte",intensityTextureType:this.KR.xz?"float":"ubyte",heightmapTextureType:this.KR.xz?"float":"ubyte",littleEndian:this.KR.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.NG=x,this.EH.length=0,this.ca=this.Te,this.EU=n,this.av.u=!1,this}XH(t){const e=this.NH.gridTiles.map((e=>{const i=Ay(this.KR,e.sizeHeatmapDataVectors.secondary,e.sizeHeatmapDataVectors.primary),s=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===e.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===e.iFirstUniqueVector.secondary));if(!s)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...e,intensityDataTexture:s.intensityDataTexture,heightmapDataTexture:i,normalmap:void 0,tileData:e}})),i=this.NH.gridTileSizes.map((t=>{const i=e.filter((e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:i}})),s=this.KR.CV([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),r=this.KR.gl.TRIANGLES;return{gridTiles:e,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:r}}jH(t){var e;if("phong"===this.av.C().type)for(let i=0;i<t.gridTiles.length;i+=1){const s=t.gridTiles[i];if(s.normalmapTexture)return;let r;const n=null===(e=this.KR.gl2)||void 0===e?void 0:e.ctx;if(n)r=this.KR.BO(null,n.RGBA_INTEGER,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,n.UNSIGNED_INT,n.RGBA32UI);else{const t=this.KR.gl;r=this.KR.BO(null,t.RGBA,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}s.normalmapTexture=r}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.KR.sE(t.normalmapTexture),t.normalmapTexture=void 0)}))}qL(t,e){var i,s,r,n;const o=this.KR.gl,a=this.$H;if(!a)return{};const h=this.av.C(),l=this.NG,u=1===t?null===(i=l.mousePicking)||void 0===i?void 0:i.shader:null===(s=l.surface)||void 0===s?void 0:s.shader;if(!u)return{};const c=1!==t?null===(r=l.surface)||void 0===r?void 0:r.wireframe:void 0,d=1!==t?null===(n=l.surface)||void 0===n?void 0:n.fill:void 0;return this.KR.TV(u,((i,s,r,n)=>{let l=!1;if(this.KR.cE(u).XO(r,this.NH.largestGridTileSize.cells).QV(i("uScale"),this.KY.kE.BV()).QV(i("uDisp"),this.KY.kE.LV()).KV(i("uViewProjectionMatrix"),this.aH).DV(i("uIsHighlighted"),1===t||2===t?0:this.$o).PR(i("uHighlightColorOffset"),1===t||2===t?R:this.Qo).DV(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===h.type&&this.KR.QV(i("uCameraLoc"),this.lH).QV(i("uLightLoc"),this.uH).DV(i("uAmbientReflection"),h.ambientReflection).DV(i("uSpecularReflection"),h.specularReflection).DV(i("uDiffuseReflection"),h.diffuseReflection).DV(i("uShininess"),h.shininess).PR(i("uLightColor"),h.specularColor).PR(i("uAmbientColor"),h.ambientColor),c)){const{wireframeFillSolid:t,wireframeSolid:e}=c,s=e.getThickness()<0?1:e.getThickness();this.KR.PR(i("uWireframeColor"),t.getColor()).DV(i("uWireframeThickness"),s)}return 1===t||"solid"===(null==d?void 0:d.fillMode)&&this.KR.PR(i("uColorDiffuse"),d.fillStyleSolid.getColor()),a.gridTileSizes.forEach((n=>{this.KR.IV(i("uTileDimensionsXZ"),["columns"===this.Kn.dataOrder?n.sizeHeatmapData.primary:n.sizeHeatmapData.secondary,"columns"===this.Kn.dataOrder?n.sizeHeatmapData.secondary:n.sizeHeatmapData.primary]).jV(i("uTileDimensions"),[n.sizeHeatmapData.primary,n.sizeHeatmapData.secondary]),n.tiles.forEach((h=>{var u;const f=null===(u=this.GU)||void 0===u?void 0:u.tilesInfo.get(h.tileData);if(!f)return;let g=0,y=(h.sizeHeatmapDataVectors.primary-1)*(h.sizeHeatmapDataVectors.secondary-1);if(this.YH){const t=this.YH.fill.iFirstPrimary,e=this.YH.fill.iFirstPrimary+this.YH.fill.amountPrimary-1,i=h.iFirstVector.primary,s=h.iFirstVector.primary+h.sizeHeatmapDataVectors.primary-1;if(i>e||s<t)return;const r=((t,e,i,s)=>m(Math.max(t,i),Math.min(e,s)))(t,e,i,s);g=(r.min-h.iFirstVector.primary)*(n.sizeGeometryData.secondary-1),y=(r.max-r.min)*(n.sizeGeometryData.secondary-1)}if(!(g<0||y<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,e=this.h_.nl;this.KR.tN(r,t.lut,e).PV(i("uTileIntensityValues"),h.intensityDataTexture,2).ZV(i("uTileBoundsAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z,f.sizeAxis.x,f.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,e="x"===t.getLookUpProperty()?{min:this.vt(),max:this.St()}:"y"===t.getLookUpProperty()?{min:this.xt(),max:this.bt()}:"z"===t.getLookUpProperty()?{min:this.xv(),max:this.Sv()}:void 0;if(!e&&t.lut.percentageValues)return;this.KR.tN(r,t.lut,e)}1!==t&&"phong"===this.av.C().type&&h.normalmapTexture&&this.KR.PV(i("uNormalmapTexture"),h.normalmapTexture,3),1===t&&this.KR.qV(i("uFirstId"),e+g),this.KR.FV(a.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:c?s("aTriangleBary"):void 0,size:3}).qV(i("uBaseInstance"),g).IV(i("uTileStartLocationAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z]).IV(i("uTileSizeAxisXZ"),[f.sizeAxis.x,f.sizeAxis.z]).PV(i("uHeightmapTexture"),h.heightmapDataTexture,0).pO(a.rectangleLocationsDrawMode,0,a.rectangleLocationsDrawLength,y),l=!0,o.bindBuffer(o.ARRAY_BUFFER,null)}}))})),l})),{idCount:this.Kn.columns*this.Kn.rows}}dispose(){return super.dispose(),this.h_.dispose(),this.$H&&(this.$H.gridTileSizes.forEach((t=>{})),this.$H.gridTiles.forEach((t=>{this.KR.sE(t.heightmapDataTexture),t.normalmapTexture&&this.KR.sE(t.normalmapTexture)})),this.KR.zV(this.$H.rectangleLocationsBuffer),this.$H=void 0),this.NG={},this}iE(){return this.dispose(),this.h_.iE(),this}PS(t){return this.h_.PS(t),this}DS(t){this.EH.push(t),xy(this.NH.gridTiles,t,(t=>t.heightmapData));for(let e=t.startPrimary;e<t.startPrimary+t.lengthPrimary;e+=1)this.OH[e]=void 0;return this.zH=void 0,this}FS(t){return this.IU._(t),this}IS(){return this.IU.C()}Be(t){return this.Te=sn(this.Te,t),this.h_.Be(this.Te),this}Xh(){return this.Te}MS(t){return this.bS="function"==typeof t?t(this.bS):t,this}TS(){return this.bS}St(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.HH.max.x)||0}vt(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.HH.min.x)||0}bt(){const t=this.zH||this.ZH();return this.zH=t,t.max}xt(){const t=this.zH||this.ZH();return this.zH=t,t.min}Sv(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.HH.max.z)||0}xv(){var t;return(null===(t=this.GU)||void 0===t?void 0:t.HH.min.z)||0}Tl(){return 0}Fl(){return 0}bv(){return 0}ZH(){if(this.zH)return this.zH;const t=this.YH?this.YH.fill.iFirstPrimary:0,e=this.YH?t+this.YH.fill.amountPrimary-1:this.Kn.primaryDimensionVectorsCount-1;let i=Ve,s=ze;return this.NH.gridTiles.forEach((r=>{for(let n=Math.max(t,r.iFirstUniqueVector.primary);n<=Math.min(e,r.iFirstUniqueVector.primary+r.sizeUniqueHeatmapDataVectors.primary-1);n+=1){const t=(n-r.iFirstUniqueVector.primary)*r.sizeHeatmapDataVectors.secondary;let e=this.OH[n];if(e)i=i<e.min?i:e.min,s=s>e.max?s:e.max;else{e={min:Ve,max:ze},this.OH[n]=e;for(let n=0;n<r.sizeHeatmapDataVectors.secondary;n+=1){const o=r.heightmapData[t+n];i=i<o?i:o,s=s>o?s:o,e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}}}})),this.zH={min:i,max:s},this.zH}}class ap extends Xy{constructor(t,e,i,s){super(t,e,i),this.JY="disabled",this.UU=0,this.HU={},this.QH=new Map,this.Pi={x:0,z:0},this.mw={x:1,z:1},this.Kn={...s,scrollDimensionSize:"columns"===s.scrollDimension?s.columns:s.rows,staticDimensionSize:"columns"===s.scrollDimension?s.rows:s.columns},this.HH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:"rows"===s.scrollDimension?this.Pi.x+(s.columns-1)*this.mw.x:this.Pi.x,z:"columns"===s.scrollDimension?this.Pi.z+(s.rows-1)*this.mw.z:this.Pi.z}};const r=()=>({shape:new op(this.KY,Rt,this.jo,{columns:s.columns+("columns"===s.scrollDimension?1:0),rows:s.rows+("rows"===s.scrollDimension?1:0),dataOrder:s.scrollDimension,heatmapDataType:"intensity"}).setVisible(!1),hasData:!1});this.LM=[r(),r()]}zs(t){this.LM.forEach((e=>{e.shape.zs(t)}));const e=this.LM.reduce(((t,e)=>{var i,s;return t.min=Math.min(t.min,Dt(null===(i=e.shape.h_.nl)||void 0===i?void 0:i.min,Ve)),t.max=Math.max(t.max,Dt(null===(s=e.shape.h_.nl)||void 0===s?void 0:s.max,ze)),t}),{min:Ve,max:ze}),i=this.LM.reduce(((t,e)=>{var i,s;return t.min=Math.min(t.min,Dt(null===(i=e.shape.zH)||void 0===i?void 0:i.min,Ve)),t.max=Math.max(t.max,Dt(null===(s=e.shape.zH)||void 0===s?void 0:s.max,ze)),t}),{min:Ve,max:ze});return this.LM.forEach((t=>{t.shape.h_.nl=e,t.shape.zH=i})),this}qL(t,e){let i=0;return this.LM.forEach((s=>{if(!s.hasData)return;s.shape.aH=this.aH,s.shape.lH=this.lH,s.shape.uH=this.uH;const{idCount:r}=s.shape.qL(t,e+i);void 0!==r&&(this.QH.set(s,{idFirst:e+i,idCount:r}),i+=r)})),{idCount:i}}PN(t,e,i,s,r){const n=Array.from(this.QH).find((e=>je(t,e[1].idFirst,e[1].idFirst+e[1].idCount-1)));return n?n[0].shape.PN(t,n[1].idFirst,n[1].idCount,s,r):{}}CS(t,e){return this.Pi=t,this.mw=e,this.LM.forEach((t=>{t.shape.CS("columns"===this.Kn.scrollDimension?{x:t.shape.kS().start.x,z:this.Pi.z}:{x:this.Pi.x,z:t.shape.kS().start.z},this.mw)})),"columns"===this.Kn.scrollDimension?(this.HH.min.z=t.z,this.HH.max.z=this.Pi.z+(this.Kn.rows-1)*this.mw.z):(this.HH.min.x=t.x,this.HH.max.x=this.Pi.x+(this.Kn.columns-1)*this.mw.x),this}kS(){return{start:this.Pi,step:this.mw}}Ot(){return this.UU=0,this.HU={},this.HH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:"rows"===this.Kn.scrollDimension?this.Pi.x+(this.Kn.columns-1)*this.mw.x:this.Pi.x,z:"columns"===this.Kn.scrollDimension?this.Pi.z+(this.Kn.rows-1)*this.mw.z:this.Pi.z}},this.LM.forEach((t=>{t.shape.setVisible(!1),t.shape.VH=!1,t.hasData=!1})),this}ES(t){var e;const i=this.LM[0],s=this.LM[1],r=t.heightMapValues?t.heightMapValues.length:null===(e=t.intensityValues)||void 0===e?void 0:e.length;let n=0;if(!r)return this;do{const e=Math.floor(this.UU/this.Kn.scrollDimensionSize)%this.LM.length,o=this.LM[e],a=this.UU%this.Kn.scrollDimensionSize,h=this.Kn.scrollDimensionSize-a,l=0===a,u=Math.min(h,r),c=a+u,d=a,f=d+1,g=n,m=n+u,y=this.UU>=this.Kn.scrollDimensionSize&&c<=this.Kn.scrollDimensionSize-1,p=l;l&&(o.shape.CS("columns"===this.Kn.scrollDimension?{x:this.Pi.x+(this.UU-1)*this.mw.x,z:this.Pi.z}:{x:this.Pi.x,z:this.Pi.z+(this.UU-1)*this.mw.z},this.mw),o.shape.setVisible(!0));const x=y?0:1,A=c+(y?1:0);o.shape.UH({fill:{iFirstPrimary:x,amountPrimary:A},wireframe:{iFirstPrimary:x,amountPrimary:A,connectNext:!1}});const S=o===i?s:i,v=c+1,b=1+this.Kn.scrollDimensionSize-v;S.shape.UH({fill:{iFirstPrimary:v,amountPrimary:b},wireframe:{iFirstPrimary:v,amountPrimary:b-1,connectNext:!0}});const M={};if(t.heightMapValues){const e=t.heightMapValues.slice(g,m);let i=!1;p&&this.HU.yValues&&(i=!0,e.splice(0,0,this.HU.yValues));const s={startPrimary:i?d:f,startSecondary:0,lengthPrimary:e.length,lengthSecondary:this.Kn.staticDimensionSize,values:e,type:"y"};o.shape.DS(s),o.hasData=!0,M.yValues=e[u-1]}if(t.intensityValues){const e=t.intensityValues.slice(g,m);let i=!1;p&&this.HU.intensityValues&&(i=!0,e.splice(0,0,this.HU.intensityValues));const s={startPrimary:i?d:f,startSecondary:0,lengthPrimary:e.length,lengthSecondary:this.Kn.staticDimensionSize,values:e,type:"intensity"};o.shape.PS(s),o.hasData=!0,M.intensityValues=e[u-1]}this.UU+=u,n+=u,this.HU=M}while(n<r);return"columns"===this.Kn.scrollDimension?(this.HH.min.x=this.Pi.x+Math.max(this.UU-this.Kn.scrollDimensionSize,0)*this.mw.x,this.HH.max.x=this.Pi.x+(this.UU-1)*this.mw.x):(this.HH.min.z=this.Pi.z+Math.max(this.UU-this.Kn.scrollDimensionSize,0)*this.mw.z,this.HH.max.z=this.Pi.z+(this.UU-1)*this.mw.z),this}FS(t){return this.LM.forEach((e=>e.shape.FS(t))),this}IS(){return this.LM[0].shape.IS()}Be(t){return this.LM.forEach((e=>e.shape.Be(t))),this}Xh(){return this.LM[0].shape.Xh()}MS(t){return this.LM.forEach((e=>e.shape.MS(t))),this}TS(){return this.LM[0].shape.TS()}iE(){return this.dispose(),this.LM.forEach((t=>t.shape.iE())),this}dispose(){return super.dispose(),this.LM.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.LM.forEach((e=>e.shape.setVisible(t&&e.hasData))),this}yv(t){return super.yv(t),this.LM.forEach((e=>e.shape.yv(t))),this}St(){return this.HH.max.x}vt(){return this.HH.min.x}bt(){return Math.max(this.LM[0].shape.bt(),this.LM[1].shape.bt())}xt(){return Math.min(this.LM[0].shape.xt(),this.LM[1].shape.xt())}Sv(){return this.HH.max.z}xv(){return this.HH.min.z}Tl(){return 0}Fl(){return 0}bv(){return 0}ds(t){return super.ds(t),this.LM.forEach((e=>e.shape.ds(t))),this}}class hp extends Vy{constructor(t,e,i,s){super(t,e,i),this.JH=45,this.KH=.1,this.qH=100,this.lH=f(0,0,1),this.t$=f(0,0,-1),this.i$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.av=new Zn,this.At=s}Ax(){const{cellIndex:t,cellSpan:e,cellsAmount:i}=this.At,s=e.x/i.x,r=e.y/i.y,n=t.x/i.x,o=t.y/i.y,a=this.cs.oi();return{x:n*a.x,y:o*a.y,width:s*a.x,height:r*a.y}}setCameraLocation(t){return this.lH=t,this}getCameraLocation(){return this.lH}setCameraDirection(t){return this.t$=Le.normalize(t),this}getCameraDirection(){return this.t$}setLightLocation(t){return this.uH=t,this}getLightLocation(){return this.uH}s$(){return f(this.i$[0],this.i$[1],this.i$[2])}e$(){return f(this.i$[4],this.i$[5],this.i$[6])}}class lp extends hp{constructor(t,e,i,s){super(t,e,i,s),this.kE=new Dm,this.h$=!0,this.r$="perspective",this.wN=t,this.gl=t.kN(),this.YY=this.OY,this.n$=this.cs.Lo((()=>{this.h$=!0})),this.o$=s.H((()=>{this.h$=!0}))}wV(t){const e=t.vt(),i=t.xt(),s=t.xv(),r=t.St(),n=t.bt(),o=t.Sv();if(e===Ve||r===ze||i===Ve||n===ze||s===Ve||o===ze)return Ne;const a=t.Tl(),h=t.Fl(),l=t.bv(),u=Math.abs(t.Bs.jm(a)*t.At.x.rt()),c=Math.abs(t.Bs.jm(h)*t.At.y.rt()),d=Math.abs(t.Bs.jm(l)*t.At.z.rt()),f=e-u,g=r+u,m=i-c,y=n+c,p=s-d,x=o+d;let A;return[{x:f,y:m,z:p},{x:g,y:m,z:p},{x:f,y,z:p},{x:g,y,z:p},{x:f,y:m,z:x},{x:g,y:m,z:x},{x:f,y,z:x},{x:g,y,z:x}].map((e=>t.Bs.Qm(e))).forEach((t=>{if(!t)return;const e={min:t,max:t};A=A?ei(A,{min:t,max:t}):e})),A||Ne}Qm(t){if(this.a$(),this.l$(),!this.aH)return;const e=this.kE.LV(),i=f(e[0],e[1],e[2]),s=this.kE.BV(),r=f(s[0],s[1],s[2]),n=Le.divideVec(Le.subtractVec(t,i),r),o=this.aH,a=Sm.multiply(o,[n.x,n.y,n.z,1]),h=u(a[0]/a[3],a[1]/a[3]),l=this.cs.oi();return{x:.5*(1+h.x)*l.x,y:.5*(1+h.y)*l.y}}Lx(t){const e=this.kE.LV(),i=this.kE.BV(),s=Le.divideVec(Le.subtractVec(t,{x:e[0],y:e[1],z:e[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:s.x,y:s.y,z:s.z}}Rx(t){const e=this.kE.LV(),i=this.kE.BV(),s=Le.addVec(Le.multiplyVec(t,{x:i[0],y:i[1],z:i[2]}),{x:e[0],y:e[1],z:e[2]});return{...t,x:s.x,y:s.y,z:s.z}}jm(t){return t/1e3}vH(){return.001}zs(){const t=this.lH,e=this.uH,i=this.At.x.u||this.At.y.u||this.At.z.u;if(!e)throw pe(0,(()=>xe()));const{viewProjectionMatrix:s}=this.a$();this.l$();const r=[t.x,t.y,t.z],n=[e.x,e.y,e.z];return this.OY.forEach((t=>{t.aH=s,t.lH=r,t.uH=n,t.zs(i)})),this}Dx(t){this.r$!==t&&(this.r$=t,this.h$=!0)}Bx(){return this.r$}a$(){if(!this.h$&&this.aH)return{viewProjectionMatrix:this.aH};const t=this.Ax(),e=t.width/t.height;if("perspective"===this.r$)this.u$=Sm.projectionPerspective(this.JH,e,this.KH,this.qH);else{let t,i;e>1?(t=.5,i=t/e):(i=.5,t=i*e),this.u$=Sm.projectionOrthographic(-t,t,-i,i,this.KH,this.qH)}const i=this.lH;this.i$[12]=i.x,this.i$[13]=i.y,this.i$[14]=i.z;const s=this.t$,r=f(0,1,0),n=Le.multiply(s,-1),o=Le.normalize(Le.cross(r,n)),a=Le.normalize(Le.cross(n,o));this.i$[0]=o.x,this.i$[1]=o.y,this.i$[2]=o.z,this.i$[4]=a.x,this.i$[5]=a.y,this.i$[6]=a.z,this.i$[8]=n.x,this.i$[9]=n.y,this.i$[10]=n.z,this.c$=Sm.inverse(this.i$);const{cellIndex:h,cellSpan:l,cellsAmount:u}=this.At,c=l.x/u.x,d=l.y/u.y,g=(h.x+l.x/2)/u.x,m=(h.y+l.y/2)/u.y,y=Sm.multiply(Sm.translation(Gn(-1,1,g),Gn(-1,1,m),0),Sm.scaling(c,d,1));return this.aH=Sm.multiply(y,Sm.multiply(this.u$,this.c$)),this.d$=Sm.inverse(this.aH),this.h$=!1,{viewProjectionMatrix:this.aH}}l$(){this.kE.mN(this.At.x),this.kE.vN(this.At.y),this.kE.SN(this.At.z)}qL(t,e,i){var s;const r=this.gl.dV(),n=this.Ax(),o={x:n.x*r*e,y:n.y*r*e,width:n.width*r*e,height:n.height*r*e};this.gl._V(o.x,o.y,o.width,o.height);let a=((null===(s=i[i.length-1])||void 0===s?void 0:s.idLast)||0)+1;const h=Array.from(this.YY.values());for(let e=0;e<h.length;e+=1){const s=h[e];if(s.getVisible())if(this.gl.mV(s.JY),this.gl.mv(s.cv),1!==t)s.qL(t,0);else if(1===t&&s.getMouseInteractions()){const{idCount:r}=s.qL(t,a);void 0!==r&&(i.push({entity:s,layer:this,entityIndex:e,idFirst:a,idCount:r,idLast:a+r-1}),a+=r)}}return this.gl.mV("disabled"),this.gl.mv(!1),this.gl.vV(!1),this}setCameraLocation(t){return this.lH.x===t.x&&this.lH.y===t.y&&this.lH.z===t.z||(this.h$=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.t$.x===t.x&&this.t$.y===t.y&&this.t$.z===t.z||(this.h$=!0),super.setCameraDirection(t),this}Y(){super.Y(),this.cs.Ro(this.n$),this.At.$(this.o$)}Bv(t){return this.NY(new rp(this,this.GY,[],t))}om(t){return this.NY(new tp(this,this.GY,t))}Cv(){return this.NY(new jy(this,this.GY,[]))}WS(){return this.NY(new sp(this,this.GY,[]))}Yg(){return this.NY(new Qy(this,this.GY,[]))}_S(t){return this.NY(new op(this,this.GY,[],t))}RS(t){return this.NY(new ap(this,this.GY,[],t))}}class up extends Lr{constructor(t,e,i,s=Im){if(super(t,e,i),this.Z=c(1,1),this.f$=!1,this.A$=0,this.g$=!0,this.p$=0,this.mH=8388608,this.cz=[null,null],this.y$=null,this.m$=null,this.v$=0,this.np=!1,this.S$=0,this.Ms=(t=!1)=>(this.ji||this.xn||im(this.KR.gl)||(t&&(this.f$=!0),this.An=!0,this.x$||this.nn.wz(t)),this),this.x$=!1,this.Iz=t=>{if(this.ji||this.xn)return;const e=t-this.A$;if(e>=this.no||-1===this.no){this.x$=!0,this.A$=t,this.f$=!1;const i=e>50?1e3/60:e;this.gn&&this.gn(i),this.An=!1,-1!==this.no&&this.f$&&(this.nn.wz(this.f$),this.An=!0),this.us.zs(e),this.In(),this.Pn(),this.pn&&this.pn(),this.x$=!1,this.R.emit("render"),this.An&&this.Ms(this.f$)}else this.An=!0,this.nn.wz()},this.b$=new Map,this.kN=()=>this.KR,this.M$=()=>{var t,e,i;const s=this.Xn(),r=this.g$,n=Tt.performance.now(),o=null===(t=this._$)||void 0===t?void 0:t.w$.reduce(((t,e)=>t?e.C$&&t.C$&&e.C$>t.C$?e:t:e),void 0),a=null==o?void 0:o.C$,h=null===(e=this.Wn)||void 0===e?void 0:e.timeStamp,l=null===(i=this.jn)||void 0===i?void 0:i.timeStamp,u=this.k$;return r?(this.Ms(!0),!1):void 0===o||(void 0===o||!o.T$)&&(void 0!==l&&void 0!==a&&l>a||(void 0!==a&&void 0===s?n-a>=1e3:!(void 0!==a&&void 0!==h&&n-h>=2e3&&(void 0===u||n-u>=2e3))||n-a>=1e3))},this.F$=()=>{var t,e;this.I$=void 0;const i=null===(e=null===(t=this._$)||void 0===t?void 0:t.P$)||void 0===e?void 0:e.D$;void 0===i||i>=this.p$||this.B$()},this.Pn=()=>{if(this.ji||this.xn)return this;const t=this.KR.gl,e=Tt.performance.now();this.KR.bV(t.FRAMEBUFFER,this.nn.vz?this.cz[0]:null);const i=this.Z,s=i.x>0&&i.y>0;if(this.kn.u&&this.KR.vO(this.kn.C()),t.resize&&s&&t.resize(i.x*this.KR.dV(),i.y*this.KR.dV()),this.KR.MV(0,0,i.x*this.KR.dV(),i.y*this.KR.dV()),this.KR._V(0,0,i.x*this.KR.dV(),i.y*this.KR.dV()),this.KR.Ot(),s)for(const t of this.cn.values())t.qL(0,1,[]);if(this.Kn.eo&&s&&(this.I$&&(Tt.clearTimeout(this.I$),this.I$=void 0),this.M$()?(this.B$(),this.KR.bV(t.FRAMEBUFFER,this.nn.vz?this.cz[0]:null)):this.I$=Tt.setTimeout(this.F$,500)),this.J(),this.hn(),this.En&&this.Rn(this.En),this.nn.vz){const e=this.KR.gl2.ctx;e.bindFramebuffer(e.READ_FRAMEBUFFER,this.cz[0]),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.cz[1]),e.clearBufferfv(e.COLOR,0,[1,1,1,1]),e.blitFramebuffer(0,0,this.Z.x*this.KR.dV(),this.Z.y*this.KR.dV(),0,0,this.Z.x*this.KR.dV(),this.Z.y*this.KR.dV(),t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.rz),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.Z.x*this.KR.dV(),this.Z.y*this.KR.dV(),0),t.bindTexture(t.TEXTURE_2D,null);return this.KR.bV(t.FRAMEBUFFER,null),im(this.KR.gl)?this.nn.ez(0,0,this.Z.x*this.KR.dV(),this.Z.y*this.KR.dV(),[this]):this.nn.wz(),this.g$=!1,this.p$=e,this},this.In=()=>{if("use-window"===this.L$.mode){const t=Tt.devicePixelRatio||1;this.KR.DO(t)}const t=this.Z;if(0===t.x||0===t.y)return this;this.yo.it(t);for(const t of this.cn.values())t.zs();return this.J(),this},this.nn=t,this.nn.yz){this.R$=Tt.document.createElement("canvas"),this.R$.style.width="100%",this.R$.style.height="100%",this.R$.style.display="block",this.R$.style.boxSizing="content-box",this.R$.style.position="absolute";const t=this.R$.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new xt("No Canvas context available.");this.nz=t,this.Jr.appendChild(this.R$)}this.nn.Bz(this);const r={preserveDrawingBuffer:!0,antialias:e?e.antialias:void 0,alpha:!0,lineAntialias:!e||(!0===e.lineAntiAlias||!1===e.lineAntiAlias?e.lineAntiAlias:!1!==e.antialias)};let n;if(this.nn.vz&&t.gl2&&(n=new s(this,this.Kn,{type:"webgl2",ctx:t.gl2.ctx,antialias:r.antialias,lineAntialias:r.lineAntialias},this.ts.isDark)),n||this.nn.vz||(n=new s(this,this.Kn,{type:"webgl1",ctx:t.gl,antialias:r.antialias,lineAntialias:r.lineAntialias},this.ts.isDark)),!n)throw new xt("No WebGL context available");if(this.KR=n,"number"==typeof(null==e?void 0:e.devicePixelRatio))this.L$={mode:"fixed",value:e.devicePixelRatio},this.KR.DO(e.devicePixelRatio);else{const t=Tt.document.head.querySelector('meta[name="viewport"]'),i=!0===e.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),s=Tt.devicePixelRatio||1;this.L$=i?{mode:"use-window"}:{mode:"fixed",value:s},this.KR.DO(s)}const o=e?e.width:void 0,a=e?e.height:void 0;this.fo=this.E$(o),this.po=this.E$(a),this.z$(this.fo,this.po),this.$U=this.UF("engine offscreen",1e6),this.V$=this.UF("engine bg",0);const h="function"==typeof this.ts.lcjsBackgroundFillStyle?this.ts.lcjsBackgroundFillStyle(this.Kn.Ks):this.ts.lcjsBackgroundFillStyle;this.yo=this.V$.Le(this.At).Be(h).De(this.ts.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Ee({x:0,y:0});const l=this.UF("engine effects",200001).HY(this.ts.effect);this.hs=l;const u=this.nn.vz,d=this.oi();u&&(this.cz=[n.NV(),n.NV()]);const f=this.KR.gl;u&&(this.y$=f.createRenderbuffer(),this.m$=f.createRenderbuffer()),this.rz=f.createTexture();const g=d.x*this.KR.dV(),m=d.y*this.KR.dV();if(u){f.bindRenderbuffer(f.RENDERBUFFER,this.y$);const t=this.KR.gl2.ctx;this.v$=this.nn.QE&&!1!==e.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.v$,t.RGBA8,g,m),f.bindRenderbuffer(f.RENDERBUFFER,this.m$),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,g,m),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.v$,t.DEPTH_COMPONENT16,g,m)}u&&(this.KR.bV(f.FRAMEBUFFER,this.cz[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.y$),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,this.m$)),f.bindTexture(f.TEXTURE_2D,this.rz),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,g,m,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),u&&(this.KR.bV(f.FRAMEBUFFER,this.cz[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.rz,0)),this.KR.bV(f.FRAMEBUFFER,null),this.wn(),this.hn(),this.fp=Ir(this),this.Ap={ts:this.ts,us:this.us,At:this.At,Ms:t=>this.Ms(t),Xn:()=>this.Xn(),xs:t=>(this.k$=Tt.performance.now(),this.xs({x:t.clientX,y:t.clientY})),DD:t=>this.DD(t),Kn:this.Kn,Zn:t=>this.Zn(t),hs:this.hs,No:t=>this.No(t),Go:t=>this.Go(t),Ng:{Og:(t,e,i)=>this.KR.Zh(e.family).fE(t,e,i,this.ts.isDark)}};const y=()=>{this.Y()};Tt.addEventListener("unload",y),this.yn.push((()=>{Tt.removeEventListener("unload",y)}))}get O$(){return this.cn}an(t,e){let i=this.b$.get(t);if(!i){const e=this.KR.VO(t),s=new Set,r=t=>{s.add(t)},n=i=>{s.delete(i)&&0===s.size&&(e.unbindResources(),this.b$.delete(t))},o=[];i={imageTexture:e,instances:s,handleNewInstance:r,handleInstanceDisposed:n,sharedEngineReference:{BD:()=>e.qz,LD:t=>{e.qz?t():o.push(t)}}},this.b$.set(t,i),e.cE(this),e.nV((()=>{o.forEach((t=>{t()})),o.length=0}))}const s=new uo(t,i.handleNewInstance,i.handleInstanceDisposed,e);return i.handleNewInstance(s),s}DD(t){const e=Array.from(this.b$.values()).find((e=>e.instances.has(t)));if(!e)throw pe(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return e.sharedEngineReference}xs(t){var e;const i=null===(e=this._$)||void 0===e?void 0:e.P$;if(!i)return;const s=this.Ve(t.x,t.y),r=Math.round(s.x*this.KR.dV()),n=Math.round(s.y*this.KR.dV());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.N$(i,r+t[0]/i.G$,n+t[1]/i.G$))).reduce(((t,e)=>{if(void 0===e)return t||void 0;const i=1e6*e.layerIndex+e.entityIndex;return!t||i>t.zIndexForComparison?{zIndexForComparison:i,entity:e.entity,collectionMember:e.collectionMember,info:e.info}:t}),void 0)}N$(t,e,i){const s=Math.round(e*t.G$),r=Math.round(i*t.G$);if(s<0||s>=t.Z.x||r<0||r>=t.Z.y)return;const n=4*(s+r*t.Z.x),o=t.W$[n+0],a=t.W$[n+1],h=t.W$[n+2],l=t.W$[n+3];if(void 0===o||void 0===a||void 0===h||void 0===l)return;if(0===o&&0===a&&0===h&&0===l)return;const u=16777216*o+65536*a+256*h+l,c=t.U$.find((t=>u>=t.idFirst&&u<=t.idLast));if(!c)return;const{collectionMember:d,info:f}=c.entity.PN(u,c.idFirst,c.idCount,e,i);return{entity:c.entity,collectionMember:d,entityIndex:c.entityIndex,layerIndex:c.layer.Bn(),info:f}}tn(t,e,i){const s=this.KR.gl;this.nn.vz?(this.KR.bV(s.FRAMEBUFFER,this.cz[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.rz,0)):this.KR.bV(s.FRAMEBUFFER,null);const r=this.hz(),n=r.x,o=r.y,a=new Uint8Array(n*o*4);this.nn.vz||this.Pn(),s.readPixels(0,0,n,o,s.RGBA,s.UNSIGNED_BYTE,a);const h=new ImageData(new Uint8ClampedArray(a),n,o),l=document.createElement("canvas"),u=l.getContext("2d");if(!u)throw new Error("Failed to create 2D context for saving image.");l.width=n,l.height=o,u.putImageData(h,0,0),u.translate(0,o),u.scale(1,-1),u.drawImage(l,0,0),this.nn.vz&&(this.KR.bV(s.FRAMEBUFFER,this.cz[0]),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.y$),this.KR.bV(s.FRAMEBUFFER,this.cz[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.rz,0)),this.KR.bV(s.FRAMEBUFFER,null);const c=l.toDataURL(t,e);return i?c:(t=>{const e=t.split(",")[0].split(":")[1].split(";")[0],i=Tt.atob(t.split(",")[1]),s=new Uint8Array(i.length);for(let t=0;t<i.length;t+=1)s[t]=i.charCodeAt(t);return new Tt.Blob([s.buffer],{type:e})})(c)}sn(t,e,i=!1){this.wn(u(Math.round(t),Math.round(e))),this.Fn();const s=this.KR.gl.drawingBufferWidth,r=this.KR.gl.drawingBufferHeight,n=new Uint8Array(s*r*4);if(this.KR.gl.readPixels(0,0,s,r,this.KR.gl.RGBA,this.KR.gl.UNSIGNED_BYTE,n),!i){const t=r/2|0,e=4*s,i=new Uint8Array(4*s);for(let s=0;s<t;s+=1){const t=s*e,o=(r-s-1)*e;i.set(n.subarray(t,t+e)),n.copyWithin(t,o,o+e),n.set(i,o)}}return this.fn={x:0,y:e},n}DL(t){return void 0!==this.fo?this.fo[0]=t:this.fo=[t,void 0],this.Jr.style.minWidth=`${this.fo[0]}px`,this.wn(),this}LL(t){return void 0!==this.fo?this.fo[1]=t:this.fo=[void 0,t],this.Jr.style.maxWidth=`${this.fo[1]}px`,this.wn(),this}EL(t){return void 0!==this.po?this.po[0]=t:this.po=[t,void 0],this.Jr.style.minHeight=`${this.po[0]}px`,this.wn(),this}VL(t){return void 0!==this.po?this.po[1]=t:this.po=[void 0,t],this.Jr.style.maxHeight=`${this.po[1]}px`,this.wn(),this}z$(t,e){return this.fo=t,this.po=e,this.Jr.style.minWidth=`${this.fo[0]}px`,this.Jr.style.maxWidth=`${this.fo[1]}px`,this.Jr.style.minHeight=`${this.po[0]}px`,this.Jr.style.maxHeight=`${this.po[1]}px`,this.wn(),this}sz(t){return this.np!==t&&(this.R.emit("inViewChange",t),this.np=t),this}iz(){return this.np}Lz(t){this.S$=t}Dz(){return this.S$}UF(t,e=this.bo()){const i=this.xo(e);if(i){if(pe(0,(()=>{})),!(i instanceof Ny))throw new Error("Unexpected Engine Layer error");return i}return this.Dn(new Ny(this,e,t))}$F(t,e,i){const s=this.xo(e);if(s){if(pe(0,(()=>{})),!(s instanceof lp))throw new Error("Unexpected Engine Layer error");return s}return this.Dn(new lp(this,e,t,i))}oi(){return this.Z}hz(){const t=this.KR.dV();return{x:Math.round(this.Z.x*t),y:Math.round(this.Z.y*t)}}E$(t){return t instanceof Array||(t=[t,t]),t}Y$(){return this.nn.oz}H$(){return im(this.KR.gl)}B$(){var t;const e=this.KR.gl,i=Tt.performance.now(),s=this.Kn.so,r={x:Math.ceil(this.Z.x*this.KR.dV()*s),y:Math.ceil(this.Z.y*this.KR.dV()*s)};this._$||(this._$={G$:s,$$:r,w$:[],P$:void 0});let n=this._$.w$.find((t=>!t.T$)),o=!1;n||(o=!0,n={T$:!1,Z:r,JO:e.createTexture(),X$:this.KR.NV(),m$:this.KR.GV(),j$:new Uint8Array,C$:void 0},this._$.w$.push(n));const a=n;(o||a.Z.x!==r.x||a.Z.y!==r.y)&&(e.bindTexture(e.TEXTURE_2D,a.JO),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.x,r.y,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.KR.bV(e.FRAMEBUFFER,a.X$),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a.JO,0),e.bindRenderbuffer(e.RENDERBUFFER,a.m$),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.x,r.y),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,a.m$),a.j$=new Uint8Array(r.x*r.y*4),a.Z=r),a.T$=!0,a.C$=i,this.KR.bV(e.FRAMEBUFFER,a.X$),e.clearDepth(1),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.resize&&e.resize(r.x,r.y),this.KR.MV(0,0,r.x,r.y);const h=[];for(const t of this.cn.values())t.qL(1,s,h);this.KR.bV(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.enable(e.BLEND);const l=null===(t=this.KR.gl2)||void 0===t?void 0:t.ctx,u=()=>{if(this._$){const t=this._$.P$;if(t&&t.D$>i)return;this._$.P$={D$:i,G$:s,Z:r,W$:a.j$,U$:h}}};l?this.KR.jO(l,a.X$,0,0,r.x,r.y,e.RGBA,e.UNSIGNED_BYTE,a.j$).then((()=>{this.ji||(a.T$=!1,u())})).catch((t=>{this.ji||(a.T$=!1,Tt.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.KR.ZO(a.X$,0,0,r.x,r.y,e.RGBA,e.UNSIGNED_BYTE,a.j$),a.T$=!1,u())}wn(t){const e=this.KR.dV();if("use-window"===this.L$.mode){const t=Tt.devicePixelRatio||1;this.KR.DO(t)}const i=this.Z.x,s=this.Z.y,r=t||{x:this.Jr.offsetWidth,y:this.Jr.offsetHeight},n=this.KR.dV();if(0!==r.x&&0!==r.y&&(r.x!==i||r.y!==s||e!==n)){this.Z=r,this.At.x.q(0,r.x).it(r.x),this.At.y.q(0,r.y).it(r.y);const t=r.x*n,e=r.y*n,i=this.KR.gl;this.nn.yz&&this.nz&&(this.nz.canvas.width=t,this.nz.canvas.height=e);const s=this.nn.vz;if(this.rz&&(i.bindTexture(i.TEXTURE_2D,this.rz),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null)),s){const s=this.KR.gl2.ctx;this.y$&&(i.bindRenderbuffer(i.RENDERBUFFER,this.y$),s.renderbufferStorageMultisample(s.RENDERBUFFER,this.v$,s.RGBA8,t,e)),this.m$&&(i.bindRenderbuffer(i.RENDERBUFFER,this.m$),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t,e),s.renderbufferStorageMultisample(s.RENDERBUFFER,this.v$,s.DEPTH_COMPONENT16,t,e))}i.bindRenderbuffer(i.RENDERBUFFER,null),this.R.emit("resize",[this.Z.x,this.Z.y])}}Y(){var t;this.ji||(super.Y(),this.I$&&(Tt.clearTimeout(this.I$),this.I$=void 0),Array.from(this.KR.NE.entries()).forEach((([t,e])=>{e.iE(!1),this.KR.NE.delete(t)})),Array.from(this.KR.HV.values()).forEach((t=>{t.unbindResources()})),this.KR.HV.clear(),this.KR.YV.jz(),this.KR.TO.Y(),this.KR.zV(this.KR.FO),this.KR.zV(this.KR.IO),this.KR._O.forEach(((t,e)=>{this.KR.gl.deleteBuffer(e)})),this.KR._O.clear(),this.KR.UO&&(this.KR.zV(this.KR.UO.buffer),this.KR.UO=void 0),this.KR.UV(this.cz[0]),this.KR.UV(this.cz[1]),this.KR.WV(this.y$),this.KR.sE(this.rz),this.KR.WV(this.m$),this._$&&(this._$.w$.forEach((t=>{this.KR.WV(t.m$),this.KR.UV(t.X$),this.KR.sE(t.JO)})),this._$=void 0),this.KR.xO.forEach((t=>this.KR.zV(t))),this.b$.clear(),this.nn.Rz(this),this.R$&&(null===(t=this.R$.parentElement)||void 0===t||t.removeChild(this.R$),this.R$=void 0),this.nz&&(this.nz=void 0),this.KR.gl=void 0)}}var cp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},dp={exports:{}};!function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this.rV(t||0,e||10,i||"be"))}var n;"object"==typeof dp?dp.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=(void 0).Buffer}catch(t){}function o(t,e,s){for(var r=0,n=Math.min(t.length,s),o=0,a=e;a<n;a++){var h,l=t.charCodeAt(a)-48;r<<=4,r|=h=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,o|=h}return i(!(240&o),"Invalid character in "+t),r}function a(t,e,s,r){for(var n=0,o=0,a=Math.min(t.length,s),h=e;h<a;h++){var l=t.charCodeAt(h)-48;n*=r,o=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&o<r,"Invalid character"),n+=o}return n}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype.rV=function(t,e,s){if("number"==typeof t)return this.Z$(t,e,s);if("object"==typeof t)return this.Q$(t,e,s);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this.J$(t,r):this.K$(t,e,r),"-"===t[0]&&(this.negative=1),this.q$(),"le"===s&&this.Q$(this.toArray(),e,s)},r.prototype.Z$=function(t,e,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===s&&this.Q$(this.toArray(),e,s)},r.prototype.Q$=function(t,e,s){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o,a=0;if("be"===s)for(r=t.length-1,n=0;r>=0;r-=3)o=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===s)for(r=0,n=0;r<t.length;r+=3)o=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this.q$()},r.prototype.J$=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,r,n=0;for(i=t.length-6,s=0;i>=e;i-=6)r=o(t,i,i+6),this.words[s]|=r<<n&67108863,this.words[s+1]|=r>>>26-n&4194303,(n+=24)>=26&&(n-=26,s++);i+6!==e&&(r=o(t,e,i+6),this.words[s]|=r<<n&67108863,this.words[s+1]|=r>>>26-n&4194303),this.q$()},r.prototype.K$=function(t,e,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=e)s++;s--,r=r/e|0;for(var n=t.length-i,o=n%s,h=Math.min(n,n-o)+i,l=0,u=i;u<h;u+=s)l=a(t,u,u+s,e),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this.tX(l);if(0!==o){var c=1;for(l=a(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+l<67108864?this.words[0]+=l:this.tX(l)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.iX=function(t){h(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype.sX=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.q$=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.eX()},r.prototype.eX=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var s=t.length+e.length|0;i.length=s,s=s-1|0;var r=0|t.words[0],n=0|e.words[0],o=r*n,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<s;l++){for(var u=h>>>26,c=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var g=l-f|0;u+=(o=(r=0|t.words[g])*(n=0|e.words[f])+c)/67108864|0,c=67108863&o}i.words[l]=0|c,h=0|u}return 0!==h?i.words[l]=0|h:i.length--,i.q$()}r.prototype.toString=function(t,e){var s;if(e=0|e||1,16===(t=t||10)||"hex"===t){s="";for(var r=0,n=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<r|n)).toString(16);s=0!=(n=a>>>24-r&16777215)||o!==this.length-1?u[6-h.length]+h+s:h+s,(r+=2)>=26&&(r-=26,o--)}for(0!==n&&(s=n.toString(16)+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];s="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(f).toString(t);s=(g=g.idivn(f)).isZero()?m+s:u[l-m.length]+m+s}for(this.isZero()&&(s="0"+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},n&&(r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)}),r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,s){this.q$();var r=this.byteLength(),n=s||Math.max(1,r);i(r<=n,"byte array longer than desired length"),i(n>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,n);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,r),o},r.prototype.hX=function(t,e){for(var i=0,s=0,r=0,n=0;r<this.length;r++){var o=this.words[r]<<n|s;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===n?(i<t.length&&(t[i++]=o>>24&255),s=0,n=0):(s=o>>>24,n+=2)}if(i<t.length)for(t[i++]=s;i<t.length;)t[i++]=0},r.prototype.rX=function(t,e){for(var i=t.length-1,s=0,r=0,n=0;r<this.length;r++){var o=this.words[r]<<n|s;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===n?(i>=0&&(t[i--]=o>>24&255),s=0,n=0):(s=o>>>24,n+=2)}if(i>=0)for(t[i--]=s;i>=0;)t[i--]=0},Math.clz32?r.prototype.nX=function(t){return 32-Math.clz32(t)}:r.prototype.nX=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype.oX=function(t){if(0===t)return 26;var e=t,i=0;return!(8191&e)&&(i+=13,e>>>=13),!(127&e)&&(i+=7,e>>>=7),!(15&e)&&(i+=4,e>>>=4),!(3&e)&&(i+=2,e>>>=2),!(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this.nX(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this.oX(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.q$()},r.prototype.ior=function(t){return i(!(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.q$()},r.prototype.iand=function(t){return i(!(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var s=0;s<i.length;s++)this.words[s]=e.words[s]^i.words[s];if(this!==e)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=e.length,this.q$()},r.prototype.ixor=function(t){return i(!(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),s=t%26;this.sX(e),s>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return s>0&&(this.words[r]=~this.words[r]&67108863>>26-s),this.q$()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var s=t/26|0,r=t%26;return this.sX(s+1),this.words[s]=e?this.words[s]|1<<r:this.words[s]&~(1<<r),this.q$()},r.prototype.iadd=function(t){var e,i,s;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this.eX();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e.eX();this.length>t.length?(i=this,s=t):(i=t,s=this);for(var r=0,n=0;n<s.length;n++)e=(0|i.words[n])+(0|s.words[n])+r,this.words[n]=67108863&e,r=e>>>26;for(;0!==r&&n<i.length;n++)e=(0|i.words[n])+r,this.words[n]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e.eX()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.eX();var i,s,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=t):(i=t,s=this);for(var n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.q$()},r.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,i){var s,r,n,o=t.words,a=e.words,h=i.words,l=0,u=0|o[0],c=8191&u,d=u>>>13,f=0|o[1],g=8191&f,m=f>>>13,y=0|o[2],p=8191&y,x=y>>>13,A=0|o[3],S=8191&A,v=A>>>13,b=0|o[4],M=8191&b,T=b>>>13,w=0|o[5],C=8191&w,k=w>>>13,E=0|o[6],R=8191&E,I=E>>>13,_=0|o[7],F=8191&_,D=_>>>13,B=0|o[8],P=8191&B,L=B>>>13,V=0|o[9],z=8191&V,N=V>>>13,O=0|a[0],U=8191&O,Y=O>>>13,G=0|a[1],H=8191&G,W=G>>>13,K=0|a[2],X=8191&K,j=K>>>13,$=0|a[3],Z=8191&$,Q=$>>>13,q=0|a[4],J=8191&q,tt=q>>>13,et=0|a[5],it=8191&et,st=et>>>13,rt=0|a[6],nt=8191&rt,ot=rt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ut=0|a[8],ct=8191&ut,dt=ut>>>13,ft=0|a[9],gt=8191&ft,mt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(l+(s=Math.imul(c,U))|0)+((8191&(r=(r=Math.imul(c,Y))+Math.imul(d,U)|0))<<13)|0;l=((n=Math.imul(d,Y))+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,s=Math.imul(g,U),r=(r=Math.imul(g,Y))+Math.imul(m,U)|0,n=Math.imul(m,Y);var pt=(l+(s=s+Math.imul(c,H)|0)|0)+((8191&(r=(r=r+Math.imul(c,W)|0)+Math.imul(d,H)|0))<<13)|0;l=((n=n+Math.imul(d,W)|0)+(r>>>13)|0)+(pt>>>26)|0,pt&=67108863,s=Math.imul(p,U),r=(r=Math.imul(p,Y))+Math.imul(x,U)|0,n=Math.imul(x,Y),s=s+Math.imul(g,H)|0,r=(r=r+Math.imul(g,W)|0)+Math.imul(m,H)|0,n=n+Math.imul(m,W)|0;var xt=(l+(s=s+Math.imul(c,X)|0)|0)+((8191&(r=(r=r+Math.imul(c,j)|0)+Math.imul(d,X)|0))<<13)|0;l=((n=n+Math.imul(d,j)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,s=Math.imul(S,U),r=(r=Math.imul(S,Y))+Math.imul(v,U)|0,n=Math.imul(v,Y),s=s+Math.imul(p,H)|0,r=(r=r+Math.imul(p,W)|0)+Math.imul(x,H)|0,n=n+Math.imul(x,W)|0,s=s+Math.imul(g,X)|0,r=(r=r+Math.imul(g,j)|0)+Math.imul(m,X)|0,n=n+Math.imul(m,j)|0;var At=(l+(s=s+Math.imul(c,Z)|0)|0)+((8191&(r=(r=r+Math.imul(c,Q)|0)+Math.imul(d,Z)|0))<<13)|0;l=((n=n+Math.imul(d,Q)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,s=Math.imul(M,U),r=(r=Math.imul(M,Y))+Math.imul(T,U)|0,n=Math.imul(T,Y),s=s+Math.imul(S,H)|0,r=(r=r+Math.imul(S,W)|0)+Math.imul(v,H)|0,n=n+Math.imul(v,W)|0,s=s+Math.imul(p,X)|0,r=(r=r+Math.imul(p,j)|0)+Math.imul(x,X)|0,n=n+Math.imul(x,j)|0,s=s+Math.imul(g,Z)|0,r=(r=r+Math.imul(g,Q)|0)+Math.imul(m,Z)|0,n=n+Math.imul(m,Q)|0;var St=(l+(s=s+Math.imul(c,J)|0)|0)+((8191&(r=(r=r+Math.imul(c,tt)|0)+Math.imul(d,J)|0))<<13)|0;l=((n=n+Math.imul(d,tt)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,s=Math.imul(C,U),r=(r=Math.imul(C,Y))+Math.imul(k,U)|0,n=Math.imul(k,Y),s=s+Math.imul(M,H)|0,r=(r=r+Math.imul(M,W)|0)+Math.imul(T,H)|0,n=n+Math.imul(T,W)|0,s=s+Math.imul(S,X)|0,r=(r=r+Math.imul(S,j)|0)+Math.imul(v,X)|0,n=n+Math.imul(v,j)|0,s=s+Math.imul(p,Z)|0,r=(r=r+Math.imul(p,Q)|0)+Math.imul(x,Z)|0,n=n+Math.imul(x,Q)|0,s=s+Math.imul(g,J)|0,r=(r=r+Math.imul(g,tt)|0)+Math.imul(m,J)|0,n=n+Math.imul(m,tt)|0;var vt=(l+(s=s+Math.imul(c,it)|0)|0)+((8191&(r=(r=r+Math.imul(c,st)|0)+Math.imul(d,it)|0))<<13)|0;l=((n=n+Math.imul(d,st)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,s=Math.imul(R,U),r=(r=Math.imul(R,Y))+Math.imul(I,U)|0,n=Math.imul(I,Y),s=s+Math.imul(C,H)|0,r=(r=r+Math.imul(C,W)|0)+Math.imul(k,H)|0,n=n+Math.imul(k,W)|0,s=s+Math.imul(M,X)|0,r=(r=r+Math.imul(M,j)|0)+Math.imul(T,X)|0,n=n+Math.imul(T,j)|0,s=s+Math.imul(S,Z)|0,r=(r=r+Math.imul(S,Q)|0)+Math.imul(v,Z)|0,n=n+Math.imul(v,Q)|0,s=s+Math.imul(p,J)|0,r=(r=r+Math.imul(p,tt)|0)+Math.imul(x,J)|0,n=n+Math.imul(x,tt)|0,s=s+Math.imul(g,it)|0,r=(r=r+Math.imul(g,st)|0)+Math.imul(m,it)|0,n=n+Math.imul(m,st)|0;var bt=(l+(s=s+Math.imul(c,nt)|0)|0)+((8191&(r=(r=r+Math.imul(c,ot)|0)+Math.imul(d,nt)|0))<<13)|0;l=((n=n+Math.imul(d,ot)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,s=Math.imul(F,U),r=(r=Math.imul(F,Y))+Math.imul(D,U)|0,n=Math.imul(D,Y),s=s+Math.imul(R,H)|0,r=(r=r+Math.imul(R,W)|0)+Math.imul(I,H)|0,n=n+Math.imul(I,W)|0,s=s+Math.imul(C,X)|0,r=(r=r+Math.imul(C,j)|0)+Math.imul(k,X)|0,n=n+Math.imul(k,j)|0,s=s+Math.imul(M,Z)|0,r=(r=r+Math.imul(M,Q)|0)+Math.imul(T,Z)|0,n=n+Math.imul(T,Q)|0,s=s+Math.imul(S,J)|0,r=(r=r+Math.imul(S,tt)|0)+Math.imul(v,J)|0,n=n+Math.imul(v,tt)|0,s=s+Math.imul(p,it)|0,r=(r=r+Math.imul(p,st)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,st)|0,s=s+Math.imul(g,nt)|0,r=(r=r+Math.imul(g,ot)|0)+Math.imul(m,nt)|0,n=n+Math.imul(m,ot)|0;var Mt=(l+(s=s+Math.imul(c,ht)|0)|0)+((8191&(r=(r=r+Math.imul(c,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((n=n+Math.imul(d,lt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,s=Math.imul(P,U),r=(r=Math.imul(P,Y))+Math.imul(L,U)|0,n=Math.imul(L,Y),s=s+Math.imul(F,H)|0,r=(r=r+Math.imul(F,W)|0)+Math.imul(D,H)|0,n=n+Math.imul(D,W)|0,s=s+Math.imul(R,X)|0,r=(r=r+Math.imul(R,j)|0)+Math.imul(I,X)|0,n=n+Math.imul(I,j)|0,s=s+Math.imul(C,Z)|0,r=(r=r+Math.imul(C,Q)|0)+Math.imul(k,Z)|0,n=n+Math.imul(k,Q)|0,s=s+Math.imul(M,J)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(T,J)|0,n=n+Math.imul(T,tt)|0,s=s+Math.imul(S,it)|0,r=(r=r+Math.imul(S,st)|0)+Math.imul(v,it)|0,n=n+Math.imul(v,st)|0,s=s+Math.imul(p,nt)|0,r=(r=r+Math.imul(p,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,s=s+Math.imul(g,ht)|0,r=(r=r+Math.imul(g,lt)|0)+Math.imul(m,ht)|0,n=n+Math.imul(m,lt)|0;var Tt=(l+(s=s+Math.imul(c,ct)|0)|0)+((8191&(r=(r=r+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((n=n+Math.imul(d,dt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,s=Math.imul(z,U),r=(r=Math.imul(z,Y))+Math.imul(N,U)|0,n=Math.imul(N,Y),s=s+Math.imul(P,H)|0,r=(r=r+Math.imul(P,W)|0)+Math.imul(L,H)|0,n=n+Math.imul(L,W)|0,s=s+Math.imul(F,X)|0,r=(r=r+Math.imul(F,j)|0)+Math.imul(D,X)|0,n=n+Math.imul(D,j)|0,s=s+Math.imul(R,Z)|0,r=(r=r+Math.imul(R,Q)|0)+Math.imul(I,Z)|0,n=n+Math.imul(I,Q)|0,s=s+Math.imul(C,J)|0,r=(r=r+Math.imul(C,tt)|0)+Math.imul(k,J)|0,n=n+Math.imul(k,tt)|0,s=s+Math.imul(M,it)|0,r=(r=r+Math.imul(M,st)|0)+Math.imul(T,it)|0,n=n+Math.imul(T,st)|0,s=s+Math.imul(S,nt)|0,r=(r=r+Math.imul(S,ot)|0)+Math.imul(v,nt)|0,n=n+Math.imul(v,ot)|0,s=s+Math.imul(p,ht)|0,r=(r=r+Math.imul(p,lt)|0)+Math.imul(x,ht)|0,n=n+Math.imul(x,lt)|0,s=s+Math.imul(g,ct)|0,r=(r=r+Math.imul(g,dt)|0)+Math.imul(m,ct)|0,n=n+Math.imul(m,dt)|0;var wt=(l+(s=s+Math.imul(c,gt)|0)|0)+((8191&(r=(r=r+Math.imul(c,mt)|0)+Math.imul(d,gt)|0))<<13)|0;l=((n=n+Math.imul(d,mt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,s=Math.imul(z,H),r=(r=Math.imul(z,W))+Math.imul(N,H)|0,n=Math.imul(N,W),s=s+Math.imul(P,X)|0,r=(r=r+Math.imul(P,j)|0)+Math.imul(L,X)|0,n=n+Math.imul(L,j)|0,s=s+Math.imul(F,Z)|0,r=(r=r+Math.imul(F,Q)|0)+Math.imul(D,Z)|0,n=n+Math.imul(D,Q)|0,s=s+Math.imul(R,J)|0,r=(r=r+Math.imul(R,tt)|0)+Math.imul(I,J)|0,n=n+Math.imul(I,tt)|0,s=s+Math.imul(C,it)|0,r=(r=r+Math.imul(C,st)|0)+Math.imul(k,it)|0,n=n+Math.imul(k,st)|0,s=s+Math.imul(M,nt)|0,r=(r=r+Math.imul(M,ot)|0)+Math.imul(T,nt)|0,n=n+Math.imul(T,ot)|0,s=s+Math.imul(S,ht)|0,r=(r=r+Math.imul(S,lt)|0)+Math.imul(v,ht)|0,n=n+Math.imul(v,lt)|0,s=s+Math.imul(p,ct)|0,r=(r=r+Math.imul(p,dt)|0)+Math.imul(x,ct)|0,n=n+Math.imul(x,dt)|0;var Ct=(l+(s=s+Math.imul(g,gt)|0)|0)+((8191&(r=(r=r+Math.imul(g,mt)|0)+Math.imul(m,gt)|0))<<13)|0;l=((n=n+Math.imul(m,mt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,s=Math.imul(z,X),r=(r=Math.imul(z,j))+Math.imul(N,X)|0,n=Math.imul(N,j),s=s+Math.imul(P,Z)|0,r=(r=r+Math.imul(P,Q)|0)+Math.imul(L,Z)|0,n=n+Math.imul(L,Q)|0,s=s+Math.imul(F,J)|0,r=(r=r+Math.imul(F,tt)|0)+Math.imul(D,J)|0,n=n+Math.imul(D,tt)|0,s=s+Math.imul(R,it)|0,r=(r=r+Math.imul(R,st)|0)+Math.imul(I,it)|0,n=n+Math.imul(I,st)|0,s=s+Math.imul(C,nt)|0,r=(r=r+Math.imul(C,ot)|0)+Math.imul(k,nt)|0,n=n+Math.imul(k,ot)|0,s=s+Math.imul(M,ht)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(T,ht)|0,n=n+Math.imul(T,lt)|0,s=s+Math.imul(S,ct)|0,r=(r=r+Math.imul(S,dt)|0)+Math.imul(v,ct)|0,n=n+Math.imul(v,dt)|0;var kt=(l+(s=s+Math.imul(p,gt)|0)|0)+((8191&(r=(r=r+Math.imul(p,mt)|0)+Math.imul(x,gt)|0))<<13)|0;l=((n=n+Math.imul(x,mt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,s=Math.imul(z,Z),r=(r=Math.imul(z,Q))+Math.imul(N,Z)|0,n=Math.imul(N,Q),s=s+Math.imul(P,J)|0,r=(r=r+Math.imul(P,tt)|0)+Math.imul(L,J)|0,n=n+Math.imul(L,tt)|0,s=s+Math.imul(F,it)|0,r=(r=r+Math.imul(F,st)|0)+Math.imul(D,it)|0,n=n+Math.imul(D,st)|0,s=s+Math.imul(R,nt)|0,r=(r=r+Math.imul(R,ot)|0)+Math.imul(I,nt)|0,n=n+Math.imul(I,ot)|0,s=s+Math.imul(C,ht)|0,r=(r=r+Math.imul(C,lt)|0)+Math.imul(k,ht)|0,n=n+Math.imul(k,lt)|0,s=s+Math.imul(M,ct)|0,r=(r=r+Math.imul(M,dt)|0)+Math.imul(T,ct)|0,n=n+Math.imul(T,dt)|0;var Et=(l+(s=s+Math.imul(S,gt)|0)|0)+((8191&(r=(r=r+Math.imul(S,mt)|0)+Math.imul(v,gt)|0))<<13)|0;l=((n=n+Math.imul(v,mt)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,s=Math.imul(z,J),r=(r=Math.imul(z,tt))+Math.imul(N,J)|0,n=Math.imul(N,tt),s=s+Math.imul(P,it)|0,r=(r=r+Math.imul(P,st)|0)+Math.imul(L,it)|0,n=n+Math.imul(L,st)|0,s=s+Math.imul(F,nt)|0,r=(r=r+Math.imul(F,ot)|0)+Math.imul(D,nt)|0,n=n+Math.imul(D,ot)|0,s=s+Math.imul(R,ht)|0,r=(r=r+Math.imul(R,lt)|0)+Math.imul(I,ht)|0,n=n+Math.imul(I,lt)|0,s=s+Math.imul(C,ct)|0,r=(r=r+Math.imul(C,dt)|0)+Math.imul(k,ct)|0,n=n+Math.imul(k,dt)|0;var Rt=(l+(s=s+Math.imul(M,gt)|0)|0)+((8191&(r=(r=r+Math.imul(M,mt)|0)+Math.imul(T,gt)|0))<<13)|0;l=((n=n+Math.imul(T,mt)|0)+(r>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,s=Math.imul(z,it),r=(r=Math.imul(z,st))+Math.imul(N,it)|0,n=Math.imul(N,st),s=s+Math.imul(P,nt)|0,r=(r=r+Math.imul(P,ot)|0)+Math.imul(L,nt)|0,n=n+Math.imul(L,ot)|0,s=s+Math.imul(F,ht)|0,r=(r=r+Math.imul(F,lt)|0)+Math.imul(D,ht)|0,n=n+Math.imul(D,lt)|0,s=s+Math.imul(R,ct)|0,r=(r=r+Math.imul(R,dt)|0)+Math.imul(I,ct)|0,n=n+Math.imul(I,dt)|0;var It=(l+(s=s+Math.imul(C,gt)|0)|0)+((8191&(r=(r=r+Math.imul(C,mt)|0)+Math.imul(k,gt)|0))<<13)|0;l=((n=n+Math.imul(k,mt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,s=Math.imul(z,nt),r=(r=Math.imul(z,ot))+Math.imul(N,nt)|0,n=Math.imul(N,ot),s=s+Math.imul(P,ht)|0,r=(r=r+Math.imul(P,lt)|0)+Math.imul(L,ht)|0,n=n+Math.imul(L,lt)|0,s=s+Math.imul(F,ct)|0,r=(r=r+Math.imul(F,dt)|0)+Math.imul(D,ct)|0,n=n+Math.imul(D,dt)|0;var _t=(l+(s=s+Math.imul(R,gt)|0)|0)+((8191&(r=(r=r+Math.imul(R,mt)|0)+Math.imul(I,gt)|0))<<13)|0;l=((n=n+Math.imul(I,mt)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,s=Math.imul(z,ht),r=(r=Math.imul(z,lt))+Math.imul(N,ht)|0,n=Math.imul(N,lt),s=s+Math.imul(P,ct)|0,r=(r=r+Math.imul(P,dt)|0)+Math.imul(L,ct)|0,n=n+Math.imul(L,dt)|0;var Ft=(l+(s=s+Math.imul(F,gt)|0)|0)+((8191&(r=(r=r+Math.imul(F,mt)|0)+Math.imul(D,gt)|0))<<13)|0;l=((n=n+Math.imul(D,mt)|0)+(r>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,s=Math.imul(z,ct),r=(r=Math.imul(z,dt))+Math.imul(N,ct)|0,n=Math.imul(N,dt);var Dt=(l+(s=s+Math.imul(P,gt)|0)|0)+((8191&(r=(r=r+Math.imul(P,mt)|0)+Math.imul(L,gt)|0))<<13)|0;l=((n=n+Math.imul(L,mt)|0)+(r>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Bt=(l+(s=Math.imul(z,gt))|0)+((8191&(r=(r=Math.imul(z,mt))+Math.imul(N,gt)|0))<<13)|0;return l=((n=Math.imul(N,mt))+(r>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,h[0]=yt,h[1]=pt,h[2]=xt,h[3]=At,h[4]=St,h[5]=vt,h[6]=bt,h[7]=Mt,h[8]=Tt,h[9]=wt,h[10]=Ct,h[11]=kt,h[12]=Et,h[13]=Rt,h[14]=It,h[15]=_t,h[16]=Ft,h[17]=Dt,h[18]=Bt,0!==l&&(h[19]=l,i.length++),i};function m(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var s=0,r=0,n=0;n<i.length-1;n++){var o=r;r=0;for(var a=67108863&s,h=Math.min(n,e.length-1),l=Math.max(0,n-t.length+1);l<=h;l++){var u=n-l,c=(0|t.words[u])*(0|e.words[l]),d=67108863&c;a=67108863&(d=d+a|0),r+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[n]=a,s=o,o=r}return 0!==s?i.words[n]=s:i.length--,i.q$()}function y(t,e,i){return m(t,e,i)}Math.imul||(g=f),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):i<63?f(this,t,e):i<1024?m(this,t,e):y(this,t,e)},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),y(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var s=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&s);s>>=26,s+=n/67108864|0,s+=o>>>26,this.words[r]=67108863&o}return 0!==s&&(this.words[r]=s,this.length++),e?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var s=i/26|0,r=i%26;e[i]=t.words[s]>>>r&1}return e}(t);if(0===e.length)return new r(1);for(var i=this,s=0;s<e.length&&0===e[s];s++,i=i.sqr());if(++s<e.length)for(var n=i.sqr();s<e.length;s++,n=n.sqr())0!==e[s]&&(i=i.mul(n));return i},r.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,s=t%26,r=(t-s)/26,n=67108863>>>26-s<<26-s;if(0!==s){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&n,h=(0|this.words[e])-a<<s;this.words[e]=h|o,o=a>>>26-s}o&&(this.words[e]=o,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.q$()},r.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,e,s){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var n=t%26,o=Math.min((t-n)/26,this.length),a=67108863^67108863>>>n<<n,h=s;if(r-=o,r=Math.max(0,r),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=r);l--){var c=0|this.words[l];this.words[l]=u<<26-n|c>>>n,u=c&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.q$()},r.prototype.ishrn=function(t,e,s){return i(0===this.negative),this.iushrn(t,e,s)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,r=1<<e;return!(this.length<=s||!(this.words[s]&r))},r.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.q$()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.tX(t)},r.prototype.tX=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.q$()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype.aX=function(t,e,s){var r,n,o=t.length+s;this.sX(o);var a=0;for(r=0;r<t.length;r++){n=(0|this.words[r+s])+a;var h=(0|t.words[r])*e;a=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+s]=67108863&n}for(;r<this.length-s;r++)a=(n=(0|this.words[r+s])+a)>>26,this.words[r+s]=67108863&n;if(0===a)return this.q$();for(i(-1===a),a=0,r=0;r<this.length;r++)a=(n=-(0|this.words[r])+a)>>26,this.words[r]=67108863&n;return this.negative=1,this.q$()},r.prototype.lX=function(t,e){var i=(this.length,t.length),s=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this.nX(o))&&(n=n.ushln(i),s.iushln(i),o=0|n.words[n.length-1]);var a,h=s.length-n.length;if("mod"!==e){(a=new r(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=s.clone().aX(n,1,h);0===u.negative&&(s=u,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var d=67108864*(0|s.words[n.length+c])+(0|s.words[n.length+c-1]);for(d=Math.min(d/o|0,67108863),s.aX(n,d,c);0!==s.negative;)d--,s.negative=0,s.aX(n,1,c),s.isZero()||(s.negative^=1);a&&(a.words[c]=d)}return a&&a.q$(),s.q$(),"div"!==e&&0!==i&&s.iushrn(i),{div:a||null,mod:s}},r.prototype.divmod=function(t,e,s){return i(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),s&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):this.negative&t.negative?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),s&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this.lX(t,e);var n,o,a},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,s=t.ushrn(1),r=t.andln(1),n=i.cmp(s);return n<0||1===r&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var s=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(s*r+(0|this.words[n]))%t;return e?-r:r},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var s=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*s;this.words[r]=n/t|0,s=n%t}return this.q$(),e?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,s=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),o=new r(0),a=new r(0),h=new r(1),l=0;e.isEven()&&s.isEven();)e.iushrn(1),s.iushrn(1),++l;for(var u=s.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;!(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var g=0,m=1;!(s.words[0]&m)&&g<26;++g,m<<=1);if(g>0)for(s.iushrn(g);g-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(c)),a.iushrn(1),h.iushrn(1);e.cmp(s)>=0?(e.isub(s),n.isub(a),o.isub(h)):(s.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:s.iushln(l)}},r.prototype.uX=function(t){i(0===t.negative),i(!t.isZero());var e=this,s=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new r(1),a=new r(0),h=s.clone();e.cmpn(1)>0&&s.cmpn(1)>0;){for(var l=0,u=1;!(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,d=1;!(s.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(s.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(s)>=0?(e.isub(s),o.isub(a)):(s.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var s=0;e.isEven()&&i.isEven();s++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var n=e;e=i,i=n}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(s)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,s=(t-e)/26,r=1<<e;if(this.length<=s)return this.sX(s+1),this.words[s]|=r,this;for(var n=r,o=s;0!==n&&o<this.length;o++){var a=0|this.words[o];n=(a+=n)>>>26,a&=67108863,this.words[o]=a}return 0!==n&&(this.words[o]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,s=t<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.q$(),this.length>1)e=1;else{s&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|t.words[i];if(s!==r){s<r?e=-1:s>r&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new M(t)},r.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this).cX(t)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype.cX=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this.cX(t)},r.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red.dX(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red.dX(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red.fX(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red.fX(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red.fX(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red.fX(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red.fX(this),this.red.neg(this)},r.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red.fX(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function x(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this.AX()}function A(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function v(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=r.gX(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.uX(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype.AX=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},x.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var s=e<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i.q$(),i},x.prototype.split=function(t,e){t.iushrn(this.n,0,e)},x.prototype.imulK=function(t){return t.imul(this.k)},s(A,x),A.prototype.split=function(t,e){for(var i=4194303,s=Math.min(t.length,9),r=0;r<s;r++)e.words[r]=t.words[r];if(e.length=s,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=n&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(o&i)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},A.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var s=0|t.words[i];e+=977*s,t.words[i]=67108863&e,e=64*s+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},s(S,x),s(v,x),s(b,x),b.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var s=19*(0|t.words[i])+e,r=67108863&s;s>>>=26,t.words[i]=r,e=s}return 0!==e&&(t.words[t.length++]=e),t},r.gX=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new A;else if("p224"===t)e=new S;else if("p192"===t)e=new v;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return p[t]=e,e},M.prototype.fX=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},M.prototype.dX=function(t,e){i(!(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).cX(this):(h(t,t.umod(this.m).cX(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).cX(this)},M.prototype.add=function(t,e){this.dX(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i.cX(this)},M.prototype.iadd=function(t,e){this.dX(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this.dX(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i.cX(this)},M.prototype.isub=function(t,e){this.dX(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this.fX(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this.dX(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this.dX(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var s=this.m.add(new r(1)).iushrn(2);return this.pow(t,s)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new r(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new r(2*u*u).toRed(this);0!==this.pow(u,l).cmp(h);)u.redIAdd(h);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),g=o;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();i(y<g);var p=this.pow(c,new r(1).iushln(g-y-1));d=d.redMul(p),c=p.redSqr(),f=f.redMul(c),g=y}return d},M.prototype.invm=function(t){var e=t.uX(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),s=e.length-1;s>=0;s--){for(var l=e.words[s],u=h-1;u>=0;u--){var c=l>>u&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4==++a||0===s&&0===u)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new T(t)},s(T,M),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.cX(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0).cX(this);var i=t.mul(e),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(s).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o.cX(this)},T.prototype.invm=function(t){return this.imod(t.uX(this.m).mul(this.r2)).cX(this)}}(0,cp);var fp=dp.exports;function gp(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];const i=[];if("string"!=typeof t){for(let e=0;e<t.length;e++)i[e]=0|t[e];return i}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let e=0;e<t.length;e+=2)i.push(parseInt(t[e]+t[e+1],16))}else for(let e=0;e<t.length;e++){const s=t.charCodeAt(e),r=s>>8,n=255&s;r?i.push(r,n):i.push(n)}return i}const mp=function(t,e,i){const s=new Array(Math.max(t.bitLength(),i)+1);s.fill(0);const r=1<<e+1,n=t.clone();for(let t=0;t<s.length;t++){let e;const i=n.andln(r-1);n.isOdd()?(e=i>(r>>1)-1?(r>>1)-i:i,n.isubn(e)):e=0,s[t]=e,n.iushrn(1)}return s},yp=function(t,e){const i=[[],[]];t=t.clone(),e=e.clone();let s=0,r=0;for(;t.cmpn(-s)>0||e.cmpn(-r)>0;){let n,o,a=t.andln(3)+s&3,h=e.andln(3)+r&3;if(3===a&&(a=-1),3===h&&(h=-1),1&a){const e=t.andln(7)+s&7;n=3!==e&&5!==e||2!==h?a:-a}else n=0;if(i[0].push(n),1&h){const t=e.andln(7)+r&7;o=3!==t&&5!==t||2!==a?h:-h}else o=0;i[1].push(o),2*s===n+1&&(s=1-s),2*r===o+1&&(r=1-r),t.iushrn(1),e.iushrn(1)}return i};class pp{constructor(t,e){this.type=t,this.p=new fp(e.p,16),this.red=e.prime?fp.red(e.prime):fp.mont(this.p),this.zero=new fp(0).toRed(this.red),this.one=new fp(1).toRed(this.red),this.two=new fp(2).toRed(this.red),this.n=e.n&&new fp(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this.pX=new Array(4),this.yX=new Array(4),this.mX=new Array(4),this.vX=new Array(4),this.SX=this.n?this.n.bitLength():0;const i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this.xX=!0,this.redN=this.n.toRed(this.red))}bX(t,e){const i=t.MX(),s=mp(e,1,this.SX);let r=(1<<i.step+1)-(i.step%2==0?2:1);r/=3;const n=[];for(let t=0;t<s.length;t+=i.step){let e=0;for(let r=t+i.step-1;r>=t;r--)e=(e<<1)+s[r];n.push(e)}let o=this.jpoint(null,null,null),a=this.jpoint(null,null,null);for(let t=r;t>0;t--){for(let e=0;e<n.length;e++){const s=n[e];s===t?a=a.mixedAdd(i.points[e]):s===-t&&(a=a.mixedAdd(i.points[e].neg()))}o=o.add(a)}return o.toP()}_X(t,e){let i=4;const s=t.wX(i);i=s.wnd;const r=s.points,n=mp(e,i,this.SX);let o=this.jpoint(null,null,null);for(let i=n.length-1;i>=0;i--){for(let t=0;i>=0&&0===n[i];i--)t++;if(i>=0&&e++,o=o.dblp(e),i<0)break;const s=n[i];o="affine"===t.type?s>0?o.mixedAdd(r[s-1>>1]):o.mixedAdd(r[-s-1>>1].neg()):s>0?o.add(r[s-1>>1]):o.add(r[-s-1>>1].neg())}return"affine"===t.type?o.toP():o}CX(t,e,i,s,r){const n=this.pX,o=this.yX,a=this.mX;let h=0;for(let i=0;i<s;i++){const s=e[i].wX(t);n[i]=s.wnd,o[i]=s.points}for(let t=s-1;t>=1;t-=2){const s=t-1,r=t;if(1!==n[s]||1!==n[r]){a[s]=mp(i[s],n[s],this.SX),a[r]=mp(i[r],n[r],this.SX),h=Math.max(a[s].length,h),h=Math.max(a[r].length,h);continue}const l=[e[s],null,null,e[r]];0===e[s].y.cmp(e[r].y)?(l[1]=e[s].add(e[r]),l[2]=e[s].toJ().mixedAdd(e[r].neg())):0===e[s].y.cmp(e[r].y.redNeg())?(l[1]=e[s].toJ().mixedAdd(e[r]),l[2]=e[s].add(e[r].neg())):(l[1]=e[s].toJ().mixedAdd(e[r]),l[2]=e[s].toJ().mixedAdd(e[r].neg()));const u=[-3,-1,-5,-7,0,7,5,1,3],c=yp(i[s],i[r]);h=Math.max(c[0].length,h),a[s]=new Array(h),a[r]=new Array(h);for(let t=0;t<h;t++){const e=0|c[0][t],i=0|c[1][t];a[s][t]=u[3*(e+1)+(i+1)],a[r][t]=0,o[s]=l}}let l=this.jpoint(null,null,null);const u=this.vX;for(let t=h;t>=0;t--){let e=0;for(;t>=0;){let i=!0;for(let e=0;e<s;e++)u[e]=0|a[e][t],0!==u[e]&&(i=!1);if(!i)break;e++,t--}if(t>=0&&e++,l=l.dblp(e),t<0)break;for(let t=0;t<s;t++){const e=u[t];let i;0!==e&&(e>0?i=o[t][e-1>>1]:e<0&&(i=o[t][-e-1>>1].neg()),l="affine"===i.type?l.mixedAdd(i):l.add(i))}}for(let t=0;t<s;t++)o[t]=null;return r?l:l.toP()}decodePoint(t,e){t=gp(t,e);const i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")}}class xp{constructor(t,e){this.curve=t,this.type=e,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}kX(t){const e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))}encode(t,e){return function(t,e){return"hex"===e?function(t){let e="";for(let s=0;s<t.length;s++)e+=1===(i=t[s].toString(16)).length?`0${i}`:i;var i;return e}(t):t}(this.kX(e),t)}precompute(t){if(this.precomputed)return this;const e={doubles:null,naf:null,beta:null};return e.naf=this.wX(8),e.doubles=this.MX(4,t),e.beta=this.TX(),this.precomputed=e,this}FX(t){if(!this.precomputed)return!1;const e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)}MX(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const i=[this];let s=this;for(let r=0;r<e;r+=t){for(let e=0;e<t;e++)s=s.dbl();i.push(s)}return{step:t,points:i}}wX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const e=[this],i=(1<<t)-1,s=1===i?null:this.dbl();for(let t=1;t<i;t++)e[t]=e[t-1].add(s);return{wnd:t,points:e}}TX(){return null}dblp(t){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}}class Ap extends pp{constructor(t){super("short",t),this.a=new fp(t.a,16).toRed(this.red),this.b=new fp(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.IX(t),this.PX=new Array(4),this.DX=new Array(4)}pointFromJSON(t,e){return Sp.fromJSON(this,t,e)}IX(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let e,i,s;if(t.beta)e=new fp(t.beta,16).toRed(this.red);else{const t=this.BX(this.p);e=t[0].cmp(t[1])<0?t[0]:t[1],e=e.toRed(this.red)}if(t.lambda)i=new fp(t.lambda,16);else{const t=this.BX(this.n);i=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(e))?t[0]:t[1]}return s=t.basis?t.basis.map((t=>({a:new fp(t.a,16),b:new fp(t.b,16)}))):this.LX(i),{beta:e,lambda:i,basis:s}}BX(t){const e=t===this.p?this.red:fp.mont(t),i=new fp(2).toRed(e).redInvm(),s=i.redNeg(),r=new fp(3).toRed(e).redNeg().redSqrt().redMul(i);return[s.redAdd(r).fromRed(),s.redSub(r).fromRed()]}LX(t){const e=this.n.ushrn(Math.floor(this.n.bitLength()/2));let i,s,r,n,o,a,h,l,u,c=t,d=this.n.clone(),f=new fp(1),g=new fp(0),m=new fp(0),y=new fp(1),p=0;for(;0!==c.cmpn(0);){const t=d.div(c);l=d.sub(t.mul(c)),u=m.sub(t.mul(f));const o=y.sub(t.mul(g));if(!r&&l.cmp(e)<0)i=h.neg(),s=f,r=l.neg(),n=u;else if(r&&2==++p)break;h=l,d=c,c=l,m=f,f=u,y=g,g=o}o=l.neg(),a=u;const x=r.sqr().add(n.sqr());return o.sqr().add(a.sqr()).cmp(x)>=0&&(o=i,a=s),r.negative&&(r=r.neg(),n=n.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:r,b:n},{a:o,b:a}]}RX(t){const e=this.endo.basis,i=e[0],s=e[1],r=s.b.mul(t).divRound(this.n),n=i.b.neg().mul(t).divRound(this.n),o=r.mul(i.a),a=n.mul(s.a),h=r.mul(i.b),l=n.mul(s.b);return{k1:t.sub(o).sub(a),k2:h.add(l).neg()}}point(t,e,i){return new Sp(this,t,e,i)}pointFromX(t,e){(t=new fp(t,16)).red||(t=t.toRed(this.red));const i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");const r=s.fromRed().isOdd();return(e&&!r||!e&&r)&&(s=s.redNeg()),this.point(t,s)}validate(t){if(t.inf)return!0;const e=t.x,i=t.y,s=this.a.redMul(e),r=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)}EX(t,e,i){const s=this.PX,r=this.DX;let n=0;for(n=0;n<t.length;n++){const i=this.RX(e[n]);let o=t[n],a=o.TX();i.k1.negative&&(i.k1.ineg(),o=o.neg(!0)),i.k2.negative&&(i.k2.ineg(),a=a.neg(!0)),s[2*n]=o,s[2*n+1]=a,r[2*n]=i.k1,r[2*n+1]=i.k2}const o=this.CX(1,s,r,2*n,i);for(let t=0;t<2*n;t++)s[t]=null,r[t]=null;return o}jpoint(t,e,i){return new vp(this,t,e,i)}}class Sp extends xp{constructor(t,e,i,s){super(t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new fp(e,16),this.y=new fp(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){return new Sp(this,t,e,i)}TX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const i=this.curve,s=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,e,i){"string"==typeof e&&(e=JSON.parse(e));const s=t.point(e[0],e[1],i);if(!e[2])return s;function r(e){return t.point(e[0],e[1],i)}const n=e[2];return s.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[s].concat(n.doubles.points.map(r))},naf:n.naf&&{wnd:n.naf.wnd,points:[s].concat(n.naf.points.map(r))}},s}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));const i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),n=r.redSqr().redISub(this.x.redAdd(this.x)),o=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new fp(t,16),this.isInfinity()?this:this.FX(t)?this.curve.bX(this,t):this.curve.endo?this.curve.EX([this],[t]):this.curve._X(this,t)}mulAdd(t,e,i){const s=[this,e],r=[t,i];return this.curve.endo?this.curve.EX(s,r):this.curve.CX(1,s,r,2)}jmulAdd(t,e,i){const s=[this,e],r=[t,i];return this.curve.endo?this.curve.EX(s,r,!0):this.curve.CX(1,s,r,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class vp extends xp{constructor(t,e,i,s){super(t,"jacobian"),null===e&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new fp(0)):(this.x=new fp(e,16),this.y=new fp(i,16),this.z=new fp(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){throw new Error("Method not implemented.")}jpoint(t,e,i){return new vp(this,t,e,i)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),r=t.x.redMul(i),n=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=s.redSub(r),h=n.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=a.redSqr(),u=l.redMul(a),c=s.redMul(l),d=h.redSqr().redIAdd(u).redISub(c).redISub(c),f=h.redMul(c.redISub(d)).redISub(n.redMul(u)),g=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,g)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),r=this.y,n=t.y.redMul(e).redMul(this.z),o=i.redSub(s),a=r.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const h=o.redSqr(),l=h.redMul(o),u=i.redMul(h),c=a.redSqr().redIAdd(l).redISub(u).redISub(u),d=a.redMul(u.redISub(c)).redISub(r.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(c,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}const e=this.curve.a,i=this.curve.tinv;let s=this.x;const r=this.y;let n=this.z,o=n.redSqr().redSqr(),a=r.redAdd(r);for(let i=0;i<t;i++){const r=s.redSqr(),h=a.redSqr(),l=h.redSqr(),u=r.redAdd(r).redIAdd(r).redIAdd(e.redMul(o)),c=s.redMul(h),d=u.redSqr().redISub(c.redAdd(c)),f=c.redISub(d);let g=u.redMul(f);g=g.redIAdd(g).redISub(l);const m=a.redMul(n);i+1<t&&(o=o.redMul(l)),s=d,n=m,a=g}return this.curve.jpoint(s,a.redMul(i),n)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.zX():this.curve.threeA?this.VX():this.OX()}zX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const a=s.redAdd(s).redIAdd(s),h=a.redSqr().redISub(o).redISub(o);let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=h,e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const a=s.redAdd(s).redIAdd(s),h=a.redSqr();let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=h.redISub(o).redISub(o),e=a.redMul(o.redISub(t)).redISub(l),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)}VX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const a=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{const s=this.z.redSqr(),r=this.y.redSqr(),n=this.x.redMul(r);let o=this.x.redSub(s).redMul(this.x.redAdd(s));o=o.redAdd(o).redIAdd(o);let a=n.redIAdd(n);a=a.redIAdd(a);const h=a.redAdd(a);t=o.redSqr().redISub(h),i=this.y.redAdd(this.z).redSqr().redISub(r).redISub(s);let l=r.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),e=o.redMul(a.redISub(t)).redISub(l)}return this.curve.jpoint(t,e,i)}OX(){const t=this.curve.a,e=this.x,i=this.y,s=this.z,r=s.redSqr().redSqr(),n=e.redSqr(),o=i.redSqr(),a=n.redAdd(n).redIAdd(n).redIAdd(t.redMul(r));let h=e.redAdd(e);h=h.redIAdd(h);const l=h.redMul(o),u=a.redSqr().redISub(l.redAdd(l)),c=l.redISub(u);let d=o.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=a.redMul(c).redISub(d),g=i.redAdd(i).redMul(s);return this.curve.jpoint(u,f,g)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),r=t.redAdd(t).redIAdd(t),n=r.redSqr();let o=this.x.redAdd(e).redSqr().redISub(t).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(n);const a=o.redSqr();let h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);const l=r.redIAdd(o).redSqr().redISub(n).redISub(a).redISub(h);let u=e.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);let c=this.x.redMul(a).redISub(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.y.redMul(l.redMul(h.redISub(l)).redISub(o.redMul(a)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(c,d,f)}mul(t,e){return t=new fp(t,e),this.curve._X(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;const s=e.redMul(this.z),r=i.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(s)).cmpn(0)}eqXToP(t){const e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;const s=t.clone(),r=this.curve.redN.redMul(e);for(;;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class bp{constructor(t){this.curve=new Ap(t),this.g=this.curve.g,this.n=this.curve.n}}const Mp={};var Tp;Mp.PresetCurve=bp,Tp={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Mp,"secp256k1",{configurable:!0,enumerable:!0,get(){const t=new bp(Tp);return Object.defineProperty(Mp,"secp256k1",{configurable:!0,enumerable:!0,value:t}),t}});class wp{constructor(t,e){this.ec=t,this.priv=null,this.pub=null,e.pub&&this.NX(e.pub,e.pubEnc)}static fromPublic(t,e,i){return e instanceof wp?e:new wp(t,{pub:e,pubEnc:i})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub}NX(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)}verify(t,e){return this.ec.verify(t,e,this)}}function Cp(t,e){const i=t[e.place++];if(!(128&i))return i;const s=15&i;if(0===s||s>4)return!1;let r=0,n=e.place;for(let e=0;e<s;e++,n++)r<<=8,r|=t[n],r>>>=0;return!(r<=127)&&(e.place=n,r)}class kp{constructor(){this.place=0}}class Ep{constructor(t,e){if(t instanceof Ep)return t;this.GX(t,e)||(this.r=new fp(t.r,16),this.s=new fp(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}GX(t,e){t=gp(t,e);const i=new kp;if(48!==t[i.place++])return!1;const s=Cp(t,i);if(!1===s)return!1;if(s+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;const r=Cp(t,i);if(!1===r)return!1;let n=t.slice(i.place,r+i.place);if(i.place+=r,2!==t[i.place++])return!1;const o=Cp(t,i);if(!1===o)return!1;if(t.length!==o+i.place)return!1;let a=t.slice(i.place,o+i.place);if(0===n[0]){if(!(128&n[1]))return!1;n=n.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new fp(n),this.s=new fp(a),this.recoveryParam=null,!0}}class Rp{constructor(t){if(!(this instanceof Rp))return new Rp(t);"string"==typeof t&&(t=Mp[t]),t instanceof Mp.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,e){return wp.fromPublic(this,t,e)}WX(t,e){const i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,e,i,s){t=this.WX(new fp(t,16)),i=this.keyFromPublic(i,s);const r=(e=new Ep(e,"hex")).r,n=e.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;const o=n.invm(this.n),a=o.mul(t).umod(this.n),h=o.mul(r).umod(this.n);if(!this.curve.xX){const t=this.g.mulAdd(a,i.getPublic(),h);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(r)}const l=this.g.jmulAdd(a,i.getPublic(),h);return!l.isInfinity()&&l.eqXToP(r)}}var Ip,_p={exports:{}};_p.exports=(Ip=Ip||function(t,e){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==cp&&cp.crypto&&(i=cp.crypto),!i)try{i=e}catch(t){}var s=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(e){var i;return t.prototype=e,i=new t,t.prototype=null,i}}(),n={},o=n.lib={},a=o.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},h=o.WordArray=a.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=e?i:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,i=t.words,s=this.sigBytes,r=t.sigBytes;if(this.clamp(),s%4)for(var n=0;n<r;n++){var o=i[n>>>2]>>>24-n%4*8&255;e[s+n>>>2]|=o<<24-(s+n)%4*8}else for(var a=0;a<r;a+=4)e[s+a>>>2]=i[a>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=a.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(s());return new h.init(e,t)}}),l=n.enc={},u=l.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,s=[],r=0;r<i;r++){var n=e[r>>>2]>>>24-r%4*8&255;s.push((n>>>4).toString(16)),s.push((15&n).toString(16))}return s.join("")},parse:function(t){for(var e=t.length,i=[],s=0;s<e;s+=2)i[s>>>3]|=parseInt(t.substr(s,2),16)<<24-s%8*4;return new h.init(i,e/2)}},c=l.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,s=[],r=0;r<i;r++){var n=e[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(n))}return s.join("")},parse:function(t){for(var e=t.length,i=[],s=0;s<e;s++)i[s>>>2]|=(255&t.charCodeAt(s))<<24-s%4*8;return new h.init(i,e)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=a.extend({reset:function(){this._w=new h.init,this.UX=0},YX:function(t){"string"==typeof t&&(t=d.parse(t)),this._w.concat(t),this.UX+=t.sigBytes},HX:function(e){var i,s=this._w,r=s.words,n=s.sigBytes,o=this.blockSize,a=n/(4*o),l=(a=e?t.ceil(a):t.max((0|a)-this.$X,0))*o,u=t.min(4*l,n);if(l){for(var c=0;c<l;c+=o)this.XX(r,c);i=r.splice(0,l),s.sigBytes-=u}return new h.init(i,u)},clone:function(){var t=a.clone.call(this);return t._w=this._w.clone(),t},$X:0});o.Hasher=f.extend({cfg:a.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.jX()},update:function(t){return this.YX(t),this.HX(),this},finalize:function(t){return t&&this.YX(t),this.ZX()},blockSize:16,QX:function(t){return function(e,i){return new t.init(i).finalize(e)}},JX:function(t){return function(e,i){return new g.HMAC.init(t,i).finalize(e)}}});var g=n.algo={};return n}(Math),Ip);var Fp,Dp,Bp,Pp={exports:{}}.exports=function(t){return function(e){var i=t,s=i.lib,r=s.WordArray,n=s.Hasher,o=i.algo,a=[],h=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(t){return 4294967296*(t-(0|t))|0}for(var s=2,r=0;r<64;)t(s)&&(r<8&&(a[r]=i(e.pow(s,.5))),h[r]=i(e.pow(s,1/3)),r++),s++}();var l=[],u=o.SHA256=n.extend({jX:function(){this.KX=new r.init(a.slice(0))},XX:function(t,e){for(var i=this.KX.words,s=i[0],r=i[1],n=i[2],o=i[3],a=i[4],u=i[5],c=i[6],d=i[7],f=0;f<64;f++){if(f<16)l[f]=0|t[e+f];else{var g=l[f-15],m=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,y=l[f-2],p=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=m+l[f-7]+p+l[f-16]}var x=s&r^s&n^r&n,A=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),S=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+h[f]+l[f];d=c,c=u,u=a,a=o+S|0,o=n,n=r,r=s,s=S+(A+x)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+n|0,i[3]=i[3]+o|0,i[4]=i[4]+a|0,i[5]=i[5]+u|0,i[6]=i[6]+c|0,i[7]=i[7]+d|0},ZX:function(){var t=this._w,i=t.words,s=8*this.UX,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.HX(),this.KX},clone:function(){var t=n.clone.call(this);return t.KX=this.KX.clone(),t}});i.SHA256=n.QX(u),i.HmacSHA256=n.JX(u)}(Math),t.SHA256}(_p.exports),Lp={exports:{}}.exports=function(t){return i=(e=t).lib.WordArray,s=e.algo,r=s.SHA256,n=s.SHA224=r.extend({jX:function(){this.KX=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},ZX:function(){var t=r.ZX.call(this);return t.sigBytes-=4,t}}),e.SHA224=r.QX(n),e.HmacSHA224=r.JX(n),t.SHA224;var e,i,s,r,n}(_p.exports),Vp={exports:{}}.exports=_p.exports.enc.Hex,zp={exports:{}}.exports=_p.exports.enc.Utf8;!function(t){return i=(e=t).lib.WordArray,e.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,s=this.qX;t.clamp();for(var r=[],n=0;n<i;n+=3)for(var o=(e[n>>>2]>>>24-n%4*8&255)<<16|(e[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e[n+2>>>2]>>>24-(n+2)%4*8&255,a=0;a<4&&n+.75*a<i;a++)r.push(s.charAt(o>>>6*(3-a)&63));var h=s.charAt(64);if(h)for(;r.length%4;)r.push(h);return r.join("")},parse:function(t){var e=t.length,s=this.qX,r=this.tj;if(!r){r=this.tj=[];for(var n=0;n<s.length;n++)r[s.charCodeAt(n)]=n}var o=s.charAt(64);if(o){var a=t.indexOf(o);-1!==a&&(e=a)}return function(t,e,s){for(var r=[],n=0,o=0;o<e;o++)if(o%4){var a=s[t.charCodeAt(o-1)]<<o%4*2|s[t.charCodeAt(o)]>>>6-o%4*2;r[n>>>2]|=a<<24-n%4*8,n++}return i.create(r,n)}(t,e,r)},qX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var e,i}(_p.exports),function(t){(function(e){var i=t,s=i.lib,r=s.WordArray,n=s.Hasher,o=i.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var h=o.MD5=n.extend({jX:function(){this.KX=new r.init([1732584193,4023233417,2562383102,271733878])},XX:function(t,e){for(var i=0;i<16;i++){var s=e+i,r=t[s];t[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var n=this.KX.words,o=t[e+0],h=t[e+1],f=t[e+2],g=t[e+3],m=t[e+4],y=t[e+5],p=t[e+6],x=t[e+7],A=t[e+8],S=t[e+9],v=t[e+10],b=t[e+11],M=t[e+12],T=t[e+13],w=t[e+14],C=t[e+15],k=n[0],E=n[1],R=n[2],I=n[3];k=l(k,E,R,I,o,7,a[0]),I=l(I,k,E,R,h,12,a[1]),R=l(R,I,k,E,f,17,a[2]),E=l(E,R,I,k,g,22,a[3]),k=l(k,E,R,I,m,7,a[4]),I=l(I,k,E,R,y,12,a[5]),R=l(R,I,k,E,p,17,a[6]),E=l(E,R,I,k,x,22,a[7]),k=l(k,E,R,I,A,7,a[8]),I=l(I,k,E,R,S,12,a[9]),R=l(R,I,k,E,v,17,a[10]),E=l(E,R,I,k,b,22,a[11]),k=l(k,E,R,I,M,7,a[12]),I=l(I,k,E,R,T,12,a[13]),R=l(R,I,k,E,w,17,a[14]),k=u(k,E=l(E,R,I,k,C,22,a[15]),R,I,h,5,a[16]),I=u(I,k,E,R,p,9,a[17]),R=u(R,I,k,E,b,14,a[18]),E=u(E,R,I,k,o,20,a[19]),k=u(k,E,R,I,y,5,a[20]),I=u(I,k,E,R,v,9,a[21]),R=u(R,I,k,E,C,14,a[22]),E=u(E,R,I,k,m,20,a[23]),k=u(k,E,R,I,S,5,a[24]),I=u(I,k,E,R,w,9,a[25]),R=u(R,I,k,E,g,14,a[26]),E=u(E,R,I,k,A,20,a[27]),k=u(k,E,R,I,T,5,a[28]),I=u(I,k,E,R,f,9,a[29]),R=u(R,I,k,E,x,14,a[30]),k=c(k,E=u(E,R,I,k,M,20,a[31]),R,I,y,4,a[32]),I=c(I,k,E,R,A,11,a[33]),R=c(R,I,k,E,b,16,a[34]),E=c(E,R,I,k,w,23,a[35]),k=c(k,E,R,I,h,4,a[36]),I=c(I,k,E,R,m,11,a[37]),R=c(R,I,k,E,x,16,a[38]),E=c(E,R,I,k,v,23,a[39]),k=c(k,E,R,I,T,4,a[40]),I=c(I,k,E,R,o,11,a[41]),R=c(R,I,k,E,g,16,a[42]),E=c(E,R,I,k,p,23,a[43]),k=c(k,E,R,I,S,4,a[44]),I=c(I,k,E,R,M,11,a[45]),R=c(R,I,k,E,C,16,a[46]),k=d(k,E=c(E,R,I,k,f,23,a[47]),R,I,o,6,a[48]),I=d(I,k,E,R,x,10,a[49]),R=d(R,I,k,E,w,15,a[50]),E=d(E,R,I,k,y,21,a[51]),k=d(k,E,R,I,M,6,a[52]),I=d(I,k,E,R,g,10,a[53]),R=d(R,I,k,E,v,15,a[54]),E=d(E,R,I,k,h,21,a[55]),k=d(k,E,R,I,A,6,a[56]),I=d(I,k,E,R,C,10,a[57]),R=d(R,I,k,E,p,15,a[58]),E=d(E,R,I,k,T,21,a[59]),k=d(k,E,R,I,m,6,a[60]),I=d(I,k,E,R,b,10,a[61]),R=d(R,I,k,E,f,15,a[62]),E=d(E,R,I,k,S,21,a[63]),n[0]=n[0]+k|0,n[1]=n[1]+E|0,n[2]=n[2]+R|0,n[3]=n[3]+I|0},ZX:function(){var t=this._w,i=t.words,s=8*this.UX,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var n=e.floor(s/4294967296),o=s;i[15+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this.HX();for(var a=this.KX,h=a.words,l=0;l<4;l++){var u=h[l];h[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=n.clone.call(this);return t.KX=this.KX.clone(),t}});function l(t,e,i,s,r,n,o){var a=t+(e&i|~e&s)+r+o;return(a<<n|a>>>32-n)+e}function u(t,e,i,s,r,n,o){var a=t+(e&s|i&~s)+r+o;return(a<<n|a>>>32-n)+e}function c(t,e,i,s,r,n,o){var a=t+(e^i^s)+r+o;return(a<<n|a>>>32-n)+e}function d(t,e,i,s,r,n,o){var a=t+(i^(e|~s))+r+o;return(a<<n|a>>>32-n)+e}i.MD5=n.QX(h),i.HmacMD5=n.JX(h)})(Math),t.MD5}(_p.exports),function(t){return i=(e=t).lib,s=i.WordArray,r=i.Hasher,n=e.algo,o=[],a=n.SHA1=r.extend({jX:function(){this.KX=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},XX:function(t,e){for(var i=this.KX.words,s=i[0],r=i[1],n=i[2],a=i[3],h=i[4],l=0;l<80;l++){if(l<16)o[l]=0|t[e+l];else{var u=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=u<<1|u>>>31}var c=(s<<5|s>>>27)+h+o[l];c+=l<20?1518500249+(r&n|~r&a):l<40?1859775393+(r^n^a):l<60?(r&n|r&a|n&a)-1894007588:(r^n^a)-899497514,h=a,a=n,n=r<<30|r>>>2,r=s,s=c}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+n|0,i[3]=i[3]+a|0,i[4]=i[4]+h|0},ZX:function(){var t=this._w,e=t.words,i=8*this.UX,s=8*t.sigBytes;return e[s>>>5]|=128<<24-s%32,e[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(s+64>>>9<<4)]=i,t.sigBytes=4*e.length,this.HX(),this.KX},clone:function(){var t=r.clone.call(this);return t.KX=this.KX.clone(),t}}),e.SHA1=r.QX(a),e.HmacSHA1=r.JX(a),t.SHA1;var e,i,s,r,n,o,a}(_p.exports),Dp=(Fp=_p.exports).lib.Base,Bp=Fp.enc.Utf8,Fp.algo.HMAC=Dp.extend({init:function(t,e){t=this.ij=new t.init,"string"==typeof e&&(e=Bp.parse(e));var i=t.blockSize,s=4*i;e.sigBytes>s&&(e=t.finalize(e)),e.clamp();for(var r=this.sj=e.clone(),n=this.ej=e.clone(),o=r.words,a=n.words,h=0;h<i;h++)o[h]^=1549556828,a[h]^=909522486;r.sigBytes=n.sigBytes=s,this.reset()},reset:function(){var t=this.ij;t.reset(),t.update(this.ej)},update:function(t){return this.ij.update(t),this},finalize:function(t){var e=this.ij,i=e.finalize(t);return e.reset(),e.finalize(this.sj.clone().concat(i))}}),function(t){return s=(i=(e=t).lib).Base,r=i.WordArray,o=(n=e.algo).MD5,a=n.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i,s=this.cfg,n=s.hasher.create(),o=r.create(),a=o.words,h=s.keySize,l=s.iterations;a.length<h;){i&&n.update(i),i=n.update(t).finalize(e),n.reset();for(var u=1;u<l;u++)i=n.finalize(i),n.reset();o.concat(i)}return o.sigBytes=4*h,o}}),e.EvpKDF=function(t,e,i){return a.create(i).compute(t,e)},t.EvpKDF;var e,i,s,r,n,o,a}(_p.exports),function(t){t.lib.Cipher||function(){var e=t,i=e.lib,s=i.Base,r=i.WordArray,n=i.BufferedBlockAlgorithm,o=e.enc;o.Utf8;var a=o.Base64,h=e.algo.EvpKDF,l=i.Cipher=n.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this.hj,t,e)},createDecryptor:function(t,e){return this.create(this.rj,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this.nj=t,this.oj=e,this.reset()},reset:function(){n.reset.call(this),this.jX()},process:function(t){return this.YX(t),this.HX()},finalize:function(t){return t&&this.YX(t),this.ZX()},keySize:4,ivSize:4,hj:1,rj:2,QX:function(){function t(t){return"string"==typeof t?x:y}return function(e){return{encrypt:function(i,s,r){return t(s).encrypt(e,i,s,r)},decrypt:function(i,s,r){return t(s).decrypt(e,i,s,r)}}}}()});i.StreamCipher=l.extend({ZX:function(){return this.HX(!0)},blockSize:1});var u=e.mode={},c=i.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this.aj=t,this.lj=e}}),d=u.CBC=function(){var t=c.extend();function e(t,e,i){var s,r=this.lj;r?(s=r,this.lj=void 0):s=this.uj;for(var n=0;n<i;n++)t[e+n]^=s[n]}return t.Encryptor=t.extend({processBlock:function(t,i){var s=this.aj,r=s.blockSize;e.call(this,t,i,r),s.encryptBlock(t,i),this.uj=t.slice(i,i+r)}}),t.Decryptor=t.extend({processBlock:function(t,i){var s=this.aj,r=s.blockSize,n=t.slice(i,i+r);s.decryptBlock(t,i),e.call(this,t,i,r),this.uj=n}}),t}(),f=(e.pad={}).Pkcs7={pad:function(t,e){for(var i=4*e,s=i-t.sigBytes%i,n=s<<24|s<<16|s<<8|s,o=[],a=0;a<s;a+=4)o.push(n);var h=r.create(o,s);t.concat(h)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:f}),reset:function(){var t;l.reset.call(this);var e=this.cfg,i=e.iv,s=e.mode;this.nj==this.hj?t=s.createEncryptor:(t=s.createDecryptor,this.$X=1),this.cj&&this.cj.dj==t?this.cj.init(this,i&&i.words):(this.cj=t.call(s,this,i&&i.words),this.cj.dj=t)},XX:function(t,e){this.cj.processBlock(t,e)},ZX:function(){var t,e=this.cfg.padding;return this.nj==this.hj?(e.pad(this._w,this.blockSize),t=this.HX(!0)):(t=this.HX(!0),e.unpad(t)),t},blockSize:4});var g=i.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),m=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,i=t.salt;return(i?r.create([1398893684,1701076831]).concat(i).concat(e):e).toString(a)},parse:function(t){var e,i=a.parse(t),s=i.words;return 1398893684==s[0]&&1701076831==s[1]&&(e=r.create(s.slice(2,4)),s.splice(0,4),i.sigBytes-=16),g.create({ciphertext:i,salt:e})}},y=i.SerializableCipher=s.extend({cfg:s.extend({format:m}),encrypt:function(t,e,i,s){s=this.cfg.extend(s);var r=t.createEncryptor(i,s),n=r.finalize(e),o=r.cfg;return g.create({ciphertext:n,key:i,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:s.format})},decrypt:function(t,e,i,s){return s=this.cfg.extend(s),e=this.fj(e,s.format),t.createDecryptor(i,s).finalize(e.ciphertext)},fj:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),p=(e.kdf={}).OpenSSL={execute:function(t,e,i,s){s||(s=r.random(8));var n=h.create({keySize:e+i}).compute(t,s),o=r.create(n.words.slice(e),4*i);return n.sigBytes=4*e,g.create({key:n,iv:o,salt:s})}},x=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:p}),encrypt:function(t,e,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,t.keySize,t.ivSize);s.iv=r.iv;var n=y.encrypt.call(this,t,e,r.key,s);return n.mixIn(r),n},decrypt:function(t,e,i,s){s=this.cfg.extend(s),e=this.fj(e,s.format);var r=s.kdf.execute(i,t.keySize,t.ivSize,e.salt);return s.iv=r.iv,y.decrypt.call(this,t,e,r.key,s)}})}()}(_p.exports);var Np={exports:{}}.exports=function(t){return function(){var e=t,i=e.lib.BlockCipher,s=e.algo,r=[],n=[],o=[],a=[],h=[],l=[],u=[],c=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var i=0,s=0;for(e=0;e<256;e++){var g=s^s<<1^s<<2^s<<3^s<<4;g=g>>>8^255&g^99,r[i]=g,n[g]=i;var m=t[i],y=t[m],p=t[y],x=257*t[g]^16843008*g;o[i]=x<<24|x>>>8,a[i]=x<<16|x>>>16,h[i]=x<<8|x>>>24,l[i]=x,x=16843009*p^65537*y^257*m^16843008*i,u[g]=x<<24|x>>>8,c[g]=x<<16|x>>>16,d[g]=x<<8|x>>>24,f[g]=x,i?(i=m^t[t[t[p^m]]],s^=t[t[s]]):i=s=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],m=s.AES=i.extend({jX:function(){if(!this.Aj||this.gj!==this.oj){for(var t=this.gj=this.oj,e=t.words,i=t.sigBytes/4,s=4*((this.Aj=i+6)+1),n=this.pj=[],o=0;o<s;o++)o<i?n[o]=e[o]:(l=n[o-1],o%i?i>6&&o%i==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=g[o/i|0]<<24),n[o]=n[o-i]^l);for(var a=this.yj=[],h=0;h<s;h++){if(o=s-h,h%4)var l=n[o];else l=n[o-4];a[h]=h<4||o<=4?l:u[r[l>>>24]]^c[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(t,e){this.mj(t,e,this.pj,o,a,h,l,r)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this.mj(t,e,this.yj,u,c,d,f,n),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},mj:function(t,e,i,s,r,n,o,a){for(var h=this.Aj,l=t[e]^i[0],u=t[e+1]^i[1],c=t[e+2]^i[2],d=t[e+3]^i[3],f=4,g=1;g<h;g++){var m=s[l>>>24]^r[u>>>16&255]^n[c>>>8&255]^o[255&d]^i[f++],y=s[u>>>24]^r[c>>>16&255]^n[d>>>8&255]^o[255&l]^i[f++],p=s[c>>>24]^r[d>>>16&255]^n[l>>>8&255]^o[255&u]^i[f++],x=s[d>>>24]^r[l>>>16&255]^n[u>>>8&255]^o[255&c]^i[f++];l=m,u=y,c=p,d=x}m=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[c>>>8&255]<<8|a[255&d])^i[f++],y=(a[u>>>24]<<24|a[c>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^i[f++],p=(a[c>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^i[f++],x=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&c])^i[f++],t[e]=m,t[e+1]=y,t[e+2]=p,t[e+3]=x},keySize:8});e.AES=i.QX(m)}(),t.AES}(_p.exports),Op={exports:{}}.exports=function(t){return t.mode.CTR=(i=(e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){var i=this.aj,s=i.blockSize,r=this.lj,n=this.vj;r&&(n=this.vj=r.slice(0),this.lj=void 0);var o=n.slice(0);i.encryptBlock(o,0),n[s-1]=n[s-1]+1|0;for(var a=0;a<s;a++)t[e+a]^=o[a]}}),e.Decryptor=i,e),t.mode.CTR;var e,i}(_p.exports),Up={exports:{}}.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,i=e.init,s=e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,s=[],r=0;r<e;r++)s[r>>>2]|=t[r]<<24-r%4*8;i.call(this,s,e)}else i.apply(this,arguments)};s.prototype=e}}(),t.lib.WordArray}(_p.exports),Yp={exports:{}}.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(_p.exports);const Gp="aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvYXBwLWRlcGxveW1lbnQv",Hp={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},Wp=Tt,Kp=(...t)=>t.slice(1).reduce(((e,i)=>e+Wp.atob(Hp[t[0]][i].toString())),"");let Xp,jp,$p,Zp=new Uint8Array([]);class Qp{set e(t){Xp=t}get e(){jp={af:!1,lf:!1,uf:!1,cf:!1,df:!1,ff:!1,Af:!1,gf:!1,pf:!1,yf:!1,mf:!1,vf:!1,Sf:!1,xf:!1,bf:!1,Mf:!1,_f:!1,wf:!1,Cf:!1,kf:!1,Tf:!1,Ff:!1,If:!1,Pf:!1};const t=Zp.length,e=t>=1?Zp[0]:void 0,i=t>=2?Zp[1]:void 0,s=t>=3?Zp[2]:void 0;return void 0!==e&&(jp.af=!!(1&e),jp.lf=!!(2&e),jp.uf=!!(4&e),jp.cf=!!(8&e),jp.df=!!(16&e),jp.ff=!!(32&e),jp.Af=!!(64&e),jp.gf=!!(128&e)),void 0!==i&&(jp.pf=!!(1&i),jp.yf=!!(2&i),jp.mf=!!(4&i),jp.vf=!!(8&i),jp.Sf=!!(16&i),jp.xf=!!(32&i),jp.bf=!!(64&i),jp.Mf=!!(128&i)),void 0!==s&&(jp._f=!!(1&s),jp.wf=!!(2&s),jp.Cf=!!(4&s),jp.kf=!!(8&s),jp.Tf=!!(16&s),jp.Ff=!!(32&s),jp.If=!!(64&s),jp.Pf=!!(128&s)),jp.ff}set l(t){$p=t}get l(){return $p}}let qp=!1;const Jp=(t,e)=>{const i=new RegExp(`.{${e}}`,"g");return(t.match(i)||[]).map((t=>parseInt(t,16)))},tx=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},ex=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),ix=t=>{const e={},i=t.split("-");if(3!==i.length)return{Sj:Kp(0,0,1,7,1,12,5)};let s=0;const r=Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(0)));s+=1;const n=r.subarray(s,s+=20),o=new DataView(r.buffer).getUint16(s,!0);s+=2;const a=Uint8Array.from(Array(o));for(let t=0;t<o;t+=1)a[t]=r[t+s]^n[t%n.byteLength];const h=new DataView(a.buffer);e.xj=a,s=0;const l=Uint8Array.from(Array(h.getUint16(s,!0)));s+=2,l.set(a.subarray(s,s+=l.byteLength)),Zp=new Uint8Array(l);const u=tx(a.subarray(s,s+=4)),c=Kp(-3,0);if(!u)return{Sj:Kp(0,0,1,7,1,12,5)};if(u<c)return{Sj:Kp(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=tx(a.subarray(s,s+=4)),e=ex(new Date);if(!t)return{Sj:Kp(0,0,1,7,1,12,5)};if(t<e)return{Sj:Kp(0,0,1,2,1,3,1,4,5),bj:Kp(-2,2)}}e.Mj=s;const d=`${i[0]}-${i[1]}`,f=Array.prototype.reduce.call(atob(i[2]),((t,e)=>t+`0${e.charCodeAt(0).toString(16)}`.slice(-2)),"");return nx(d,f)?e:{Sj:Kp(0,0,1,7,1,12,5)}},sx=t=>{const e=t.slice(0,4);let i=t.slice(5);switch(e){case"0001":{i=i.replace(/-/g,"");const t=Uint8Array.from(Jp(i,2)),e=t.slice(36,40),s=new Uint8Array(4),r=(t=>{let e;const i=[];for(let t=0;t<256;t+=1){e=t;for(let t=0;t<8;t+=1)e=1&e?3988292384^e>>>1:e>>>1;i[t]=e}let s=-1;for(let e=0;e<t.length;e+=1)s=s>>>8^i[255&(s^t[e])];return~s>>>0})(t.slice(0,36));new DataView(s.buffer).setUint32(0,r,!0);const n=t.slice(28,34);let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);const a=new Date(o);if(ex(a)<Kp(-3,0))return{Sj:Kp(0,0,1,2,1,3,1,4,5),bj:Kp(-2,2)};if(e.every(((t,e)=>s[e]===t)))return{};break}case"0002":return ix(t);default:return{Sj:Kp(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{Sj:Kp(0,0,1,2,1,7,1,12,5)}},rx=t=>{if(!t)return{Sj:Kp(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const e=(t[Kp(-1,9)]||t[Kp(-1,37)]).map((t=>(t||"").trim()));if(e.indexOf(Wp[Kp(-1,6)][Kp(-1,7)])>-1)return{_j:!0};const i=e.filter((t=>t.indexOf("*")>-1));if(ux(Wp[Kp(-1,6)][Kp(-1,7)],i))return{_j:!0};const s=t[Kp(-1,8)]||t[Kp(-1,38)];if(""!==s&&null!=s){if(ux(Wp[Kp(-1,6)][Kp(-1,7)],[s]))return{_j:!1};if(s===Wp[Kp(-1,6)][Kp(-1,7)])return{_j:!1}}return{Sj:Kp(0,14,1,20,5),bj:"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvd2ViLWRlcGxveW1lbnQv"}},nx=(t,e)=>{const i=new Rp("secp256k1").keyFromPublic(Kp(-4,0),"hex"),s=Lp(t).toString();return i.verify(s,e)},ox=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let e,i="";try{const e=t.split("-"),s=e[1],r=e[2],n=e[3];if(!nx(r,n))return{Sj:Kp(0,21,1,2,1,7,1,12,5)};const o=Vp.parse(r);i=Np.decrypt({ciphertext:Vp.parse(s)},o,{mode:Op,padding:Yp,iv:Vp.parse("00000000000000000000000000000001")}).toString(zp)}catch(t){return{Sj:Kp(0,21,1,2,1,7,1,12,5)}}try{e=JSON.parse(i)}catch(t){return{Sj:Kp(0,21,1,2,1,7,1,12,5)}}if(void 0===e[Kp(-1,5)]||null===e[Kp(-1,4)]||!e[Kp(-1,9)])return{Sj:Kp(0,21,1,2,1,7,1,12,5)};const s=parseInt(Kp(-3,0),10)||Number(parseInt(Kp(-3,0),10));return e[Kp(-1,5)]<s?{Sj:Kp(0,21,1,2,1,3,1,4,5)}:rx(e)})(t);case"0002":return(t=>{const e=ix(t),i=e.xj,s=e.Mj;if(e.Sj||void 0===i||void 0===s)return e;let r,n="";try{const t=i.slice(e.Mj,s+16),r=new DataView(t.buffer),o=new Int32Array(4);for(let t=0;t<o.length;t+=1)o[t]=r.getInt32(4*t,!1);const a=Up.create(Array.from(o)),h=s+16,l=i.slice(h,i.length),u=new DataView(l.buffer),c=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<c.length;t+=1)c[t]=u.getInt32(4*t,!1);const d=Up.create(Array.from(c)),f=Np.decrypt({ciphertext:d},a,{mode:Op,padding:Yp,iv:Vp.parse("00000000000000000000000000000001")});n=Wp.atob(f.toString(zp))}catch(t){return{Sj:Kp(0,21,1,2,1,7,1,12,5)}}try{r=JSON.parse(n)}catch(t){return{Sj:Kp(0,21,1,2,1,7,1,12,5)}}return r[Kp(-1,37)]?rx(r):{Sj:Kp(0,21,1,2,1,7,1,12,5)}})(t);default:return{Sj:Kp(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},ax=(t,e)=>{switch(t.slice(0,4)){case"0001":return((t,e)=>{if(!e)return{Sj:Kp(0,39,1,40,1,41,5),bj:Gp};const i=t.split("-"),s=i[1].slice(1),r=i[2],n=i[3];if(!nx(`${s}-${r}`,n))return{Sj:Kp(0,21,1,2,1,7,1,12,5)};const o=Uint8Array.from(Jp(r,2));let a=0;for(let t=o.length-1;t>0;t-=1)a+=o[t]*2**(8*t);if(a<(parseInt(Kp(-3,0),10)||Number(parseInt(Kp(-3,0),10))))return{Sj:Kp(0,21,1,2,1,3,1,4,5)};const h=Int32Array.from(Jp(s,8)),l=Pp(e[Kp(-1,31)]).toString(Vp),u=Int32Array.from(Jp(l,8)),c=Pp(e[Kp(-1,32)]).toString(Vp),d=Int32Array.from(Jp(c,8)),f=new Int32Array(u.length);for(let t=0;t<f.length;t+=1)f[t]=u[t]^d[t];return h.every(((t,e)=>f[e]===t))?{}:{Sj:Kp(0,21,1,2,1,7,1,12,5)}})(t,e);case"0002":return((t,e)=>{if(!e)return{Sj:Kp(0,39,1,40,1,41,5),bj:Gp};const i=ix(t),s=i.xj,r=i.Mj;if(i.Sj||void 0===s||void 0===r)return i;const n=s.slice(r,s.length),o=new DataView(n.buffer),a=new Int32Array(8);for(let t=0;t<a.length;t+=1)a[t]=o.getInt32(4*t,!1);const h=Pp(e[Kp(-1,31)]).toString(Vp),l=Int32Array.from(Jp(h,8)),u=Pp(e[Kp(-1,32)]).toString(Vp),c=Int32Array.from(Jp(u,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^c[t];return a.every(((t,e)=>d[e]===t))?{}:{Sj:Kp(0,21,1,2,1,7,1,12,5)}})(t,e);default:return{Sj:Kp(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},hx=(t,e,i=!0,s)=>{qp=!1,e.co();const r=e.Jr,n=!!r&&(r===Tt.document.body||Tt.document.body.contains(r)),o=r&&n?r:document.body;if(void 0===Array.from(o.children).find((t=>"lcjs-error"===t.id))){const r=Tt.document.createElement("div");r.id="lcjs-error",o.append(r),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="black",r.style.boxSizing="border-box",r.style.padding="20px",r.style.font="Arial",r.style.fontSize="20px";let n,a=(t||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(a=(i?Kp(0,0,1,2,1,23,1,24,25,1):"")+a.charAt(0).toUpperCase()+a.substr(1),s){const t=Tt.document.createElement("a");t.href=s,n=t}else n=Tt.document.createElement("p1");r.append(n),n.innerHTML=a,n.style.color="red",e.H$()&&Wp.console.error(a)}},lx=(t,e,i)=>{e?(t[Kp(-1,17)](Kp(-1,19),i),t[Kp(-1,17)](Kp(-1,20),i),t[Kp(-1,17)](Kp(-1,21),i),t[Kp(-1,17)](Kp(-1,22),i)):(t[Kp(-1,18)](Kp(-1,19),i),t[Kp(-1,18)](Kp(-1,20),i),t[Kp(-1,18)](Kp(-1,21),i),t[Kp(-1,18)](Kp(-1,22),i))},ux=(t,e)=>{const i=t.split(".").reverse();return e.some((t=>{const e=t.split(".").reverse();let s=!1;const r=e.findIndex((t=>"*"===t)),n=i.every(((t,i)=>{if(!s){if(!(i<e.length))return!1;if(s="*"===e[i]&&i+1>2,!s&&t!==e[i])return!1}return!0}));return!(r>i.length-1||!n)}))},cx=new Map;e.AbstractCursor=xh,e.Animation=j,e.AnimationEasings=X,e.Animator=$,e.AreaRangeSeries=Bu,e.AreaSeries=Eu,e.AreaSeriesBipolar=Ru,e.AreaSeriesMonopolar=Iu,e.AreaSeriesNegative=_u,e.AreaSeriesPositive=Fu,e.AreaSeriesTypes=Du,e.AutoFitStrategies=mh,e.AutoFitStrategy=dh,e.Axis=ma,e.Axis3D=Qh,e.AxisScrollStrategies=Ws,e.AxisTickStrategies=Ks,e.Band=Gs,e.BarChart=uf,e.BarChartBar=af,e.BarChartCategoryAxis=nf,e.BarChartSorting=cf,e.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},e.BarChartValueAxis=of,e.BasicSeries=cu,e.BorderedPicture=Un,e.BoxFigure=nu,e.BoxSeries=fu,e.BoxSeries3D=rl,e.Button=Xo,e.Chart=oh,e.Chart3D=wl,e.ChartComponent=Zi,e.ChartWithSeries=dl,e.ChartXY=wc,e.Color=b,e.ColorCSS=t=>{try{if(t.startsWith("rgba")){const e=t.substr(5).slice(0,-1),i=JSON.parse(`[${e}]`);return T(i[0],i[1],i[2],255*i[3])}if(t.startsWith("rgb")){const e=t.substr(4).slice(0,-1),i=JSON.parse(`[${e}]`);return T(i[0],i[1],i[2])}if(t.startsWith("hsl")){const e=t.substr(4).slice(0,-1).split(",").map(parseFloat),i=((t,e,i)=>{e/=100,i/=100;const s=(1-Math.abs(2*i-1))*e,r=t/60,n=s*(1-Math.abs(r%2-1));let o=[];isNaN(t)?o=[0,0,0]:r<=1?o=[s,n,0]:r<=2?o=[n,s,0]:r<=3?o=[0,s,n]:r<=4?o=[0,n,s]:r<=5?o=[n,0,s]:r<=6&&(o=[s,0,n]);const a=i-.5*s;return[Math.round(255*(o[0]+a)),Math.round(255*(o[1]+a)),Math.round(255*(o[2]+a))]})(e[0],e[1],e[2]);return T(i[0],i[1],i[2])}return t.startsWith("#")||t.startsWith("0x")?w(t):w((t=>{const e=k[t.toLowerCase()];if(e)return e;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),w("#fff")},e.ColorHEX=w,e.ColorHSV=C,e.ColorPalettes=Wn,e.ColorRGBA=T,e.ColorShadingStyles=to,e.ColorUint32=t=>T(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),e.ConstantLine=Hs,e.Cursor2D=Sh,e.Cursor3D=bl,e.CursorBuilder2D=vh,e.CursorBuilder3D=Ml,e.CursorBuilderXY=hc,e.CursorBuilders=Tf,e.CursorXY=ac,e.CustomTick=Rn,e.Dashboard=bf,e.DashedLine=ao,e.DataGrid=qd,e.DataPatternsNew=Yr,e.DataSetXY=mo,e.DateTimeTickStrategy=Ga,e.EllipseFigure=gu,e.EllipseSeries=mu,e.EmptyFill=L,e.EmptyTickStrategy=ir,e.EmptyUIElement=zn,e.Figure=ru,e.FigureSeries=lu,e.FontSettings=gr,e.FormattingFunctions=Fi,e.FunnelChart=Xc,e.FunnelChartTypes=Jc,e.FunnelChartWithLabelsInsideSlices=qc,e.FunnelChartWithLabelsOnSides=Qc,e.FunnelSlice=Yc,e.GaugeChart=mf,e.GenericAxis=ar,e.GlowEffect=go,e.HeatmapGridSeries=bu,e.HeatmapGridSeriesIntensityValues=Mu,e.HeatmapScrollingGridSeries=Tu,e.HeatmapScrollingGridSeriesIntensityValues=wu,e.Highlighter=Qi,e.Icon=uo,e.ImageFill=so,e.IndividualPointFill=G,e.LUT=B,e.LegendBoxBuilders=da,e.LineAndPointSeries3D=nl,e.LineSeries=cc,e.LineSeries3D=ol,e.LinearGradientFill=it,e.LinearGradientFillPalette=(t,e,i,s)=>{const r=t(e+1,s);return t=>new it({stops:[{offset:0,color:r(t).getDarker()},{offset:.5,color:r(t)},{offset:1,color:r(t).getDarker()}],angle:i||90})},e.MapChart=Ll,e.MapRegions=Bf,e.MapRegionsAfrica=wf,e.MapRegionsAsia=Cf,e.MapRegionsAustralia=kf,e.MapRegionsCanada=Ef,e.MapRegionsEurope=Rf,e.MapRegionsNorthAmerica=Ff,e.MapRegionsSouthAmerica=Df,e.MapRegionsUSA=_f,e.MapRegionsWorld=If,e.MapTypes=Rl,e.MeshModel3D=vl,e.NumericTickStrategy=Qa,e.OHLCSeries=ec,e.OHLCSeriesBars=sc,e.OHLCSeriesCandlesticks=ic,e.OHLCSeriesTypes=rc,e.OnScreenMenu=fc,e.OnScreenMenuAnimationsButton=Es,e.OnScreenMenuButton=Ss,e.OnScreenMenuControlBase=os,e.OnScreenMenuCustomButton=Is,e.OnScreenMenuOsmToggleButton=_s,e.OnScreenMenuToggleButton=vs,e.OnScreenMenuZoomInButton=bs,e.OnScreenMenuZoomInXButton=Ms,e.OnScreenMenuZoomInYButton=Ts,e.OnScreenMenuZoomOutButton=ws,e.OnScreenMenuZoomOutXButton=Cs,e.OnScreenMenuZoomOutYButton=ks,e.OnScreenMenuZoomToFitButton=Rs,e.PalettedFill=class extends W{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}},e.Panel=ih,e.PhongShadingStyle=qn,e.Picture=On,e.PieChart=Nh,e.PieChartTypes=Wh,e.PieChartWithLabelsInsideSlices=Hh,e.PieChartWithLabelsOnSides=Gh,e.PieSlice=Bh,e.PixelatedPoints3D=br,e.PointCloudSeries3D=ul,e.PointLineAreaSeries=gc,e.PointLineSeries=Nu,e.PointLineSeries3D=al,e.PointSeries=dc,e.PointSeries3D=ll,e.PointSeriesTypes3D=cl,e.PointStyle3D=Tr,e.PolarAreaSeries=Lc,e.PolarAreaSeriesInterior=Vc,e.PolarAxis=Nl,e.PolarAxisAmplitude=Ul,e.PolarAxisTick=Ol,e.PolarChart=Nc,e.PolarHeatmapSeries=eu,e.PolarLineSeries=iu,e.PolarPointLineSeries=su,e.PolarPointSeries=Dc,e.PolarPolygon=Bc,e.PolarPolygonSeries=Pc,e.PolarSector=jl,e.PolarSeries=Zl,e.PolygonFigure=yu,e.PolygonSeries=pu,e.PyramidChart=od,e.PyramidChartTypes=dd,e.PyramidChartWithLabelsInsideSlices=cd,e.PyramidChartWithLabelsOnSides=ud,e.PyramidSlice=id,e.RadialGradientFill=J,e.RadialGradientFillPalette=(t,e,i)=>{const s=t(e+1,i);return t=>new J({stops:[{offset:0,color:s(t)},{offset:1,color:s(t).getDarker()}]})},e.RangeSeries=ku,e.RectangleFigure=xu,e.RectangleSeries=Au,e.SegmentFigure=Su,e.SegmentSeries=vu,e.Series2D=$l,e.Series3D=sl,e.SeriesXY=ou,e.SimpleShadingStyle=Zn,e.Slice=Fh,e.SliceLabelFormatters=_h,e.SliceSorters=Ih,e.SolidFill=U,e.SolidFillPalette=(t,e,i)=>{const s=t(e,i);return t=>new U({color:s(t)})},e.SolidLine=rs,e.SpiderAxis=pd,e.SpiderChart=Cd,e.SpiderSeries=xd,e.SplineSeries=Yu,e.StepSeries=tc,e.StipplePatterns=no,e.SurfaceGridSeries3D=pl,e.SurfaceScrollingGridSeries3D=xl,e.Themes=eg,e.Tick=ga,e.TickStyle=va,e.TimeFormattingFunctions=ka,e.TimeTickStrategy=Ra,e.TreeMapChart=Uf,e.TriangulatedPoints3D=Ar,e.UIBackgrounds=yh,e.UICircle=wo,e.UIColumnGrid=class extends Fo{constructor(){super(...arguments),this.kd=[]}addColumn(){return this.addElement(Vo,void 0)}getColumn(t,e=!1){return e&&this.kd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.kd[t]}},e.UIDiamond=Co,e.UIElementBuilders=ca,e.UIElementColumn=Do,e.UIElementLine=_o,e.UIElementRow=Fo,e.UIElementWithBackground=kn,e.UIEmptyBackground=Nn,e.UILabel=bo,e.UILayoutBuilders=kl,e.UILayoutGap=Io,e.UILegendBoxPanel=El,e.UIObject=bn,e.UIOrigins=Ds,e.UIPanel=rh,e.UIPoint=Eo,e.UIPointer=ko,e.UIPolygon=Yn,e.UIRectangle=To,e.UIRowGrid=Po,e.VisibleFill=O,e.ZoomBandChart=_c,e._translatePoint=ct,e.defaultOsmBackgroundColor=Us,e.disableThemeEffects=t=>({...t,effect:void 0}),e.emptyFill=V,e.emptyLine=nt,e.emptyPoints3D=pr,e.emptyTick=Ma,e.formatLongitudeLatitude=Vl,e.formatNumberAsUnicodeSuperscript=Di,e.isColor=M,e.isCoordinate3D=Sl,e.isCoordinateBarChart=hf,e.isCoordinateClient=Ui,e.isCoordinatePolar=Xl,e.isCoordinateXY=Gi,e.isDashedLine=ho,e.isDateTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"date-time-ticks"!==t.type),e.isEmptyFill=z,e.isEmptyTick=Ta,e.isEmptyTickStrategy=sr,e.isFontSettings=mr,e.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),e.isHitBox=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,e.isHitBox3D=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,e.isHitEllipse=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,e.isHitHeatmap=ft,e.isHitMeshModel=yt,e.isHitOHLC=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,e.isHitPolarHeatmap=mt,e.isHitPolygon=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,e.isHitRectangle=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,e.isHitSampleXY=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,e.isHitSegment=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,e.isHitSurface=gt,e.isIcon=co,e.isIndividualPointFill=H,e.isLUT=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),e.isLinearGradientFill=st,e.isNumericTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"numeric-ticks"!==t.type),e.isPalettedFill=K,e.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),e.isPixelatedPoints3D=Mr,e.isRadialGradientFill=tt,e.isSeriesSupportedByZoomBandChart=t=>t instanceof cu||t instanceof Eu||t instanceof Bu||t instanceof Mu||t instanceof ec||t instanceof tc||t instanceof gc,e.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),e.isSolidFill=Y,e.isSolidLine=ns,e.isTickStyle=ba,e.isTimeTickStrategy=t=>!(!t||"object"!=typeof t||!("type"in t)||"time-ticks"!==t.type),e.isTriangulatedPoints3D=Sr,e.lightningChart=(t,e)=>{const i="object"==typeof t?t.license:t,s="object"==typeof t?t.licenseInformation:e,n="object"==typeof t?t:void 0,o=new Qp;o.e=i;let a=cx.get(i||"E");return a||(a=((t,e)=>{let i,s,n=!1,o=!1,a=!1,h=!1,l="",u=!1,c=!1;try{if(Xp){const s=(()=>{if(!Xp)return;const t=Xp.split("-");if(t.length>0)switch(t[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})();if("0001"===s){Zp=new Uint8Array([2]);const e=(()=>{if(!Xp)return;const t=Xp.split("-");return 4===t.length?t[1].startsWith("m")?2:1:0})();if(1===e){const t=ox(Xp);a=!t._j,i=t,n=!0}else 2===e?(i=ax(Xp,t),o=!0):(qp=!0,i=sx(Xp),h=!0)}else if("0002"===s){const e=(()=>{if(!Xp)return;const t=Xp.split("-");return t.length>=2?Uint8Array.from(atob(t[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===e)qp=!0,i=sx(Xp),h=!0;else if(189===e){const t=ox(Xp);a=!t._j,i=t,n=!0}else 159===e?(i=ax(Xp,t),o=!0):i={Sj:Kp(0,0,1,7,1,12,5)}}else if("T001"===s){const s=((t,e)=>{const i=Xp.split("-");if(3!==i.length)return{Sj:Kp(0,0,1,7,1,12,5)};const s=`${i[1]}`,r=Array.prototype.reduce.call(atob(i[2]),((t,e)=>t+`0${e.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!nx(s,r))return{Sj:Kp(0,0,1,7,1,12,5)};let n=0;const o=Uint8Array.from(atob(i[1]),(t=>t.charCodeAt(n))),a=o.subarray(n,n+=20),h=new DataView(o.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(h));for(let t=0;t<h;t+=1)l[t]=o[t+n]^a[t%a.byteLength];n=0;const u=new DataView(l.buffer),c=tx(l.subarray(n,n+=4)),d=Kp(-3,0);if(!c)return{Sj:Kp(0,0,1,7,1,12,5)};if(c<d)return{Sj:Kp(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,g=new Date;f.setDate(f.getDate()+1),g.setDate(g.getDate()-1);const m=ex(g),y=ex(f);if(c<m||c>y)return{Sj:Kp(0,0,1,2,1,3,1,4,5)};const p=u.getUint16(n,!0),x=l.subarray(n+=2,n+p);if(Zp=new Uint8Array(x),e&&"dHJhZGVy"in e&&"dGVjaG5pY2FsIGFuYWx5c2lz"===e.dHJhZGVy)return{wj:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(e&&"logoGraphic"in e&&e.logoGraphic){const t=e.logoGraphic.split("-");return 3===t.length&&nx(t[0],t[2])?{wj:t[0]}:{Sj:Kp(0,0,1,7,1,12,5)}}return{Sj:Kp(0,0,1,7,1,12,5)}})(0,t);i=s;const r=s.wj;r&&e?("string"==typeof r&&(e.l=r),n=!0):i={Sj:Kp(0,0,1,7,1,12,5)}}else i={Sj:Kp(0,0,1,7,1,12,5)}}else{const t=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||t.test(window.location.hostname)?i={Sj:Kp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),bj:Kp(-2,2)}:window.location.host===Wp.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(c=!0,u=!1,Zp=new Uint8Array([38]),i={}):(c=!0,u=!0,Zp=new Uint8Array([38]),i={})}}catch(t){i={Sj:Kp(0,0,1,7,1,12,5)}}try{h&&(s=Wp[Kp(-1,34)][Kp(-1,35)](Kp(-1,39))||void 0)}catch(t){Wp.console.error(t)}let d=!1;if(s){const t=s.split("-");if(2===t.length&&nx(t[0],t[1])){const[e,i]=t[0].split(":").map((t=>Number(t)));Date.now()-i<.95*e*1e3&&(d=!0)}}const f=!(c||u||i.Sj||n||o||d),g=(()=>{const t=new(Wp[Kp(-1,0)]);return t.open(Kp(0,26),Kp(-2,0)),t.setRequestHeader(Kp(-1,24),Kp(-1,25)),t.withCredentials=!0,t})(),m=new r.Eventer;if(f){let t;try{t=parseInt(Xp?Xp.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(e){t=Math.floor(1e6*Math.random())}const e=Math.floor(1e6*Math.random());l=(t^e).toString();const i={};let s="",r="",n="";Xp=Xp||"";const o=Kp(-4,0);for(let t=0;t<Xp.length;t+=1){const e=Xp.charCodeAt(t)^o.charCodeAt(t);s+=String.fromCharCode(e)}const a=Kp(-3,0);for(let t=0;t<a.length;t+=1)r+=String.fromCharCode(a.charCodeAt(t)^o.charCodeAt(t));for(let t=0;t<l.length;t+=1)n+=String.fromCharCode(l.charCodeAt(t)^o.charCodeAt(t));i[Kp(-1,3)]=Wp.btoa(s),i[Kp(-1,4)]=Wp.btoa(r),i.h=Wp.btoa(n),i.v=3,i.s=Wp[Kp(-1,34)][Kp(-1,35)](Kp(-1,33))||void 0,g.send(JSON.stringify(i))}return(t,r)=>{const n=[],o={Zn:t=>{n.indexOf(t)>=0||(n.push(t),h())},Qn:t=>m.on("logoChange",t),Jn:t=>m.off(t)},h=()=>{n.forEach((t=>{const e=d(t);if(!e)return;const{Cj:i,kj:s}=e,r=s?Kp(-2,1):void 0,n=`${Kp(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${i}${r?Kp(0,1,63,1,64,1,59,1,65,1,41):""}`;hx(n,y,!1,r)}))},c=t=>t.toLowerCase().split("_").join(" "),d=t=>{var e;const i=null===(e=Object.entries(fa).find((e=>e[1]===t)))||void 0===e?void 0:e[0];if(i){switch(t){case fa.uf:return jp.af||jp.uf?void 0:{Cj:c(i),kj:!0};case fa.Af:return jp.af||jp.Af?void 0:{Cj:c(i),kj:!0};case fa.gf:return jp.af||jp.lf||jp.gf?void 0:{Cj:c(i)};case fa.lf:return jp.af||jp.lf?void 0:{Cj:c(i)};case fa.Sf:return jp.af||jp.lf||jp.Sf?void 0:{Cj:c(i)};case fa.Mf:return jp.af||jp.lf||jp.Mf?void 0:{Cj:c(i)};case fa.kf:return jp.af||jp.lf||jp.kf?void 0:{Cj:c(i)};case fa.Ff:return jp.af||jp.lf||jp.Ff?void 0:{Cj:c(i)};case fa.If:return jp.af||jp.lf||jp.If?void 0:{Cj:c(i)};case fa.Tf:return jp.af||jp.lf||jp.Tf?void 0:{Cj:c(i)};case fa.yf:return jp.af||jp.lf||jp.yf?void 0:{Cj:c(i)};case fa.bf:return jp.af||jp.lf||jp.bf?void 0:{Cj:c(i)};case fa.vf:return jp.af||jp.lf||jp.vf?void 0:{Cj:c(i)};case fa._f:return jp.af||jp.lf||jp._f?void 0:{Cj:c(i)};case fa.Cf:return jp.af||jp.lf||jp.Cf?void 0:{Cj:c(i)};case fa.wf:return jp.af||jp.lf||jp.wf?void 0:{Cj:c(i)};case fa.pf:return jp.af||jp.lf||jp.pf?void 0:{Cj:c(i)};case fa.mf:return jp.af||jp.lf||jp.mf?void 0:{Cj:c(i)};case fa.xf:return jp.af||jp.lf||jp.xf?void 0:{Cj:c(i)};case fa.Pf:return jp.af||jp.lf||jp.Pf?void 0:{Cj:c(i)};case fa.af:case fa.cf:case fa.ff:case fa.df:return}return Te(0,"")}},y=new up(r,t,o);(null==i?void 0:i.Sj)&&hx(i.Sj,y,void 0,i.bj);const p=t=>{if("error"===(null==t?void 0:t.type)&&s){const t=s.split("-");if(2===t.length&&nx(t[0],t[1])){const[,e]=t[0].split(":").map((t=>Number(t)));if(e+9e5>Date.now())return qp=!1,void lx(g,!1,x)}}if(g.readyState===Wp[Kp(-1,0)].DONE)if(200===g.status){const t=JSON.parse(g[Kp(-1,23)]);if(!nx(l+Kp(-3,0),t.h)){const t=Kp(0,0,1,27,1,28,1,29,1,30,1,31,5);hx(t,y)}Wp[Kp(-1,34)][Kp(-1,36)](Kp(-1,39),t.t),Wp[Kp(-1,34)][Kp(-1,36)](Kp(-1,33),t.s),qp=!1}else{let e=Kp(0,0,1,2,1,7,1,12,5);try{e=t&&"loadend"!==t.type?Kp(0,0,1,23,1,32,1,24,5):JSON.parse(g[Kp(-1,23)]).message,lx(g,!1,x)}catch(t){console.error(t)}hx(e,y,void 0,"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvZGV2ZWxvcGVyLWxpY2Vuc2Vz")}},x=t=>{p(t)};if(lx(g,!0,x),f?setTimeout((()=>{if(qp){let t=!0;if(s){const e=s.split("-");if(2===e.length&&nx(e[0],e[1])){const[,i]=e[0].split(":").map((t=>Number(t)));i+9e5>Date.now()&&(t=!1)}}t&&hx(Kp(0,25,1,23,1,32,1,24,5),y)}}),1e4):lx(g,!1,x),u){const t=(()=>{const t=new(Wp[Kp(-1,0)]);return t.open(Kp(0,26),Kp(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),i=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),s=s=>{if("error"===(null==s?void 0:s.type)){const t=Kp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);hx(t,y,!1,Kp(-2,2)),lx(g,!1,r)}if(t.readyState===Wp.XMLHttpRequest.DONE){const s=t.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==t.status||s&&"1"!==s){const t=Kp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);hx(t,y,!1,Kp(-2,2)),lx(g,!1,r)}else{const s=JSON.parse(t.responseText);if(!nx(i,s.s)){const t=Kp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);hx(t,y,!1,Kp(-2,2)),lx(g,!1,r)}void 0!==e&&(e.l=s.l),m.emit("logoChange",s.l)}}else{const t=Kp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);hx(t,y,!1,Kp(-2,2)),lx(g,!1,r)}},r=t=>{s(t)};lx(t,!0,r),t.send(i),setTimeout((()=>{if(t.readyState<2){const t=Kp(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);hx(t,y,!1,Kp(-2,2)),lx(g,!1,r)}}),1e4)}return a?(t=>{let e;qp=!1;const i=()=>{e&&(t.Ln(e.Bn()),e=void 0);const i=t.oi();e=t.UF("deployment test"),e.Gr(t.At).yr(Kp(0,34,1,33)).Ee({x:i.x/2,y:i.y/2}).Pa(50).Jh(13).Be(new U({color:T(128,128,128,100)})).Fa("Arial").Ba(500).setMouseInteractions(!1),t.In().Pn()};t.Lo((()=>{i()})),setTimeout(i,0),setInterval((()=>{e&&e.Bn()<t.bo()-1?i():e||i()}),1e3)})(y):g.readyState===Wp[Kp(-1,0)].DONE&&p(),y}})(s,o)),((t,e,i,s)=>{var r,n,o,a,h,l,u,c;let d;if(i&&i.license){const t=i.license.split("-");d=t[t.length-1]}const f=null===(r=null==i?void 0:i.webgl)||void 0===r?void 0:r.version,g={oz:null===(n=null==i?void 0:i.sharedContextOptions)||void 0===n?void 0:n.canvas,io:null==i?void 0:i.warnings,mz:"webgl1"===f?1:"webgl2"===f?2:void 0,Az:!1!==(null===(o=null==i?void 0:i.sharedContextOptions)||void 0===o?void 0:o.antialias),fz:(null===(a=null==i?void 0:i.sharedContextOptions)||void 0===a?void 0:a.devicePixelRatio)||void 0,kz:(null===(h=null==i?void 0:i.sharedContextOptions)||void 0===h?void 0:h.noCanvasStyles)||void 0,Pz:(null===(l=null==i?void 0:i.sharedContextOptions)||void 0===l?void 0:l.noCanvasTransform)||void 0,pz:!1!==(null===(u=null==i?void 0:i.sharedContextOptions)||void 0===u?void 0:u.useStackingOrder),yz:!1!==(null===(c=null==i?void 0:i.sharedContextOptions)||void 0===c?void 0:c.useIndividualCanvas),Tz:d||void 0},m=new sm(g),y=e=>t(e,m);return{Dashboard:rm(y,e,i,s),ChartXY:am(y,e,i,s),Spider:hm(y,e,i,s),Polar:lm(y,e,i,s),Pie:um(y,e,i,s),UIPanel:om(y,e,i,s),Gauge:cm(y,e,i,s),Funnel:dm(y,e,i,s),Pyramid:fm(y,e,i,s),Chart3D:mm(y,e,i,s),Map:gm(y,e,i,s),DataGrid:ym(y,e,i,s),BarChart:pm(y,e,i,s),ZoomBandChart:xm(y,e,i,s),TreeMapChart:Am(y,e,i,s),dispose:m.Y.bind(m),layout:m.Ez.bind(m)}})(a,o.e,n,o.l)},e.onScreenMenuControlBaseHeight=Ls,e.onScreenMenuControlBaseWidth=Vs,e.onScreenMenuControlOpacity=zs,e.onScreenMenuDefaultButtonShape=Os,e.onScreenMenuSpriteURL=Ns,e.regularColorSteps=(t,e,i,s)=>{if(!i||0===i.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const r=null==s?void 0:s.formatLabels,n=null==s?void 0:s.alpha;return i.map(((s,o)=>{const a=t+o/(i.length-1)*(e-t);return{color:void 0!==n?s.setA(n):s,value:a,label:r?r(a):void 0}}))},e.saveToFile=qa,e.synchronizeAxisIntervals=dt,e.transparentFill=Bs,e.transparentLine=Ps,e.uint32ColorFromObject=t=>I(255*t.r,255*t.g,255*t.b,255*t.a),e.uint32ColorFromRGBA=I,e.useCursorFormatterSeriesOverride=lh,e.vec3Utils=Le,e.xDimensionStrategy=pa,e.yDimensionStrategy=xa}}]);